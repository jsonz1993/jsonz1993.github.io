<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ç”¨github actionséƒ¨ç½²ä½ çš„åº”ç”¨(hexo)</title>
    <url>/2019/12/github-actions/</url>
    <content><![CDATA[<p>ä¹‹å‰github pages ä¸€ç›´éƒ½æ˜¯ç”¨ travis-ci éƒ¨ç½²çš„ï¼Œé™¤äº†æ…¢ä¸€ç‚¹æ²¡ä»€ä¹ˆæ¯›ç—…ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰è½¬å‘Github Actionsçš„å¿µå¤´ã€‚<br>ä½†æ˜¯æœ€è¿‘åˆé‡æ–°ä¹°äº†ä¸ªæœåŠ¡å™¨ï¼Œæ­£å¥½è¶è¿™ä¸ªæ—¶é—´å­¦ä¸€ä¸‹ Actionsï¼ŒActionså¯¹æ¯”travisæœ‰ä¸ªå¾ˆå¤§çš„äº®ç‚¹å°±æ˜¯ä»–çš„ç”Ÿæ€å¾ˆå¥½ï¼Œä½ è¦ç”¨ä»€ä¹ˆæ’ä»¶æœä¸€ä¸‹ç›´æ¥å°±å¯ä»¥ç”¨äº†ï¼Œå‡å°‘å¾ˆå¤šå·¥ä½œã€‚</p>
<h1 id="access-token"><a href="#access-token" class="headerlink" title="access token"></a>access token</h1><p>å› ä¸ºæˆ‘ä»¬æ„å»ºå®Œéœ€è¦Pushåˆ°ä»“åº“ï¼Œæ‰€ä»¥å¾—æœ‰ä¸ª <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">Github access token</a>ï¼Œå¯ä»¥ç›´æ¥ç‚¹è¿›é“¾æ¥ç”³è¯·ï¼Œ<strong>å‹¾é€‰repoçš„é€‰é¡¹</strong> ï¼Œç„¶åç‚¹å‡»ç”ŸæˆTokenï¼Œè¿™æ—¶å€™å…ˆåˆ«å…³é—­é¡µé¢ï¼Œåé¢è¦ç”¨åˆ°è¿™ä¸ªtokenã€‚</p>
<h1 id="secrets"><a href="#secrets" class="headerlink" title="secrets"></a>secrets</h1><p>è¿›å…¥è¦éƒ¨ç½²çš„é¡¹ç›®çš„settingï¼Œå·¦è¾¹æœ‰ä¸ªå¯¼èˆªè¿› secretsï¼Œåœ¨è¿™é‡Œç”ŸæˆActionséœ€è¦ç”¨åˆ°çš„æ‰€æœ‰ç§˜é’¥ï¼Œåªè¦ä½ è§‰å¾—æœ‰éšç§çš„æˆ–è€…éœ€è¦ä¿å¯†çš„å…¨éƒ½åœ¨è¿™é‡Œå®šä¹‰å­—æ®µï¼Œç„¶åé…ç½®æ–‡ä»¶ç›´æ¥ä½¿ç”¨å°±å¥½ã€‚</p>
<p>æˆ‘çš„Secretsæ€»å…±æœ‰å››ä¸ªï¼Œå¦‚æœåªæ˜¯éƒ¨ç½²åˆ° github pagesçš„è¯ï¼Œä½ åªéœ€è¦tokenä¸€ä¸ªå°±å¤Ÿäº†</p>
<ul>
<li>token: å­˜æ”¾ä¸Šä¸€æ­¥ç”Ÿæˆçš„ access token</li>
<li>SSH_PRIVATE: å­˜æ”¾SSHåˆ°æœåŠ¡å™¨çš„ç§é’¥</li>
<li>USERNAME: è¦ç™»å½•æœåŠ¡å™¨çš„ç”¨æˆ·</li>
<li>HOST: è¦ç™»å½•çš„æœåŠ¡å™¨host</li>
</ul>
<h1 id="Action-workflow"><a href="#Action-workflow" class="headerlink" title="Action workflow"></a>Action workflow</h1><p>ç‚¹å‡»é¡¹ç›®é¡¶éƒ¨å¯¼èˆªè¿›å…¥ Actionsï¼Œéšä¾¿ç‚¹ä¸€ä¸ªæ¨¡æ¿è¿›å»ï¼Œæˆ–è€…ç›´æ¥ <code>set up workflow yourself</code>æ–°å»ºä¸€ä¸ªæ–°çš„</p>
<p>æˆ‘çš„workflowåŸºæœ¬å°±æ˜¯æ¬ travis çš„ï¼ŒæŒ‰ç…§github actionsçš„æ ¼å¼æ”¹äº†ä¸‹è€Œå·²ã€‚</p>
<p><strong>å¤§æ¦‚æµç¨‹æ˜¯ï¼š æ‹‰å–ä»£ç ï¼Œåˆå§‹åŒ–ç¯å¢ƒï¼Œç”Ÿæˆé™æ€èµ„æºï¼Œæ¨é€åˆ°ç›®æ ‡ä»“åº“ æˆ– éƒ¨ç½²åˆ°ç›®æ ‡æœåŠ¡å™¨</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Blog</span> <span class="string">deployer</span> <span class="comment"># å½“å‰workflowçš„åå­—</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§¦å‘çš„æ—¶æœº å½“ master åˆ†æ”¯æœ‰ push çš„æ“ä½œæ—¶æ‰§è¡Œ</span></span><br><span class="line"><span class="attr">on:</span> </span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span> <span class="comment"># jobsä¸€èˆ¬éƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œ</span></span><br><span class="line">  <span class="attr">build:</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">publish</span> </span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span> <span class="comment"># è¿è¡Œç¯å¢ƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="comment"># ä½¿ç”¨ actions/checkout è¿™ä¸ªæ’ä»¶ ç”¨äºæ‹‰å–å½“å‰ä»“åº“çš„masteråˆ†æ”¯</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@master</span> </span><br><span class="line"></span><br><span class="line">      <span class="comment"># ä½¿ç”¨ actions/setup-node@v1 æ’ä»¶é…ç½®nodeç¯å¢ƒ</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="number">10.</span><span class="string">x</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">10.</span><span class="string">x</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># å®‰è£… hexo-cli ä¸é¡¹ç›®æ‰€éœ€çš„ node_modules</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hexo</span> <span class="string">env</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line">          <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">        </span><br><span class="line">      <span class="comment"># ç”Ÿæˆé™æ€èµ„æº</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">public</span> <span class="string">files</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># éƒ¨ç½²åˆ° Github Pages è¿™é‡Œæ²¡æœ‰ç”¨åˆ° hexoçš„ Deploy</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">To</span> <span class="string">Github</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GH_REF:</span> <span class="string">github.com/jsonz1993/jsonz1993.github.io</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="comment"># é…ç½®æœ¬åœ°git</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">"Jsonz1993"</span> </span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">"jsonz@qq.com"</span></span><br><span class="line">          <span class="comment"># ç”Ÿæˆ commit message é»˜è®¤æŠ“å–æœ€åä¸€æ¬¡æäº¤ä¿¡æ¯</span></span><br><span class="line">          <span class="string">git</span> <span class="string">log</span> <span class="string">--pretty=format:"CI:</span> <span class="string">%s"</span> <span class="string">--date=short</span> <span class="string">-n</span> <span class="number">1</span>  <span class="string">&gt;</span> <span class="string">commit-message.log</span></span><br><span class="line">          <span class="string">git</span> <span class="string">clone</span> <span class="string">https://$&#123;GH_REF&#125;</span> <span class="string">.deploy_git</span></span><br><span class="line">          <span class="string">cd</span> <span class="string">.deploy_git</span></span><br><span class="line">          <span class="string">git</span> <span class="string">checkout</span> <span class="string">master</span></span><br><span class="line">          <span class="string">cd</span> <span class="string">../</span></span><br><span class="line">          <span class="string">mv</span> <span class="string">.deploy_git/.git/</span> <span class="string">./public/</span></span><br><span class="line">          <span class="string">cd</span> <span class="string">./public/</span></span><br><span class="line">          <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">          <span class="string">git</span> <span class="string">commit</span> <span class="string">-F</span> <span class="string">../commit-message.log</span></span><br><span class="line">          <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">"https://$<span class="template-variable">&#123;&#123; secrets.token &#125;&#125;</span>/@$&#123;GH_REF&#125;"</span> <span class="string">master:master</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">Private</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">appleboy/ssh-action@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.HOST</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SSH_PRIVATE</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">script:</span> <span class="string">|</span></span><br><span class="line">            <span class="string">cd</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SERVER_PATH</span> <span class="string">&#125;&#125;</span> <span class="string">&amp;&amp;</span> <span class="string">git</span> <span class="string">pull</span></span><br></pre></td></tr></table></figure>
<p><a href="https://help.github.com/cn/actions/automating-your-workflow-with-github-actions" target="_blank" rel="noopener">ä½¿ç”¨ GitHub æ“ä½œè‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noopener">é˜®ä¸€å³° Github Actions</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„2019</title>
    <url>/2019/12/2019-end/</url>
    <content><![CDATA[<p>è½¬çœ¼2019å‰©ä¸‹ 5% ä¸åˆ°äº†ï¼Œæ˜¯æ—¶å€™æ°´ä¸€ä¸‹æ€»ç»“</p>
<p>ä¸‹åˆåœ¨åšéƒ¨é—¨çš„ä¸‹åŠå¹´è¿°èŒPPTçš„æ—¶å€™ï¼Œæ‰å‘ç°è¿™ä¸‹åŠå¹´ä»€ä¹ˆäº‹æƒ…éƒ½æ²¡åšï¼Œåˆ’æ°´åˆ’è¿‡å»äº†ï¼Œç»“æœpptæ²¡å•¥å¥½å†™çš„ å¯æ¶ï¼</p>
<h1 id="å…³äºå­¦ä¹ "><a href="#å…³äºå­¦ä¹ " class="headerlink" title="å…³äºå­¦ä¹ "></a>å…³äºå­¦ä¹ </h1><p>ä¸å¾—ä¸è¯´ï¼Œä»Šå¹´ä¸‹åŠå¹´çš„é‡å¿ƒæ›´å¤šæ˜¯å€¾å‘å­¦ä¹ è¿™å—ï¼Œè™½ç„¶æ²¡æœ‰è¾¾åˆ°ç™¾åˆ†ä¹‹ç™¾ï¼Œä¸è¿‡ä¹Ÿç®—æ»¡æ„ï¼Œå•ƒäº†é«˜æ•°å’Œè®¡ç®—æœºåŸç†ã€‚</p>
<p>åŸå®šè¦è¿‡å…«ç§‘ï¼Œæ™®é€šé€»è¾‘ä¸ç”¨è€ƒï¼Œè¿‡äº†å…­ç§‘ ç®—æ˜¯è¿˜è¡Œã€‚</p>
<p>ä½†æ˜¯è‡ªä»åä¸€æœˆæˆç»©å…¬å¸ƒä»¥æ¥ï¼Œæ‡’æ‡’æ•£æ•£çš„ï¼Œä¹‹å‰ä¸ƒç‚¹æ—©èµ·çš„ä¹ æƒ¯ä¹Ÿæ²¡äº†â€¦è€Œä¸”ç°åœ¨æ¬åˆ°ç”Ÿæ€å›­ï¼Œä¸­åˆå’Œæ™šä¸Šå­¦ä¹ çš„åœ°æ–¹ä¹Ÿè¿˜æ²¡æ‰¾åˆ°åˆé€‚çš„ çœŸæ˜¯è®©äººæƒ†æ€…ã€‚<br>ä¸è¿‡ä¹Ÿè¿˜å¥½ï¼Œå¯ä»¥åˆ©ç”¨ä¸­åˆçš„æ—¶é—´æŠŠä¹‹å‰å¾®ä¿¡æ”¶è—çš„å‡ åç¯‡æ–‡ç« æ…¢æ…¢è¿‡ä¸€ä¸‹ã€‚</p>
<p>2020å®šçš„å­¦ä¹ è®¡åˆ’æ¯”ä»Šå¹´è¿˜è¦é‡ï¼Œäº”ä¸ªè€ƒè¯•å’Œä¸‰ä¸ªå®è·µï¼Œå½“ç«‹ä¸ªflagğŸš©ğŸš©ğŸš©ï¼Œæ—©ç‚¹æŠŠè¿™ä¸ªä¸œè¥¿æå®šæ‰èƒ½æŠŠå¿ƒæ€éƒ½æ”¾åœ¨å·¥ä½œä¸Šã€‚<br>è¿˜ç‰¹åœ°å¬äº†å´è‹ä¸‰èƒ–çš„è¯ï¼Œå»ä¹°äº†æœ¬æ–°æ¦‚å¿µ1ï¼Œæ‰“ç®—ä»å¤´å¼€å§‹å­¦è‹±è¯­ï¼ŒæŠŠè‹±è¯­ç»™è€ƒäº†ã€‚å¦‚æœæ˜¯æŒ‰ç…§ä¸‹åŠå¹´é‚£ä¸ªå­¦ä¹ çš„åŠ²å¤´å€’è¿˜å¯ä»¥å°è¯•ï¼Œå¦‚æœæ˜¯è¿™ä¸€ä¸ªæœˆæ¥çš„åˆ’æ°´çŠ¶æ€ï¼ŒçœŸçš„æ˜¯æµªè´¹æ—¶é—´ å¹å£æ°”åŠ æ²¹å§</p>
<h1 id="å…³äºå·¥ä½œ"><a href="#å…³äºå·¥ä½œ" class="headerlink" title="å…³äºå·¥ä½œ"></a>å…³äºå·¥ä½œ</h1><p>å¦‚æœè¯´å­¦ä¹ æ–¹é¢è¯„ä¸ºè‰¯å¥½çš„è¯ï¼Œå·¥ä½œåº”è¯¥ç®—æ˜¯ä¸åŠæ ¼å§ã€‚ å¹´ä¸­å®šçš„è®¡åˆ’ç°åœ¨ä¸€ä¸ªéƒ½æ²¡å®Œæˆï¼Œpptèƒ¡æçæéƒ½ä¸çŸ¥é“æ€ä¹ˆæï¼Œæ˜å¤©ä¸Šå°ä¹Ÿä¸çŸ¥é“èƒ½æ€ä¹ˆæ‰¯ä¸ªå…«åˆ†é’Ÿã€‚</p>
<p>ç®—æ˜¯é­æŒä¸€ä¸‹è‡ªå·±</p>
<ul>
<li>åŸç”ŸçŸ¥è¯†è¿˜æ˜¯åªæ‡‚æ¯›çš®ï¼Œå†™å†™demoï¼Œè‡ªå·±å°çš„é¡¹ç›®éƒ½åšä¸äº†ï¼Œå¤§å¤±è´¥ï¼</li>
<li>åå°çŸ¥è¯†åŸºæœ¬æ²¡æ¶‰åŠï¼Œä¸è¿‡ä¹Ÿä¸åœ¨è®¡åˆ’ä¹‹å†…</li>
<li>å‰ç«¯çŸ¥è¯†ï¼Œæ›´åŠ ç†Ÿç»ƒçš„æµæ°´å·¥è€Œå·²ï¼Œæ²¡å•¥çªç ´</li>
<li>å’Œéœœçˆ·ä¸€èµ·åšå¼€æºï¼Œåšäº†ä¸¤ä¸ªæ˜ŸæœŸå°±ä¸æ­ç†äººå®¶ å“ˆå“ˆå“ˆå“ˆï¼Œå†™pptçš„æ—¶å€™è¿˜å¯ä»¥è¹­ä¸ªåå­— ç¬‘æ­»</li>
</ul>
<p>éš¾æå“¦ã€‚</p>
<p>20å¹´çš„è¯ï¼Œemmmmmm åº”è¯¥ä¼šæ”¾ç‚¹ç²¾åŠ›åœ¨javaç«¯ï¼Œå¾—è·Ÿç€æœ‹å‹åšç‚¹å°é¡¹ç›®æ‰è¡Œï¼Œåº”ä»˜æ¯•ä¸šè®¾è®¡å’Œå®è·µè€ƒè¯•ï¼›ç„¶åå…¬å¸é¡¹ç›®ä¸Šè¾“å‡ºä¸€ç‚¹æ–‡ç« åˆ°kmï¼Œä¹Ÿå°è¯•ç€ä¸€èµ·å‚ä¸é¡¹ç›®è¡¨å•æ¨¡å¼è®¾è®¡ï¼›æœ€é‡è¦çš„æ˜¯å¾—æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥çœŸæ­£å­¦ä¹ å®è·µçš„ç‚¹ï¼Œç°åœ¨æ‰¯ä»€ä¹ˆå…¨æ ˆæ˜¯æœ€ä¸é è°±çš„ã€‚</p>
<p>å…·ä½“çš„å¾—ç­‰å’Œè€å¤§æ²Ÿé€šæ‰çŸ¥é“ï¼Œä¸è¿‡çœŸçš„è¿™äº›äº‹æƒ…å¾—ä¸»åŠ¨ï¼Œè¿™æ¬¡ç®—æ˜¯åƒäº†ä¸ªæ•™è®­ã€‚</p>
<p>ä¸è¿‡ä»Šå¹´å€’æ˜¯å»å¬äº†å‡ åœºå†…éƒ¨çš„å°å‹åˆ†äº«ä¼šã€‚</p>
<p><img src="./mysql_maria.jpg" width="500"><br>MySQLå’ŒMariaDBä¹‹çˆ¶ Michael åˆ†äº«ï¼Œå…¨åœºå¬ä¸‹æ¥åªè®°å¾—ä»–è¯´çš„å‡ å¥è¯</p>
<blockquote>
<p>å¤§å¥³å„¿å« â€œMyâ€ æ‰€ä»¥ç¬¬ä¸€ä¸ªæ•°æ®åº“èµ·å<code>MySQL</code>ï¼ŒäºŒå¥³å„¿å«Mariaâ€¦æ‰€ä»¥åé¢å†™çš„æ•°æ®åº“å«<code>MariaDB</code>â€¦è¿™â€¦</p>
</blockquote>
<p><img src="./node_deno.jpg" width="500"><br>node.js å’Œ deno.jsä¹‹çˆ¶Ryan Dahl<br>æ‰¿è®¤denoè®¾æƒ³å¾ˆå¥½ï¼Œä½†æ˜¯æ²¡æœ‰ç”Ÿæ€æ³¨å®šä¸èƒ½å•†ä¸šåŒ–ï¼Œå¦‚æœå…¼å®¹nodeçš„è¯ï¼Œåˆå¾ˆéš¾æ’‡æ¸…å…³ç³»ï¼Œç°åœ¨nodeå·²ç»æœ‰æ…¢æ…¢é€šè¿‡å‡çº§æ”¹æ‰å¾ˆå¤šæ¯›ç—…ï¼Œå‰©ä¸‹çš„ç”¨ä¸€äº›å·¥å…·ä¹Ÿå¯ä»¥å®Œæˆï¼Œæ²¡å¿…è¦ç‰¹åœ°å¼€ä¸ªæ–°è¯­è¨€æ¥æ•´åˆï¼Œæ‰€ä»¥å¬å®Œè¿˜æ˜¯ä¸å¤§çœ‹å¥½ã€‚</p>
<h1 id="å…³äºå¥åº·"><a href="#å…³äºå¥åº·" class="headerlink" title="å…³äºå¥åº·"></a>å…³äºå¥åº·</h1><p>å“å‘€ï¼Œä»Šå¹´çœŸçš„å’Œç®—å‘½å…ˆç”Ÿè¯´çš„ä¸€æ ·ï¼Œè¿™å„¿ç–¼å“ªå„¿ç—›çš„ï¼ˆä¸€ä¸ªåšitçš„ä¼šç›¸ä¿¡ç®—å‘½å…ˆç”Ÿçš„è¯ï¼Œ æ²¡æƒ³åˆ°å§ (ï½ï¿£â–½ï¿£)ï½ ï¼‰ã€‚<br>å¼„äº†å‡ ä¸ªç‰™é½¿ï¼Œçœ‹äº†çš®è‚¤ç§‘ï¼Œæœ€åè¿˜å»ç†äº†è‚ èƒƒã€‚</p>
<p>å…¶ä»–è¿˜å¥½æš‚æ—¶å‘Šä¸€æ®µè½ï¼Œå°±æ˜¯èƒƒé•œè¿™ç©æ„çœŸä¸æ˜¯äººç…§çš„ï¼Œæœ€æœ‰å°è±¡çš„è¯æ˜¯åŒ»ç”Ÿçœ‹å®Œèƒƒé•œè¯´äº†å¥â€œå¹´çºªè½»è½»å°±èç¼©äº†â€ï¼Œå“ ä»¥åçˆ±æƒœèº«ä½“å’¯</p>
<p>çœ‹äº†ä¸‹ä»Šå¹´é™¤å»åˆ·åŒ»ä¿çš„é’±ä»¥å¤–ï¼Œçœ‹ç—…æ€»å…±èŠ±äº†å…«åƒå¤šâ€¦ä¸è¿‡é‡Œé¢æœ‰è€çˆ¸è€å¦ˆä½“æ£€è´¹ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤¸å¼ ï¼Œåé¢ä¹°ä¸ªé‡ç–¾å•¥çš„ï¼Œåˆå¾—èŠ±é’±ã€‚</p>
<p>è‡³äº19å¹´çš„è¿åŠ¨è®¡åˆ’ï¼Œç­‰è€å‘½ä¿ä½å†è¯´å§ï¼Œç°åœ¨å…»èº«å¤šäº†ï¼Œå¯ä¹å’–å•¡éƒ½ä¸æ€ä¹ˆæ•¢å–ï¼Œå‘¨æœ«æ²¡äº‹éƒ½è¦å‡ºå»èµ°èµ°æ•£æ•£æ­¥ã€‚</p>
<h1 id="å…³äºå…¶ä»–"><a href="#å…³äºå…¶ä»–" class="headerlink" title="å…³äºå…¶ä»–"></a>å…³äºå…¶ä»–</h1><ul>
<li>å·¥èµ„çš„ç›®æ ‡ç®—æ˜¯è¾¾åˆ°äº†ï¼Œä¸è¿‡ä»¥å‰åœ¨å¹¿å·ï¼Œç°åœ¨åœ¨æ·±åœ³ï¼Œä¹Ÿæ²¡æœ‰å¤šå¾ˆå¤š å‹‰å‹‰å¼ºå¼ºã€‚ä¸è¿‡æ˜å¹´ä¸æ•¢å®šå·¥èµ„è®¡åˆ’äº†ï¼Œç°åœ¨æ²¡æŠ€æœ¯ï¼Œæ²¡å­¦å†æ··å£é¥­åƒå…ˆã€‚</li>
<li>æ‹¿äº†é©¾ç…§ï¼Œè¿˜è¡Œ è¿˜è¡Œ è™½ç„¶æ²¡è½¦ï¼Œä¸è¿‡æ€»ç®—å®Œæˆäº†ã€‚</li>
<li>åŸç”Ÿå¼€å‘çš„ç›®æ ‡ç®—æ˜¯é»„çš„å½»åº•</li>
<li>å­˜æ¬¾ä¸€æ–¹é¢åº”è¯¥æ˜¯å®šçš„åå°‘äº†ï¼Œå¦ä¸€æ–¹é¢æ˜¯è‚¡å¸‚å›è¡€äº†ä¸€ç‚¹ç‚¹ è¿˜è¡Œå‹‰å¼ºæ¥å— å“ˆå“ˆã€‚æœ¬æ¥å­˜ä¸ªä¸€ä¸¤ä¸‡ä¸æ˜¯å¾ˆæƒ³å†™è¿›æ¥ï¼Œåé¢æƒ³æƒ³è¿˜æ˜¯è¦æœ‰ä¸ªäº¤ä»£æ‰èƒ½ç»§ç»­ã€‚</li>
<li>è€ƒè¯•çš„è®¡ç®—ä¹Ÿç®—æ˜¯å¯ä»¥æ¥å—</li>
</ul>
<p>emmm è¿™ä¹ˆä¸€çœ‹ï¼Œå¥½åƒé™¤äº†ä½œæ¯ä¸è§„å¾‹ï¼Œå¥åº·æœ‰ç‚¹é—®é¢˜ï¼›ä»¥åŠå·¥ä½œæ²¡å•¥è¿›å–ä»¥å¤– å…¶ä»–éƒ½è¿˜è¡Œã€‚</p>
<p>ä¸è¿‡ç°åœ¨çš„ç„¦è™‘æ„Ÿä¸€å¹´æ¯”ä¸€å¹´æ›´å¼ºï¼Œæƒ³æƒ³æ±•å¤´çš„æœ‹å‹å‡ ä¸ªéƒ½ç»“å©šå°å­©éƒ½æœ‰äº†ï¼ŒæŸå¤å°‘ä¹Ÿæ˜¯ï¼Œå†çœ‹çœ‹è‡ªå·±æˆ¿å­æ²¡æœ‰ï¼Œè€å©†æ²¡æœ‰ï¼Œè½¦å­æ²¡æœ‰ï¼Œç¥¨å­ä¹Ÿæ²¡æœ‰ã€‚<br>å½“ç„¶æœ€å¤§çš„ç„¦è™‘å…¶å®æ˜¯æ€•è„šæ­¥èµ¶ä¸ä¸Šè€çˆ¸è€å¦ˆè€å»çš„é€Ÿåº¦ã€‚<br>ä»Šå¤©ä¸‹åˆè€å¦ˆåœ¨ç¾¤é‡Œé—®æˆ‘å’Œè€å§ï¼Œå®¶é‡Œä¸è¦çš„è¡£æœå¯ä¸å¯ä»¥æ‹¿å»æäº†ï¼Ÿ<br>è¿™äº‹è®©æˆ‘æœ‰ç‚¹æ¿€åŠ¨ï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ è¿›æ­¥çš„æ—¶å€™ è€å¦ˆå­ä¹Ÿä¸æ—¶ä¿±è¿›ï¼Œè‡³å°‘ä»Šå¹´å­¦ä¼šå¾®ä¿¡ç®€å•æ“ä½œï¼Œå¹³æ—¶è§†é¢‘èŠå¤©å•¥çš„æ²¡æ¯›ç—…ï¼ŒçœŸå¥½ ç§‘æŠ€æ”¹å˜ç”Ÿæ´»ã€‚</p>
<hr>
<p>å‰å‡ å¤©å¤§å­¦å‡ ä¸ªæœ‹å‹åœ¨ç¾¤é‡ŒèŠå¤©ï¼Œä¸€ä¸ªè¯´åˆ°ï¼š</p>
<blockquote>
<p>ç®—ä¸€ç®—ï¼Œèƒ½é™ªçˆ¶æ¯çš„æ—¶é—´å¯èƒ½ä¹Ÿå°±åå‡ å¹´äº†ï¼Œè¿™ä¹ˆä¸€æƒ³å¥½åƒä¸€ä¸‹å­æ— æ³•æ¥å—ã€‚æƒ³æ—©ç‚¹æˆå®¶æ»¡è¶³å®¶é‡ŒäººæŠ±å­™å­çš„æ„¿æœ›</p>
</blockquote>
<p>æ˜¯å•Šï¼Œåƒæˆ‘ç°åœ¨åœ¨å¤–é¢çš„ï¼Œæ—¶é—´æ›´å°‘ï¼Œä»¥åä¹Ÿä¸çŸ¥é“å®šå±…åœ¨å“ªé‡Œã€‚å”¯æœ‰å°‘ç©ç‚¹æ¸¸æˆï¼Œå°‘åˆ·ç‚¹æŠ–éŸ³å‡å°‘è´Ÿç½ªæ„Ÿã€‚</p>
<p>è¯´åˆ°æ¸¸æˆå’ŒæŠ–éŸ³ï¼Œæœ€è¿‘ä¸€ä¸ªæœˆå°±æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªç©æ„æå¾—æ— å¿ƒå­¦ä¹ ï¼Œè¿™ç©æ„å¯¹æˆ‘è¿™ä¸ªæ¯«æ— è‡ªåˆ¶åŠ›çš„äººæ¥è¯´å¤ªå¯æ€•äº†ï¼Œè®°å¾—æœ‰ä¸€å¤©ç©åˆ°æ™šä¸Šå››ç‚¹ï¼Œéš”å¤©èµ·åºŠç«‹é©¬æŠŠæ¸¸æˆå¸äº†ï¼Œæ§åˆ¶ä¸ä½è‡ªå·±çš„è¯ï¼Œè‡³å°‘å¯ä»¥æé«˜ç©çš„æˆæœ¬ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯æŠ–éŸ³ï¼Œè®°å¾—ä¹‹å‰çœ‹è¿‡ä¸€ä¸ªå…¬ä¼—å·å°±æ˜¯è¯´è¿™ä¸ªçš„ï¼Œè¿™ç§åŸºäºæ¨èç³»ç»Ÿçš„è½¯ä»¶éƒ½ä¸æ˜¯ä»€ä¹ˆå¥½è½¯ä»¶ï¼Œç‰¹åˆ«å®¹æ˜“æ²‰è¿·ã€‚<br>ä¸è¿‡æŠ–éŸ³æœ‰ä¸€ä¸ªç§¯æçš„æ–¹é¢å°±æ˜¯ä»¥åå¯ä»¥æœ‰ä»€ä¹ˆå°tipå°±åœ¨ä¸Šé¢æœä¸€ä¸‹ï¼Œ ç®—åŠä¸ªçŸ¥ä¹ï¼Œå®ç”¨æŠ€å·§å•Šï¼Œç§‘æ™®å•¥çš„åº”è¯¥è¿˜è¡Œï¼Œå…ˆç•™ç€å§ã€‚</p>
<p>å†å¨ä¸¤å¥ï¼Œä¸‹åˆæ•£æ­¥çš„æ—¶å€™åˆ·çŸ¥ä¹çœ‹åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå¤§æ¦‚æ˜¯:</p>
<blockquote>
<p>å¤§å­¦æœ¬ç§‘ï¼ŒåŒå­¦éƒ½ä½œå¼Šï¼Œæˆ‘æ²¡æœ‰ä½œå¼Šï¼Œæˆ‘å¾—åˆ°ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>æœ‰ä¸€ä¸ªå›ç­”å†™çš„æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰å¾—åˆ°ã€‚çœ‹åˆ°è¿™ä¸ªæ ‡é¢˜çš„æ—¶å€™ï¼Œæˆ‘æ˜¯æŒºæœ‰æ„Ÿè§¦çš„ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯è¿™ç±»äººï¼Œè™½ç„¶ä¸æ˜¯è¯´ä»å°åˆ°å¤§æ²¡æœ‰ä½œå¼Šè¿‡ï¼Œä½†æ˜¯è‡ªè®¤ä¸ºå¾ˆå¤šæ—¶å€™è¿˜æ˜¯æ¯”è¾ƒæ­£æ´¾è€¿ç›´ï¼ˆå…¶å®å°±æ˜¯èƒ†å°ï¼‰ï¼Œæ‰€ä»¥å¯èƒ½ä¼šé”™å¤±å¾ˆå¤šæ·å¾„æˆ–æœºä¼šã€‚</p>
<p>æƒ³æƒ³ä»–ä»¬ä½œå¼Šçš„äººä»¥åç»å¤§éƒ¨åˆ†æ˜¯ä¸ä¼šå¾—åˆ°ä»€ä¹ˆé¬¼æŠ¥åº”ï¼Œè€Œæˆ‘åšæŒä¸ä½œå¼Šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå¥½å¤„ï¼Œå½“ç„¶çœ‹è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæƒ³çš„è‚¯å®šä¸åªæ˜¯ä½œå¼Šçš„é—®é¢˜ï¼Œå¯ä»¥å»¶ä¼¸åˆ°ç”Ÿæ´»ä¸­çš„å„ä¸ªåœºæ™¯ï¼Œæ‰€ä»¥æœ‰æ—¶å€™è§‰å¾—è¿™ç§è€å®å·´äº¤çš„äººï¼Œæ´»è¯¥èµšä¸äº†é’±ã€‚</p>
<p>çœŸæƒ³2020å¹´å¯ä»¥å­¦ä¼šç‹¡çŒ¾ï¼Ÿå¥¸è¯ˆï¼Ÿä¸€ç‚¹ï¼Ÿ ä½ çœ‹ï¼Œè¿ä¸€ä¸ªè¤’ä¹‰çš„è¯éƒ½æƒ³ä¸å‡ºä¸€ä¸ªï¼Œç”¨åœ†æ»‘å§ã€‚</p>
<p>æ‰€ä»¥2020å¹´å…³é”®å­—æ˜¯ï¼š<strong>è‡ªè€ƒ</strong> <strong>å¥åº·</strong> <strong>è‹±è¯­</strong> <strong>ä¸“ä¸š</strong>ã€‚</p>
<p>æœ€åçš„æœ€åï¼Œæ”¾å¤šä¸€å¼ ç…§ç‰‡ï¼Œä»Šå¤©ä¸‹åˆæ•£æ­¥æ‹çš„ï¼Œåˆšå¥½çœ‹åˆ°å·¦ä¸Šè§’æœ‰ä¸€ç¾¤å°é¸Ÿåœ¨é£ã€‚<br>å¸Œæœ›èƒ½å’Œè¿™äº›å°é¸Ÿä¸€æ ·ï¼Œåœ¨å¤§åŸå¸‚æœ‰ä¸ªè‡ªå·±çš„å°è§’è½ã€‚<br><img src="./2019_end.jpeg" width="500"></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>live</tag>
      </tags>
  </entry>
  <entry>
    <title>æœåŠ¡ç«¯å…¥é—¨æ±‡æ€»</title>
    <url>/2019/12/server-beginner/</url>
    <content><![CDATA[<p>è¿™é‡Œåªæœ‰ç®€å•çš„æœåŠ¡ç«¯å…¥é—¨ä¸œè¥¿æ²¡å•¥å¥½çœ‹â€¦</p>
<hr>
<h1 id="redis-å®‰è£…"><a href="#redis-å®‰è£…" class="headerlink" title="redis å®‰è£…"></a>redis å®‰è£…</h1><p>ç”±äºé¡¹ç›®ä¸Šåå°ç”¨åˆ°redisï¼Œå¦‚æœå¼€å‘ä¸‹å¤§å®¶ç”¨åŒä¸€ä¸ªå®¹æ˜“è¢«äººæ”¹æ•°æ®ï¼Œé€ æˆå¥‡è‘©çš„äº‹æƒ…ï¼Œæ‰€ä»¥æœ¬åœ°æ­äº†ä¸€ä¸ªè‡ªå·±ç©ã€‚</p>
<p>è®°å½•ä¸€ä¸‹æœ¬åœ°brewå®‰è£…redisçš„è¿‡ç¨‹</p>
<p>æŒ‰ç€å®˜ç½‘è¯´æ˜ä¸‹è½½å®‰è£… <a href="https://redis.io/download" target="_blank" rel="noopener">https://redis.io/download</a></p>
<p>macä¸‹å»ºè®®ç›´æ¥ç”¨brewç®¡ç†</p>
<ol>
<li><code>brew install redis</code></li>
<li>å¯ä»¥ç”¨ <code>brew list redis</code>æŸ¥çœ‹rediså®‰è£…çš„ä½ç½®</li>
<li>brew å®‰è£…çš„è½¯ä»¶ï¼Œé…ç½®ä¸€èˆ¬éƒ½åœ¨<code>/usr/local/etc</code>ï¼Œå¯ä»¥ç›´æ¥è¿›å»ä¿®æ”¹é…ç½®</li>
</ol>
<p>å®‰è£…å®Œä¹‹åï¼Œç›´æ¥æ ¹æ®æç¤º <code>brew services start xxxx(redis)</code> æˆ–è€…æ”¹å®Œé…ç½®è¦é‡å¯reids <code>brew services restart xxx(redis)</code>ã€‚è¿™äº›éƒ½æ˜¯ brew çš„å¸¸è§„æ“ä½œäº†</p>
<p>é…ç½®çš„è¯ï¼Œæˆ‘è¿™è¾¹æ ¹æ®é¡¹ç›®æ²¡ä»€ä¹ˆéœ€è¦æ”¹çš„ï¼Œç«¯å£ç›´æ¥ç”¨é»˜è®¤ç«¯å£ï¼Œå°±è®¾äº†ä¸ªå¯†ç ï¼Œæœ¬æ¥æœ¬åœ°è·‘æƒ³ç›´æ¥æŠŠå¯†ç å†™åœ¨ conf æ–‡ä»¶ï¼Œæƒ³æƒ³è¿™æ ·æ˜¾å¾—å¤ªä¸ä¸“ä¸šäº†ï¼Œå»ºè®®ç›´æ¥ç”¨commitè®¾ç½®</p>
<p>å‘½ä»¤è¡Œè·‘<code>redis-cli</code> ç„¶åè¾“å…¥ <code>CONFIG SET requirepass $YOUR_PASSWORD</code><br>å¦‚æœè¿™æ—¶å€™è¾“å‡º <code>ok</code> åˆ™è®¾ç½®æˆåŠŸ å¯ä»¥ç”¨ <code>AUTH $YOUR_PASSWORD</code> æ¥æ ¡éªŒã€‚</p>
<p>ä¸€åˆ‡okä¹‹åï¼Œé”®å…¥ exit é€€å‡º redis-cliï¼Œç»“æŸã€‚</p>
<hr>
<h1 id="SSH-é…ç½®"><a href="#SSH-é…ç½®" class="headerlink" title="SSH é…ç½®"></a>SSH é…ç½®</h1><p>æœ¬æ–‡åªæ˜¯å•çº¯åˆ†äº«ä¸‹æ€ä¹ˆé…ç½® å…å¯†ç™»å½•æœåŠ¡å™¨ä»¥åŠgithub cloneï¼Œå’Œç½‘ä¸Š99%æ²¡å·®å¼‚ï¼Œåªæ˜¯æ•´ç†ä¸€ä¸‹åé¢å¦‚æœåˆéœ€è¦çš„è¯å¯ä»¥çœ‹</p>
<p>åªé€‚ç”¨äºmacï¼Œlinuxåº”è¯¥ä¹Ÿé€‚ç”¨</p>
<p><strong>åŸºæœ¬é…ç½®</strong></p>
<ol>
<li>åˆ›å»º.sshç›®å½• <code>mkdir -p ~/.ssh</code></li>
<li>åˆ›å»ºç§˜é’¥ <code>ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</code> è¾“å®Œç›´æ¥æ•²å›è½¦å³å¯</li>
<li>æ­¤æ—¶ä½ çš„ <code>~/.ssh</code>å°±ä¼šå¤šäº†å‡ ä¸ªæ–‡ä»¶ id_rsaä¸id_rsa.pubåˆ†åˆ«æ˜¯å…¬é’¥å’Œç§é’¥</li>
<li>ç§é’¥è‡ªå·±ç•™ç€ï¼Œå…¬é’¥å¦‚æœä½ æƒ³è¦å…å¯†ç™»å½•å“ªå°æœåŠ¡å™¨å°±æ‹·è´åˆ°é‚£å°æœåŠ¡å™¨çš„<code>authorized_keys</code>é‡Œé¢</li>
</ol>
<p>å¦‚æœä½ çš„æœºå™¨æœ¬æ¥å°±æœ‰ id_rsa ä¸ id_rsa.pub åˆ™å¯ä»¥ç›´æ¥è·³è¿‡1ï¼Œ2ï¼Œ3æ­¥ã€‚</p>
<p>å¦‚æœä½ æœ‰ç§é’¥çš„è¯ï¼Œä½ å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ª <code>.ssh/config</code> æ–‡ä»¶ç”¨æ¥å­˜å‚¨ä½ çš„ç§˜é’¥é…ç½®ï¼Œå…³äºè¿™å—åé¢æœ‰ç”¨åˆ°æˆ‘å†æ¥è¡¥å……</p>
<p>å…³äºç¬¬å››æ­¥æ‹·è´åˆ°è¿œç¨‹æœºå™¨çš„<code>authorized_keys</code>é‡Œé¢ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤<code>ssh-copy-id user@host</code>æˆ–è€…<code>ssh user@host &#39;mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys&#39; &lt; ~/.ssh/id_rsa.pub</code></p>
<p><strong>githubé…ç½®</strong></p>
<p>è‡³äºgithubå…¶å®ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä»–çš„ <code>authorized_keys</code> æ˜¯ç”¨è®¾ç½®æ¥é…ç½®ï¼Œå…·ä½“åœ¨ä¸ªäºº <a href="https://github.com/settings/keys" target="_blank" rel="noopener"><code>setting/ssh</code></a>é‡Œé¢</p>
<p><strong>ç®€å•åŸç†</strong></p>
<p>æœ€åSSHçš„åŸç†ç®€å•å¯ä»¥è¿™ä¹ˆç†è§£<br>æˆ‘ç”Ÿæˆäº†ä¸€ä¸ªç§é’¥å’Œä¸€ä¸ªå…¬é’¥ï¼Œç§é’¥å­˜æ”¾åœ¨æœ¬åœ°ï¼Œå…¬é’¥æ”¾åˆ°è¿œç¨‹æœºå™¨ä¸Š<br>å½“æˆ‘é“¾æ¥è¿œç¨‹æœºå™¨çš„æ—¶å€™ï¼Œæœºå™¨å°±ä¼šå‘ä¸€ä¸²éšæœºå­—ç¬¦ä¸²ç»™æˆ‘ï¼Œæˆ‘ç”¨ç§é’¥åŠ å¯†åªä¼šå†å‘å›å»ã€‚<br>è¿œç¨‹ä¸»æœºå†ç”¨å­˜æ”¾åœ¨ <code>authorized_keys</code> çš„å…¬é’¥å»è§£å¯†ï¼Œå¦‚æœæˆåŠŸä¸”åŒ¹é…ï¼Œæ„å‘³ç€è¿™ä¸ªç”¨æˆ·æ˜¯å¯ä¿¡ä»»çš„ã€‚</p>
<p><strong>ç›¸å…³å‚è€ƒ or æ”¶è—é“¾æ¥</strong></p>
<p><a href="https://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="noopener">SSHåŸç†ä¸è¿ç”¨ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç™»å½•</a><br><a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh" target="_blank" rel="noopener">githubå…³äºssh</a><br><a href="https://shanyue.tech/op/init.html" target="_blank" rel="noopener">æœåŠ¡å™¨ç™»å½•ç›¸å…³</a></p>
<p><a href="https://shanyue.tech/op/" target="_blank" rel="noopener">æœåŠ¡å™¨åŸºç¡€æ•™ç¨‹</a> è¿™æ˜¯ä¸ªå¥½æ•™ç¨‹ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¸€äº›å…¥é—¨çº§çš„ä¸œè¥¿ å¯¹æ–°æ‰‹å¾ˆå‹å¥½</p>
<hr>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title>React Hooksé£Ÿç”¨æŒ‡å—</title>
    <url>/2019/08/react-hooks/</url>
    <content><![CDATA[<p><a href="https://github.com/jsonz1993/react-source-learn" target="_blank" rel="noopener">react16 Hooksé£Ÿç”¨æŒ‡å—</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>hello angular1.5</title>
    <url>/2019/04/hello-angular1-5/</url>
    <content><![CDATA[<p><a href="http://docs.ngnice.com/guide/filter" target="_blank" rel="noopener">http://docs.ngnice.com/guide/filter</a><br><a href="https://devdocs.io/angularjs~1.5/api/ng/directive" target="_blank" rel="noopener">https://devdocs.io/angularjs~1.5/api/ng/directive</a><br><a href="https://code.angularjs.org/1.5.3/docs/guide" target="_blank" rel="noopener">https://code.angularjs.org/1.5.3/docs/guide</a></p>
<p>ç»„ä»¶ã€æ§åˆ¶å™¨ã€æœåŠ¡ã€æŒ‡ä»¤ã€è¿‡æ»¤å™¨<br>å¯¹åº”é¡¹ç›®ä¸Šçš„ componentsã€modulesã€servicesã€xxã€filter</p>
<p>æ§åˆ¶å™¨ ng-controller =&gt; create scope<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ï¼Œæ¶‰åŠ scope root ä½œç”¨åŸŸç­‰å¾…</span></span><br><span class="line"><span class="keyword">var</span> App = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ§åˆ¶å™¨ C å°† M å’Œ V ç»‘å®š(MVC)</span></span><br><span class="line">App.controller(<span class="string">'ctrl'</span>, $scope=&gt; &#123;</span><br><span class="line">  $scope.data= &#123;&#125;;</span><br><span class="line">  <span class="comment">// ä¸å»ºè®®ç›´æ¥ç”¨ $scope.message = ''; æ”¹åŠ¨çš„è¯ï¼Œå†…å­˜åœ°å€æ”¹å˜å®¹æ˜“å¯¼è‡´ngä¸èƒ½è§¦å‘ç›‘å¬</span></span><br><span class="line">  $scope.onClick = <span class="function"><span class="params">()</span>=&gt;</span> &#123;&#125;; <span class="comment">// `ng-click="onClick"`</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>åŒå‘ç»‘å®š: <code>ng-model</code><br>æ¡ä»¶åˆ¤æ–­: <code>ng-if</code>ã€<code>ng-show</code>ã€<code>ng-hide</code><br>å¾ªç¯: <code>ng-repeat</code> <code>ng-repeat=&quot;x in xx&quot; $index, x.xxx</code></p>
<p>//è¿‡æ»¤å™¨<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">App.filter(<span class="string">'xxxx'</span>, ()=&gt; <span class="function"><span class="params">text</span>=&gt;</span> textFilter);</span><br><span class="line"><span class="string">`&#123;&#123; data.message | xxxxFilter &#125;&#125;`</span></span><br><span class="line"><span class="comment">// æœç´¢ `ng-repeat="x in xxxx | filter: searchText"`</span></span><br><span class="line">searchText = [<span class="string">'T'</span>, &#123;<span class="attr">name</span>: <span class="string">'T'</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">'T'</span>, <span class="attr">last</span>: <span class="string">'H'</span>&#125;];</span><br></pre></td></tr></table></figure></p>
<p>æ ·å¼é€‰æ‹©å™¨ <code>ng-class</code>,<code>ng-style</code><br>ä¸‹æ‹‰åˆ—è¡¨é€‰é¡¹ <code>ng-options</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$scope.colors = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'black'</span>, <span class="attr">color</span>: <span class="string">'black'</span>&#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'white'</span>, <span class="attr">color</span>: <span class="string">'white'</span>&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"FirstCtrl"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">ng-model</span>=<span class="string">"colorChoosen"</span> <span class="attr">ng-options</span>=<span class="string">"color.name for color in colors"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>ng-include</code>å’Œ<code>ng-template</code><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-include</span>=<span class="string">"views/part.html"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-include</span>=<span class="string">"template.url"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-include</span>=<span class="string">"getUrl()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-include</span> <span class="attr">src</span>=<span class="string">"views/part.html"</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-include</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><a href="https://devdocs.io/angularjs~1.5/api/ng/directive/nginclude" target="_blank" rel="noopener">æ›´å¤š</a></p>
<p>directive<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åå­—å‘½åç”¨é©¼å³°ï¼Œä½¿ç”¨ç”¨-</span></span><br><span class="line">App.directive(<span class="string">'people'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    restrict: <span class="string">'E'</span>, <span class="comment">// ç±»å‹ element A: attribute, C: class</span></span><br><span class="line">    replace: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ç›´æ¥ä»£æ›¿é¡¶çº§æ ‡ç­¾</span></span><br><span class="line">    template: <span class="string">'xxx'</span> <span class="comment">// `templateUrl`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.directive(<span class="string">'te'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    scope: &#123;</span><br><span class="line">      <span class="comment">// = å¯¹è±¡; @ æ–‡æœ¬; &amp; å‡½æ•°</span></span><br><span class="line">      info: <span class="string">'='</span> <span class="comment">// ä» attr ä¸­è·å– info å±æ€§ï¼Œå­˜å‚¨åˆ° scope.infoä¸­,, åŒå‘æ•°æ®ç»‘å®šï¼Œæ”¹æˆ@ ä¸ºåªè¯».</span></span><br><span class="line">    &#125;,</span><br><span class="line">    link(scope, element, attrs) &#123;</span><br><span class="line">      <span class="comment">// scope ä½œç”¨åŸŸ</span></span><br><span class="line">      <span class="comment">// element å°è£…è¿‡çš„é¡µé¢domã€‚ element.children('h1').addClass('text')</span></span><br><span class="line">      <span class="comment">// attrs ä¼ å…¥çš„æ‰€æœ‰ attrs</span></span><br><span class="line">    &#125;,</span><br><span class="line">    transclude: <span class="literal">true</span>, <span class="comment">// æŠŠ directive å˜æˆä¸€ä¸ªå®¹å™¨ è¿™é‡Œæœ‰ç‚¹åƒ React.children çš„æ¦‚å¿µï¼Œæˆ–è€…vueé‡Œé¢çš„ slot</span></span><br><span class="line">    template: <span class="string">`xxxxx&lt;div ng-transclude&gt;&lt;/div&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œä¼ å…¥äº† data</span></span><br><span class="line">&lt;div te=<span class="string">"data"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>ngè¡¨å•ï¼ŒéªŒè¯ç­‰</p>
<p>ä½œç”¨åŸŸå¹¿æ’­<code>broadcasted</code>çˆ¶çº§=&gt;å­çº§ï¼›<code>emitted</code>å­çº§=&gt; çˆ¶çº§</p>
<p>filter è‡ªå®šä¹‰ç­›é€‰å™¨<br>data binding åŒå‘ç»‘å®š<br>dependency injection å¼•æ¥æ³¨å…¥<br>ng-src directive å†…ç½®æŒ‡ä»¤<br>event ng-click äº‹ä»¶ç³»ç»ŸæŒ‡ä»¤</p>
<p>server æ³¨å…¥è‡ªå®šä¹‰server<br>  angular.module(â€˜xxxxâ€™, [])<br>    .factory(â€˜serverNameâ€™, [], fn)</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>Dartæ ¸å¿ƒåº“å¸¸è§æ–¹æ³•å­¦ä¹ </title>
    <url>/2019/04/dart-library/</url>
    <content><![CDATA[<blockquote>
<p>è¿™å‡ ç¯‡å…³äºDartçš„æ–‡ç« ï¼Œåªæ˜¯åœ¨çœ‹å®˜ç½‘æ•™ç¨‹çš„æ—¶å€™æ•²ä¸€éå·©å›ºè®°å¿†è€Œå†™çš„</p>
</blockquote>
<h1 id="Dart-core"><a href="#Dart-core" class="headerlink" title="Dart:core"></a>Dart:core</h1><p>æ¯ä¸ªæ–‡ä»¶éƒ½ä¼šé»˜è®¤å¼•å…¥è¿™ä¸ªåŒ…ï¼ŒåŒ…æ‹¬numbers,collections,stringsç­‰ç­‰</p>
<h1 id="print"><a href="#print" class="headerlink" title="print"></a>print</h1><p>æ‰“å°ï¼Œé»˜è®¤ä¼šè°ƒç”¨æ‰“å°çš„å¯¹è±¡çš„ <code>toString</code> æ–¹æ³•<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(anObject)</span><br><span class="line"><span class="keyword">const</span> name = <span class="string">'Jsonz'</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'I\'m <span class="subst">$name</span>'</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="Numbers"><a href="#Numbers" class="headerlink" title="Numbers"></a>Numbers</h1><h2 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h2><p>è§£ææŠŠå­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">assert</span>(<span class="built_in">int</span>.parse(<span class="string">'42'</span>) == <span class="number">42</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">int</span>.parse(<span class="string">'0x42'</span>) == <span class="number">66</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">double</span>.parse(<span class="string">'0.50'</span>) == <span class="number">0.5</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">num</span>.parse(<span class="string">'42'</span>) <span class="keyword">is</span> <span class="built_in">int</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">num</span>.parse(<span class="string">'0x42'</span>) <span class="keyword">is</span> <span class="built_in">int</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">num</span>.parse(<span class="string">'0.50'</span>) <span class="keyword">is</span> <span class="built_in">double</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">int</span>.parse(<span class="string">'42'</span>, radix: <span class="number">16</span>) == <span class="number">66</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h2><p>å°†æ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Convert an int to a string.</span></span><br><span class="line"><span class="keyword">assert</span>(<span class="number">42.</span>toString() == <span class="string">'42'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Convert a double to a string.</span></span><br><span class="line"><span class="keyword">assert</span>(<span class="number">123.456</span>.toString() == <span class="string">'123.456'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Specify the number of digits after the decimal.</span></span><br><span class="line"><span class="keyword">assert</span>(<span class="number">123.456</span>.toStringAsFixed(<span class="number">2</span>) == <span class="string">'123.46'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Specify the number of significant figures.</span></span><br><span class="line"><span class="keyword">assert</span>(<span class="number">123.456</span>.toStringAsPrecision(<span class="number">2</span>) == <span class="string">'1.2e+2'</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">double</span>.parse(<span class="string">'1.2e+2'</span>) == <span class="number">120.0</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><h2 id="search-inside-a-string"><a href="#search-inside-a-string" class="headerlink" title="search inside a string"></a>search inside a string</h2><p>å­—ç¬¦ä¸²çš„æŸ¥æ‰¾æœç´¢<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'Never odd or even'</span>;</span><br><span class="line"><span class="keyword">assert</span>(str.contains(<span class="string">'odd'</span>));</span><br><span class="line"><span class="keyword">assert</span>(str.startsWith(<span class="string">'Never'</span>));</span><br><span class="line"><span class="keyword">assert</span>(str.endsWith(<span class="string">'even'</span>));</span><br><span class="line"><span class="keyword">assert</span>(str.indexOf(<span class="string">'odd'</span>) == <span class="number">6</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="Extracting-data-from-a-string"><a href="#Extracting-data-from-a-string" class="headerlink" title="Extracting data from a string"></a>Extracting data from a string</h2><p>ä»å­—ç¬¦ä¸²æå–æ•°æ®<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'Never odd or even'</span>;</span><br><span class="line"><span class="keyword">assert</span>(str.substring(<span class="number">6</span>, <span class="number">9</span>) == <span class="string">'odd'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parts = str.split(<span class="string">' '</span>);</span><br><span class="line"><span class="keyword">assert</span>(parts.length == <span class="number">4</span>);</span><br><span class="line"><span class="keyword">assert</span>(parts[<span class="number">0</span>] == <span class="string">'Never'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(str[<span class="number">0</span>] == <span class="string">'N'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> char <span class="keyword">in</span> <span class="string">'hello'</span>.split(<span class="string">''</span>)) &#123;</span><br><span class="line">  <span class="built_in">print</span>(char);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> codeUnitList = str.codeUnits.toList();</span><br><span class="line"><span class="keyword">assert</span>(codeUnitList[<span class="number">0</span>] == <span class="number">78</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="converting-to-uppercase-or-lowercase"><a href="#converting-to-uppercase-or-lowercase" class="headerlink" title="converting to uppercase or lowercase"></a>converting to uppercase or lowercase</h2><p>åˆ‡æ¢å¤§å°å†™<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'Never odd or even'</span>;</span><br><span class="line"><span class="keyword">assert</span>(str.toUpperCase() == <span class="string">'NEVER ODD OR EVEN'</span>);</span><br><span class="line"><span class="keyword">assert</span>(str.toLowerCase() == <span class="string">'never odd or even'</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="trimming-amp-amp-empty"><a href="#trimming-amp-amp-empty" class="headerlink" title="trimming &amp;&amp; empty"></a>trimming &amp;&amp; empty</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">assert</span>(<span class="string">'   hello '</span>.trim() == <span class="string">'hello'</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="string">''</span>.isEmpty);</span><br><span class="line"><span class="keyword">assert</span>(<span class="string">' '</span>.isNotEmpty);</span><br></pre></td></tr></table></figure>
<h2 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> greetingTemplate = <span class="string">'Hello, Name!'</span>;</span><br><span class="line"><span class="keyword">var</span> greeting = greetingTemplate.replaceAll(<span class="built_in">RegExp</span>(<span class="string">'Name'</span>), <span class="string">'Bob'</span>);</span><br><span class="line"><span class="built_in">print</span>(greeting); <span class="comment">// Hello, Bob!</span></span><br><span class="line"><span class="keyword">assert</span>(greeting != greetingTemplate);</span><br></pre></td></tr></table></figure>
<h2 id="building-a-string"><a href="#building-a-string" class="headerlink" title="building a string"></a>building a string</h2><p>åœ¨è°ƒç”¨<code>toString</code>ä¹‹å‰ä¸ä¼šç”Ÿæˆæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sb = <span class="built_in">StringBuffer</span>();</span><br><span class="line"></span><br><span class="line">sb</span><br><span class="line">  ..write(<span class="string">'use a stringBuffer for '</span>)</span><br><span class="line">  ..writeAll([<span class="string">'efficient'</span>, <span class="string">'string'</span>, <span class="string">'creation'</span>], <span class="string">''</span>)</span><br><span class="line">  ..write(<span class="string">'.'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fullString = sb.toString();</span><br><span class="line"><span class="keyword">assert</span>(fullString ==  <span class="string">'Use a StringBuffer for efficient string creation.'</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="æ­£åˆ™"><a href="#æ­£åˆ™" class="headerlink" title="æ­£åˆ™"></a>æ­£åˆ™</h1><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> numbers = <span class="built_in">RegExp</span>(<span class="string">r'\d+'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> allCharacters = <span class="string">'llamas live fifteen to twenty years'</span>;</span><br><span class="line"><span class="keyword">const</span> someDigits = <span class="string">'llamas live 15 to 20 years'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(!allCharacters.contains(numbers));</span><br><span class="line"><span class="keyword">assert</span>(someDigits.contains(numbers));</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> exedOut = someDigits.replaceAll(numbers, <span class="string">'XX'</span>);</span><br><span class="line"><span class="keyword">assert</span>(exedOut == <span class="string">'llamas live XX to XX years'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(numbers.hasMatch(someDigits));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> match <span class="keyword">in</span> numbers.allMatches(someDigits)) &#123;</span><br><span class="line">  <span class="built_in">print</span>(match.group(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h1><p>Listã€Setã€Map</p>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>æ™®é€šæ•°ç»„<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸºç¡€æ“ä½œ</span></span><br><span class="line">listBase() &#123;</span><br><span class="line">  <span class="comment">// Use a List constructor.</span></span><br><span class="line">  <span class="keyword">var</span> vegetables = <span class="built_in">List</span>();</span><br><span class="line">  <span class="keyword">assert</span>(vegetables.length == <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// simply use a list literal.</span></span><br><span class="line">  <span class="keyword">var</span> fruits = [<span class="string">'apples'</span>, <span class="string">'oranges'</span>];</span><br><span class="line">  <span class="comment">// add to a list.</span></span><br><span class="line">  fruits.add(<span class="string">'kiwis'</span>);</span><br><span class="line">  <span class="comment">// add multiple items to a list.</span></span><br><span class="line">  fruits.addAll([<span class="string">'grapes'</span>, <span class="string">'bananas'</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Get the list length.</span></span><br><span class="line">  <span class="keyword">assert</span>(fruits.length == <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// remove a single item.</span></span><br><span class="line">  <span class="keyword">var</span> appleIndex = fruits.indexOf(<span class="string">'apples'</span>);</span><br><span class="line">  fruits.removeAt(appleIndex);</span><br><span class="line">  <span class="keyword">assert</span>(fruits.length == <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// remove all elements from a list</span></span><br><span class="line">  fruits.clear();</span><br><span class="line">  <span class="keyword">assert</span>(fruits.length == <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">assert</span>(fruits[<span class="number">0</span>] == <span class="string">'apples'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(fruits.indexOf(<span class="string">'apples'</span>) == <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort æ–¹æ³•</span></span><br><span class="line">listSort() &#123;</span><br><span class="line">  <span class="keyword">var</span> fruits = [<span class="string">'bananas'</span>, <span class="string">'apples'</span>, <span class="string">'oranges'</span>];</span><br><span class="line">  <span class="comment">// Sort a list.</span></span><br><span class="line">  fruits.sort((a, b) =&gt; a.compareTo(b));</span><br><span class="line">  <span class="keyword">assert</span>(fruits[<span class="number">0</span>] == <span class="string">'apples'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// list type </span></span><br><span class="line">listType() &#123;</span><br><span class="line">  <span class="keyword">var</span> fruits = <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;();</span><br><span class="line">  fruits.add(<span class="string">'apples'</span>);</span><br><span class="line">  <span class="keyword">var</span> fruit = fruits[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">assert</span>(fruit <span class="keyword">is</span> <span class="built_in">String</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>å»é‡ç±»æ•°ç»„</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Set base</span></span><br><span class="line">setBase() &#123;</span><br><span class="line">  <span class="keyword">var</span> ingredients = <span class="built_in">Set</span>();</span><br><span class="line">  ingredients.addAll([<span class="string">'gold'</span>, <span class="string">'titanium'</span>, <span class="string">'xenon'</span>]);</span><br><span class="line">  <span class="keyword">assert</span>(ingredients.length == <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">  ingredients.add(<span class="string">'gold'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(ingredients.length == <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">  ingredients.remove(<span class="string">'gold'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(ingredients.length == <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦åŒ…å«</span></span><br><span class="line">setContains() &#123;</span><br><span class="line">  <span class="keyword">var</span> ingredients= <span class="built_in">Set</span>();</span><br><span class="line">  ingredients.addAll([<span class="string">'gold'</span>, <span class="string">'titanium'</span>, <span class="string">'xenon'</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// check whether an item is in the set.</span></span><br><span class="line">  <span class="keyword">assert</span>(ingredients.contains(<span class="string">'titanium'</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// check whether all the items are in the set.</span></span><br><span class="line">  <span class="keyword">assert</span>(ingredients.containsAll([<span class="string">'titanium'</span>, <span class="string">'xenon'</span>]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤é›†</span></span><br><span class="line">setIntersection() &#123;</span><br><span class="line">  <span class="keyword">var</span> ingredients= <span class="built_in">Set</span>();</span><br><span class="line">  ingredients.addAll([<span class="string">'gold'</span>, <span class="string">'titanium'</span>, <span class="string">'xenon'</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create the intersection of thw sets.</span></span><br><span class="line">  <span class="keyword">var</span> nobleGases = <span class="built_in">Set</span>.from([<span class="string">'xenon'</span>, <span class="string">'argon'</span>]);</span><br><span class="line">  <span class="keyword">var</span> intersection = ingredients.intersection(nobleGases);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">assert</span>(intersection.length == <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">assert</span>(intersection.contains(<span class="string">'xenon'</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://api.dartlang.org/stable/dart-core/Set-class.html" target="_blank" rel="noopener">å…³äºSetçš„æ›´å¤šæ–¹æ³•</a></p>
<h2 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h2><p>jså¯¹è±¡</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸºç¡€åˆ›å»º</span></span><br><span class="line">mapBase() &#123;</span><br><span class="line">  <span class="keyword">var</span> hawaiianBeaches = &#123;</span><br><span class="line">    <span class="string">'Oahu'</span>: [<span class="string">'Waikiki'</span>, <span class="string">'Kailua'</span>, <span class="string">'Waimanalo'</span>],</span><br><span class="line">    <span class="string">'Big Island'</span>: [<span class="string">'Wailea bay'</span>, <span class="string">'Pololu Beach'</span>],</span><br><span class="line">    <span class="string">'Kauai'</span>: [<span class="string">'Hanalei'</span>, <span class="string">'Poipu'</span>],</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> searchTerms = <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> nobleGases = <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, <span class="built_in">String</span>&gt;(); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤</span></span><br><span class="line">mapRemove() &#123;</span><br><span class="line">  <span class="keyword">var</span> nobleGases = &#123;</span><br><span class="line">    <span class="number">54</span>: <span class="string">'xenon'</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">assert</span>(nobleGases[<span class="number">54</span>] == <span class="string">'xenon'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(nobleGases.containsKey(<span class="number">54</span>));</span><br><span class="line"></span><br><span class="line">  nobleGases.remove(<span class="number">54</span>)  ;</span><br><span class="line">  <span class="keyword">assert</span>(!nobleGases.containsKey(<span class="number">54</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// keys &amp;&amp; values</span></span><br><span class="line">mapKeyValue() &#123;</span><br><span class="line">  <span class="keyword">var</span> hawaiianBeaches = &#123;</span><br><span class="line">    <span class="string">'Oahu'</span>: [<span class="string">'Waikiki'</span>, <span class="string">'Kailua'</span>, <span class="string">'Waimanalo'</span>],</span><br><span class="line">    <span class="string">'Big Island'</span>: [<span class="string">'Wailea bay'</span>, <span class="string">'Pololu Beach'</span>],</span><br><span class="line">    <span class="string">'Kauai'</span>: [<span class="string">'Hanalei'</span>, <span class="string">'Poipu'</span>],</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// keys</span></span><br><span class="line">  <span class="keyword">var</span> keys = hawaiianBeaches.keys;</span><br><span class="line">  <span class="keyword">assert</span>(keys.length == <span class="number">3</span>);</span><br><span class="line">  <span class="keyword">assert</span>(<span class="built_in">Set</span>.from(keys).contains(<span class="string">'Oahu'</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// values</span></span><br><span class="line">  <span class="keyword">var</span> values = hawaiianBeaches.values;</span><br><span class="line">  <span class="keyword">assert</span>(values.length == <span class="number">3</span>);</span><br><span class="line">  <span class="keyword">assert</span>(values.any((v)=&gt; v.contains(<span class="string">'Waikiki'</span>)));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// check a keys</span></span><br><span class="line">  <span class="keyword">assert</span>(hawaiianBeaches.containsKey(<span class="string">'Oahu'</span>));</span><br><span class="line">  <span class="keyword">assert</span>(!hawaiianBeaches.containsKey(<span class="string">'Florida'</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// putIfAbsent å½“ä¸”ä»…å½“æ²¡æœ‰è¯¥Keyèµ‹å€¼ï¼Œæ‰ä¼šæ‰§è¡Œè¯¥å‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> teamAssignments = &#123;&#125;;</span><br><span class="line">  teamAssignments.putIfAbsent(<span class="string">'Catcher'</span>, ()=&gt; <span class="string">'test'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(teamAssignments[<span class="string">'Catcher'</span>] != <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://api.dartlang.org/stable/dart-core/Map-class.html" target="_blank" rel="noopener">æ›´å¤šå…³äºMapsçš„API</a></p>
<h2 id="é€šç”¨-Map-Set-List-çš„æ–¹æ³•"><a href="#é€šç”¨-Map-Set-List-çš„æ–¹æ³•" class="headerlink" title="é€šç”¨(Map,Set,List)çš„æ–¹æ³•"></a>é€šç”¨(Map,Set,List)çš„æ–¹æ³•</h2><p>Iterable(è¿­ä»£å™¨)æ–¹æ³•æŒ‡Setå’ŒListï¼Œå› ä¸ºä»–ä»¬æ˜¯ç»§æ‰¿Iterable class<br>CollectionsæŒ‡ Setã€Listå’ŒMap.<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">commonSetList() &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//Iterables æŒ‡çš„æ˜¯Listå’ŒSetï¼Œå› ä¸ºéƒ½æ˜¯ç»§æ‰¿è¯¥ç±»å®ç°çš„</span></span><br><span class="line">  <span class="comment">// Collections æŒ‡çš„æ˜¯List,Set,Map</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> coffees = [];</span><br><span class="line">  <span class="keyword">var</span> teas = [<span class="string">'green'</span>, <span class="string">'black'</span>, <span class="string">'chamomile'</span>, <span class="string">'earl grey'</span>];</span><br><span class="line">  <span class="keyword">var</span> teasSet = &#123;<span class="string">'green'</span>, <span class="string">'black'</span>&#125;;</span><br><span class="line">  <span class="keyword">var</span> teasMap = &#123;</span><br><span class="line">    <span class="string">'tea1'</span>: <span class="string">'green'</span>,</span><br><span class="line">    <span class="string">'tea2'</span>: <span class="string">'black'</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Iterables: isEmpty isNotEmpty</span></span><br><span class="line">  <span class="keyword">assert</span>(coffees.isEmpty);</span><br><span class="line">  <span class="keyword">assert</span>(teas.isNotEmpty);</span><br><span class="line">  <span class="keyword">assert</span>(teasSet.isNotEmpty);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Collections: forEach</span></span><br><span class="line">  teas.forEach((tea)=&gt; &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'I drink <span class="subst">$tea</span>'</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">  teasMap.forEach((teaKey, teaValue)=&gt; &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'<span class="subst">$teaKey</span>, <span class="subst">$teaValue</span>'</span>)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Iterbables: map. mapä½¿ç”¨çš„æ˜¯æƒ°æ€§æ¨¡å¼ï¼Œå³åœ¨ä¸Šä¸€ä¸ªè¿”å›ä¹‹å‰ï¼Œä¸ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> loudTeas = teas.map((tea)=&gt; tea.toUpperCase());</span><br><span class="line">  loudTeas.forEach(<span class="built_in">print</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœæƒ³è¦ç«‹å³æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ toList æˆ– toSet</span></span><br><span class="line">  <span class="keyword">var</span> loudTeas2 = teas.map((tea)=&gt; tea.toUpperCase()).toList();</span><br><span class="line">  <span class="built_in">print</span>(loudTeas2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// where any every å’Œjsä¸€æ ·çš„åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆçš„ï¼Œæœ‰ä»»æ„ç¬¦åˆè¿”å›trueï¼Œæ‰€æœ‰ç¬¦åˆè¿”å›true</span></span><br><span class="line">  <span class="built_in">bool</span> isDecaffeinated(<span class="built_in">String</span> teaName)=&gt; teaName == <span class="string">'chamomile'</span>;</span><br><span class="line">  <span class="keyword">var</span> decaffeinatedTeas = teas.where(isDecaffeinated);</span><br><span class="line">  <span class="built_in">print</span>(decaffeinatedTeas);</span><br><span class="line">  <span class="keyword">assert</span>(teas.any(isDecaffeinated));</span><br><span class="line">  <span class="keyword">assert</span>(!teas.every(isDecaffeinated));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h1><p>URIä¸»è¦æä¾›ä¸€äº›è§£ç å’Œç¼–ç urlçš„åŠŸèƒ½</p>
<h2 id="è§£ç ä¸ç¼–ç "><a href="#è§£ç ä¸ç¼–ç " class="headerlink" title="è§£ç ä¸ç¼–ç "></a>è§£ç ä¸ç¼–ç </h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">encodeAndDecode() &#123;</span><br><span class="line">  <span class="keyword">var</span> uri = <span class="string">'http://example.org/api?foo=some message'</span>;</span><br><span class="line">  <span class="keyword">var</span> encoded = <span class="built_in">Uri</span>.encodeFull(uri);</span><br><span class="line">  <span class="keyword">assert</span>(encoded == <span class="string">'http://example.org/api?foo=some%20message'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> decode = <span class="built_in">Uri</span>.decodeFull(encoded);</span><br><span class="line">  <span class="keyword">assert</span>(uri == decode);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> encodeComponent = <span class="built_in">Uri</span>.encodeComponent(uri);</span><br><span class="line">  <span class="keyword">assert</span>(encodeComponent == <span class="string">'http%3A%2F%2Fexample.org%2Fapi%3Ffoo%3Dsome%20message'</span>);</span><br><span class="line">  <span class="keyword">var</span> decoded = <span class="built_in">Uri</span>.decodeComponent(encodeComponent);</span><br><span class="line">  <span class="keyword">assert</span>(uri == decoded);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æä¸æ„å»º"><a href="#è§£æä¸æ„å»º" class="headerlink" title="è§£æä¸æ„å»º"></a>è§£æä¸æ„å»º</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">parseAndBuild() &#123;</span><br><span class="line">  <span class="keyword">var</span> uri = <span class="built_in">Uri</span>.parse(<span class="string">'http://example.org:8080/foo/bar#frag'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(uri.scheme == <span class="string">'http'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(uri.host == <span class="string">'example.org'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(uri.path == <span class="string">'/foo/bar'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(uri.fragment == <span class="string">'frage'</span>);</span><br><span class="line">  <span class="keyword">assert</span>(uri.origin == <span class="string">'http://example.org:8080'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> buildUri = <span class="built_in">Uri</span>(</span><br><span class="line">    scheme: <span class="string">'http'</span>,</span><br><span class="line">    host: <span class="string">'example.org'</span>,</span><br><span class="line">    path: <span class="string">'/foo/bar'</span>,</span><br><span class="line">    fragment: <span class="string">'frag'</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">assert</span>(buildUri.toString() == <span class="string">'http://example.org/foo/bar#frag'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Dates-and-times"><a href="#Dates-and-times" class="headerlink" title="Dates and times"></a>Dates and times</h1><p>æ—¶é—´æ—¥æœŸç›¸å…³<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">date() &#123;</span><br><span class="line">  <span class="keyword">var</span> now = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create a now DateTime with the local time zone.</span></span><br><span class="line">  <span class="keyword">var</span> y2k = <span class="built_in">DateTime</span>(<span class="number">2000</span>); </span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‡å®šæœˆä»½å’Œæ—¥æœŸ</span></span><br><span class="line">  y2k = <span class="built_in">DateTime</span>(<span class="number">2000</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// specify the date as a UTC time.</span></span><br><span class="line">  y2k = <span class="built_in">DateTime</span>.utc(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Specify a date and time in ms since the Unix epoch.</span></span><br><span class="line">  y2k = <span class="built_in">DateTime</span>.fromMillisecondsSinceEpoch(<span class="number">946684800000</span>, isUtc: <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Parse an ISO 8601 date</span></span><br><span class="line">  y2k = <span class="built_in">DateTime</span>.parse(<span class="string">'2000-01-01T00:00:00Z'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›ä»1970åˆ°ç›®æ ‡çš„æ¯«ç§’æ•°</span></span><br><span class="line">  y2k = <span class="built_in">DateTime</span>.utc(<span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">assert</span>(y2k.millisecondsSinceEpoch == <span class="number">946684800000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> unixEpoch = <span class="built_in">DateTime</span>.utc(<span class="number">1970</span>);</span><br><span class="line">  <span class="keyword">assert</span>(unixEpoch.millisecondsSinceEpoch == <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´æ“ä½œæ–¹æ³•</span></span><br><span class="line">dateOptions() &#123;</span><br><span class="line">  <span class="keyword">var</span> y2k = <span class="built_in">DateTime</span>.utc(<span class="number">2000</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">Duration</span>(days: <span class="number">366</span>));</span><br><span class="line">  <span class="keyword">var</span> y2001 = y2k.add(<span class="built_in">Duration</span>(days: <span class="number">366</span>));</span><br><span class="line">  <span class="keyword">assert</span>(y2001.year == <span class="number">2001</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// subtract 30 days</span></span><br><span class="line">  <span class="keyword">var</span> december2000 = y2001.subtract(<span class="built_in">Duration</span>(days: <span class="number">30</span>));</span><br><span class="line">  <span class="keyword">assert</span>(december2000.year == <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">assert</span>(december2000.month == <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Calculate the difference between two dates.</span></span><br><span class="line">  <span class="comment">// Returns a Duration object.  </span></span><br><span class="line">  <span class="keyword">var</span> duration = y2001.difference(y2k);</span><br><span class="line">  <span class="keyword">assert</span>(duration.inDays == <span class="number">366</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://api.dartlang.org/stable/dart-core/DateTime-class.html" target="_blank" rel="noopener">æ›´å¤šDateTime API</a><br><a href="https://api.dartlang.org/stable/dart-core/Duration-class.html" target="_blank" rel="noopener">æ›´å¤šDuration API</a></p>
<p><a href="https://www.dartlang.org/guides/libraries/library-tour#utility-classes" target="_blank" rel="noopener">æœªå®Œå¾…ç»­</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>Dart</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>DartåŸºç¡€è¯­æ³•ï¼ˆäºŒï¼‰</title>
    <url>/2019/04/dart-learn-2/</url>
    <content><![CDATA[<h1 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h1><p><code>Dart</code>æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå…·æœ‰ç±»å’ŒåŸºäºmixinçš„ç»§æ‰¿ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªclassçš„å®ä¾‹ï¼Œæ‰€æœ‰çš„classéƒ½æ˜¯åŸºäºObjectã€‚</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ‰€æœ‰æœªåˆå§‹åŒ–çš„å˜é‡éƒ½ä¸ºnull</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x;</span><br><span class="line">  <span class="built_in">num</span> y;</span><br><span class="line">  <span class="built_in">num</span> z = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">num</span> d;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="comment">// Point(num x, num y) &#123;</span></span><br><span class="line">  <span class="comment">//   this.x = x;</span></span><br><span class="line">  <span class="comment">//   this.y = y;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´ç®€ä¾¿çš„å†™æ³•</span></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ„é€ å‡½æ•°çš„å‘½å</span></span><br><span class="line">  Point.origin() &#123;</span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    y = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> point = <span class="keyword">new</span> Point(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">  point.x = <span class="number">4</span>;</span><br><span class="line">  <span class="keyword">assert</span>(point.x == <span class="number">4</span>);</span><br><span class="line">  <span class="keyword">assert</span>(point.d == <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><h3 id="æ„é€ å‡½æ•°ä¸ç»§æ‰¿"><a href="#æ„é€ å‡½æ•°ä¸ç»§æ‰¿" class="headerlink" title="æ„é€ å‡½æ•°ä¸ç»§æ‰¿"></a>æ„é€ å‡½æ•°ä¸ç»§æ‰¿</h3><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x;</span><br><span class="line">  <span class="keyword">var</span> y;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç®€å•çš„æ„é€ å‡½æ•°ä½¿ç”¨ï¼Œç›¸å½“äº Point(x, y) &#123; this.x = x; this.y = y; &#125;</span></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y); </span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨å¼€å‘ç¯å¢ƒä¸‹å¯ä»¥ç”¨ assertå¯¹å‚æ•°è¿›è¡Œæ–­è¨€</span></span><br><span class="line">  Point.withAssert(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y): <span class="keyword">assert</span>(x&gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'in person.withAssert(): (<span class="subst">$x</span>, <span class="subst">$y</span>)'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™ä¸€å—çš„åˆå§‹åŒ–åˆ—è¡¨æœ‰ç‚¹åƒ java è¿˜æ˜¯ c++</span></span><br><span class="line">  Point.fromJson2(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">num</span>&gt; json):</span><br><span class="line">    x = json[<span class="string">'x'</span>],</span><br><span class="line">    y = json[<span class="string">'y'</span>] &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'In Person.fromJson2() : (<span class="subst">$x</span>, <span class="subst">$y</span>)'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å†…éƒ¨ä½¿ç”¨æ„é€ å‡½æ•°</span></span><br><span class="line">  Point.alongXAxis(<span class="built_in">num</span> x): <span class="keyword">this</span>(x, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">getDefaultData() &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> firstName;</span><br><span class="line">  Person.fromJson(<span class="built_in">Map</span> data) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'in Person'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  Employee.fromJson(<span class="built_in">Map</span> data): <span class="keyword">super</span>.fromJson(data) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'in Employee'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å› ä¸ºè°ƒç”¨æ„é€ å‡½æ•°ä¹‹å‰ä¼šè®¡ç®—è¶…ç±»æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œæ‰€ä»¥å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</span></span><br><span class="line">  Employee(): <span class="keyword">super</span>.fromJson(getDefaultData());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="keyword">var</span> emp = <span class="keyword">new</span> Employee.fromJson(&#123;&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (emp <span class="keyword">is</span> Person) &#123;</span><br><span class="line">    emp.firstName = <span class="string">'Bob'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  (emp <span class="keyword">as</span> Person).firstName = <span class="string">'bob'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¸¸é‡æ„é€ å‡½æ•°"><a href="#å¸¸é‡æ„é€ å‡½æ•°" class="headerlink" title="å¸¸é‡æ„é€ å‡½æ•°"></a>å¸¸é‡æ„é€ å‡½æ•°</h3><p>å¦‚æœä½ çš„ç±»ä¸éœ€è¦æ”¹å˜ï¼Œä½ å¯ä»¥å°†ä»–å†™æˆç¼–è¯‘æ—¶å¸¸é‡ï¼Œä½†æ˜¯è¦ç¡®ä¿æ‰€æœ‰çš„å®ä¾‹å˜é‡éƒ½æ˜¯<code>final</code>ã€‚</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImmutablePoint</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> ImmutablePoint origin = <span class="keyword">const</span> ImmutablePoint(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="comment">// ç¡®ä¿æ‰€æœ‰çš„å®ä¾‹å˜é‡éƒ½æ˜¯ final</span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">num</span> x, y;</span><br><span class="line">  <span class="keyword">const</span> ImmutablePoint(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a = ImmutablePoint(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> b = ImmutablePoint(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">assert</span>(a == b);</span><br></pre></td></tr></table></figure>
<h3 id="å·¥å‚æ„é€ å‡½æ•°"><a href="#å·¥å‚æ„é€ å‡½æ•°" class="headerlink" title="å·¥å‚æ„é€ å‡½æ•°"></a>å·¥å‚æ„é€ å‡½æ•°</h3><p>åœ¨å®ç°å¹¶ä¸æ€»æ˜¯åˆ›å»ºå…¶ç±»çš„æ–°å®ä¾‹çš„æ„é€ å‡½æ•°æ—¶ï¼Œè¯·ä½¿ç”¨factoryå…³é”®å­—ã€‚ä¾‹å¦‚ï¼Œå·¥å‚æ„é€ å‡½æ•°å¯èƒ½ä»ç¼“å­˜ä¸­è¿”å›å®ä¾‹ï¼Œæˆ–è€…å®ƒå¯èƒ½è¿”å›å­ç±»å‹çš„å®ä¾‹ã€‚</p>
<p>æ³¨æ„ å·¥å‚æ„é€ å‡½æ•°ä¸èƒ½è®¿é—®<code>this</code>ã€‚<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å·¥å‚æ„é€ å‡½æ•°,ä¸éœ€è¦ç»å¸¸å®ä¾‹åŒ–çš„æƒ…å†µï¼Œä¼šä»ç¼“å­˜è·å–</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">bool</span> mute = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// _cache is library-private, thanks to the _ in front of its name.</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, Logger&gt; _cache = &lt;<span class="built_in">String</span>, Logger&gt;&#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> Logger(<span class="built_in">String</span> name) &#123;</span><br><span class="line">    <span class="keyword">if</span> (_cache.containsKey(name)) <span class="keyword">return</span> _cache[name];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">final</span> logger = Logger._internal(name);</span><br><span class="line">      _cache[name] = logger;</span><br><span class="line">      <span class="keyword">return</span> logger;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Logger._internal(<span class="keyword">this</span>.name);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> log(<span class="built_in">String</span> msg) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!mute) <span class="built_in">print</span>(msg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Methods-æ–¹æ³•"><a href="#Methods-æ–¹æ³•" class="headerlink" title="Methods(æ–¹æ³•)"></a>Methods(æ–¹æ³•)</h2><h3 id="Instance-methods-å®ä¾‹æ–¹æ³•"><a href="#Instance-methods-å®ä¾‹æ–¹æ³•" class="headerlink" title="Instance methods(å®ä¾‹æ–¹æ³•)"></a>Instance methods(å®ä¾‹æ–¹æ³•)</h3><p>æ™®é€šçš„å®ä¾‹æ–¹æ³•<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line"></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ™®é€šçš„æ–¹æ³•</span></span><br><span class="line">  <span class="built_in">num</span> distanceTo(Point other) &#123;</span><br><span class="line">    <span class="keyword">var</span> dx = x - other.x;</span><br><span class="line">    <span class="keyword">var</span> dy = y - other.y;</span><br><span class="line">    <span class="keyword">return</span> sqrt(dx * dx + dy * dy);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Getters-amp-amp-Setters"><a href="#Getters-amp-amp-Setters" class="headerlink" title="Getters &amp;&amp; Setters"></a>Getters &amp;&amp; Setters</h3><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> left, top, width, height;</span><br><span class="line"></span><br><span class="line">  Rectangle(<span class="keyword">this</span>.left, <span class="keyword">this</span>.top, <span class="keyword">this</span>.width, <span class="keyword">this</span>.height);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">num</span> <span class="keyword">get</span> right =&gt; left + width;</span><br><span class="line">  <span class="keyword">set</span> right(<span class="built_in">num</span> value)=&gt; left = value - width;</span><br><span class="line">  <span class="built_in">num</span> <span class="keyword">get</span> bottom =&gt; top + height;</span><br><span class="line">  <span class="keyword">set</span> bottom(<span class="built_in">num</span> value)=&gt; top = value - height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Abstract-methods-Abstract-Class"><a href="#Abstract-methods-Abstract-Class" class="headerlink" title="Abstract methods/ Abstract Class"></a>Abstract methods/ Abstract Class</h3><p>æŠ½è±¡ç±»<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Doer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> doSomething(); <span class="comment">// å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EffectiveDoer</span> <span class="keyword">extends</span> <span class="title">Doer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> doSomething() &#123; <span class="built_in">print</span>(<span class="string">'xxx'</span>); &#125; <span class="comment">// å®ç°è¯¥æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Implicit-interfaces"><a href="#Implicit-interfaces" class="headerlink" title="Implicit interfaces"></a>Implicit interfaces</h3><p>æ¥å£å’Œjavaå¾ˆåƒ<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// implicit interfaces</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// A person. The implicit interface contains greet().</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// In the interface, but visible only in this library</span></span><br><span class="line">  <span class="keyword">final</span> _name;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Not in the interface, since this is a constructor.</span></span><br><span class="line">  Person(<span class="keyword">this</span>._name);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// In the interface</span></span><br><span class="line">  <span class="built_in">String</span> greet(<span class="built_in">String</span> who) =&gt; <span class="string">'Hello, <span class="subst">$who</span>. I am <span class="subst">$_name</span>'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// an implementation of the Person interface.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Impostor</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">get</span> _name =&gt; <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> greet(<span class="built_in">String</span> who)=&gt; <span class="string">'Hi <span class="subst">$who</span>. Do you know who I am?'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> greetBob(Person person)=&gt; person.greet(<span class="string">'Bob'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(greetBob(Person(<span class="string">'Jsonz'</span>)));</span><br><span class="line">  <span class="built_in">print</span>(greetBob(Impostor()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šä¸ªæ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> <span class="keyword">implements</span> <span class="title">Comparable</span>, <span class="title">Location</span> </span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="extending-a-classæ‰©å±•ç»§æ‰¿"><a href="#extending-a-classæ‰©å±•ç»§æ‰¿" class="headerlink" title="extending a classæ‰©å±•ç»§æ‰¿"></a>extending a classæ‰©å±•ç»§æ‰¿</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Television</span> </span>&#123;</span><br><span class="line"> <span class="keyword">void</span> turnOn() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'television turnOn'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmartTelevision</span> <span class="keyword">extends</span> <span class="title">Television</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> turnOn() &#123;</span><br><span class="line">    <span class="keyword">super</span>.turnOn();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'SmartTelevision'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="overriding-members-é‡å†™æ–¹æ³•"><a href="#overriding-members-é‡å†™æ–¹æ³•" class="headerlink" title="overriding members é‡å†™æ–¹æ³•"></a>overriding members é‡å†™æ–¹æ³•</h3><p>å­ç±»é‡å†™å®ä¾‹æ–¹æ³•,ä½†æ˜¯æœ‰åŠ å’Œæ²¡åŠ å’Œä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¿™ä¸ªç–‘æƒ‘åœ¨<a href="https://stackoverflow.com/questions/51224205/what-is-the-purpose-of-override-used-in-flutter" target="_blank" rel="noopener">stackoverflowæœ‰è§£ç­”</a></p>
<blockquote>
<p><code>@override</code> just points out that the function is also defined in an ancestor class, but is being redefined to do something else in the current class. Itâ€™s also used to annotate the implementation of an abstract method. It is optional to use but recommended as it improves readability.</p>
</blockquote>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmartTelevision</span> <span class="keyword">extends</span> <span class="title">Television</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> turnOn() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Overridable-operators"><a href="#Overridable-operators" class="headerlink" title="Overridable operators"></a>Overridable operators</h3><p>é‡å†™æ“ä½œç¬¦ï¼Ÿ çœ‹çœ‹å°±å¥½</p>
<h3 id="Enumerated-types"><a href="#Enumerated-types" class="headerlink" title="Enumerated types"></a>Enumerated types</h3><p>æšä¸¾ç±»å‹<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123; red, green, blue &#125;</span><br><span class="line">enums() &#123;</span><br><span class="line">  <span class="comment">// æšä¸¾ç±»å‹: è¡¨ç¤ºå›ºå®šæ•°é‡çš„å¸¸æ•°å€¼</span></span><br><span class="line">  <span class="keyword">assert</span>(Color.red.index == <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">assert</span>(Color.green.index == <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">assert</span>(Color.blue.index == <span class="number">2</span>);</span><br><span class="line">  <span class="built_in">List</span>&lt;Color&gt; colors = Color.values;</span><br><span class="line">  <span class="keyword">assert</span>(colors[<span class="number">2</span>] == Color.blue);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> aColor = Color.blue;</span><br><span class="line">  <span class="keyword">switch</span> (aColor) &#123;</span><br><span class="line">    <span class="keyword">case</span> Color.red:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">'red'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>: </span><br><span class="line">      <span class="built_in">print</span>(aColor);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="mixins"><a href="#mixins" class="headerlink" title="mixins"></a>mixins</h3><p><code>mixins</code>ä½¿ç”¨<code>with</code>å…³é”®å­—ï¼Œ<code>Class TAS = A with S</code>,åˆ™ <code>TAS</code>åŒ…å«äº†æ‰€æœ‰<code>A</code>å’Œ<code>S</code>çš„æ–¹æ³•å±æ€§ï¼Œä»¥<code>S</code>ä¸ºæœ€ç»ˆè¦†ç›–ï¼Œå³å¦‚æœAä¸Sæœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œåˆ™Sè¦†ç›–Aã€‚<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">S</span> </span>&#123;</span><br><span class="line">  a() &#123; <span class="built_in">print</span>(<span class="string">'S.a'</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  a() &#123; <span class="built_in">print</span>(<span class="string">'A.a'</span>); &#125;</span><br><span class="line">  b() &#123; <span class="built_in">print</span>(<span class="string">'A.b'</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">  a() &#123; <span class="built_in">print</span>(<span class="string">'B.a'</span>); &#125;</span><br><span class="line">  b() &#123; <span class="built_in">print</span>(<span class="string">'B.b'</span>); &#125;</span><br><span class="line">  c() &#123; <span class="built_in">print</span>(<span class="string">'B.c'</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TAS</span> = <span class="title">A</span> <span class="title">with</span> <span class="title">S</span>;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">TBAS</span> = <span class="title">B</span> <span class="title">with</span> <span class="title">A</span>, <span class="title">S</span>;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">main</span>() </span>&#123;</span><br><span class="line">  TAS t = <span class="keyword">new</span> TAS();</span><br><span class="line">  t.a(); <span class="comment">// S.a</span></span><br><span class="line">  t.b(); <span class="comment">// A.b</span></span><br><span class="line">  TBAS b = <span class="keyword">new</span> TBAS();</span><br><span class="line">  b.a(); <span class="comment">// S.a</span></span><br><span class="line">  b.b(); <span class="comment">// A.b</span></span><br><span class="line">  b.c(); <span class="comment">// B.c</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Class-variables-and-methods"><a href="#Class-variables-and-methods" class="headerlink" title="Class variables and methods"></a>Class variables and methods</h2><p>é™æ€æ–¹æ³•ä¸é™æ€å±æ€§<code>static</code>å…³é”®å­—å®ç°<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> name = <span class="string">'queue'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">num</span> log(<span class="built_in">String</span> str) &#123;</span><br><span class="line">    <span class="built_in">print</span>(str);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Queue.log(Queue.name);</span><br></pre></td></tr></table></figure></p>
<h1 id="Generics-æ³›å‹"><a href="#Generics-æ³›å‹" class="headerlink" title="Generics æ³›å‹"></a>Generics æ³›å‹</h1><p>æ³›å‹è¿™å—åé¢ç”¨åˆ°çš„è¯è¿˜è¦è¡¥ï¼Œç¡®å®ä¸æ˜¯å¾ˆç†Ÿ</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;();</span><br><span class="line"><span class="comment">// ç­‰äº var names = &lt;String&gt;[];</span></span><br><span class="line">name.addAll([<span class="string">'a'</span>,<span class="string">'b'</span>]);</span><br><span class="line">name.add(<span class="number">2</span>); <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure>
<h2 id="ç±»å‹é™åˆ¶"><a href="#ç±»å‹é™åˆ¶" class="headerlink" title="ç±»å‹é™åˆ¶"></a>ç±»å‹é™åˆ¶</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> names = &lt;<span class="built_in">String</span>&gt;[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]; <span class="comment">// list</span></span><br><span class="line"><span class="keyword">var</span> uniqueNames = &lt;<span class="built_in">String</span>&gt;&#123;<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>&#125;; <span class="comment">// set</span></span><br><span class="line"><span class="keyword">var</span> pages = &lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; &#123;</span><br><span class="line">  <span class="string">'index.html'</span>: <span class="string">'homePage'</span>,</span><br><span class="line">&#125; <span class="comment">// map</span></span><br><span class="line"><span class="keyword">var</span> nameSet = <span class="built_in">Set</span>&lt;<span class="built_in">String</span>&gt;.from(names);</span><br><span class="line"><span class="keyword">var</span> newMap = <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, <span class="built_in">String</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(names <span class="keyword">is</span> <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h1 id="Libraries"><a href="#Libraries" class="headerlink" title="Libraries"></a>Libraries</h1><p>å¼•å…¥ç”¨<code>import</code>å…³é”®å­—</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:html'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:test/test.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºæŸä¸ªåº“æŒ‡å®šåˆ«åï¼Œjseræ¯”è¾ƒå–œæ¬¢è¿™ç§ï¼Œä¸ä¼šå…¨å±€å˜é‡åˆ°å¤„é£˜ï¼</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:lib/lib.dart'</span> <span class="keyword">as</span> lib;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±€éƒ¨å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:lib/lib.dart'</span> <span class="keyword">show</span> foo; <span class="comment">// åªå¼•å…¥foo</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:lib/lib.dart'</span> <span class="keyword">hide</span> foo; <span class="comment">// é™¤äº†fooå…¶ä»–éƒ½å¼•å…¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‡’åŠ è½½</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:greetings/hello.dart'</span> <span class="keyword">deferred</span> <span class="keyword">as</span> hello;</span><br><span class="line"></span><br><span class="line">Future greet() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> hello.loadLibrary(); <span class="comment">// å…ˆåŠ è½½ loadLibraryä¼šè¿”å›ä¸€ä¸ªFuture</span></span><br><span class="line">  hello.printGreeting(); <span class="comment">// å†ä½¿ç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºä¸€ä¸ªåº“"><a href="#åˆ›å»ºä¸€ä¸ªåº“" class="headerlink" title="åˆ›å»ºä¸€ä¸ªåº“"></a>åˆ›å»ºä¸€ä¸ªåº“</h2><p><a href="https://www.dartlang.org/guides/libraries/create-library-packages" target="_blank" rel="noopener">create library packages</a></p>
<h1 id="asynchrony-support-å¼‚æ­¥æ”¯æŒ"><a href="#asynchrony-support-å¼‚æ­¥æ”¯æŒ" class="headerlink" title="asynchrony support å¼‚æ­¥æ”¯æŒ"></a>asynchrony support å¼‚æ­¥æ”¯æŒ</h1><p>Dartä¸€èˆ¬ç”¨<code>Future</code>å’Œ<code>Stream</code>æ¥å¤„ç†å¼‚æ­¥ã€‚</p>
<h2 id="handling-Futures"><a href="#handling-Futures" class="headerlink" title="handling Futures"></a>handling Futures</h2><p><a href="https://www.dartlang.org/guides/libraries/library-tour#future" target="_blank" rel="noopener">Future</a></p>
<p>ä½¿ç”¨<code>await/async</code>,æ‰€ä»¥<code>Futures</code>ç±»ä¼¼<code>js</code>çš„<code>Promise</code>?<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Future checkVersion() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> version = <span class="keyword">await</span> lookUpVersion();</span><br><span class="line">  <span class="comment">// Do something with version</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="å£°æ˜å¼‚æ­¥å‡½æ•°"><a href="#å£°æ˜å¼‚æ­¥å‡½æ•°" class="headerlink" title="å£°æ˜å¼‚æ­¥å‡½æ•°"></a>å£°æ˜å¼‚æ­¥å‡½æ•°</h3><p>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™è¿”å›ç±»å‹ä¸º <code>Future&lt;void&gt;</code>.<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span> lookUpVersion() =&gt; <span class="string">'1.0.0'</span>;</span><br><span class="line">Future&lt;<span class="built_in">String</span>&gt; lookUpVersion() <span class="keyword">async</span> =&gt; <span class="string">'1.0.0'</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="Handling-Streams"><a href="#Handling-Streams" class="headerlink" title="Handling Streams"></a>Handling Streams</h2><p>ä½¿ç”¨ <code>async</code> å’Œ <code>await for</code><br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. ç­‰å¾…æµçš„æ¯ä¸€æ¬¡å€¼</span></span><br><span class="line"><span class="comment">// 2. æ‰§è¡Œforå¾ªç¯çš„ä¸»ä½“</span></span><br><span class="line"><span class="comment">// 3. é‡å¤1å’Œ2ç›´åˆ°æµç»“æŸ</span></span><br><span class="line"><span class="comment">// 4. å¦‚æœè¦ä¸­æ–­æµç›‘å¬ï¼Œå¯ä»¥ç”¨ break æˆ– return</span></span><br><span class="line"><span class="keyword">await</span> <span class="keyword">for</span> (varOrType identifier <span class="keyword">in</span> expression) &#123;</span><br><span class="line">  <span class="comment">// Executes each time the stream emits a value.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="Generators"><a href="#Generators" class="headerlink" title="Generators"></a>Generators</h1><p>emmm <code>js</code>æœ€è®¨åŒçš„è¯­æ³•æ¥åˆ°<code>Dart</code>è¿˜æ˜¯æ— æ³•é¿å…ï¼Œä¹‹å‰å¤„ç†å¼‚æ­¥éƒ½æ˜¯<code>promise</code>è¦ä¸å°±æ˜¯<code>await</code>â€¦</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒæ­¥Generators</span></span><br><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsTo(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (k &lt; n) <span class="keyword">yield</span> k++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥Generators</span></span><br><span class="line">Stream&lt;<span class="built_in">int</span>&gt; asynchronousNaturalsTo(<span class="built_in">int</span> n) <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (k &lt; n) <span class="keyword">yield</span> k++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœä½ çš„Generatoræ˜¯é€’å½’çš„ï¼Œå¯ä»¥ç”¨ yield*æ¥ä¼˜åŒ–</span></span><br><span class="line"><span class="comment">// æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿå°¾è°ƒç”¨ä¼˜åŒ–ï¼Ÿ</span></span><br><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsDownFrom(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> n;</span><br><span class="line">    <span class="keyword">yield</span>* naturalsDownFrom(n - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Callable-classes-å¯è°ƒç”¨ç±»"><a href="#Callable-classes-å¯è°ƒç”¨ç±»" class="headerlink" title="Callable classes å¯è°ƒç”¨ç±»"></a>Callable classes å¯è°ƒç”¨ç±»</h1><p>è¦å®ç°ç±»å’Œæ–¹æ³•ä¸€æ ·çš„è°ƒç”¨ï¼Œåˆ™åœ¨ç±»é‡Œé¢å®ç° <code>call</code>æ–¹æ³•.</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WannabeFunction</span> </span>&#123;</span><br><span class="line">  call(<span class="built_in">String</span> a, <span class="built_in">String</span> b, <span class="built_in">String</span> c) =&gt; <span class="string">'<span class="subst">$a</span> <span class="subst">$b</span> <span class="subst">$c</span>!'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> wf = <span class="keyword">new</span> WannabeFunction();</span><br><span class="line">  <span class="keyword">var</span> out = wf(<span class="string">"Hi"</span>,<span class="string">"there,"</span>,<span class="string">"gang"</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'<span class="subst">$out</span>'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Typedefs"><a href="#Typedefs" class="headerlink" title="Typedefs"></a>Typedefs</h1><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> Compare&lt;T&gt; = <span class="built_in">int</span> <span class="built_in">Function</span>(T a, T b);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> sort(<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; a - b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">assert</span>(sort <span class="keyword">is</span> Compare&lt;<span class="built_in">int</span>&gt;); <span class="comment">// True!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>Dart</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>DartåŸºç¡€è¯­æ³•ï¼ˆä¸€ï¼‰</title>
    <url>/2019/04/dart-learn/</url>
    <content><![CDATA[<p>ä¸€ä¸ªæœ€åŸºç¡€çš„Dartç¨‹åº<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">printInterger(<span class="built_in">int</span> aNumber, <span class="built_in">int</span> bNumber) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'the number is <span class="subst">$aNumber</span> and <span class="subst">$&#123;bNumber&#125;</span>'</span>); <span class="comment">// $aNumber or $&#123;bNumber&#125; éƒ½å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å˜é‡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¨‹åºåˆå§‹è¿è¡Œçš„å‡½æ•°</span></span><br><span class="line">main() </span><br><span class="line">  <span class="keyword">var</span> number = <span class="number">42</span>; <span class="comment">// å£°æ˜ä¸åˆå§‹åŒ–å˜é‡</span></span><br><span class="line">  printInterger(number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>é‡è¦æ¦‚å¿µ:</p>
<ul>
<li>æ‰€æœ‰å˜é‡éƒ½å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª<code>object</code>ï¼Œæ‰€æœ‰çš„<code>object</code>éƒ½æ˜¯é€šè¿‡<code>Object</code>classå®ä¾‹åŒ–å‡ºæ¥çš„ã€‚è¿™ç‚¹å’Œjsä¸€æ ·</li>
<li>Dartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œç´¯å¿ƒæ³¨é‡Šæ˜¯å¯é€‰çš„ï¼Œå› ä¸ºDartå¯ä»¥æ¨æ–­ç±»å‹ï¼Œå¦‚æœæƒ³è¦å®šä¹‰ä¸€ä¸ªæ²¡æœ‰ç±»å‹çš„å¯ä»¥ä½¿ç”¨<code>dynamic</code>ç±»å‹ã€‚å¦‚<code>- Dartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œç´¯å¿ƒæ³¨é‡Šæ˜¯å¯é€‰çš„ï¼Œå› ä¸ºDartå¯ä»¥æ¨æ–­ç±»å‹ï¼Œå¦‚æœæƒ³è¦å®šä¹‰ä¸€ä¸ªæ²¡æœ‰ç±»å‹çš„å¯ä»¥ä½¿ç”¨`dynamic`ç±»å‹ã€‚å¦‚</code>- Dartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œç´¯å¿ƒæ³¨é‡Šæ˜¯å¯é€‰çš„ï¼Œå› ä¸ºDartå¯ä»¥æ¨æ–­ç±»å‹ï¼Œå¦‚æœæƒ³è¦å®šä¹‰ä¸€ä¸ªæ²¡æœ‰ç±»å‹çš„å¯ä»¥ä½¿ç”¨<code>dynamic</code>ç±»å‹ã€‚å¦‚<code></code>- Dartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œç´¯å¿ƒæ³¨é‡Šæ˜¯å¯é€‰çš„ï¼Œå› ä¸ºDartå¯ä»¥æ¨æ–­ç±»å‹ï¼Œå¦‚æœæƒ³è¦å®šä¹‰ä¸€ä¸ªæ²¡æœ‰ç±»å‹çš„å¯ä»¥ä½¿ç”¨<code>dynamic</code>ç±»å‹ã€‚å¦‚<code>var list= &lt;dynamic&gt;[1]</code></li>
<li>Dartçš„ç§æœ‰æ–¹æ³•ï¼Œéƒ½æ˜¯ä»¥<code>_</code>ä¸‹åˆ’çº¿å¼€å¤´çš„ï¼Œä¸åƒjavaç›´æ¥å†™å…³é”®å­—<code>private</code>.</li>
</ul>
<h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><h2 id="å£°æ˜å˜é‡"><a href="#å£°æ˜å˜é‡" class="headerlink" title="å£°æ˜å˜é‡"></a>å£°æ˜å˜é‡</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸åˆå§‹åŒ–ä¸€ä¸ªStringç±»å‹çš„å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Bob'</span>;</span><br><span class="line"><span class="comment">// å¦‚æœæƒ³è¦ä»»æ„ç±»å‹ï¼Œå¯ä»¥ç”¨ dynamic</span></span><br><span class="line"><span class="built_in">dynamic</span> name2 = <span class="string">'Bob'</span>;</span><br><span class="line"><span class="comment">// æ˜¾å¼å£°æ˜å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line"><span class="built_in">String</span> name3 = <span class="string">'Bob'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å˜é‡é»˜è®¤å€¼"><a href="#å˜é‡é»˜è®¤å€¼" class="headerlink" title="å˜é‡é»˜è®¤å€¼"></a>å˜é‡é»˜è®¤å€¼</h2><p>å’Œ<code>js</code>ä¸ä¸€æ ·çš„æ˜¯ï¼Œå¦‚æœåœ¨<code>Dart</code>é‡Œé¢å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯ä¸èµ‹å€¼çš„è¯ï¼Œä»–çš„é»˜è®¤å€¼æ˜¯<code>null</code>è€Œä¸æ˜¯<code>undefined</code>.</p>
<p>è¿™ä¹Ÿä»å¦ä¸€ä¸ªè§’åº¦è¯´æ˜åœ¨<code>Dart</code>ä¸­ï¼Œä¸‡ç‰©çš†å¯¹è±¡.<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> lineCount;</span><br><span class="line"><span class="keyword">var</span> line;</span><br><span class="line"><span class="keyword">assert</span>(lineCount == <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">assert</span>(line == <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="final-amp-amp-const"><a href="#final-amp-amp-const" class="headerlink" title="final &amp;&amp; const"></a>final &amp;&amp; const</h2><p><code>Dart</code>é‡Œé¢çš„å¸¸é‡ç”¨ <code>final</code>å’Œ<code>const</code>å£°æ˜ã€‚</p>
<p><code>final</code>è¡¨ç¤ºå•ä¸ªèµ‹å€¼ï¼Œä¸€æ—¦èµ‹å€¼ï¼Œå°±ä¸èƒ½è¢«æ”¹å˜ã€‚<br><code>const</code>è¡¨ç¤ºç¼–è¯‘æ—¶ç¡®å®šçš„å€¼ï¼Œå¹¶ä¸”å¯¹è±¡ä¼šè¢«å†»ç»“è€Œå®Œå…¨ä¸å¯å˜ã€‚</p>
<p><a href="https://stackoverflow.com/questions/50431055/what-is-the-difference-in-between-const-and-final-keyword-in-dart" target="_blank" rel="noopener">stackoverflow</a></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>+<span class="number">2</span>;</span><br><span class="line"><span class="keyword">final</span> b = <span class="built_in">DateTime</span>.now();</span><br></pre></td></tr></table></figure>
<h1 id="å†…ç½®ç±»å‹"><a href="#å†…ç½®ç±»å‹" class="headerlink" title="å†…ç½®ç±»å‹"></a>å†…ç½®ç±»å‹</h1><ul>
<li>numbers</li>
<li>strings</li>
<li>booleans</li>
<li>lists(Array)</li>
<li>sets</li>
<li>maps</li>
<li>runes (Unicode characters in a string)</li>
<li>symbols</li>
</ul>
<p>å¯ä»¥é€šè¿‡<code>x.runtimeType</code>æ¥è·å–å¯¹è±¡çš„ç±»å‹</p>
<h2 id="number"><a href="#number" class="headerlink" title="number"></a>number</h2><p>Dartçš„numberæœ‰ä¸¤ç§ç±»å‹: <code>int</code> å’Œ <code>double</code></p>
<p>ç®€å•çš„åŒºåˆ†ï¼Œå°çš„æ•´æ•°ç”¨<code>int</code>,æµ®ç‚¹æ•°ç”¨<code>double</code>ã€‚ä¸€èˆ¬ç›´æ¥ç”¨<code>var</code>å£°æ˜çš„è¯ï¼Œä¼šæ ¹æ®ä½ å£°æ˜æ—¶çš„ç±»å‹åšæ¨æ–­ï¼Œæ‰€ä»¥å¦‚æœå£°æ˜å’Œåé¢ä½¿ç”¨ä¸ä¸€æ ·çš„è¯ï¼Œå»ºè®®æ˜¾å¼å£°æ˜.ä¾‹</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>; <span class="comment">// è¿™é‡ŒDartä¼šæ¨æ–­æ˜¯intç±»å‹</span></span><br><span class="line">x = <span class="number">2.0</span>; <span class="comment">// æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥æ¢æˆè¿™ä¸¤ç§</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1.0</span>; </span><br><span class="line"><span class="built_in">double</span> x = <span class="number">1</span>;  <span class="comment">// ç›¸å½“äº double x = 1.0;</span></span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²è½¬æ•°å­—"><a href="#å­—ç¬¦ä¸²è½¬æ•°å­—" class="headerlink" title="å­—ç¬¦ä¸²è½¬æ•°å­—"></a>å­—ç¬¦ä¸²è½¬æ•°å­—</h3><p>åœ¨Darté‡Œé¢ï¼Œå¦‚æœå­—ç¬¦ä¸²å’Œæ•°å­—ç›¸åŠ ï¼Œä¼šæŠ¥é”™ï¼Œè¿™ä¸€ç‚¹å’Œjséšå¼è½¬æ¢ä¸åŒã€‚</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> one = <span class="built_in">int</span>.parse(<span class="string">'1'</span>); <span class="comment">// String 2 int</span></span><br><span class="line"><span class="keyword">var</span> onePointOne = <span class="built_in">double</span>.parse(<span class="string">'1.1'</span>); <span class="comment">// string 2 double</span></span><br><span class="line"><span class="built_in">String</span> oneAsString = <span class="number">1.</span>toString(); <span class="comment">// int 2 String</span></span><br><span class="line"><span class="built_in">String</span> piAsString = <span class="number">3.141592654</span>.toStringAsFixed(<span class="number">2</span>); <span class="comment">// double 2 string 3.14</span></span><br></pre></td></tr></table></figure>
<h2 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h2><p>å¯ä»¥ç”¨<code>&#39;</code>æˆ–<code>&quot;</code>æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚</p>
<p>å­—ç¬¦ä¸²å†…éƒ¨çš„å˜é‡å¯ä»¥ç”¨<code>$value</code>æˆ–è€…<code>${value}</code>ï¼Œä¸€èˆ¬æ¥è¯´å¦‚æœæ˜¯å˜é‡ï¼Œç›´æ¥ç”¨<code>$value</code>è¡¨ç¤ºï¼Œè¡¨è¾¾å¼ç”¨<code>${value}</code>ï¼Œä¾‹:</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'String1'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"String2"</span>;</span><br><span class="line"><span class="keyword">assert</span>(<span class="string">'String1 STRING2'</span> == <span class="string">'<span class="subst">$a</span> <span class="subst">$&#123;b.toUpperCase()&#125;</span>'</span>);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦åˆ›å»ºå¤šè¡Œçš„å­—ç¬¦ä¸²ï¼Œåˆ™å¯ä»¥ç”¨<code>&#39;&#39;&#39;</code>æˆ–<code>&quot;&quot;&quot;</code>,<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">'''</span></span><br><span class="line"><span class="string">hi</span></span><br><span class="line"><span class="string">I'm Jsonz</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">'</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Booleans"><a href="#Booleans" class="headerlink" title="Booleans"></a>Booleans</h2><p><code>Dart</code>é‡Œé¢<code>if</code>ä¸<code>assert</code>éƒ½åªä¼šå¯¹ <code>bool</code>åšåˆ¤æ–­ï¼Œè¿™ç‚¹åŒæ ·ä¸jsçš„éšå¼è½¬æ¢ä¸åŒã€‚<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fullName = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">assert</span>(fullName); <span class="comment">// error</span></span><br><span class="line"><span class="keyword">assert</span>(fullName.isEmpty); </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hitPoints = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span>(hitPoints &lt;= <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> iMeantToDoThis = <span class="number">0</span> / <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span>(iMeantToDoThis.isNaN);</span><br></pre></td></tr></table></figure></p>
<h2 id="Lists-æ—¢jsé‡Œé¢çš„æ•°ç»„"><a href="#Lists-æ—¢jsé‡Œé¢çš„æ•°ç»„" class="headerlink" title="Lists (æ—¢jsé‡Œé¢çš„æ•°ç»„)"></a>Lists (æ—¢jsé‡Œé¢çš„æ•°ç»„)</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>, <span class="string">'4'</span>]; <span class="comment">// æ™®é€šlist</span></span><br><span class="line"><span class="keyword">var</span> typeList = &lt;<span class="built_in">int</span>&gt;[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; <span class="comment">// å¸¦ç±»å‹çš„list</span></span><br><span class="line"><span class="keyword">assert</span>(list.length == <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">typeList[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">assert</span>(typeList[<span class="number">0</span>] == <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºconstç±»å‹çš„list</span></span><br><span class="line"><span class="keyword">var</span> constantList = <span class="keyword">const</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">constantList[<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥è¿™æ ·åˆ›å»º</span></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = <span class="keyword">const</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<h2 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h2><p><code>Sets</code>ä¼šæ ¹æ®åˆå§‹åŒ–æ¨æ–­ç±»å‹ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­<code>halogens</code>ä¼šåˆ¤æ–­ä¸º<code>String</code>ç±»å‹ï¼Œè¿™æ—¶å€™æ·»åŠ å…¶ä»–ç±»å‹çš„å€¼å°±ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> halogens = &#123;<span class="string">'fluorine'</span>, <span class="string">'chlorine'</span>, <span class="string">'bromine'</span>, <span class="string">'iodine'</span>, <span class="string">'astatine'</span>&#125;;</span><br><span class="line">halogens.add(<span class="number">1</span>); <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦åˆ›å»ºä¸€ä¸ªç©ºçš„setï¼Œæ¯”å¦‚è¦æœ‰ç±»å‹å‰ç¼€ï¼Œä¸ç„¶ä¼šè¢«åˆ¤æ–­ä¸ºåˆ›å»ºçš„æ˜¯Mapsè€Œä¸æ˜¯Sets</span></span><br><span class="line"><span class="keyword">var</span> name = &#123;&#125;; <span class="comment">// mapï¼Œ not a set</span></span><br><span class="line"><span class="keyword">var</span> names = &lt;<span class="built_in">String</span>&gt;&#123;&#125;; <span class="comment">// String set</span></span><br><span class="line"><span class="built_in">Set</span>&lt;<span class="built_in">String</span>&gt; name2 = &#123;&#125;; <span class="comment">// Srting set</span></span><br></pre></td></tr></table></figure>
<p><code>Set</code>é€šè¿‡<code>add</code>æˆ–è€…<code>addAll</code>æ·»åŠ <code>item</code>ã€‚<br>å¯ä»¥é€šè¿‡<code>const</code>å…³é”®å­—åˆ›å»ºç¼–è¯‘å¸¸é‡<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// add ä¸ addAll</span></span><br><span class="line"><span class="keyword">var</span> el = &lt;<span class="built_in">String</span>&gt;&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> el2 = &#123;<span class="string">'a'</span>, <span class="string">'b'</span>&#125;;</span><br><span class="line">el.add(<span class="string">'c'</span>);</span><br><span class="line">el.addAll(el2);</span><br><span class="line"><span class="keyword">assert</span>(el.length == <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// const</span></span><br><span class="line"><span class="keyword">final</span> constantSet = <span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="string">'a'</span>, <span class="string">'b'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Maps-ç›¸å½“äºjsçš„å¯¹è±¡"><a href="#Maps-ç›¸å½“äºjsçš„å¯¹è±¡" class="headerlink" title="Maps(ç›¸å½“äºjsçš„å¯¹è±¡)"></a>Maps(ç›¸å½“äºjsçš„å¯¹è±¡)</h2><p><code>Dart</code>çš„<code>Map</code>ä¸é™åˆ¶<code>key</code>çš„ç±»å‹ï¼Œæ„å‘³ç€å¦‚æœæ˜¯<code>number</code>ç±»å‹ï¼Œä¸éœ€è¦å’Œ<code>js</code>ä¸€æ ·ï¼Œç”¨<code>[]</code>åŒ…ç€ã€‚</p>
<p><code>Map</code>ä¹Ÿä¼šæ¨æ–­<code>key</code>å’Œ<code>value</code>çš„ç±»å‹,æ¯”å¦‚ä¸‹é¢çš„ <code>map1</code> å°±æ˜¯<code>key</code>ä¸º<code>int</code>ç±»å‹ï¼Œ<code>value</code>ä¸º<code>string</code>ç±»å‹çš„<code>map</code>.</p>
<p>å¦‚æœè·å–æŸä¸ª<code>map</code>æ²¡æœ‰çš„<code>value</code>,åˆ™<code>value</code>é»˜è®¤æ˜¯<code>null</code>ã€‚è¿™ç‚¹å’Œ<code>js</code>çš„<code>undefined</code>ä¸åŒï¼Œå¯ä»¥å¯¹æ¯”å˜é‡åˆå§‹åŒ–çš„æƒ…å†µç±»æ¨ã€‚</p>
<p><code>map</code>ä¹Ÿæœ‰<code>length</code>å±æ€§ï¼Œç±»æ¯”<code>js</code>çš„<code>Object.keys(obj).length</code>.</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// mapçš„keyå¯ä»¥æ˜¯ä»»æ„ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> gif = &#123;</span><br><span class="line">  <span class="string">'a'</span>: <span class="string">'b'</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="number">3</span>: <span class="string">'4'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;int&gt;: &lt;String&gt; ç±»å‹çš„map</span></span><br><span class="line"><span class="keyword">var</span> map1 = &#123;</span><br><span class="line">  <span class="number">1</span>: <span class="string">'2'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼–è¯‘æ—¶å¸¸é‡map</span></span><br><span class="line"><span class="keyword">final</span> constantMap = <span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="number">2</span>: <span class="string">'2'</span>,</span><br><span class="line">&#125;</span><br><span class="line">constantMap[<span class="number">2</span>] = <span class="string">'3'</span>; <span class="comment">// error</span></span><br></pre></td></tr></table></figure>
<h2 id="Runes"><a href="#Runes" class="headerlink" title="Runes"></a>Runes</h2><p>emmm è¿™ä¸ªæˆ‘çš„ç†è§£æ˜¯UTF-32ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œç®€å•ç†è§£å°±æ˜¯å¯ä»¥æ”¯æŒæ›´å¤šç±»å‹çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚emojiï¼Œå·¥ä½œç”¨åˆ°å†å»æŸ¥ã€‚<br>æ¯”å¦‚<code>&#39;\u{1f44f}&#39;;</code>æ˜¯<code>ğŸ‘</code>,<code>\u2665</code>æ˜¯<code>â™¥</code>ã€‚</p>
<h2 id="Symbols-ç±»æ¯”jsçš„Symbol"><a href="#Symbols-ç±»æ¯”jsçš„Symbol" class="headerlink" title="Symbols (ç±»æ¯”jsçš„Symbol)"></a>Symbols (ç±»æ¯”jsçš„Symbol)</h2><p>å¯¹<code>Symbol</code>çš„ç†è§£å¯ä»¥ç›´æ¥çœ‹<a href="https://es6.ruanyifeng.com/#docs/symbol" target="_blank" rel="noopener">é˜®ä¸€å³°çš„ES6-Symbol</a>ï¼ŒåŸºæœ¬çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚</p>
<p><code>Dart</code>çš„<code>Symbol</code>æ˜¯<code>compoile-time constants</code>ï¼Œå°±æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚<br>ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥åœ¨æ ‡è¯†å‰é¢åŠ ä¸ª<code>#</code></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> symbol = #symbol;</span><br></pre></td></tr></table></figure>
<h1 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h1><p>Dartæ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€ä»¥å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§<code>Function</code>ç±»å‹çš„å¯¹è±¡ã€‚</p>
<p>å‚æ•°çš„é»˜è®¤å€¼éƒ½ä¸º<code>null</code>ã€‚</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸºæœ¬ç”¨æ³•</span></span><br><span class="line"><span class="built_in">bool</span> isNaN(<span class="built_in">int</span> number) &#123;</span><br><span class="line">  <span class="keyword">return</span> number.isNaN;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isNaN2(number) &#123;</span><br><span class="line">  <span class="keyword">return</span> number.isNaN;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> isNaN3(<span class="built_in">int</span> number)=&gt; number.isNaN;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">void</span> enableFlags(&#123;</span><br><span class="line">  <span class="built_in">bool</span> bold,</span><br><span class="line">  <span class="built_in">bool</span> hidden</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="built_in">print</span>(bold);</span><br><span class="line">  <span class="built_in">print</span>(hidden);</span><br><span class="line">&#125;</span><br><span class="line">enableFlags(bold: <span class="keyword">true</span>, hidden: <span class="keyword">false</span>); <span class="comment">// true false</span></span><br><span class="line">enableFlags(hidden: <span class="keyword">false</span>, bold: <span class="keyword">true</span>); <span class="comment">// true false</span></span><br><span class="line">enableFlags(hidden: <span class="keyword">false</span>); <span class="comment">// null false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ç§å¯¹å‚æ•°çš„é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚, []è¡¨ç¤ºå¯é€‰å‚æ•°</span></span><br><span class="line"><span class="keyword">void</span> enableFlags2(<span class="built_in">bool</span> bold, <span class="built_in">bool</span> hidden, [<span class="built_in">String</span> device]) &#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">enableFlags2(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="string">'device'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="keyword">void</span> enableFlags(&#123;</span><br><span class="line">  <span class="built_in">bool</span> bold= <span class="keyword">false</span>,</span><br><span class="line">  <span class="built_in">bool</span> hidden= <span class="keyword">false</span>,</span><br><span class="line">&#125;) &#123;&#125;</span><br><span class="line">enableFlags(hidden: <span class="keyword">true</span>); <span class="comment">// false true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ ä¹Ÿå¯ä»¥ç”¨ list å’Œ mapä½œä¸ºé»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="keyword">void</span> doStuff(&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = <span class="keyword">const</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; gifts = <span class="keyword">const</span> &#123;</span><br><span class="line">    <span class="string">'first'</span>: <span class="string">'paper'</span>,</span><br><span class="line">    <span class="string">'second'</span>: <span class="string">'cotton'</span>,</span><br><span class="line">    <span class="string">'third'</span>: <span class="string">'leather'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'list: <span class="subst">$list</span>'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'gifts: <span class="subst">$gifts</span>'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="main-å‡½æ•°"><a href="#main-å‡½æ•°" class="headerlink" title="main å‡½æ•°"></a>main å‡½æ•°</h2><p>æ¯ä¸ªappéƒ½éœ€è¦åœ¨æœ€é¡¶å±‚æä¾›ä¸€ä¸ª<code>main</code>å‡½æ•°ç”¨äºå…¥å£å‡½æ•°ï¼Œ<code>main</code>å‡½æ•°æä¾›ä¸€ä¸ªvoidè¿”å›å€¼ä¸<code>List&lt;String&gt;</code>å‚æ•°(å‚æ•°æŒ‡çš„æ˜¯å‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°)ã€‚</p>
<h2 id="å‡½æ•°ä¸ºç¬¬ä¸€å…¬æ°‘"><a href="#å‡½æ•°ä¸ºç¬¬ä¸€å…¬æ°‘" class="headerlink" title="å‡½æ•°ä¸ºç¬¬ä¸€å…¬æ°‘"></a>å‡½æ•°ä¸ºç¬¬ä¸€å…¬æ°‘</h2><p>å’Œjsä¸€æ ·ï¼ŒDartä¹Ÿæ”¯æŒå°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼ˆé«˜é˜¶å‡½æ•°ï¼‰ã€‚<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> printE(<span class="built_in">int</span> e) &#123;</span><br><span class="line">  <span class="built_in">print</span>(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">list.forEach(printE);</span><br></pre></td></tr></table></figure></p>
<h2 id="åŒ¿åå‡½æ•°ã€ä½œç”¨åŸŸä¸é—­åŒ…"><a href="#åŒ¿åå‡½æ•°ã€ä½œç”¨åŸŸä¸é—­åŒ…" class="headerlink" title="åŒ¿åå‡½æ•°ã€ä½œç”¨åŸŸä¸é—­åŒ…"></a>åŒ¿åå‡½æ•°ã€ä½œç”¨åŸŸä¸é—­åŒ…</h2><p>è¿™å‡ ä¸ªå’Œjsæ˜¯ä¸€æ ·çš„ï¼Œæ²¡å•¥å¥½è¯´</p>
<p>å¯¹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸæœ‰ç–‘é—®çš„å¯ä»¥çœ‹<a href="https://github.com/mqyqingfeng/Blog/issues/3" target="_blank" rel="noopener">è¿™ç¯‡</a></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">list.forEach((item)=&gt; <span class="built_in">print</span>(item));</span><br><span class="line">list.forEach((item) &#123;<span class="built_in">print</span>(item);&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯æ³•ä½œç”¨åŸŸ</span></span><br><span class="line">a() &#123;</span><br><span class="line">  <span class="keyword">var</span> a1 = <span class="keyword">true</span>;</span><br><span class="line">  b() &#123;</span><br><span class="line">    <span class="keyword">var</span> b1 = <span class="keyword">true</span>;</span><br><span class="line">    c() &#123;</span><br><span class="line">      <span class="keyword">var</span> c1 = <span class="keyword">true</span>;</span><br><span class="line">      <span class="keyword">assert</span>(a1);</span><br><span class="line">      <span class="keyword">assert</span>(b1);</span><br><span class="line">      <span class="keyword">assert</span>(c1);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é—­åŒ…</span></span><br><span class="line"><span class="built_in">Function</span> makeAdder(<span class="built_in">num</span> addBy) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">num</span> i) =&gt; addBy + i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// Create a function that adds 2.</span></span><br><span class="line">  <span class="keyword">var</span> add2 = makeAdder(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Create a function that adds 4.</span></span><br><span class="line">  <span class="keyword">var</span> add4 = makeAdder(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">assert</span>(add2(<span class="number">3</span>) == <span class="number">5</span>);</span><br><span class="line">  <span class="keyword">assert</span>(add4(<span class="number">3</span>) == <span class="number">7</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‡½æ•°ç±»å‹-Testing-functions-for-equality"><a href="#å‡½æ•°ç±»å‹-Testing-functions-for-equality" class="headerlink" title="å‡½æ•°ç±»å‹(Testing functions for equality)"></a>å‡½æ•°ç±»å‹(Testing functions for equality)</h2><p>çœ‹ç€è‡ªå·±ç†è§£ä¸€ä¸‹å°±å¥½<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> foo() &#123;&#125; <span class="comment">// A top-level function</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> bar() &#123;&#125; <span class="comment">// A static method</span></span><br><span class="line">  <span class="keyword">void</span> baz() &#123;&#125; <span class="comment">// An instance method</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> x;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Comparing top-level functions.</span></span><br><span class="line">  x = foo;</span><br><span class="line">  <span class="keyword">assert</span>(foo == x);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Comparing static methods.</span></span><br><span class="line">  x = A.bar;</span><br><span class="line">  <span class="keyword">assert</span>(A.bar == x);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Comparing instance methods.</span></span><br><span class="line">  <span class="keyword">var</span> v = A(); <span class="comment">// Instance #1 of A</span></span><br><span class="line">  <span class="keyword">var</span> w = A(); <span class="comment">// Instance #2 of A</span></span><br><span class="line">  <span class="keyword">var</span> y = w;</span><br><span class="line">  x = w.baz;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// These closures refer to the same instance (#2),</span></span><br><span class="line">  <span class="comment">// so they're equal.</span></span><br><span class="line">  <span class="keyword">assert</span>(y.baz == x);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// These closures refer to different instances,</span></span><br><span class="line">  <span class="comment">// so they're unequal.</span></span><br><span class="line">  <span class="keyword">assert</span>(v.baz != w.baz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å‡½æ•°è¿”å›å€¼"><a href="#å‡½æ•°è¿”å›å€¼" class="headerlink" title="å‡½æ•°è¿”å›å€¼"></a>å‡½æ•°è¿”å›å€¼</h2><p>å‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œåˆ™ä¼šè¿”å›nullã€‚<em><code>Dart</code>é‡Œé¢æ²¡æœ‰<code>undefined</code>çš„æ¦‚å¿µï¼Œç›®å‰çœ‹æ¥æ‰€æœ‰å¯¹äºjsçš„<code>undefined</code>éƒ½å¯ä»¥æ›¿æ¢æˆ<code>null</code></em></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">foo() &#123;&#125;</span><br><span class="line"><span class="keyword">assert</span>(foo() == <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>
<h1 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h1><h2 id="ç±»å‹æµ‹è¯•è¿ç®—ç¬¦"><a href="#ç±»å‹æµ‹è¯•è¿ç®—ç¬¦" class="headerlink" title="ç±»å‹æµ‹è¯•è¿ç®—ç¬¦"></a>ç±»å‹æµ‹è¯•è¿ç®—ç¬¦</h2><p><code>as</code>ã€<code>is</code>ã€<code>is!</code>ç±»ä¼¼ <code>instanceof</code></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> firstName= <span class="string">'2'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a <span class="keyword">is</span> Person) &#123; <span class="comment">// true</span></span><br><span class="line">  a.firstName = <span class="string">'b'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (b <span class="keyword">is</span>! Person) &#123; <span class="comment">// true</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'b is not person'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äº if (a is Person) xxx çš„ç¼©å†™</span></span><br><span class="line"><span class="comment">// å¦‚æœ a æ˜¯ Personçš„å®ä¾‹ï¼Œå°±ä¼šæ‰§è¡Œ firstName = 'Bob'</span></span><br><span class="line"><span class="comment">// å¦‚æœ a ä¸æ˜¯ Personçš„å®ä¾‹ï¼Œä¼šæŠ›é”™!</span></span><br><span class="line">(a <span class="keyword">as</span> Person).firstName = <span class="string">'Bob'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†é…è¿ç®—ç¬¦"><a href="#åˆ†é…è¿ç®—ç¬¦" class="headerlink" title="åˆ†é…è¿ç®—ç¬¦"></a>åˆ†é…è¿ç®—ç¬¦</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">a = value; <span class="comment">// ç›´æ¥æŠŠvalueåˆ†é…ç»™a</span></span><br><span class="line">b ??= value; <span class="comment">// å¦‚æœbä¸ºnullï¼Œåˆ™åˆ†é…valueç»™bï¼Œå¦åˆ™ä¸æ”¹å˜ã€‚è¿™é‡Œç»å¸¸æ˜¯å‡½æ•°é‡Œé¢çš„é»˜è®¤å€¼å¤„ç†ï¼Œç±»ä¼¼jsçš„ var obj = obj || &#123;&#125;;</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ç›®è¿ç®—ç¬¦"><a href="#ä¸‰ç›®è¿ç®—ç¬¦" class="headerlink" title="ä¸‰ç›®è¿ç®—ç¬¦"></a>ä¸‰ç›®è¿ç®—ç¬¦</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// condition? expr1: expr2</span></span><br><span class="line"><span class="keyword">var</span> vis = isPublic? <span class="string">'public'</span>: <span class="string">'private'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// expr1?? pxpr2 å¦‚æœexpr1ä¸ºNullï¼Œå°±è¿”å›expr2ï¼Œå¦åˆ™æ˜¯expr1ã€‚æœ‰ç‚¹ç±»ä¼¼åŠ å¼ºç‰ˆçš„jsé‡Œé¢çš„ a=&gt; a || 'test'</span></span><br><span class="line"><span class="built_in">String</span> playName(<span class="built_in">String</span> name)=&gt; name?? <span class="string">'guest'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Cascade-notation"><a href="#Cascade-notation" class="headerlink" title="Cascade notation"></a>Cascade notation</h2><p><code>Cascade(..)</code> æœ‰ç‚¹åƒé“¾å¼å†™æ³•çš„è¯­æ³•ç³–,å…è®¸æ‚¨å¯¹åŒä¸€å¯¹è±¡è¿›è¡Œä¸€ç³»åˆ—æ“ä½œ,ä¸å¾—ä¸è¯´è¿™äº›è¯­æ³•ç³–çœŸéªšâ€¦</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .. å†™æ³•</span></span><br><span class="line">querySelect(<span class="string">'#confirm'</span>)</span><br><span class="line">  ..text = <span class="string">'Confirm'</span></span><br><span class="line">  ..classes.add(<span class="string">'important'</span>)</span><br><span class="line">  ..onClick.listen((e)=&gt; <span class="built_in">window</span>.alter(<span class="string">'Confirmed!'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line"><span class="keyword">var</span> button = <span class="built_in">querySelector</span>(<span class="string">'#confirm'</span>);</span><br><span class="line">button.text = <span class="string">'Confirm'</span>;</span><br><span class="line">button.classes.add(<span class="string">'important'</span>);</span><br><span class="line">button.onClick.listen((e)=&gt; <span class="built_in">window</span>.alter(<span class="string">'Confirmed!'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ è¿˜å¯ä»¥éšæ„åµŒå¥—</span></span><br><span class="line"><span class="keyword">final</span> addressBook = (AddressBookBuilder()</span><br><span class="line">  ..name = <span class="string">'jenny'</span></span><br><span class="line">  ..email = <span class="string">'jsonz@qq.com'</span></span><br><span class="line">  ..phone = (</span><br><span class="line">    PhoneNumberBuilder()</span><br><span class="line">      ..number = <span class="string">'13560042631'</span></span><br><span class="line">      ..label = <span class="string">'phone'</span></span><br><span class="line">      .build()</span><br><span class="line">  )</span><br><span class="line">  .build();</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="å…¶ä»–æ“ä½œç¬¦"><a href="#å…¶ä»–æ“ä½œç¬¦" class="headerlink" title="å…¶ä»–æ“ä½œç¬¦"></a>å…¶ä»–æ“ä½œç¬¦</h2><p><code>()</code> å‡½æ•°è°ƒç”¨<br><code>[]</code> list<br><code>.</code> å±æ€§<br><code>?.</code> ä¸€èˆ¬ç”¨äºå±æ€§èµ‹å€¼ï¼Œæ¯”å¦‚ <code>person?.name = &#39;jsonz&#39;</code>ï¼ˆå¦‚æœpersonä¸ä¸ºnull, åˆ™è®¾ç½®person.nameä¸ºjsonzï¼Œé¿å…å·¦è¾¹personä¸ºnullæ—¶æŠ¥é”™ï¼‰ã€‚</p>
<h1 id="æ§åˆ¶æµç¨‹è¯­å¥"><a href="#æ§åˆ¶æµç¨‹è¯­å¥" class="headerlink" title="æ§åˆ¶æµç¨‹è¯­å¥"></a>æ§åˆ¶æµç¨‹è¯­å¥</h1><p>è¿™é‡Œåªä¼šæŒ‘ä¸jsä¸åŒçš„æ¥è®²</p>
<h2 id="if-else"><a href="#if-else" class="headerlink" title="if..else"></a>if..else</h2><p>ä¸åŒç‚¹æ˜¯<code>Dart</code>ä¸ä¼šéšå¼è½¬æ¢ï¼Œæ‰€ä»¥åˆ¤æ–­çš„å†…å®¹åªèƒ½æ˜¯å¸ƒå°”å€¼<br><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">false</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">false</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h2><h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> collection = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">in</span> collection) &#123;</span><br><span class="line">  <span class="built_in">print</span>(x); <span class="comment">// 'a' 'b' 'c'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="while-amp-amp-do-while"><a href="#while-amp-amp-do-while" class="headerlink" title="while &amp;&amp; do-while"></a>while &amp;&amp; do-while</h3><h3 id="break-amp-amp-continue"><a href="#break-amp-amp-continue" class="headerlink" title="break &amp;&amp; continue"></a>break &amp;&amp; continue</h3><p>break åœæ­¢å¾ªç¯<br>continueè·³è¿‡å½“å‰æ¬¡ï¼Œè¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯</p>
<h2 id="Switch-amp-amp-case"><a href="#Switch-amp-amp-case" class="headerlink" title="Switch &amp;&amp; case"></a>Switch &amp;&amp; case</h2><p>switch å¯ä»¥å¯¹æ¯” <code>string</code>ã€<code>number</code>ã€<code>bool</code>ä½†æ˜¯ä¸èƒ½æ··ç€ç”¨ã€‚</p>
<h2 id="Assert-æ–­è¨€"><a href="#Assert-æ–­è¨€" class="headerlink" title="Assert(æ–­è¨€)"></a>Assert(æ–­è¨€)</h2><p>å†™è¿‡å•å…ƒæµ‹è¯•çš„åº”è¯¥å¯¹<code>assert</code>ä¸é™Œç”Ÿï¼Œå¦‚æœå¸ƒå°”æ¡ä»¶ä¸º<code>false</code>åˆ™<code>assert</code>ä¼šä¸­æ–­æ‰§è¡Œã€‚<br>ä¸è¿‡åªä¼šåœ¨å¼€å‘æ¨¡å¼èµ·ä½œç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸ä¼šæ‰§è¡Œã€‚</p>
<h1 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h1><h2 id="Throw-æŠ›é”™"><a href="#Throw-æŠ›é”™" class="headerlink" title="Throw æŠ›é”™"></a>Throw æŠ›é”™</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">throw</span> FormatException(<span class="string">'expected at least 1 section'</span>);</span><br><span class="line"><span class="keyword">throw</span> <span class="string">'out of llamas!'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="catch"><a href="#catch" class="headerlink" title="catch"></a>catch</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  breedMoreLlamas();</span><br><span class="line">&#125; <span class="keyword">on</span> OutOfLlamasException &#123;</span><br><span class="line">  <span class="comment">// A specific exception</span></span><br><span class="line">  buyMoreLlamas();</span><br><span class="line">&#125; <span class="keyword">on</span> Exception <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="comment">// Anything else that is an exception</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Unknown exception: <span class="subst">$e</span>'</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e, s) &#123;</span><br><span class="line">  <span class="comment">// No specified type, handles all</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Something really unknown: <span class="subst">$e</span>'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Stack trace: \n <span class="subst">$s</span>'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h2><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  someThing()</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Error: <span class="subst">$e</span>'</span>);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  clean();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>Dart</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>April</title>
    <url>/2019/04/April/</url>
    <content><![CDATA[<p>åœ¨æ·±åœ³å›å¹¿å·çš„é«˜é“ä¸Šå†™çš„</p>
<p>å››æœˆä»½å¥½åƒè¿‡çš„ç‰¹åˆ«æ··</p>
<h1 id="å…³äºè‡ªè€ƒ"><a href="#å…³äºè‡ªè€ƒ" class="headerlink" title="å…³äºè‡ªè€ƒ"></a>å…³äºè‡ªè€ƒ</h1><p>è‡ªè€ƒçš„æƒ…å†µ emmm é«˜æ•°å’Œæ¦‚ç‡è®ºç›´æ¥ç¼ºè€ƒï¼Œå› ä¸ºå»äº†å¤§æ¦‚ç‡æ˜¯å‘å‘†ä¸¤å°æ—¶ï¼Œè¿˜ä¸å¦‚åšå…¶ä»–äº‹æƒ…ã€‚<br>æ•°æ®ç»“æ„æ¯”æƒ³è±¡ä¸­çš„ç®€å•ï¼Œè™½ç„¶è‡ªå·±çš„ç®—æ³•ä¸æ€ä¹ˆæ ·ï¼Œä½†æ˜¯è€ƒè¯•å¥½åƒå¯¹ç®—æ³•è¦æ±‚ä¸é«˜ï¼Œå‰©ä¸‹çš„å°±æ˜¯è€ƒ80åˆ†è¿˜æ˜¯90åˆ†çš„åŒºåˆ«äº†<br>é©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬æ¦‚è®ºæ¦‚è¿° emmmm è¿™ä¸ªç©æ„ï¼ŒèƒŒçš„ä¸œè¥¿ä¸è€ƒï¼Œè€ƒçš„ä¸œè¥¿æ²¡èƒŒï¼Œå¸Œæœ›èƒ½ä½åˆ†é£˜è¿‡å§</p>
<p>æ¥ä¸‹æ¥åº”è¯¥ä¼šé€‰ <code>è½¯ä»¶å·¥ç¨‹</code>è¿˜æœ‰ä¸€ç§‘å…³äºè®¡ç®—æœºåŸºç¡€çš„ï¼Œè¿˜æœ‰ä¸€ç§‘æ•°å­¦ç›¸å…³ï¼Œä¸€ç§‘å¾…è€ƒè™‘ã€‚åæœˆä»½åŠ æ²¹ğŸ’ªï¼Œå°±ç®—è¿‡å››ç§‘ä»Šå¹´çš„è®¡åˆ’ä¹Ÿå®Œæˆä¸äº† â•®(â•¯â–½â•°)â•­</p>
<h1 id="å…³äºå·¥ä½œ"><a href="#å…³äºå·¥ä½œ" class="headerlink" title="å…³äºå·¥ä½œ"></a>å…³äºå·¥ä½œ</h1><p>å·²ç»æ¥è¿‘ä¸¤ä¸ªæœˆæ²¡æœ‰æ•²ä»£ç äº†ï¼Œæ€•ä¸‹å‘¨ä¸€å…¥èŒæ—¶è¦è¢«ç‚’â€¦ä¸€ç›´æƒ³ç€ä¸‡ä¸€äººå®¶å‘ç°æˆ‘æ˜¯èœé¸¡ç‚’äº†æˆ‘ä¸æ˜¯å¾ˆå°´å°¬ã€‚<br>ä»å¹¿å·æ¬å»æ·±åœ³ï¼Œä¹‹å‰äº¤çš„ç¤¾ä¿ã€å…¬ç§¯é‡‘å•¥çš„å…¶å®åŸºæœ¬ä¸Šå°±åºŸäº†ã€‚å…¶å®æœ‰ç‚¹åƒæ–­äº†è‡ªå·±åè·¯äº†ï¼Œå¦‚æœä¸‹ä¸€ä»½å·¥ä½œä¸èƒ½è¿›åˆ°ç†æƒ³çš„å…¬å¸ï¼Œé‚£å…¶å®åŸºæœ¬ä¸Šå°±å¾ˆéš¾å†ä¸Šå‡ï¼Œåˆ°æ—¶å€™å†å‡ºå»å°±è¦èƒŒå¤–åŒ…çš„èƒŒæ™¯äº†ã€‚</p>
<p>é¢äº†CDCä¹‹åå°±æ²¡æœ‰æŠ•ç®€å†ï¼Œä¸è¿‡æ¸…æ˜è¿‡åè¿˜æ˜¯å»é¢äº†ä¸¤å®¶ï¼šfordealå’ŒYY</p>
<h2 id="fordeal"><a href="#fordeal" class="headerlink" title="fordeal"></a>fordeal</h2><p>fordealæ˜¯å› ä¸ºç»™çš„å¾…é‡å®åœ¨æ˜¯è¯±äººï¼ŒæŠ€æœ¯é¢ç”µè¯èŠäº†ä¸€ä¸ªå¤šå°æ—¶ä¹‹åè¿‡äº†ã€‚hré¢ç°åœºèŠäº†ä¸€å°æ—¶ï¼Œhrè¯´ä»–çº ç»“ï¼Œè®©æˆ‘å†å’Œä»–è€å¤§ç”µè¯é¢å¤šä¸€è½®ï¼Œè¿˜æ˜¯æŒ‚äº†ã€‚<br>hré¢ä¸€ç›´é—®çš„å°±æ˜¯å¸Œæœ›ä¸‹ä¸€å®¶å…¬å¸èƒ½ç»™ä½ ä»€ä¹ˆâ€¦emmmæˆ‘ä¹Ÿæ²¡å•¥é«˜è¦æ±‚ï¼ŒæŠ€æœ¯å¥½ç‚¹ï¼Œå¤§å®¶æœ‰ç‚¹è¿½æ±‚å°±å¥½äº†ã€‚</p>
<p>æŒ‚äº†è¿˜æ˜¯æŒºå¯æƒœçš„ï¼Œæ¯•ç«Ÿä¸€å¹´æœ€å¤š18ä¸ªæœˆæ‘†åœ¨é‚£é‡Œï¼Œä¸å¿ƒåŠ¨æ˜¯å‡çš„</p>
<h2 id="YY"><a href="#YY" class="headerlink" title="YY"></a>YY</h2><p>YYçš„è¯ï¼Œä¸å¾—ä¸è¯´maxå¯¹æˆ‘æŒºå¥½çš„ï¼Œåœ¨æ‹‰å‹¾çœ‹åˆ°æˆ‘æŠ•ç®€å†ä¹‹åå°±åœ¨å¾®ä¿¡å’Œæˆ‘èŠäº†ä¸€ä¸‹ï¼Œè®©æˆ‘ç›´æ¥å»é¢è¯•ã€‚é¢è¯•çš„æ—¶å€™ä¹Ÿæ²¡æœ‰å…·ä½“èŠæŠ€æœ¯ï¼Œä¹Ÿä¸ç”¨å†åšç¬”è¯•é¢˜äº†ï¼Œå°±é—®äº†æˆ‘</p>
<blockquote>
<p>å’Œå»å¹´å¯¹æ¯”ä½ æˆé•¿äº†ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>è¿™ç®€ç›´æ˜¯çµé­‚æ‹·é—®å•Šâ€¦æ¯”å¼ºå“¥çš„å¹´ç»ˆç»©æ•ˆè€ƒæ ¸è¿˜å°´å°¬â€¦ç¿»äº†18å¹´çš„å¹´ä¸­å’Œå¹´ç»ˆçš„ç»©æ•ˆè€ƒæ ¸è¡¨ï¼Œå‘ç°è¯´å…¶å®æŠ€æœ¯æ²¡æœ‰é•¿è¿›ï¼Œå¹³æ—¶ä¹Ÿåªæ˜¯åšä¸€äº›ä¸šåŠ¡æ€§çš„éœ€æ±‚ï¼Œè™½ç„¶è¿™ä¹Ÿæ˜¯æƒ³ç¦»èŒçš„åŸå› ï¼Œä½†æ˜¯å½’æ ¹åˆ°åº•è¿˜æ˜¯è‡ªå·±å¤ªå¼±äº†ã€‚</p>
<p>å¦‚æœçœŸçš„è‡ªå·±æœ‰è¶³å¤Ÿçš„å†³å¿ƒæƒ³å»æ”¹å˜è¿™äº›ä¸œè¥¿ï¼Œè‚¯å®šä¹Ÿæ˜¯å¯ä»¥è§£å†³çš„ï¼Œå¼ºå“¥ä¹Ÿæ²¡æœ‰é™åˆ¶æˆ‘çš„å‘æŒ¥ï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯è‡ªå·±é€‰æ‹©å®‰é€¸ä¸€ç›´æ‘¸é±¼ã€‚</p>
<p>emmm ä¸è¿‡maxä¹Ÿæ²¡è®©æˆ‘éš¾å ªå“ˆå“ˆå“ˆï¼Œè¿˜æ˜¯è®©å¦ä¸€ä¸ªåŒäº‹è¿›è¡ŒäºŒé¢ã€‚èŠäº†ä¸‹æ¥ä¸‹æ¥uedçš„æ–¹å‘æ˜¯webglã€‚è¿™ä¸€å—ä¸€æ¥ä¸æ˜¯æˆ‘æ„Ÿå…´è¶£çš„æ–¹å‘ï¼›äºŒæ¥æˆ‘æœ€è¿‘æ·±çŸ¥è‡ªå·±æ•°å­¦æ¸£ï¼Œç¡®å®æ²¡æœ‰ä¿¡å¿ƒåšã€‚</p>
<p>æœ€åmaxèµ°äº†é€šé“å¸®æˆ‘æ¨äº†å…¶ä»–éƒ¨é—¨ï¼Œhræ‰“ç”µè¯è¯´</p>
<blockquote>
<p>uedçš„åŒäº‹æŠŠä½ ç®€å†æ¨ç»™æˆ‘ï¼Œè¯´æŠ€æœ¯æŒºä¸é”™ï¼Œäººä¹Ÿé è°±</p>
</blockquote>
<p>é‚£å¿ƒé‡Œç®€ç›´æ˜¯ä¹æ»‹æ»‹çš„ å“ˆå“ˆå“ˆå“ˆã€‚ä¸è¿‡ä»Šå¤©å·²ç»åœ¨æ·±åœ³ç§Ÿäº†æˆ¿å­ï¼Œæ‰€ä»¥å°±ç®—äº†ï¼Œä¸æ‰“ç®—å†é¢è¯•äº†ã€‚yy uedä¼°è®¡ä»¥åæ˜¯æ²¡æœ‰æœºä¼šå†è¿›äº†ï¼Œåé¢å†åšå°±æ˜¯å››äº”å¹´ç»éªŒï¼Œå¯èƒ½ä»¥åéƒ½æ˜¯èµ°ä¸šåŠ¡è¿™ä¸€å—è·¯çº¿äº†ã€‚</p>
<h2 id="CDC"><a href="#CDC" class="headerlink" title="CDC"></a>CDC</h2><p>emmmm å…¶å®é€‰æ‹©å»æ·±åœ³åšå¤–åŒ…ä»”ä¸ç»§ç»­é¢çš„ä¸€ä¸ªå¾ˆå¤§çš„åŸå› æ˜¯ï¼Œleaderç»™æˆ‘çš„æ„Ÿè§‰å¾ˆé è°±ï¼Œæˆ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒæŒ‘leaderçš„äººï¼ˆé¢ç§Ÿç§Ÿè½¦å…¥èŒæ˜¯å› ä¸ºæ˜¯è´¤å“¥é¢æˆ‘çš„ï¼ŒæŠ€æœ¯äººéƒ½è´¼é è°±ï¼‰ã€‚<br>ç„¶åcdc leaderæœ‰å‡ ä¸ªç»†èŠ‚ç‚¹</p>
<p>ç¬¬ä¸€ä¸ªæ˜¯ç›´å±leaderåœ¨å¾®ä¿¡å’Œæˆ‘è¯´äº† <strong>åç»­ä½ å¾€ç§»åŠ¨ç«¯æ–¹å‘å‘å±•å§ï¼Œåˆ°æ—¶åº”è¯¥æ˜¯æˆ‘åšä½ å¯¼å¸ˆ</strong> ã€‚è¿™ä¸ªç»†èŠ‚æ˜¯å› ä¸ºæˆ‘åœ¨é¢è¯•çš„æ—¶å€™ï¼Œè¯´äº†æˆ‘åé¢ä¸ªäººæ¯”è¾ƒæœŸæœ›çš„æ–¹å‘ä¸€ä¸ªæ˜¯nativeæ–¹å‘ï¼Œä¸€ä¸ªæ˜¯serveræ–¹å‘ã€‚zawaè®°ä½äº† &amp;&amp; å’Œæˆ‘è¯´äº†ï¼Œæ‰€ä»¥å½“æ—¶å°±å¿ƒåŠ¨äº†ä¸€ä¸‹ï¼Œç„¶åè‹ä¸‰åŒå­¦ä¹Ÿè¯´è¿™äººç»™å¥¹çš„æ„Ÿè§‰æ˜¯ <strong>é è°±ï¼Œä¸æ˜¯æµ®å¤¸çš„äºº</strong>ã€‚è™½ç„¶ maxå’Œjlç»™æˆ‘çš„æ„Ÿè§‰ä¹Ÿå¾ˆä¸é”™ï¼Œä¸è¿‡æ–¹å‘ä¸åŒå°±ä»¥åæœ‰æœºä¼šå†è§å§ã€‚</p>
<p>ç¬¬äºŒä¸ªæ˜¯leaderâ€™s leader åœ¨é¢è¯•çš„æ—¶å€™å’Œæˆ‘èŠäº†å¾ˆå¤šæ¯”è¾ƒå®åœ¨çš„é—®é¢˜ï¼Œäººä¸€çœ‹å°±æ¯”è¾ƒå®åœ¨ å’Œæˆ‘ä¸€æ ·ã€‚ä¸ªäººæ¯”è¾ƒå–œæ¬¢åœ¨è¿™ç§æ°›å›´å·¥ä½œå’Œæˆé•¿ã€‚</p>
<p>å¸Œæœ›æ¥ä¸‹æ¥çš„å·¥ä½œå¯ä»¥ç”¨ä¸Šæ°¸å“¥æ•™æˆ‘çš„é‚£äº›ä¸œè¥¿ï¼Œä»è‡ªæˆ‘ç®¡ç†åšå‚¨å¤‡ï¼Œæ‰©å±•åˆ°ä»¥åé¡¹ç›®ç®¡ç†ä¸ŠğŸ¶</p>
<h1 id="å…³äºç§Ÿæˆ¿"><a href="#å…³äºç§Ÿæˆ¿" class="headerlink" title="å…³äºç§Ÿæˆ¿"></a>å…³äºç§Ÿæˆ¿</h1><p>ç§Ÿæˆ¿è¿™äº‹æƒ…çœŸçš„å¾ˆçœ‹ç¼˜åˆ†ï¼Œæœ¬æ¥æ‰¾äº†å‡ ä¸ªç™½çŸ³æ´²çš„ï¼Œå‡ ä¸ªå›ºæˆçš„ï¼Œæœ€åçœ‹å®Œç™½çŸ³æ´²çš„ å°±ä¸æƒ³å†è·‘å…³å¤–å»çœ‹å›ºæˆï¼Œæƒ³ç€æ—¢ç„¶éƒ½æ˜¯ç§Ÿæˆ¿ï¼Œå°±ä¸è¦è®©è‡ªå·±é‚£ä¹ˆç´¯æ•´å¤©åé‚£ä¹ˆä¹…åœ°é“ï¼ŒåŠ ä¸Šæƒ³ç€ä»¥åè‡ªå·±åº”è¯¥å¤§æ¦‚ç‡995ï¼Œæ‰€ä»¥åœ¨å®¿èˆçš„æ—¶é—´å¯èƒ½ä¹Ÿæ²¡æœ‰ç‰¹åˆ«é•¿å°±ä¸è¿½æ±‚ä½å¤§é¢ç§¯äº†ã€‚</p>
<p>æœ€åé€‰äº†ä¸€ä¸ªåœ¨ç™½çŸ³æ´²åœ°é“5åˆ†é’Ÿè·¯ç¨‹çš„å°åŒºï¼Œ2300+200 åœ¨ä¸€æ¥¼é¢ç§¯ä¼°è®¡åŠ èµ·æ¥ä¸åˆ°8å¹³æ–¹ï¼Œä¸è¿‡æœ‰å¨æˆ¿ï¼Œæœ‰é˜³å…‰ï¼Œæˆ¿é—´çœ‹èµ·æ¥ç›¸å¯¹å¹²å‡€ä¸€ä¸ªäººä½å¤Ÿäº†ã€‚<br>ä»¥åå¦‚æœè¯´ä¹°ä¸ªå¹³è¡¡è½¦ï¼Œä¸Šä¸‹ç­ä¼°è®¡éƒ½ä¸éœ€è¦å»æŒ¤åœ°é“ï¼Œä¹Ÿæ˜¯å€¼äº†ã€‚</p>
<h1 id="å…³äº2019"><a href="#å…³äº2019" class="headerlink" title="å…³äº2019"></a>å…³äº2019</h1><p>emmm æœ€è¿‘ç¡®å®æ„Ÿè§‰åˆ°è‡ªå·±æ‡’æƒ°äº†ä¸å°‘ï¼Œå¥½åƒæ²¡æœ‰å·¥ä½œä¹‹åï¼Œç”Ÿæ´»åè€Œå˜å¾—ä¸è§„å¾‹ï¼Œæ¯å¤©åˆ’æ°´æ‘¸é±¼ç©æ¸¸æˆã€‚<br>githubå’Œblogä¹Ÿæ²¡æœ‰æ›´æ–°ä»€ä¹ˆä¸œè¥¿ï¼Œç™½ç™½æµªè´¹äº†è¿™ä¸€ä¸ªå¤šæœˆçš„æ—¶é—´ã€‚<br>2019å·²ç»è¿‡äº†1/3, 19å¹´çš„äº”ä¸ªè®¡åˆ’ç›®å‰åªå®Œæˆäº†ä¸¤ä¸ªã€‚</p>
<p>å‘Šè¾ï¼</p>
]]></content>
      <categories>
        <category>live</category>
      </categories>
      <tags>
        <tag>live</tag>
      </tags>
  </entry>
  <entry>
    <title>march say</title>
    <url>/2019/03/march-say/</url>
    <content><![CDATA[<p>æ€€ç–‘ä»Šå¹´æ˜¯ä¸æ˜¯æœ¬å‘½å¹´ï¼Œä¸‰æœˆåˆè£¸è¾ä¹‹åå…ˆç»ƒäº†ä¸€ä¸ªæ˜ŸæœŸçš„è½¦ï¼Œé¡ºæ‰‹æŠŠè½¦è¯è€ƒäº†ã€‚</p>
<p>è€ƒå®Œè½¦è¯ä¹‹åæŠ•ç®€å†ï¼Œå’Œä¸Šæ¬¡è£¸è¾ä¸€æ ·ï¼Œä¸€å¼€å§‹ç‰¹åˆ«æ–¹ï¼Œæµ·æŠ•ä¸€å †å…¬å¸ï¼Œåªè¦æœ‰é¢è¯•éƒ½å…ˆç­”åº”ç€ï¼Œæ¯å¤©å¼€å§‹ç„¦è™‘æä¸èµ·ç²¾ç¥åšå…¶ä»–äº‹æƒ…ã€‚</p>
<p>é¢è¿‡å‡ å®¶ä¹‹åå¿ƒæ€å¼€å§‹æ…¢æ…¢å¥½èµ·æ¥ã€‚</p>
<p>ä¸€æ–¹é¢ç°åœ¨äº’è”ç½‘ç¯å¢ƒæ€æ ·ï¼Ÿæˆ–è€…è¯´å‰ç«¯å¹¿å·è¿™è¾¹çš„å¸‚åœºæ€æ ·ï¼Ÿ</p>
<p>åé¥±å’Œï¼Œçœ‹æ‹›è˜è¦æ±‚è¶Šæ¥è¶Šé«˜å°±çŸ¥é“äº†ï¼Œç»å¤§éƒ¨åˆ†æ˜¯æœ¬ç§‘èµ·ï¼Œå·¥ä½œç»éªŒäº”å¹´èµ·ã€‚<br>ä½†æ˜¯è¿™ç§æƒ…å†µåªå‡ºç°åœ¨å¤§å‚æˆ–è€…æ¯”è¾ƒå¤§çš„å…¬å¸ï¼Œå°å…¬å¸è¿˜æ˜¯å¾ˆæœ‰ç»éªŒçš„äººï¼ˆå°å…¬å¸æŒ‡ä¸åˆ°500äººï¼‰ã€‚</p>
<p>ç¬¬äºŒæ–¹é¢æ˜¯å»é¢è¯•çš„å…¬å¸å¤§éƒ¨åˆ†éƒ½èƒ½è¿‡æŠ€æœ¯é¢ï¼Œæ‰€ä»¥æˆ–å¤šæˆ–å°‘å¤šäº†ä¸€ç‚¹ç‚¹ä¿¡å¿ƒå§ã€‚</p>
<p>ç®—äº†ä¸‹å¤§å¤§å°å°é¢äº†åå®¶å…¬å¸ï¼Œèƒ½åˆ°äººäº‹çš„æœ‰ä¸ƒå®¶ã€‚ä½†æ˜¯æˆ‘åˆ°ç°åœ¨å·¥ä½œç»éªŒä¸ç®—å®ä¹ ä¸ç®—ç©ºçª—å®æ‰“å®ä¹Ÿæœ‰ä¸‰å¹´å¤šâ€¦æ‰€ä»¥å¯¹ä¸‹ä¸€å®¶è¦æ±‚æŒºé«˜çš„ï¼Œå¸Œæœ›æ˜¯è¿›å¤§å‚çš„æœ€åä¸€å—è·³æ¿ï¼ŒåŠ ä¸Šè‡ªå·±å¯¹å…¬å¸æ¯”è¾ƒæŒ‘ï¼Œåˆä¸æƒ³å¤–åŒ…ï¼Œåˆæƒ³å…¬å¸æ°›å›´å¥½äººæ€§åŒ–ï¼Œåˆæƒ³æŠ€æœ¯æ°›å›´å¥½ï¼Œåˆæƒ³å›¢é˜Ÿæœ‰å¤§ç‰›ï¼Œåˆæƒ³æœ‰ä¸ªäººæ—¶é—´å­¦ä¹ æˆé•¿ï¼Œåˆæƒ³æœ‰ç¬¦åˆæœŸæœ›çš„è–ªèµ„ï¼Œåˆæƒ³ç¦»å®¶è¿‘â€¦.</p>
<p>ä¹‹å‰ä¸Šå‘¨å¾®ä¿¡æ”¶åˆ°ä¸€ä¸ªå¤§ä½¬åŠ å¥½å‹çš„è¯·æ±‚</p>
<p>æˆ‘çš„å¤©ï¼ï¼ï¼ï¼å±…ç„¶æ˜¯è…¾è®¯çš„ï¼ï¼ï¼å–Šæˆ‘å»é¢è¯•ï¼ï¼ï¼æˆ‘éƒ½è¿˜æ²¡æœ‰æœ¬ç§‘ æ€ä¹ˆå¯èƒ½ï¼ï¼ï¼ï¼<br>åæ­£å¼€å¿ƒäº†å‡ å¤©ï¼ŒæŠŠæ¥ä¸‹æ¥çš„é¢è¯•å…¨æ‹’äº†ç›´æ¥è¯´æœ‰å¿ƒä»ªçš„offerï¼Œç„¶åå‘¨ä¸€æ™šä¸Šå¼€å¿ƒåˆ°ç¡ä¸ç€è§‰ä¸‰ç‚¹æ‰ç¡ï¼Œæƒ³ç€å¦‚æœè¿‡äº†çš„è¯ï¼Œæˆ‘è¦æ€ä¹ˆæ¬è¿‡å»ï¼ŒèƒŒè°ƒå¡«è°æ¯”è¾ƒå¥½ï¼ŒçœŸçš„å°±åƒæŸäº›æ®µå­é‡Œé¢å†™çš„ï¼šâ€œè§åˆ°ä½ çš„æ—¶å€™è¿å­©å­çš„åå­—éƒ½æƒ³å¥½äº†â€ã€‚<br>ç„¶åå‘¨äºŒä¸ƒç‚¹èµ·äº†ä¸ªå¤§æ—©æ­é«˜é“å…ˆå»é™„è¿‘åƒéº¦å½“åŠ³å‘å‘å‘†ç­‰é¢è¯•ã€‚</p>
<p>è¿›åˆ°ä¼šè®®å®¤ç­‰é¢è¯•çš„æ—¶å€™ä¸ºäº†è®©è‡ªå·±ä¸é‚£ä¹ˆç´§å¼ ä¸€ç›´ç«™ç€æ·±å‘¼å¸ï¼Œä¸€é¢æŠ€æœ¯é¢è™½ç„¶ä¸æ˜¯å¾ˆæ»¡æ„ä½†æ˜¯å¥½åƒä¹Ÿè¿‡äº†ã€‚<br>é¢è¯•å®˜ï¼šæœ‰ä»€ä¹ˆæƒ³é—®çš„å—ï¼Ÿ<br>æˆ‘è¯´ï¼š å¬è¯´è…¾è®¯çš„é¢è¯•æµç¨‹æŒºä¹…çš„ï¼Œæ˜¯è¿™æ ·çš„å—ï¼Ÿ<br>é¢è¯•å®˜çœ‹ç€æˆ‘è¯´ï¼šä½ è¿™é‡Œçš„å­¦å†è‡ªè€ƒè¿˜æ²¡è€ƒå®Œï¼Œæˆ‘ä»¬è¿™é‡Œæœ‰æ­£ç¼–ä¹Ÿæœ‰å¤–åŒ…å²—â€¦<br>é‚£æ—¶å€™å¿ƒæƒ…çœŸæ˜¯è¿‡å±±è½¦ğŸ¢ï¼Œç¬é—´æ˜ç™½å’Œä¹‹å‰é¢ucé‡åˆ°ä¸€æ ·çš„é—®é¢˜ï¼ŒåŸæ¥é¢çš„æ˜¯å¤–åŒ…å²—â€¦.</p>
<p>ä¸è¿‡é¢è¯•å®˜æŒºå¥½çš„ï¼Œæ²¡æœ‰ç›´æ¥ç‚¹æ˜æˆ‘å¤ªèœäº†åªèƒ½è¿›å¤–åŒ…ï¼Œè€Œæ˜¯è¯´å­¦å†é—®é¢˜ å“ˆå“ˆå“ˆ<br>ä½†æ˜¯ä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯¹è…¾è®¯æœ‰è«åçš„æ‰§ç€ï¼Œæ‰€ä»¥æ²¡æœ‰åƒå½“æ—¶é¢ucä¸€æ ·ç›´æ¥èµ°äººï¼Œè¿˜æ˜¯æƒ³ç»§ç»­é¢ä¸‹å»ï¼Œå¯èƒ½æ˜¯å…¶æ¯…å¤§å“¥å°±åœ¨è…¾è®¯çš„ç¼˜æ•…å§</p>
<p>äºŒé¢é¢è¯•å®˜ä¹Ÿç‰¹åˆ«å®åœ¨ï¼Œå’Œæˆ‘èŠäº†å¯¹æˆ‘çš„å»ºè®®å’Œå¤–åŒ…æ³¨æ„çš„äº‹æƒ…ä¹‹ç±»çš„ã€‚</p>
<p>æƒ³æƒ³æˆ‘ä»ç¬¬ä¸€ä»½å·¥ä½œåˆ°ç°åœ¨é‡åˆ°çš„è€å¤§éƒ½å¾ˆä¸é”™ï¼Œæ‰€ä»¥å…¶å®æƒ³ä¸æƒ³å…¥èŒå¾ˆå¤§ç¨‹åº¦æ˜¯çœ‹leaderå¯¹ä¸å¯¹çœ¼</p>
<p>åœ¨ä¸‰æœˆçš„å°¾å·´ï¼Œæ€»ç»“ä¸€ä¸‹è¿™ä¸ªæ“è›‹çš„ä¸‰æœˆã€‚</p>
<ol>
<li>é©¾é©¶è¯åˆ°æ‰‹ï¼Œæ¯”é¢„æƒ³çš„æå‰ä¸€ä¸ªæœˆï¼Œç®—æ˜¯19å¹´çš„ç›®æ ‡å®Œæˆä¸€ä¸ª</li>
<li>æ‰¾å·¥ä½œé«˜ä¸æˆä½ä¸å°±çš„ï¼Œæœ€å¤§çš„è¦æ±‚è¿˜æ˜¯è¦èƒ½æˆé•¿ï¼Œå…¬å¸äººæ€§åŒ–</li>
<li>ä¸å‡ºæ„å¤–çš„è¯ä¸‹ä¸€ä»½å·¥ä½œå°±å¯ä»¥å®Œæˆ19å¹´çš„ç¬¬äºŒä¸ªç›®æ ‡</li>
<li>è‡ªä»é¢äº†cdcé‚£ä¸ªä¹‹åå°±ä¸æ€ä¹ˆæƒ³ç»§ç»­é¢è¯•æ‰¾å·¥ä½œäº†ï¼Œå¯èƒ½è§‰å¾—åé¢é‚£äº›é¢è¯•éƒ½æ²¡æœ‰åœ¨è…¾è®¯é‡Œé¢å­¦ä¹ æˆé•¿å¿«ï¼Œè™½ç„¶åœ¨ä¹‹å‰å¤–åŒ…ä¹‹åå·²ç»å†³å®šä¸å†æ‰¾å¤–åŒ…äº†ï¼Œä¹Ÿè§‰å¾—å¤–åŒ…å¾ˆå®¹æ˜“è¢«äººé„™è§†â€¦.å”‰ åŠ æ²¹å’¯</li>
<li>19å¹´çš„ç¬¬ä¸‰ä¸ªç›®æ ‡æ˜¯å®Œæˆä¸äº†äº†ï¼Œé«˜æ•°å’Œæ¦‚è®ºæ¯”æƒ³è±¡ä¸­çš„è¦éš¾ï¼Œ å¤ªä½ä¼°ä»–ä»¬äº†</li>
<li>æœ€è¿‘æ¥è§¦ã€Šæ•°æ®ç»“æ„ã€‹å’Œtypescriptï¼Œæœ‰ç§ç›¸è§æ¨æ™šçš„æ„Ÿè§‰ï¼Œæ…¢æ…¢å¼€å§‹æ˜ç™½è®¡ç®—æœºåŸºç¡€å¥½çš„äººçš„ä¼˜åŠ¿åœ¨å“ªé‡Œ</li>
</ol>
<p>æœ€åï¼Œå¸Œæœ›19å¹´æ¥ä¸‹æ¥æ˜¯ä¸€æ®µæ–°çš„çªç ´æœŸï¼Œå°½åŠ›å®Œæˆ19å¹´çš„æœ€åä¸€ä¸ªç›®æ ‡ï¼ å‘Šè¾ åŠ æ²¹</p>
]]></content>
      <categories>
        <category>live</category>
      </categories>
      <tags>
        <tag>live</tag>
      </tags>
  </entry>
  <entry>
    <title>typescriptåˆä½“éªŒ</title>
    <url>/2019/03/typescript_experience/</url>
    <content><![CDATA[<p>å¿ä¸ä½è¦è®°å½•ä¸€ä¸‹ï¼Œ<code>typescript</code>ç®€ç›´æ˜¯ç¥å™¨!!!</p>
<p>æœ€è¿‘åœ¨çœ‹è‡ªè€ƒçš„ã€Šæ•°æ®ç»“æ„ã€‹ï¼Œé‡Œé¢çš„ä»£ç æ˜¯<code>C</code>å†™çš„ï¼Œè™½ç„¶çœ‹ç€æŒºå¥½ç†è§£ï¼Œä½†æ˜¯å°±æ˜¯è®°ä¸ä½ã€‚æ‰€ä»¥æƒ³ç€è¿˜æ˜¯è¦è‡ªå·±æ•²ä¸€éæ‰è¡Œï¼Œä½†æ˜¯Cæ–­ç‚¹è°ƒè¯•å¤ªéº»çƒ¦äº†ï¼ˆå…¶å®æ˜¯æˆ‘è¿˜æ²¡æœ‰çœ‹æ€ä¹ˆæ–­æ‰è°ƒè¯•ï¼‰ï¼Œè™½ç„¶ç¯å¢ƒæ­å¥½äº†ï¼Œä½†æ˜¯æ„Ÿè§‰è¿˜æ˜¯å¾ˆå¤šä¸ä¹ æƒ¯ã€‚</p>
<p>æ‰€ä»¥æƒ³ç€å¹²è„†ç”¨jsæ¥å®ç°ï¼Œç„¶ååˆæƒ³ç€<code>C</code>æœ‰é‚£ä¹ˆå¤šç±»å‹ï¼Œå¹²è„†æˆ‘ç”¨<code>typescript</code>æ¥å®ç°ä¸€ä¸‹ä¹Ÿå¯ä»¥ï¼Œç»™æˆ‘çš„æ„Ÿè§‰<code>typescript</code>å°±å¾ˆåƒ<code>java</code>å’Œ<code>javascript</code>çš„ç»„åˆï¼Œåˆšå¥½ä¹‹å‰å­¦è¿‡ä¸€å°ç‚¹<code>java</code>çš„è¯­æ³•ï¼Œå¯¹<code>java</code>çš„å¼ºç±»å‹æŒºå–œæ¬¢çš„ã€‚</p>
<p>å­¦<code>ts</code>è¿™ä¸ªç½‘ç«™<a href="https://ts.xcatliu.com" target="_blank" rel="noopener">https://ts.xcatliu.com</a>çœ‹å®ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥ä¸Šæ‰‹äº†ï¼Œå¤æ‚ä¸€ç‚¹çš„å¯èƒ½è¦æ…¢æ…¢è¡¥ï¼Œ<code>antD</code>ä»“åº“çš„ä»£ç å°±éƒ½æ˜¯<code>ts</code>ã€‚</p>
<p>ç„¶å!!!!å…³é”®ç‚¹æ¥äº†!!! tsçš„æç¤ºæ¯”æˆ‘æƒ³è±¡ä¸­çš„çˆ½è¶…çº§å¤šï¼</p>
<p>è¶…çº§çˆ½çš„ä»£ç æ³¨é‡Š &amp;&amp; å‚æ•°æç¤º<br><img src="./ts1.png" alt="ä»£ç æç¤º"></p>
<p>å€¼ç±»å‹ä¸Šæ–¹æ³•çš„æç¤º<br><img src="./ts2.png" alt="ç±»å‹æ–¹æ³•æç¤º"></p>
<p>ç®€ç›´æ˜¯å¤§å‹å¼€å‘æˆ–å¤šäººå¼€å‘çš„ç¥å™¨ï¼Œæ³¨é‡Šçš„è§„èŒƒå¯ä»¥å‚ç…§è¿™ä¸ª<a href="https://github.com/fex-team/styleguide/blob/master/javascript.md#24-%E6%B3%A8%E9%87%8A" target="_blank" rel="noopener">fex-team</a> å‘Šè¾ï¼</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>quicklinkå­¦ä¹ ä»¥åŠç»“åˆReact</title>
    <url>/2019/02/quicklink/</url>
    <content><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>è°·æ­Œå›¢é˜Ÿåœ¨å‡ ä¸ªæœˆå‰å¼€æºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œå«<a href="https://github.com/GoogleChromeLabs/quicklink" target="_blank" rel="noopener"><code>quicklink</code></a>ã€‚å®˜æ–¹ç»™å‡ºçš„ä»‹ç»æ˜¯</p>
<blockquote>
<p>Faster subsequent page-loads by prefetching in-viewport links during idle time</p>
</blockquote>
<p>è¿™é‡Œç®€å•çš„ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”è¯´æ˜ä¸€ä¸‹ä¸ºä»€ä¹ˆæˆ‘éœ€è¦forkè¿™ä¸ªé¡¹ç›®~</p>
<p>quicklinkçš„æºç å¾ˆç®€æ´ï¼Œä½œç”¨å¯ä»¥ç”¨ä¸€å¥è¯æ€»ç»“: <strong>åˆ©ç”¨ç©ºé—²æ—¶é—´æ¥ç¼“å­˜ç•Œé¢ä¸Šçœ‹åˆ°çš„é“¾æ¥ï¼ŒåŠ å¿«è¿™äº›é“¾æ¥çš„è®¿é—®é€Ÿåº¦ã€‚</strong></p>
<p><strong>æ‰€ä»¥quicklinkçš„ä½œç”¨æ˜¯åœ¨ä¸‹ä¸€ä¸ªé“¾æ¥å¿«é€Ÿæ‰“å¼€ï¼Œè€Œä¸æ˜¯å½“å‰é“¾æ¥ï¼Œè¿™ä¸€ç‚¹å’Œå¾ˆå¤šå…¶ä»–ä¼˜åŒ–éƒ½ä¸ä¸€æ ·ã€‚</strong></p>
<p>åŸç†å¾ˆç®€å•:</p>
<ul>
<li>è·å–é¡µé¢ä¸Šæ‰€æœ‰çš„Aæ ‡ç­¾ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œçš„aæ ‡ç­¾æŒ‡çš„æ˜¯è°ƒç”¨å‡½æ•°çš„æ—¶å€™documentä¸‹çš„aæ ‡ç­¾ï¼‰</li>
<li>ç­‰å¾…æµè§ˆå™¨ç©ºé—² (requestIdleCallback æˆ–è€…ç”¨ setTimeout åšå…¼å®¹)</li>
<li>åˆ©ç”¨ IntersectionObserver åšç›‘æ§ï¼Œå½“ç›‘æ§çš„domè¿›å…¥è§†å›¾ï¼Œå°±å¼€å§‹é¢„åŠ è½½</li>
<li>ä¸è·å–è§†å›¾å†…çš„URL(<code>&lt;link rel=&quot;prefetch&quot;&gt;</code> or <code>XHR</code> or <code>fetch</code>)ï¼Œä»¥è·å¾—å¿«é€Ÿè®¿é—®è¯¥é“¾æ¥çš„æ•ˆæœ</li>
</ul>
<p>ä»£ç çœŸçš„å¾ˆç®€æ´ï¼Œå¾ˆæ£’ï¼Œè¿™è¾¹æ²¡å¿…è¦å†è´´å‡ºæ¥ï¼Œæœ‰å…´è¶£çš„ç›´æ¥github forkä¸€ä¸ªå»çœ‹æˆ–ä¿®æ”¹ï¼Œé™¤å»æ³¨é‡Šä»£ç é‡åŠ èµ·æ¥ä¸åˆ°200è¡Œ</p>
<h1 id="forked"><a href="#forked" class="headerlink" title="forked"></a>forked</h1><p>æˆ‘forkè¯¥é¡¹ç›®ä¹‹åä¿®æ”¹äº†ä¸€äº›ä¸œè¥¿ </p>
<h2 id="é»˜è®¤æ·»åŠ äº†polyfillï¼Œç›´æ¥æ‰“åˆ°åŒ…é‡Œ"><a href="#é»˜è®¤æ·»åŠ äº†polyfillï¼Œç›´æ¥æ‰“åˆ°åŒ…é‡Œ" class="headerlink" title="é»˜è®¤æ·»åŠ äº†polyfillï¼Œç›´æ¥æ‰“åˆ°åŒ…é‡Œ"></a>é»˜è®¤æ·»åŠ äº†polyfillï¼Œç›´æ¥æ‰“åˆ°åŒ…é‡Œ</h2><p>ä¸ºä»€ä¹ˆè¦åŠ polyfillå‘¢ï¼Ÿ å› ä¸º<code>IntersectionObserver</code> è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯pcç«¯<code>IE11</code>éƒ½ä¸æ”¯æŒï¼Œç§»åŠ¨ç«¯ä¹Ÿè¦åˆ°äº†<code>IOS12 safari</code>æ‰æ”¯æŒâ€¦æ”¯æŒé¢å¤ªçª„äº†è€Œä¸”ä¸ç”¨polyfillçš„è¯ï¼Œç›´æ¥æŠ¥é”™â€¦.æ‰€ä»¥æƒè¡¡ä¹‹ä¸‹ï¼Œå¹²è„†ç›´æ¥å…¨é‡å¼•ç”¨<code>IntersectionObserver</code>çš„polyfillï¼Œgzipæƒ…å†µä¸‹æ•´ä¸ªåŒ…åŠ èµ·æ¥æ‰<code>3.5k</code> å€¼äº†ã€‚</p>
<h2 id="æ·»åŠ äº†quicklinkå…¨å±€é…ç½®"><a href="#æ·»åŠ äº†quicklinkå…¨å±€é…ç½®" class="headerlink" title="æ·»åŠ äº†quicklinkå…¨å±€é…ç½®"></a>æ·»åŠ äº†quicklinkå…¨å±€é…ç½®</h2><p>åœ¨åŒ…é‡Œå†™äº† <code>quicklinkOptions</code> å¯¹è±¡ï¼Œè¿™æ ·æ¯æ¬¡è°ƒç”¨ <code>quicklink</code> çš„æ—¶å€™å°±å¯ä»¥å…¬ç”¨ä¸€äº›é…ç½®ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡è°ƒç”¨éƒ½å¡ä¸€æ ·çš„é…ç½®è¿›å»,è‡³äºä¸ºä»€ä¹ˆæåˆ°æ¯æ¬¡è°ƒç”¨â€¦åé¢ä¼šè§£é‡Šåˆ°</p>
<h2 id="æ·»åŠ äº†manualPreFetchæ–¹æ³•ï¼š-æ‰‹åŠ¨ç»‘å®šæŸäº›domç›‘å¬"><a href="#æ·»åŠ äº†manualPreFetchæ–¹æ³•ï¼š-æ‰‹åŠ¨ç»‘å®šæŸäº›domç›‘å¬" class="headerlink" title="æ·»åŠ äº†manualPreFetchæ–¹æ³•ï¼š æ‰‹åŠ¨ç»‘å®šæŸäº›domç›‘å¬"></a>æ·»åŠ äº†manualPreFetchæ–¹æ³•ï¼š æ‰‹åŠ¨ç»‘å®šæŸäº›domç›‘å¬</h2><p><code>manualPreFetch</code> æ–¹æ³•ï¼Œå°±æ˜¯æ‰‹åŠ¨çš„æ„æ€ï¼Œæ”¯æŒä¼ å…¥è¿™äº›å‚æ•°<code>{dom, isForce, link, priority}</code>ã€‚<br>ä¸ºä»€ä¹ˆéœ€è¦åŠ å¤šä¸ªæ–¹æ³•å‘¢ï¼Ÿ å› ä¸ºæˆ‘å‘ç° quicklink åªæ”¯æŒæ‰«<code>&lt;a&gt;</code>æ ‡ç­¾å»è·å–linkï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µå¯èƒ½æˆ‘ä»¬ä¸æ˜¯ç”¨aæ ‡ç­¾ï¼Œè€Œæ˜¯ç±»ä¼¼å†™ä¸€ä¸ª<code>button</code>ï¼Œç‚¹å‡»ä¹‹åjsæ§åˆ¶è·³è½¬ã€‚ è™½ç„¶è¯´æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç å±‚ç”¨buttonåŒ…aé“¾æ¥ç­‰æ–¹å¼å»å®ç°ï¼Œä½†æ˜¯è¿™æ ·å°±å¤ªå±€é™äº†ï¼Œæ‰€ä»¥æ‰åŠ äº†ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// html</span></span><br><span class="line">&lt;button id=<span class="string">"btn"</span>&gt;è·³è½¬åˆ°xxx&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">manualPreFetch(&#123;</span></span><br><span class="line"><span class="regexp">  dom: document.getElementById('btn'),</span></span><br><span class="line"><span class="regexp">  link: 'www.easyrentcars.com',</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•å’Œ <code>quicklink</code> ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç›‘å¬domæ»šåˆ°å½“å‰ä½ç½®æ‰ä¼šå‘èµ·é¢„åŠ è½½ã€‚è¿™é‡Œä¼šè¯»å–ä¸€éƒ¨åˆ†çš„<code>quicklinkOptions</code>ï¼Œè¿™å°±æ˜¯æˆ‘åŠ å¤šä¸ªå…¨å±€é…ç½®çš„åŸå› äº†ï¼Œä¸éœ€è¦æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½å†™ä¸€å †</p>
<h2 id="å¢åŠ äº†manualRemovePreFetchæ–¹æ³•ï¼š-æ‰‹åŠ¨åˆ é™¤ç›‘å¬é¢„åŠ è½½"><a href="#å¢åŠ äº†manualRemovePreFetchæ–¹æ³•ï¼š-æ‰‹åŠ¨åˆ é™¤ç›‘å¬é¢„åŠ è½½" class="headerlink" title="å¢åŠ äº†manualRemovePreFetchæ–¹æ³•ï¼š æ‰‹åŠ¨åˆ é™¤ç›‘å¬é¢„åŠ è½½"></a>å¢åŠ äº†manualRemovePreFetchæ–¹æ³•ï¼š æ‰‹åŠ¨åˆ é™¤ç›‘å¬é¢„åŠ è½½</h2><p>æ·»åŠ ä¸ªç§»é™¤çš„æ–¹æ³•ï¼Œåªæ˜¯ç®€å•çš„ç§»é™¤æ‰è¦ç›‘å¬çš„domï¼Œè™½ç„¶å¯¹æ€§èƒ½ä¸ä¼šé€ æˆå½±å“â€¦ä½†æ˜¯å°±æ˜¯æœ‰ç‚¹å¼ºè¿«ç—‡é¸­ğŸ¦†</p>
<h2 id="React-demo"><a href="#React-demo" class="headerlink" title="React demo"></a>React demo</h2><p><code>quicklink</code>æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™ç”¨ <code>(el || document).getQuesySelectorAll(&#39;a&#39;)</code> å»è·å–é¡µé¢ä¸Šçš„<code>&lt;a&gt;</code>ï¼Œæ‰€ä»¥å¯¹äºReactå°±æ¯”è¾ƒå°´å°¬äº†ï¼Œæ¸²æŸ“æ˜¯å¼‚æ­¥çš„ï¼Œå¦‚æœè°ƒç”¨æ—©çš„è¯ï¼Œè‚¯å®šæ˜¯æ‹¿ä¸åˆ°ï¼Œé‚£ä»€ä¹ˆæ—¶å€™è°ƒç”¨è¿™ä¸ªæ‰æ˜¯æœ€ä½³æ—¶æœº?</p>
<p><strong>æ¯”è¾ƒé€šç”¨çš„æ˜¯<code>componentDidMount</code> æˆ–è€…æ˜¯<code>UseEffect</code>ã€‚ä¸è¿‡ä¸ªäººæ¯”è¾ƒå»ºè®®é…åˆ<code>manualPreFetch</code>ã€<code>manualRemovePreFetch</code>å¯¹ä¸€äº›æ¯”è¾ƒé‡è¦çš„åŠ å°±å¥½äº†ï¼Œå› ä¸ºå¾ˆå¤šéƒ½æ˜¯å¼‚æ­¥ä¹‹åå†æ¸²æŸ“ï¼Œå¯èƒ½ <code>componentDidMount</code>çš„æ—¶å€™ï¼Œä½ éœ€è¦é¢„åŠ è½½çš„é“¾æ¥è¿˜æ²¡å‡ºç°ã€‚</strong></p>
<p>è¿™é‡Œç®€å•ç»™å‡ºä¸¤ä¸ªå…³äºReactçš„é€šç”¨demoã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> quicklink, &#123; manualPreFetch, manualRemovePreFetch&#125; <span class="keyword">from</span> <span class="string">'@jsonz/quicklink'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class ç±»å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuicklinkComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.refRoot = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="comment">// didMount ç›‘å¬ç»„ä»¶å†…æ‰€æœ‰çš„aé“¾æ¥</span></span><br><span class="line">    quicklink(&#123;</span><br><span class="line">      el: <span class="keyword">this</span>.refRoot.current,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="comment">// willunmount ç§»é™¤æ‰€æœ‰çš„aé“¾æ¥ç›‘å¬</span></span><br><span class="line">    batchManualRemove(<span class="keyword">this</span>.refRoot.current);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.refRoot&#125;</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hook ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">QuicklinkDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> refRoot = useRef(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">    quicklink(&#123;</span><br><span class="line">      el: refRoot.current,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">      batchManualRemove(refRoot.current);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ( <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;refRoot&#125;</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-1-è‡´å¤­æŠ˜çš„å°ql"><a href="#3-1-è‡´å¤­æŠ˜çš„å°ql" class="headerlink" title="3.1 è‡´å¤­æŠ˜çš„å°ql"></a>3.1 è‡´å¤­æŠ˜çš„å°ql</h1><p>æœ¬æ¥å·²ç»åŠ åœ¨é¡¹ç›®ä¸Šï¼Œæ‰“ç®—æ‹¿ä¸€ä¸ªé¡¹ç›®/é¡µé¢æ¥è¯•ç‚¹ï¼Œä¸è¿‡æœ€åè¢«è¯´æœæš‚æ—¶ä¸ç”¨ï¼ŒåŸå› æœ‰ä¸‰</p>
<ol>
<li>quicklink å¯èƒ½ä¼šå¯¹åç«¯é€ æˆä¸å°çš„å‹åŠ›ï¼Œæ¯”å¦‚ä½ çš„ç½‘ç«™ä¸€æ‰“å¼€ï¼Œæ»‘åˆ°æœ€åº•éƒ¨ï¼Œé‚£ä¸­é—´å¯èƒ½å°±ä¼šé¢„åŠ è½½20ä¸ªé“¾æ¥â€¦.ç„¶è€Œç”¨æˆ·å¯èƒ½ä¸€ä¸ªéƒ½ä¸æ‰“å¼€å°±å…³é—­ï¼Œé‚£å°±ç™½ç™½ç»™æœåŠ¡å™¨æ·»åŠ 20ä¸ªè¯·æ±‚ï¼Œå¯¹äºé‡æ¯”è¾ƒå¤§çš„ç½‘ç«™ï¼Œå¯èƒ½ä¼šå¾ˆå‘çˆ¹ã€‚æ€»ç»“æ¥è¯´å°±æ˜¯å‘½ä¸­ç‡å¤ªä½ï¼Œä¸è¿‡å¯ä»¥æ”¹æˆåšé’ˆå¯¹æ€§çš„é¢„åŠ è½½ï¼Œæ¯”å¦‚ä¸‹å•é¡µé¢„åŠ è½½æ”¯ä»˜é¡µçš„ã€‚</li>
<li>åªèƒ½é¢„åŠ è½½documentï¼Œå¯¹äºé¡µé¢ä¸Šå å¤§å¤´çš„jså¼•ç”¨ç­‰é™æ€èµ„æºæ²¡æœ‰èµ·ä½œç”¨ã€‚æ•ˆæœå¯èƒ½å¯¹äºå®ç”¨ç«™ç‚¹ä¸æ˜æ˜¾ï¼Œå¯¹æ–‡ç« ç±»ä¼šå¥½å¾ˆå¤šã€‚</li>
<li>é’ˆå¯¹å‰é¢ä¸¤ç§æƒ…å†µï¼Œå¥½åƒpwaèƒ½åšçš„ä¼šæ›´å¤šï¼Ÿ æ‰€ä»¥å¦‚æœæ˜¯è¿‡æ¸¡æ–¹æ¡ˆæˆ–æ–‡å­—ç±»(document)èµ„æºå æ¯”æ¯”è¾ƒå¤šçš„ç”¨quicklinkæ¯”è¾ƒå¥½ã€‚</li>
</ol>
<p>ä½†æ˜¯é¡¹ç›®ä¸Šçš„pwaæ¯”è¾ƒæ®‹ç–¾ï¼Œä¹‹å‰åšçš„åŒäº‹åšäº†ä¸€ç‰ˆä¹‹åå°±ç¦»èŒäº†â€¦ä¸€ç›´æ²¡äººå»ç»´æŠ¤ï¼Œæ‰€ä»¥pwaè¦è¢«æä¸Šæ—¥ç¨‹ï¼Ÿ</p>
<blockquote>
<p>è¡¥ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç›´æ¥åœ¨quicklinkå†…æ‰“polyfillä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºå¦‚æœé¡¹ç›®ä¸Šä¹Ÿå¼•ç”¨è¿™ä¸ªPolyfillå°±ä¼šé‡å¤äº†ã€‚</p>
</blockquote>
<p>å‘Šè¾</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨ASTè§£å†³é¡¹ç›®webpack aliasæ³›æ»¥é—®é¢˜</title>
    <url>/2019/01/AST-practice/</url>
    <content><![CDATA[<p><a href="https://github.com/jsonz1993/wheel/tree/master/ast-webpack-alias" target="_blank" rel="noopener">æ–‡ç« ä»£ç çš„æºç ä»“åº“</a></p>
<h1 id="AST-ç®€å•ä»‹ç»"><a href="#AST-ç®€å•ä»‹ç»" class="headerlink" title="AST ç®€å•ä»‹ç»"></a>AST ç®€å•ä»‹ç»</h1><p>AST(Abstract Syntax Tree)æ—¢æŠ½è±¡è¯­æ³•æ ‘ï¼Œæˆ–ç§°è¯­æ³•æ ‘ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä»£ç è¯­æ³•ç»“æ„çš„ä¸€ç§æŠ½è±¡è¡¨ç¤ºã€‚æ¯”å¦‚ <code>var answer = 6 * 7;</code> ä¼šè¢«è§£æä¸ºè¿™ä¹ˆä¸€æ£µæ ‘<br><img src="./ast_wiki.png" style="width: 320px; border: none; display: inline-block;"><img src="./ast_esprima.png" style="width: 200px; border: none; display: inline-block;"></p>
<p>é‚£ä¹ˆä»£ç æ€æ ·æ‰èƒ½è§£ææˆè¿™ä¸€æ£µ ASTï¼Œ ASTåœ¨å‰ç«¯é¢†åŸŸä¸€èˆ¬åˆå¯ä»¥å¹²å˜›ï¼Ÿ</p>
<h1 id="ç¼–è¯‘å™¨"><a href="#ç¼–è¯‘å™¨" class="headerlink" title="ç¼–è¯‘å™¨"></a>ç¼–è¯‘å™¨</h1><p><strong>astæ˜¯ç”±ç¼–è¯‘å™¨è§£æç”Ÿæˆçš„</strong>ï¼Œç®€å•çš„ç¼–è¯‘å™¨å¯ä»¥ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆ:</p>
<ul>
<li>tokenizer åˆ†è¯å™¨ æŠŠä»£ç æˆ–æ–‡æœ¬æŒ‰ç±»å‹åˆ†å¼€ï¼Œè¿”å›: <code>tokens</code></li>
<li>parser è¯­æ³•å‰–æå™¨ å¯¹åˆ†è¯åçš„æ–‡æœ¬æŒ‰ç…§è¯­æ³•åˆ†æè½¬æ¢æˆ æŠ½è±¡è¯­æ³•æ ‘ è¿”å›ï¼šast</li>
<li>transformer è¯­æ³•è½¬æ¢å™¨ æŠŠè¯­æ³•å‰–æåçš„æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢æˆæˆ‘ä»¬æƒ³è¦çš„: newAst</li>
<li>codeGenerator ä»£ç ç”Ÿæˆå™¨ æŠŠAST è½¬æ¢ä¸º ç›®æ ‡ä»£ç </li>
</ul>
<p>æˆ‘ä»¬å‰ç«¯æ„å»ºä¸­å¾ˆå¸¸ç”¨çš„babelå°±æ˜¯è¿™ç§åŸç†</p>
<blockquote>
<p>babel åˆå§‹é˜¶æ®µå¹¶æ²¡æœ‰åšä»»ä½•äº‹ï¼ŒåŸºæœ¬ä¸Šç­‰äº const babel = code=&gt; code; å…ˆ tokenizerï¼Œ parser è§£æä»£ç ï¼Œå† transformer çš„æ—¶å€™ï¼Œå®Œå…¨ä¸æ”¹åŠ¨åŸæ¥çš„ ast</p>
</blockquote>
<p><strong>å¯¹ç¼–è¯‘å™¨åŸç†æœ‰å…´è¶£çš„ï¼Œå¯ä»¥çœ‹æˆ‘ä»¥å‰å†™çš„å°demoï¼Œ500è¡Œç®€å•æ˜“æ‡‚ <a href="https://github.com/jsonz1993/wheel/blob/master/min-compiler/README.md" target="_blank" rel="noopener">min-compiler</a>ï¼Œçœ‹å®Œä¼šæœ‰ä¸ªæ•´ä½“æ¦‚å¿µã€‚</strong></p>
<p>è€Œç”Ÿæˆçš„ASTæˆ‘ä»¬å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Ÿ<br>ASTä½ éƒ½æ‹¿åˆ°äº†ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±æ˜¯å¯¹è¿™æ£µæ ‘åšä½ æƒ³è¦çš„æ“ä½œï¼Œæ¯”å¦‚ä»£ç è½¬æ¢(babel)ï¼Œä»£ç å‹ç¼©ç­‰ã€‚</p>
<p>è¿™é‡Œæˆ‘ç”¨ä»–æ¥å¤„ç†webpackçš„aliasæ³›æ»¥é—®é¢˜ã€‚</p>
<h1 id="webpack-aliasé—®é¢˜"><a href="#webpack-aliasé—®é¢˜" class="headerlink" title="webpack aliasé—®é¢˜"></a>webpack aliasé—®é¢˜</h1><p>webpack alias åœ¨å¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥æä¾›ä¾¿åˆ©ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®å‚åŠ çš„äººå¤ªå¤šï¼Œåˆæ²¡æœ‰ä»€ä¹ˆçº¦æŸï¼Œå¤§å®¶è´ªå›¾æ–¹ä¾¿ä»€ä¹ˆéƒ½åŠ åˆ°aliasâ€¦.å°±ä¼šå˜æˆè¿™æ ·å­<br><img src="./old_alias.png"></p>
<ul>
<li>å¾ˆå¤šä½ ä¸çŸ¥é“ä»–åˆ°åº•æ˜¯node_modulesé‡Œé¢çš„åŒ…è¿˜æ˜¯è‡ªå·±å°è£…è¿‡çš„</li>
<li>å¾ˆå¤šå†™äºŒçº§è·¯å¾„å°±å¯ä»¥è·å–åˆ°çš„ï¼Œæ²¡å¿…è¦å¤šåŠ ä¸ªalias</li>
<li>ç°åœ¨æ¯”è¾ƒæ¨å´‡ä¸æ˜¯å¾ˆè¿œçš„è·¯å¾„éƒ½å†™æˆç›¸å¯¹è·¯å¾„ï¼Œç¼–è¾‘å™¨å¯ä»¥ç›´æ¥è·³è¿‡å»æ–¹ä¾¿ï¼ˆè™½ç„¶è¿™ä¸ªå¯ä»¥é€šè¿‡jsconfigæ¥è§£å†³ï¼Œä½†æ˜¯å¤ªå¤šçœ‹ç€ä¹Ÿå¾ˆçƒ¦)<br>æ‰€ä»¥æˆ‘å†³å®šæŠŠé¡¹ç›®é‡Œçš„aliasä»23ä¸ªç¼©å‡ä¸º7ä¸ªã€‚</li>
</ul>
<h1 id="åˆ©ç”¨-estools-è§£å†³webpack-Alias"><a href="#åˆ©ç”¨-estools-è§£å†³webpack-Alias" class="headerlink" title="åˆ©ç”¨ estools è§£å†³webpack Alias"></a>åˆ©ç”¨ <a href="https://github.com/estools" target="_blank" rel="noopener">estools</a> è§£å†³webpack Alias</h1><p>æˆ‘ä»¬å…ˆæ¥æ•´ç†ä¸€ä¸‹æ€è·¯</p>
<ul>
<li>å…ˆç”¨è§£æå™¨æŠŠä»£ç è§£ææˆ AST</li>
<li>å†æ‰¾å‡ºæˆ‘ä»¬éœ€è¦å»é™¤çš„aliasï¼ŒæŠŠä»–æ”¹ä¸ºå…¶ä»–å€¼ï¼Œç”Ÿæˆæ–°çš„AST</li>
<li>æŠŠæ–°çš„ASTè½¬ä¸ºä»£ç ï¼Œé‡æ–°å†™å…¥æ–‡ä»¶</li>
</ul>
<p>æˆ‘ä»¬è¿™é‡Œçš„æŠŠaliasæ”¹ä¸ºå…¶ä»–å€¼ï¼ŒæŒ‡çš„æ˜¯è¿™ç§æƒ…å†µ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç›®å½•ç»“æ„:</span><br><span class="line">- src</span><br><span class="line">  - components</span><br><span class="line">    - btn</span><br><span class="line"></span><br><span class="line">alias: &#123;</span><br><span class="line">  btn: path.resolve(basepath, &apos;src/components/btn&apos;),</span><br><span class="line">  btn: path.resolve(basepath, &apos;src/components&apos;),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åŸæ¥çš„å¼•å…¥ import Btn from &apos;btn&apos;;</span><br><span class="line">æ”¹ä¸º import Btn from &apos;components/btn&apos;;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ç”¨ <a href="https://github.com/jquery/esprima" target="_blank" rel="noopener">esprima</a> æ¥åšä»£ç åˆ†æç”Ÿæˆastï¼Œç”¨ <a href="https://github.com/estools/estraverse" target="_blank" rel="noopener">estraverse</a> æ¥è½¬æ¢ä»£ç ï¼Œç”¨ <a href="https://github.com/estools/escodegen" target="_blank" rel="noopener">escodegen</a> ç”Ÿæˆä»£ç ã€‚ç›´æ¥ä¸Šä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> aliasConfig = &#123; <span class="comment">/* webpack alias é…ç½®*/</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">translateAlias</span>(<span class="params">filePath</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è§£æast</span></span><br><span class="line">  <span class="keyword">const</span> codeStr = fs.readFileSync(filePath).toString();</span><br><span class="line">  <span class="keyword">const</span> ast = esprima.parseModule(codeStr);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è½¬æ¢ast</span></span><br><span class="line">  estraverse.traverse(ast, &#123;</span><br><span class="line">    <span class="comment">// å¯¹äºæ¯ä¸ªnodeèŠ‚ç‚¹éƒ½ä¼šè¿›å…¥è¿™ä¸ªå‡½æ•°</span></span><br><span class="line">    enter(node, parent) &#123;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æˆ‘ä»¬çš„ç›®æ ‡æ–‡ä»¶</span></span><br><span class="line">      <span class="keyword">const</span> isAliasDec = isRequireDeclaration(node, parent);</span><br><span class="line">      <span class="keyword">if</span> (isAliasDec) &#123;</span><br><span class="line">        <span class="comment">// æ›¿æ¢æ‰alias =&gt; newAlias</span></span><br><span class="line">        <span class="keyword">const</span> newVal = getModulePath(node.value, filePath);</span><br><span class="line">        node.value = newVal;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é‡æ–°ç”Ÿæˆä»£ç </span></span><br><span class="line">  <span class="keyword">const</span> newCodeStr = escodegen.generate(ast);</span><br><span class="line">  fs.writeFileSync(filePath, newCodeStr, &#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥å…·å‡½æ•°: åˆ¤æ–­æ˜¯å¦æ˜¯ require</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isRequireDeclaration</span>(<span class="params">node, parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, value &#125; = node;</span><br><span class="line">  <span class="keyword">const</span> &#123; callee &#125; = parent || &#123;&#125;;</span><br><span class="line">  <span class="comment">// ç±»å‹ä¸€è‡´ &amp;&amp; è¯¥keyåœ¨aliasKeyä¸­ &amp;&amp; æ˜¯ requireå¼•å…¥çš„</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    type === <span class="string">'Literal'</span> &amp;&amp;</span><br><span class="line">    aliasKey.includes(value) &amp;&amp;</span><br><span class="line">    !allowAliasKey.includes(value) &amp;&amp;</span><br><span class="line">    isRequest(callee)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥å…·å‡½æ•°ï¼šè·å–è·¯å¾„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getModulePath</span>(<span class="params">aliasKey, filePath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> firstDir = <span class="regexp">/\w*/</span>.exec(aliasKey)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> modulePath = aliasKey.replace(firstDir, aliasConfig[firstDir]);</span><br><span class="line">  <span class="keyword">const</span> aliasPath = aliasKey.replace(firstDir, aliasMap[firstDir]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!aliasConfig[firstDir] || !aliasMap[firstDir] || allowAliasKey.includes(firstDir)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–å¼•å…¥çš„æ¨¡å—ä¸å½“å‰æ¨¡å—ç›¸å¯¹è·¯å¾„ï¼Œåˆ¤æ–­æ˜¯å¦å¤ªé•¿ï¼Œæ˜¯å°±è¿”å›aliasï¼Œå¦åˆ™å°±è¿”å›ç›¸å¯¹è·¯å¾„å°±å®Œäº‹äº†</span></span><br><span class="line">  <span class="keyword">const</span> relativePath = path.relative(filePath, modulePath);</span><br><span class="line">  <span class="keyword">const</span> relativeTime = relativePath.split(<span class="string">'../'</span>).length - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> (relativeTime &lt; MAX_RELATIVE)? relativePath: aliasPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">translateAlias(filePath);</span><br></pre></td></tr></table></figure>
<p><img src="./estool.png" alt="estool_ast"><br>è¯•è·‘äº†ä¸€ä¸‹ï¼Œå‘ç°è¯´è™½ç„¶ä»£ç å¼•ç”¨ç¡®å®æœ‰è¢«æ›¿æ¢äº†ï¼Œä½†æ˜¯ä»£ç é‡Œé¢çš„æ‰€æœ‰ç©ºè¡Œå’Œæ³¨é‡Šéƒ½ä¸¢äº†ï¼Œè€Œä¸”ä¸€äº›è§„èŒƒæ ¼å¼ä¹Ÿå’ŒåŸæ¥ä¸ä¸€æ ·ã€‚<br>è¿™æ˜¾ç„¶æ˜¯ä¸è¡Œçš„ï¼Œå…ˆä¸è¯´æ ¼å¼çš„é—®é¢˜ï¼Œä¸€ä¸ªæ–‡ä»¶è¿æ¢è¡Œå’Œæ³¨é‡Šéƒ½æ²¡æœ‰ï¼Œé‚£ä»–å°±æ˜¯æ²¡æœ‰çµé­‚çš„js~</p>
<p>çœ‹äº†ä¸‹è¿™æ˜¯å› ä¸º <code>esprima</code> åœ¨è§£æçš„æ—¶å€™ï¼Œé‡åˆ°ç©ºè¡Œå’Œæ³¨é‡Šä¼šç›´æ¥è·³è¿‡ä¸è§£æç”ŸæˆASTï¼Œæ‰€ä»¥ä¼šå¯¼è‡´åé¢ç”Ÿæˆçš„ä»£ç æ²¡æœ‰ç©ºè¡Œå’Œæ³¨é‡Šã€‚</p>
<h1 id="babelè§£å†³ç©ºè¡Œå’Œæ³¨é‡Šç­‰é—®é¢˜ã€prettierä¿æŒä»£ç é£æ ¼ä¸€è‡´"><a href="#babelè§£å†³ç©ºè¡Œå’Œæ³¨é‡Šç­‰é—®é¢˜ã€prettierä¿æŒä»£ç é£æ ¼ä¸€è‡´" class="headerlink" title="babelè§£å†³ç©ºè¡Œå’Œæ³¨é‡Šç­‰é—®é¢˜ã€prettierä¿æŒä»£ç é£æ ¼ä¸€è‡´"></a>babelè§£å†³ç©ºè¡Œå’Œæ³¨é‡Šç­‰é—®é¢˜ã€prettierä¿æŒä»£ç é£æ ¼ä¸€è‡´</h1><p>æˆ‘ä»¬å¹³æ—¶é¡¹ç›®ä¸Šç”¨çš„æœ€å¤šçš„è½¬æ¢ä»£ç çš„å·¥å…·å°±æ˜¯babelï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ <code>esTool</code> é‚£ä¸€å¥—æ¢æˆ <code>babel</code>ç”Ÿæ€ï¼Œç”¨babelæ¥å¸®æˆ‘ä»¬åšè¿™äº›è½¬æ¢ã€‚</p>
<p>åŸç†å’Œæ€è·¯åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œç”¨ <code>babylon</code> è§£æï¼Œ<code>babel-traverse</code> è½¬æ¢ï¼Œå†ç”¨<code>babel-generator</code>ç”Ÿæˆä»£ç ã€‚<br>ç”Ÿæˆä¹‹åï¼Œå…ˆä¸å†™è¿›å»ï¼Œè€Œæ˜¯ç”¨ <code>prettier</code> æ ¼å¼åŒ–ä¸€éå†é‡å†™åˆ°æœ¬åœ°ï¼Œä»¥ä¿æŒå’ŒåŸæ¥çš„é£æ ¼ä¸€è‡´ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">translateAlias</span>(<span class="params">filePath</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`å¼€å§‹å¤„ç†ç¬¬<span class="subst">$&#123;i++&#125;</span>ä¸ª: <span class="subst">$&#123;filePath&#125;</span>`</span>)</span><br><span class="line">  <span class="keyword">const</span> code = fs.readFileSync(filePath).toString();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ast</span></span><br><span class="line">  <span class="keyword">const</span> ast = babylon.parse(code, &#123;</span><br><span class="line">    sourceType: <span class="string">'module'</span>,</span><br><span class="line">    plugins: [<span class="string">'jsx'</span>, <span class="string">'objectRestSpread'</span>]</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  traverse(ast, &#123;</span><br><span class="line">    enter(path) &#123;</span><br><span class="line">      <span class="comment">// è½¬æ¢ CommonJs çš„æƒ…å†µ</span></span><br><span class="line">      translateRequireModulePath(path, filePath);</span><br><span class="line">      <span class="comment">// è½¬æ¢ ESM çš„æƒ…å†µ</span></span><br><span class="line">      translateImportModulePath(path, filePath);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newCode = generate(ast, &#123;&#125;);</span><br><span class="line">  <span class="comment">// é‡æ–°ç”¨é¡¹ç›®çš„prettieré…ç½®æ ¼å¼åŒ–å¤šä¸€æ¬¡å†å†™å…¥</span></span><br><span class="line">  <span class="keyword">const</span> prettierCode = prettier.format(newCode.code, prettierConfig);</span><br><span class="line">  fs.writeFileSync(filePath, prettierCode);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`å¤„ç†ç»“æŸ<span class="subst">$&#123;filePath&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="./babel.png" alt="./babel.png"></p>
<p>åˆ°æ­¤å‡å°‘webpack-aliasçš„åŠŸèƒ½å¤„ç†å®Œæˆï¼Œæœ€åæ€»ç»“ä¸€ä¸‹</p>
<ol>
<li>ç”¨<code>glob</code>è¯»å–æ‰€æœ‰è¦è½¬çš„jsæ–‡ä»¶</li>
<li>ç”¨ <code>babylon</code> å°†jsæ–‡ä»¶è§£ææˆAST</li>
<li>ç”¨ <code>babel-traverse</code> å¤„ç†ASTï¼Œåˆ¤æ–­å¦‚æœæ˜¯ <code>require(&#39;xxx&#39;)</code>æˆ–è€…<code>import xxx from &#39;xxx&#39;</code> æ›¿æ¢æ‰è¿™äº›è·¯å¾„</li>
<li>ç”¨ <code>babel-generator</code> å°†æ–°ç”Ÿæˆçš„ASTè½¬åŒ–ä¸ºä»£ç </li>
<li>ç”¨ <code>prettier</code> æ ¼å¼åŒ–æ–°ç”Ÿæˆçš„ä»£ç ï¼Œä¿æŒä¸åŸé¡¹ç›®é£æ ¼ä¸€è‡´</li>
<li>é‡æ–°å†™å…¥æœ¬åœ°æ–‡ä»¶</li>
</ol>
<h1 id="å‘Šè¾ï¼"><a href="#å‘Šè¾ï¼" class="headerlink" title="å‘Šè¾ï¼"></a>å‘Šè¾ï¼</h1><p><img src="./kaiji.jpg" alt="./kaiji.jpg"><br>æœ€åå†™çš„æ—¶å€™å‚è€ƒåˆ°çš„é“¾æ¥ï¼Œå¤§éƒ¨åˆ†æ˜¯ç±»åº“çš„æ–‡æ¡£<br><a href="https://github.com/jsonz1993" target="_blank" rel="noopener">è¿·ä½ ç¼–è¯‘å™¨</a><br><a href="https://github.com/estools/escodegen" target="_blank" rel="noopener">estoolsä»£ç ç”Ÿæˆescodegen</a><br><a href="https://github.com/estools/estraverse" target="_blank" rel="noopener">estoolsä»£ç è½¬æ¢estraverse</a><br><a href="https://github.com/jquery/esprima" target="_blank" rel="noopener">ä»£ç è§£æesprima</a><br><a href="https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-introduction" target="_blank" rel="noopener">babel plugin book</a><br><a href="https://www.npmjs.com/package/babel-generator" target="_blank" rel="noopener">babel-generator</a><br><a href="https://www.npmjs.com/package/babel-traverse" target="_blank" rel="noopener">babel-traverse</a><br><a href="https://www.npmjs.com/package/babylon" target="_blank" rel="noopener">babylon</a><br><a href="http://esprima.org/demo/parse.html" target="_blank" rel="noopener">åœ¨çº¿astç”Ÿæˆ</a><br><a href="http://forivall.com/astexplorer/" target="_blank" rel="noopener">åœ¨çº¿astç”Ÿæˆ</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼â€”â€”åˆšæ‰æ˜æ˜æ˜¯å¥½çš„</title>
    <url>/2018/11/regexp-global/</url>
    <content><![CDATA[<p>ä»Šå¤©æµ‹è¯•æä¸€ä¸ªjiraç»™æˆ‘ï¼Œè¯´æœ‰ä¸€ä¸ªå¾ˆè¯¡å¼‚çš„bugï¼Œè¡¨å•éªŒè¯æœ‰æ—¶å€™ä¼šæˆåŠŸï¼Œæœ‰æ—¶å€™ä¼šå¤±è´¥ã€‚</p>
<video src="./a.mp4" controls="true"></video>

<p>è€Œä¸”å¾ˆæœ‰è§„å¾‹æ€§çš„ï¼Œä¸¤ä¸‹æˆåŠŸï¼Œæ¥ç€å¤±è´¥ï¼Œå†ä¸¤ä¸‹æˆåŠŸï¼Œå†å¤±è´¥â€¦çœ‹ä»£ç ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œ<code>\S</code>åŒ¹é…ä»»ä½•éç©ºå­—ç¬¦ï¼Œ<code>g</code>å…¨å±€æŸ¥æ‰¾ï¼Œè¿™ä¹ˆç®€å•çš„ä¸€ä¸ªæ­£åˆ™æ€ä¹ˆå¯èƒ½ä¼šå‡ºé”™ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> r = <span class="regexp">/\S/g</span>;</span><br><span class="line">$input.addEventListener(<span class="string">'blur'</span>, (e)=&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">const</span> result = r.test(e.currentTarget.value);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åç›´æ¥æ‹¿åˆ°æ§åˆ¶å°å»æµ‹è¯•ï¼Œå‘ç°ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæ¯æ¬¡éƒ½ç›´æ¥è°ƒç”¨æ­£åˆ™è¡¨è¾¾å¼çš„testæ–¹æ³•ï¼Œåˆä¸ä¼šæœ‰é—®é¢˜ã€‚æ‰€ä»¥ä¸€å¼€å§‹æ€€ç–‘æ˜¯æŠŠæ­£åˆ™å¯¹è±¡å­˜èµ·æ¥å¯¼è‡´çš„ã€‚<img src="./a.png" width="150"></p>
<p>åé¢åœ¨ <a href="https://stackoverflow.com/questions/13586786/regexp-test-returns-different-result-for-same-str-depending-on-how-where-i" target="_blank" rel="noopener">stackoverflow</a>å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test#%E5%BD%93%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E6%A0%87%E5%BF%97%E7%9A%84%E6%AD%A3%E5%88%99%E4%BD%BF%E7%94%A8test()" target="_blank" rel="noopener">MDN</a>ä¸Šæ‰¾åˆ°çœŸæ­£çš„åŸå› ã€‚</p>
<blockquote>
<p>å½“è®¾ç½®å…¨å±€æ ‡å¿—çš„æ­£åˆ™ä½¿ç”¨test()<br>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼è®¾ç½®äº†å…¨å±€æ ‡å¿—ï¼Œtest() çš„æ‰§è¡Œä¼šæ”¹å˜æ­£åˆ™è¡¨è¾¾å¼   lastIndexå±æ€§ã€‚è¿ç»­çš„æ‰§è¡Œtest()æ–¹æ³•ï¼Œåç»­çš„æ‰§è¡Œå°†ä¼šä» lastIndex å¤„å¼€å§‹åŒ¹é…å­—ç¬¦ä¸²ï¼Œ(exec() åŒæ ·æ”¹å˜æ­£åˆ™æœ¬èº«çš„ lastIndexå±æ€§å€¼).</p>
</blockquote>
<p>è¿™æ„æ€å°±å¾ˆæ˜æ˜¾äº†ï¼Œæˆ‘ä»¬æ¯ä¸€æ¬¡æœç´¢åŒ¹é…ä¸­ä¹‹åï¼Œä¸‹æ¬¡å°±ä»ä»–çš„ä¸‹ä¸€ä½å¼€å§‹æ‰§è¡Œæœç´¢ã€‚<br><img src="./b.png"></p>
<p>æ‰€ä»¥æœ€åçœ‹ä¸šåŠ¡åœºæ™¯ï¼Œå®Œå…¨ä¸éœ€è¦åŠ è¿™ä¸ª<code>g</code>ï¼Œç›´æ¥å»æ‰å°±ç®—fixäº†ã€‚å½“ç„¶å¦‚æœä½ å¤´å¾ˆé“â€¦ä¸€å®šè¦åŠ gçš„è¯ï¼Œé‚£ä¹Ÿå¯ä»¥æ¯æ¬¡æ‰§è¡Œå®Œé‡ç½® lastIndexã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> r = <span class="regexp">/\S/g</span>;</span><br><span class="line">$input.addEventListener(<span class="string">'blur'</span>, (e)=&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">const</span> result = r.test(e.currentTarget.value);</span><br><span class="line">  <span class="keyword">if</span> (result) r.lastIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><em>last è°¢è°¢å¤§é’Šå­å’Œå¤å°‘ä¸¤ä½åŒäº‹</em></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>Reactæºç ç³»åˆ—</title>
    <url>/2018/11/react-source/</url>
    <content><![CDATA[<p><a href="https://github.com/jsonz1993/react-source-learn" target="_blank" rel="noopener">react16 æºç é˜…è¯»å­¦ä¹ è®°å½•</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡½æ•°å¼ç¼–ç¨‹</title>
    <url>/2018/09/fp/</url>
    <content><![CDATA[<p><a href="https://ppt.baomitu.com/d/b063f5fc" target="_blank" rel="noopener">æœ¬æ–‡pptè¯·ç¬‘çº³</a></p>
<h1 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h1><p>ç»´åŸºç™¾ç§‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„å®šä¹‰ï¼šå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè‹±è¯­ï¼šfunctional programmingï¼‰æˆ–ç§°å‡½æ•°ç¨‹åºè®¾è®¡ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹å…¸èŒƒï¼Œå®ƒå°†è®¡ç®—æœºè¿ç®—è§†ä¸ºæ•°å­¦ä¸Šçš„å‡½æ•°è®¡ç®—ï¼Œå¹¶ä¸”é¿å…ä½¿ç”¨ç¨‹åºçŠ¶æ€ä»¥åŠæ˜“å˜å¯¹è±¡ã€‚è¿™é‡Œçš„å‡½æ•°æŒ‡çš„æ˜¯æ•°å­¦ä¸Šçš„å‡½æ•°ï¼Œæ—¢è‡ªå˜é‡ï¼ˆæ•°æ®ï¼‰çš„æ˜ å°„ã€‚</p>
<p>ä¸<code>å‘½ä»¤å¼ç¼–ç¨‹</code>å¯¹æ¯”ï¼Œ<code>å‡½æ•°å¼ç¼–ç¨‹</code>æ›´åŠ å¼ºè°ƒ<strong>ç¨‹åºæ‰§è¡Œçš„ç»“æœ</strong>è€Œé<strong>æ‰§è¡Œçš„è¿‡ç¨‹</strong>ï¼Œå€¡å¯¼åˆ©ç”¨è‹¥å¹²ç®€å•çš„æ‰§è¡Œå•å…ƒ(å°å‡½æ•°)è®©è®¡ç®—ç»“æœä¸æ–­æ¸è¿›ï¼Œé€å±‚æ¨å¯¼å¤æ‚çš„è¿ç®—ï¼Œè€Œä¸æ˜¯è®¾è®¡ä¸€ä¸ªå¤æ‚çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<p>æˆ‘çš„ç†è§£æ˜¯ï¼Œä»¥çº¯å‡½æ•°ï¼ˆ é¿å…ä½¿ç”¨ç¨‹åºçŠ¶æ€ä»¥åŠå¼‚å˜å¯¹è±¡ï¼‰ä¸ºå•å…ƒï¼Œå»æŠ½è±¡ã€æ‹†åˆ†æ¨¡å—åŠŸèƒ½çš„ç¼–ç¨‹æ€æƒ³ã€‚å…¶å®å‡½æ•°å¼ç¼–ç¨‹æˆ‘ä»¬å¹³æ—¶ä¸é™Œç”Ÿï¼Œæ¯”å¦‚react, redux éƒ½å¤šå¤šå°‘å°‘æœ‰ä¸€äº›ç›¸å…³ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¾—å‡ºå‡ ä¸ªå‡½æ•°å¼ç¼–ç¨‹çš„è¦ç‚¹ï¼š</p>
<ol>
<li>é¿å…ä½¿ç”¨ç¨‹åºçŠ¶æ€ä»¥åŠå¼‚å˜å¯¹è±¡ï¼Œæ•°æ®æ˜ å°„=&gt; çº¯å‡½æ•°</li>
<li>å¼ºè°ƒæ‰§è¡Œç»“æœè€Œéè¿‡ç¨‹=&gt; å£°æ˜å¼</li>
</ol>
<h1 id="çº¯å‡½æ•°"><a href="#çº¯å‡½æ•°" class="headerlink" title="çº¯å‡½æ•°"></a>çº¯å‡½æ•°</h1><p>çº¯å‡½æ•°ï¼šè¾“å‡ºç»“æœåªç”±è¾“å…¥å†³å®šï¼Œå¹¶ä¸”ä¸äº§ç”Ÿå‰¯ä½œç”¨(effects)ã€‚ </p>
<ol>
<li>é¿å…ä½¿ç”¨ thisï¼Œwindow ç­‰å¤–éƒ¨å˜é‡</li>
<li>æ²¡æœ‰äº§ç”Ÿå‰¯ä½œç”¨(Effects)ï¼Œæ—¢æŠŠEffectsæŠ½ç¦»å‡ºæ¥</li>
</ol>
<blockquote>
<p>Effectsæœ‰å“ªäº›å‘¢ï¼Ÿ<br>æ¯”å¦‚ æ”¹åŠ¨å¤–éƒ¨æ•°æ®ï¼Œå‘èµ·ajaxè¯·æ±‚ï¼Œæ”¹åŠ¨domç­‰ç­‰ã€‚<br>å†™è¿‡dvaçš„å°±çŸ¥é“ï¼Œdvaçš„modelæœ‰ä¸€ä¸ªeffectsï¼Œå°±æ˜¯ç”¨æ¥æ”¾è¿™äº›å‰¯ä½œç”¨çš„ä»£ç ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬æŠŠEffectsåˆ†ç¦»å‡ºæ¥ä¹‹åï¼Œå‰©ä¸‹çš„å°±æ˜¯çº¯å‡½æ•°ï¼Œçº¯å‡½æ•°å¯ä»¥å¾ˆç®€å•çš„è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæ‰€ä»¥æ˜¯ä¸å®¹æ˜“å‡ºbugçš„ï¼Œå› ä¸ºå¾€å¾€æœ‰bugçš„éƒ½æ˜¯ä¸å¯é¢„è§çš„éƒ¨åˆ†ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr=[<span class="string">'bilibili'</span>, <span class="string">'hello'</span>, <span class="string">'jsonz'</span>];</span><br><span class="line">arr.slice(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// æ²¡å‰¯ä½œç”¨</span></span><br><span class="line">arr.splice(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// æœ‰å‰¯ä½œç”¨ï¼Œä¿®æ”¹åˆ°åŸæ¥çš„arræ•°ç»„ å¯èƒ½ä¼šé€ æˆæ„æƒ³ä¸åˆ°çš„bug</span></span><br></pre></td></tr></table></figure></p>
<p>è™½ç„¶æ‰§è¡Œä¹‹åï¼Œéƒ½èƒ½å¾—åˆ° <code>Hello Jsonz</code>ã€‚ ä½†æ˜¯ splice ä¼šæ”¹åŠ¨åˆ°åŸæ¥çš„æ•°ç»„ï¼Œæ‰€ä»¥ä¸ç®—çº¯å‡½æ•°ã€‚</p>
<p>å·¥ä½œä¸­å…¶å®å¾ˆå¤šå·¥å…·ç±»çš„functionéƒ½æ˜¯çº¯å‡½æ•°ï¼Œreduxçš„Reducerä¹Ÿæ˜¯æ ‡å‡†çš„çº¯å‡½æ•°ã€‚</p>
<p>redux reducers<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">state, &#123; payload &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...state,</span><br><span class="line">    ...payload,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>çº¯å‡½æ•°çš„å¥½å¤„æ˜¯ï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒæŸä¸ªå€¼åœ¨æŸå¤„å‘é€æ„æƒ³ä¸åˆ°çš„æ”¹å˜å¯¼è‡´å‡ºbugï¼›çº¯å‡½æ•°é‡Œä¸äº§ç”Ÿå‰¯ä½œç”¨ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæ‹…å¿ƒæ”¹åŠ¨åˆ°å…¶ä»–åœ°æ–¹ï¼Œä»£ç æ›´å¥ç¡•ï¼›å¯ä»¥æ›´ä¼˜é›…çš„ç»„åˆå¤ç”¨ï¼Œæ–¹ä¾¿ç§»æ¤åˆ°å…¶ä»–ç¯å¢ƒ(web workers)ï¼›æ–¹ä¾¿çš„å†™å•å…ƒæµ‹è¯•ã€‚</p>
<h1 id="å£°æ˜å¼"><a href="#å£°æ˜å¼" class="headerlink" title="å£°æ˜å¼"></a>å£°æ˜å¼</h1><p>åœ¨è¯´å£°æ˜å¼ä¹‹å‰ï¼Œè¦å…ˆæ™®åŠä¸€ä¸‹ä¸ä¹‹å¯¹åº”çš„å‘½ä»¤å¼ï¼ˆæŒ‡ä»¤å¼ï¼‰ã€‚<br>æˆ‘ä»¬å¹³æ—¶å†™çš„ä»£ç åŸºæœ¬éƒ½æ˜¯å‘½ä»¤å¼ï¼Œæ—¢æˆ‘ä»¬é€šè¿‡ä¸€æ¡ä¸€æ¡çš„å‘½ä»¤å»æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå…¶ä¸­ä¼šæ¶‰åŠåˆ°å¾ˆå¤šç»†èŠ‚çš„ä¸œè¥¿ã€‚<br>æ—¢å…³æ³¨æ‰§è¡Œè¿‡ç¨‹ï¼Œç”¨å„ç§æ§åˆ¶è¯­å¥<code>if...else...</code>ä¸<code>for</code>å¾ªç¯ç­‰ã€‚</p>
<p><strong>å‘½ä»¤å¼ç¼–ç¨‹ï¼šå‘½ä»¤â€œæœºå™¨â€å¦‚ä½•å»åšäº‹æƒ…(how)ï¼Œè¿™æ ·ä¸ç®¡ä½ æƒ³è¦çš„æ˜¯ä»€ä¹ˆ(what)ï¼Œå®ƒéƒ½ä¼šæŒ‰ç…§ä½ çš„å‘½ä»¤å®ç°ã€‚</strong><br><strong>å£°æ˜å¼ç¼–ç¨‹ï¼šå‘Šè¯‰â€œæœºå™¨â€ä½ æƒ³è¦çš„æ˜¯ä»€ä¹ˆ(what)ï¼Œè®©æœºå™¨æƒ³å‡ºå¦‚ä½•å»åš(how)ã€‚</strong></p>
<blockquote>
<p>SQLè¯­å¥æ˜¯å…¸å‹å£°æ˜å¼ï¼ŒSQLå­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°åˆ™æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ã€‚</p>
</blockquote>
<figure class="highlight javascript"><figcaption><span>reacté‡Œé¢çš„ä¸¤ç§ç¼–ç¨‹æ–¹å¼</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å¼ç¼–ç¨‹</span></span><br><span class="line"><span class="keyword">const</span> data= [&#123;<span class="attr">name</span>: <span class="string">'jsonz'</span>, <span class="attr">age</span>: <span class="number">2</span>&#125;, &#123; <span class="attr">name</span>: <span class="string">'balala'</span>, <span class="attr">age</span>: <span class="number">3</span>&#125;, &#123; <span class="attr">name</span>: <span class="string">'å°é­”ä»™'</span>, <span class="attr">age</span>: <span class="number">30</span>&#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dom = data.filter(<span class="function"><span class="params">item</span>=&gt;</span> age&lt;<span class="number">10</span>)</span><br><span class="line">  .map(<span class="function"><span class="params">item</span>=&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;item.name&#125; - &#123;item.age&#125;<span class="tag">&lt;<span class="name">span</span>&gt;</span>); // è¿™é‡Œåé¢çš„spanæ˜¯é—­åˆçš„<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml">// å‘½ä»¤å¼ç¼–ç¨‹</span></span><br><span class="line"><span class="xml">const data= [&#123;name: 'jsonz', age: 2&#125;, &#123; name: 'balala', age: 3&#125;, &#123; name: 'å°é­”ä»™', age: 30&#125;];</span></span><br><span class="line"></span><br><span class="line"><span class="xml">let newData = [];</span></span><br><span class="line"><span class="xml">for (let i= 0; i<span class="tag">&lt; <span class="attr">data.length</span>; <span class="attr">i</span>++) &#123;</span></span></span><br><span class="line"><span class="xml">  if (data[i].age <span class="tag">&lt; <span class="attr">10</span>) &#123;</span></span></span><br><span class="line"><span class="xml">    newData.push(data);</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">const dom2 = [];</span></span><br><span class="line"><span class="xml">for (let i= 0; i<span class="tag">&lt; <span class="attr">newData.length</span>; <span class="attr">i</span>++) &#123;</span></span></span><br><span class="line">  dom2.push(`&lt;span&gt;$&#123;item.name&#125;-$&#123;item.age&#125;&lt;span&gt;`);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå£°æ˜å¼çš„ä»£ç æ›´åŠ ç®€æ´æ¸…æ™°ä¼˜é›…ã€‚</p>
<figure class="highlight javascript"><figcaption><span>å£°æ˜å¼ä»£ç å¤ç”¨</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒå€</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">double</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> results = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; arr.length; i++) &#123;</span><br><span class="line">    results.push(arr[i] * <span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> results;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// +1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOne</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> results = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; arr.length; i++) &#123;</span><br><span class="line">    results.push(arr[i] +<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> results;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¼: å»é‡å¤ä»£ç ï¼Œç®€æ´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">double</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.map(<span class="function"><span class="params">item</span>=&gt;</span> item*<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOne</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.map(<span class="function"><span class="params">item</span>=&gt;</span> item+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¼ç©¶æç‰ˆï¼š å€ŸåŠ© Ramda</span></span><br><span class="line"><span class="keyword">const</span> m= _.curry(<span class="function">(<span class="params">fn, arr</span>) =&gt;</span> arr.map(<span class="function"><span class="params">item</span>=&gt;</span> fn(item)));</span><br><span class="line"><span class="keyword">const</span> double = m(<span class="function"><span class="params">item</span>=&gt;</span> item*<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> addOne = m(<span class="function"><span class="params">item</span>=&gt;</span> item+<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºä¸€äº›å‡½æ•°å¼æœ€ç®€å•çš„æ€è·¯ï¼š<br>æŠŠå¾ªç¯å’Œåˆ¤æ–­ç­‰æ§åˆ¶è¯­å¥å°½å¯èƒ½æ¢æˆ<code>ç­›é€‰ filter</code>ã€<code>æ˜ å°„ map</code>ã€<code>åŒ–çº¦ reduce</code>ã€‚</p>
<figure class="highlight javascript"><figcaption><span>cookieè·å–</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å‘½ä»¤å¼</span></span><br><span class="line"><span class="comment">// è·å–cookie</span></span><br><span class="line"><span class="keyword">var</span> _cookie = <span class="built_in">document</span>.cookie;</span><br><span class="line"><span class="comment">// cookie çš„å½¢å¼æ˜¯å­—ç¬¦ä¸² "key1=value1; key2=value2; "; æŠŠä»–è½¬å˜æˆæ•°ç»„å½¢å¼ ["key1=value1", "key2=value2"]ã€‚ ç”¨ "; "ä½œä¸ºåˆ†éš”ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _cookieArray = _cookie.split(<span class="string">'; '</span>);</span><br><span class="line"><span class="comment">// å¾ªç¯æŠŠæ•°ç»„é‡Œé¢çš„ key1=value1å˜æˆå¯¹è±¡objçš„keyå’Œvalue æ–¹ä¾¿è·å–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i= <span class="number">0</span>; i&lt; _cookieArray.length; i++) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å–å‡ºcookieæ•°ç»„é‡Œé¢çš„å•ä¸ª:  key1=value1</span></span><br><span class="line">    <span class="keyword">var</span> cookieItem = _cookieArray[i];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠè¿™ä¸ªå­—ç¬¦ä¸²key1= value1 å˜æ¢æˆæ•°ç»„ [key1, value1]ï¼Œç”¨ "=" åšä¸ºåˆ†å‰²ç¬¦</span></span><br><span class="line">    <span class="keyword">var</span> cookieItemArray = cookieItem.split(<span class="string">'='</span>); <span class="comment">// [key1, value1]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠåˆ†å‰²å¥½çš„æ•°ç»„ï¼Œèµ‹å€¼ç»™obj  </span></span><br><span class="line">    <span class="keyword">var</span> key = cookieItemArray[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> value = cookieItemArray[<span class="number">1</span>];</span><br><span class="line">    obj[key] = value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°å¼</span></span><br><span class="line"><span class="built_in">document</span>.cookie.split(<span class="string">'; '</span>)</span><br><span class="line">    .map(<span class="function"><span class="params">item</span>=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> [key, value] = item.split(<span class="string">'='</span>);</span><br><span class="line">        <span class="keyword">return</span> &#123;key, value&#125;;</span><br><span class="line">    &#125;)</span><br><span class="line">    .reduce(<span class="function">(<span class="params">acc, cur</span>)=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; key, value &#125; = cur;</span><br><span class="line">        acc[key] = value;</span><br><span class="line">        <span class="keyword">return</span> acc;</span><br><span class="line">    &#125;, &#123;&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="ç»¼åˆ-çº¯å‡½æ•°-å£°æ˜å¼"><a href="#ç»¼åˆ-çº¯å‡½æ•°-å£°æ˜å¼" class="headerlink" title="ç»¼åˆ çº¯å‡½æ•° + å£°æ˜å¼"></a>ç»¼åˆ çº¯å‡½æ•° + å£°æ˜å¼</h1><p>è¯¥éƒ¨åˆ†æºä»£ç å¯ä»¥çœ‹è¿™ä¸ªä»“åº“ ( â˜‰_â˜‰)â‰¡â˜oâ”€â”€â”€â”€â˜…Â°<a href="https://github.com/jsonz1993/wheel/tree/master/fq-demo" target="_blank" rel="noopener">ä»“åº“åœ°å€</a></p>
<figure class="highlight javascript"><figcaption><span>æ±‚å®Œç¾æ•°</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//  å®Œå…¨æ•°ï¼ˆPerfect numberï¼‰ï¼Œåˆç§°å®Œç¾æ•°æˆ–å®Œå¤‡æ•°ï¼Œæ˜¯ä¸€äº›ç‰¹æ®Šçš„è‡ªç„¶æ•°ã€‚ å®ƒæ‰€æœ‰çš„çœŸå› å­ï¼ˆå³é™¤äº†è‡ªèº«ä»¥å¤–çš„çº¦æ•°ï¼‰çš„å’Œï¼ˆå³å› å­å‡½æ•°ï¼‰ï¼Œæ°å¥½ç­‰äºå®ƒæœ¬èº«</span></span><br><span class="line"><span class="comment">// æ¯”å¦‚ 6 = 1 + 2 + 3 æ˜¯å®Œç¾æ•°; 8 != 1 + 2 + 4 ä¸æ˜¯å®Œç¾æ•°</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> num = <span class="number">6</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isPerfect</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> aliquotSum() === num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isFactor</span>(<span class="params">potential</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num % potential === <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getFactors</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = [];</span><br><span class="line"></span><br><span class="line">    arr.push(<span class="number">1</span>); </span><br><span class="line">    arr.push(num);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">2</span>; i&lt; num; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isFactor(i)) arr.push(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">aliquotSum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> factors = getFactors(num);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; factors.length; i++) &#123;</span><br><span class="line">      sum += factors[i];</span><br><span class="line">    &#125;</span><br><span class="line">    sum -= num;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = isPerfect();</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å‡½æ•°å¼é æ‹¢</span></span><br><span class="line"><span class="comment">// 1. å°† num å˜ä¸ºä¼ å‚ è€Œä¸æ˜¯å¤–éƒ¨çŠ¶æ€</span></span><br><span class="line"><span class="comment">// 2. ä½¿å¾—æ‰€æœ‰æ–¹æ³•éƒ½å˜ä¸ºçº¯å‡½æ•°</span></span><br><span class="line"><span class="comment">// 3. çœŸå› å­ç›¸åŠ æ”¹ä¸ºå‡½æ•°å¼å†™æ³•</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">isPerfect</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> aliquotSum(num) === num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isFactor</span>(<span class="params">num, potential</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num % potential === <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getFactors</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">Array</span>(num), (item, i)=&gt; i)</span><br><span class="line">      .filter(<span class="function"><span class="params">v</span>=&gt;</span> isFactor(num, v));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">aliquotSum</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> factors = getFactors(num);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; factors.length; i++) &#123;</span><br><span class="line">      sum += factors[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = isPerfect(<span class="number">6</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç©¶æç‰ˆ</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> aliquotSum = <span class="function"><span class="params">num</span>=&gt;</span> <span class="built_in">Array</span>.from(<span class="built_in">Array</span>(num), (item, i)=&gt; i)</span><br><span class="line">    .filter(<span class="function"><span class="params">item</span>=&gt;</span> num % item === <span class="number">0</span>)</span><br><span class="line">    .reduce(<span class="function">(<span class="params">cur, next</span>)=&gt;</span> cur += next);</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isPerfect</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> aliquotSum(num) === num;</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">const</span> result = isPerfect(<span class="number">6</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢éƒ½æ˜¯æ¯”è¾ƒå°çš„å·¥å…·demoï¼ŒåŸºæœ¬ä¸Šä¸åŒ…å«Effectsï¼Œä½†æ˜¯å®é™…ä¸Šé¡¹ç›®å……æ–¥ä¸€å †ä¸šåŠ¡é€»è¾‘(Effects)ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šå€ŸåŠ©ä¸€äº›å·¥å…·/åº“æ¥å®ç°,æ¯”å¦‚ <code>ramda.js</code>å’Œ<code>rx.js</code>ã€‚</p>
<blockquote>
<p><code>rxJs</code> å®˜ç½‘çš„æè¿°æ˜¯ Reactive Extensions Library for JavaScriptç®€å•æ¥è¯´RxJSå°±æ˜¯è¾…åŠ©æˆ‘ä»¬å†™å‡ºå‡½æ•°å¼å“åº”å¼ä»£ç çš„ä¸€ç§å·¥å…·ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬ç°åœ¨æ¥å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œé¡µé¢ä¸Šæœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»ä¹‹åè¾“å‡ºè®¡æ•°<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šç‰ˆæœ¬</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> button = <span class="built_in">document</span>.querySelector(<span class="string">'#button'</span>);</span><br><span class="line">  button.addEventListener(<span class="string">'click'</span>, ()=&gt; &#123;</span><br><span class="line">    count += <span class="number">1</span>; <span class="comment">// ç”¨åˆ°å¤–éƒ¨å˜é‡</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`clicked!<span class="subst">$&#123;count&#125;</span> times`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// RxJsç‰ˆæœ¬</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">const</span> &#123; fromEvent, <span class="attr">operators</span>: &#123; scan, &#125; &#125; = rxjs;</span><br><span class="line"> <span class="keyword">const</span> button = <span class="built_in">document</span>.querySelector(<span class="string">'#button'</span>);</span><br><span class="line"></span><br><span class="line"> fromEvent(button, <span class="string">'click'</span>)</span><br><span class="line">  .pipe(</span><br><span class="line">    <span class="comment">// scan éšç€æ—¶é—´çš„æ¨ç§»è¿›è¡Œå½’å¹¶ã€‚</span></span><br><span class="line">    scan(<span class="function">(<span class="params">count</span>)=&gt;</span> count+ <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">  )</span><br><span class="line">  .subscribe(<span class="function"><span class="params">count</span>=&gt;</span> <span class="built_in">console</span>.log(<span class="string">`clicked! <span class="subst">$&#123;count&#125;</span> times`</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>èŠ‚æµå’Œç´¯åŠ ç‚¹å‡»åæ ‡<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> button = <span class="built_in">document</span>.querySelector(<span class="string">'#button'</span>);</span><br><span class="line">  <span class="keyword">const</span> rate = <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> lastClick = <span class="built_in">Date</span>.now() - rate;</span><br><span class="line">  button.addEventListener(<span class="string">'click'</span>, (e)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Date</span>.now() - lastClick &gt;= rate) &#123;</span><br><span class="line">      count += e.clientX;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`clicked!<span class="subst">$&#123;count&#125;</span> times`</span>);</span><br><span class="line">      lastClick = <span class="built_in">Date</span>.now();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">const</span> &#123; fromEvent, <span class="attr">operators</span>: &#123; scan, throttleTime, map &#125; &#125; = rxjs;</span><br><span class="line"> <span class="keyword">const</span> button = <span class="built_in">document</span>.querySelector(<span class="string">'#button'</span>);</span><br><span class="line"></span><br><span class="line"> fromEvent(button, <span class="string">'click'</span>)</span><br><span class="line">  .pipe(</span><br><span class="line">    throttleTime(<span class="number">1000</span>),</span><br><span class="line">    map(<span class="function"><span class="params">e</span>=&gt;</span> e.clientX),</span><br><span class="line">    scan(<span class="function">(<span class="params">count, clientX</span>)=&gt;</span> count+ clientX, <span class="number">0</span>)</span><br><span class="line">  )</span><br><span class="line">  .subscribe(<span class="function"><span class="params">count</span>=&gt;</span> <span class="built_in">console</span>.log(<span class="string">`clicked! <span class="subst">$&#123;count&#125;</span> times`</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨<code>Ramda.js</code>æ¥å®ç°ä¸€ä¸ªé¡µé¢ï¼Œè·å–æŸä¸ªå…³é”®å­—å›¾ç‰‡ï¼Œå¹¶å±•ç¤ºå‡ºæ¥ã€‚<code>Ramda</code>ä¸»è¦å¸®å¿™å®ç°ä¸€äº› <code>curry</code>, <code>compose</code> ç­‰åŠŸèƒ½</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">requirejs.config(&#123;</span><br><span class="line">  paths: &#123;</span><br><span class="line">    ramda: <span class="string">'https://cdnjs.cloudflare.com/ajax/libs/ramda/0.13.0/ramda.min'</span>,</span><br><span class="line">    jquery: <span class="string">'https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>([</span><br><span class="line">    <span class="string">'ramda'</span>,</span><br><span class="line">    <span class="string">'jquery'</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">_, $</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬æŠŠä¸çº¯çš„EffectsæŠ½å‡ºæ¥</span></span><br><span class="line">    <span class="keyword">const</span> Impure = &#123;</span><br><span class="line">      getJSON: _.curry(<span class="function">(<span class="params">callback, url</span>)=&gt;</span> $.getJSON(url, callback)),</span><br><span class="line"></span><br><span class="line">      setHtml: _.curry(<span class="function">(<span class="params">sel, html</span>)=&gt;</span> $(sel).html(html)),</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¼ å…¥url ç”Ÿæˆ img dom</span></span><br><span class="line">    <span class="keyword">const</span> img = <span class="function"><span class="keyword">function</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $(<span class="string">'&lt;img /&gt;'</span>, &#123; <span class="attr">src</span>: url &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ä¼ å…¥å‚æ•°çš„ media å±æ€§ï¼Œä»¥åŠè·å– mediaå±æ€§ä¸Šçš„ mã€‚ ç­‰ä»·äº arg.media.m</span></span><br><span class="line">    <span class="keyword">const</span> mediaUrl = _.compose(_.prop(<span class="string">'m'</span>), _.prop(<span class="string">'media'</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ä¼ å…¥å‚æ•°çš„ item å±æ€§ï¼Œä»¥åŠå¯¹æ¯ä¸ªitemæ‰§è¡Œ mediaUrl å‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> srcs = _.compose(_.map(mediaUrl), _.prop(<span class="string">'items'</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠimgå’Œsrcså‡½æ•°æ•´åˆèµ·æ¥</span></span><br><span class="line">    <span class="keyword">const</span> images = _.compose(_.map(img), srcs);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> url = <span class="function"><span class="params">term</span>=&gt;</span> <span class="string">`https://api.flickr.com/services/feeds/photos_public.gne</span></span><br><span class="line"><span class="string">    ?tags=<span class="subst">$&#123;term&#125;</span>&amp;format=json&amp;jsoncallback=?`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠimgesè·å–åˆ°çš„å‚æ•°ä¼ ç»™ Impure.setHtml('body');</span></span><br><span class="line">    <span class="keyword">const</span> renderImages = _.compose(Impure.setHtml(<span class="string">'body'</span>), images);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠæ‰€æœ‰å°å‡½æ•°æ•´åˆæˆä¸€ä¸ªå¤§çš„å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™è¿™ä¸ªappå–‚æ•°æ®å³å¯</span></span><br><span class="line">    <span class="keyword">const</span> app = _.compose(Impure.getJSON(renderImages), url);</span><br><span class="line"></span><br><span class="line">    app(<span class="string">'cat'</span>);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ä¼˜åŒ–<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line">    <span class="keyword">const</span> mediaUrl = _.compose(_.prop(<span class="string">'m'</span>), _.prop(<span class="string">'media'</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> srcs = _.compose(_.map(mediaUrl), _.prop(<span class="string">'items'</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> images = _.compose(_.map(img), srcs);</span><br><span class="line">    </span><br><span class="line"><span class="comment">// new</span></span><br><span class="line">    <span class="keyword">const</span> mediaUrl = _.compose(_.prop(<span class="string">'m'</span>), _.prop(<span class="string">'media'</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> images = _.compose(_.map(img), _.map(mediaUrl), _.prop(<span class="string">'items'</span>));</span><br></pre></td></tr></table></figure></p>
<p>å†ä¼˜åŒ–<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> images = _.compose(_.map(_.compose(img, mediaUrl)), _.prop(<span class="string">'items'</span>));</span><br></pre></td></tr></table></figure></p>
<!-- ä¸¥æ ¼æ„ä¹‰ä¸Šçš„å‡½æ•°å¼ç¼–ç¨‹æ„å‘³ç€ä¸ä½¿ç”¨å¯å˜çš„å˜é‡ï¼Œèµ‹å€¼ï¼Œå¾ªç¯å’Œå…¶ä»–å‘½ä»¤å¼æ§åˆ¶ç»“æ„è¿›è¡Œç¼–ç¨‹ã€‚

ç”±äºå‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€ä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼å‡½æ•°æŒ‡é’ˆçš„æ–¹å¼æ¥å®ç°é«˜é˜¶å‡½æ•°ï¼Œå‡½æ•°å¼çš„æœ€ä¸»è¦çš„å¥½å¤„ä¸»è¦æ˜¯ä¸å¯å˜æ€§å¸¦æ¥çš„ã€‚æ²¡æœ‰å¯å˜çš„çŠ¶æ€ï¼Œå‡½æ•°å°±æ˜¯å¼•ç”¨é€æ˜ï¼ˆReferential transparencyï¼‰çš„å’Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚

å‡½æ•°å¼ç¼–ç¨‹æ˜¯ç»™è½¯ä»¶å¼€å‘è€…æä¾›çš„å¦ä¸€å¥—å·¥å…·ç®±ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¦å¤–ä¸€ç§æŠ½è±¡å’Œæ€è€ƒçš„æ–¹å¼ã€‚  -->
<h1 id="å‡½æ•°å¼å’Œé¢å‘å¯¹è±¡å¯¹æ¯”"><a href="#å‡½æ•°å¼å’Œé¢å‘å¯¹è±¡å¯¹æ¯”" class="headerlink" title="å‡½æ•°å¼å’Œé¢å‘å¯¹è±¡å¯¹æ¯”"></a>å‡½æ•°å¼å’Œé¢å‘å¯¹è±¡å¯¹æ¯”</h1><p>é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼Œ<code>å°è£…</code> <code>ç»§æ‰¿</code> <code>å¤šæ€</code>ã€‚</p>
<p>æŠŠçŠ¶æ€çš„æ”¹å˜å°è£…èµ·æ¥ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ™°ï¼Œé€šè¿‡ç±»ä¸ç»§æ‰¿å»å¤„ç†å…³è”å…³ç³»ã€‚ä½†æ˜¯ä¼šå……æ»¡å…¬ç”¨å˜é‡ï¼Œ<code>this</code>ï¼Œ<code>bind</code>ç­‰ã€‚</p>
<p>é¢å‘å¯¹è±¡ç›®å‰æ›´åŠ å¹¿æ³›ï¼Œè€Œä¸”æ›´å®¹æ˜“è¢«æ¥å—ï¼Œå†™èµ·æ¥æ›´å®¹æ˜“ï¼Œä½†å¯èƒ½ä¼šæœ‰æ›´å¤šå†—ä½™çš„ä»£ç ï¼Œæ†ç»‘äº†å¾ˆå¤šçŠ¶æ€ï¼Œå…¸å‹çš„é—®é¢˜æ˜¯ <strong>ä½ åªéœ€è¦ä¸€ä¸ªé¦™è•‰ï¼Œä½†æ˜¯å´å¾—åˆ°ä¸€ä¸ªæ‹¿ç€é¦™è•‰çš„å¤§çŒ©çŒ©ä»¥åŠæ•´ä¸ªä¸›æ—ã€‚</strong></p>
<hr>
<p>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œå°½é‡å‡å°‘ä¸ç¡®å®šå› ç´ ï¼Œæ¥è®©ä»£ç æ›´åŠ æ¸…æ™°å¥ç¡•ã€‚</p>
<p>æ¯ä¸ªå‡½æ•°éƒ½ä¸è¦å»ä¿®æ”¹åŸæœ‰çš„æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡äº§ç”Ÿæ–°çš„æ•°æ®æ¥åšä¸ºè¿ç®—ç»“æœï¼Œ<em>è¿™ä¹Ÿæ„å‘³ç€å‡½æ•°å¼æ¯”è¾ƒè€—èµ„æºï¼Œæ‰€ä»¥åœ¨è®¡ç®—æœºçŸ³å™¨æ—¶ä»£å¹¶ä¸æµè¡Œ</em>ã€‚</p>
<p>ç®€å•æ¥è¯´å°±æ˜¯å¾ˆå¤šå°çš„çº¯å‡½æ•°ï¼Œä¸€ä¸ªå°å‡½æ•°åªåšä¸€äº›äº‹æƒ…ï¼Œç„¶åç”¨è¿™äº›å°å‡½æ•°æ¥ç»„ç»‡æˆæ›´å¤§çš„å‡½æ•°ï¼Œå‡½æ•°çš„å‚æ•°ä¸è¿”å›å€¼ä¹Ÿå¤§éƒ¨åˆ†éƒ½æ˜¯å‡½æ•°ã€‚<br>æœ€åèƒ½å¾—åˆ°ä¸€ä¸ªè¶…çº§ç‰›é€¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬åªè¦æŠŠæ•°æ®ç»™ä»–ï¼Œå°±å¯ä»¥äº†ã€‚</p>
<p>å‡½æ•°å¼ç®€æ´ï¼Œæ¸…æ™°å¯å¤ç”¨æ€§é«˜ï¼Œå‡ºé”™å‡ ç‡æ›´å°ã€‚ä½†æ˜¯ä¸€å¼€å§‹æ€ç»´å¾ˆéš¾ä»é¢å‘å¯¹è±¡æˆ–å‘½ä»¤å¼è½¬æ¢è¿‡æ¥ï¼Œå¾€å¾€ä¹Ÿéœ€è¦å€ŸåŠ©ä¸€äº›å·¥å…·åº“æ¥ç¼–å†™ã€‚</p>
<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>è¿™é‡Œåªæäº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›æ€æƒ³ï¼Œä½†æ˜¯çœŸæ­£å‡½æ•°å¼å¼€å‘è¿˜åŒ…å«å¾ˆå¤šå…¶ä»–è¦å­¦çš„ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨åˆ°çš„<code>æŸ¯é‡ŒåŒ–curry</code>è¿˜æœ‰<code>ä»£ç ç»„åˆcompose</code>ç­‰ï¼Œå…‰<code>RxJs</code>æä¾›çš„apiå°±æœ‰179ä¸ªä¹‹å¤šâ€¦</p>
<p>å†è€…ä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯¹å‡½æ•°å¼çš„ç†è§£ä¸å¤Ÿé€å½»ï¼Œæœ‰è¯•è¿‡æŸä¸ªéœ€æ±‚ç”¨å‡½æ•°å¼çš„æ€æƒ³å»å†™ï¼Œä½†æ˜¯æœ‰ç‚¹å¥½åƒç¡¬æ°çš„æ ·å­ï¼Œå†™çš„æœ‰ç‚¹ä¸ä¼¦ä¸ç±»â€¦.æ‰€ä»¥ç°åœ¨åªæ˜¯å¸æ”¶ä¸€äº›å‡½æ•°å¼çš„æ€æƒ³ï¼ˆæ¯”å¦‚çº¯å‡½æ•°å‡å°‘ä¸ç¡®å®šæ€§ï¼‰ï¼Œä½†æ˜¯å¹³æ—¶å·¥ä½œä¸ä¼šå¾ˆåˆ»æ„å…¨éƒ¨éƒ½ç”¨å‡½æ•°å¼å»å†™ã€‚åªæ˜¯å½“æˆä¸€ä¸ªå¯ä»¥æ‰©å±•çš„çŸ¥è¯†é¢ï¼Œåé¢å¦‚æœå‡½æ•°å¼çœŸçš„åœ¨å‰ç«¯æµè¡Œèµ·æ¥ï¼Œå†ä¸Šæ‰‹ä¹Ÿä¸è¿Ÿã€‚</p>
<p>é¡ºè·¯æ„Ÿæ…¨JSçš„çµæ´»æ€§ï¼Œæ—¢æœ‰ES6é¢å‘å¯¹è±¡çš„ç‰¹æ€§<code>class</code>ä¹Ÿæœ‰ES5çš„ <code>filter</code>ã€<code>map</code>ã€<code>reduce</code>ï¼Œä»¥åŠES.Nextçš„è£…é¥°å™¨(Decorator)ç­‰å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ã€‚</p>
<p>æœ€åå†ç»™å‡ºå‚è€ƒçš„ä»¥åŠå­¦ä¹ è¿‡ç¨‹çœ‹åˆ°çš„ä¸€äº›ä¸é”™çš„ä¹¦ç±å’Œæ–‡ç« :</p>
<p><a href="https://www.gitbook.com/book/llh911001/mostly-adequate-guide-chinese" target="_blank" rel="noopener">JS å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—</a><br><a href="https://www.amazon.cn/dp/B07CXZ9D8N/ref=sr_1_1?ie=UTF8&amp;qid=1535945880&amp;sr=8-1&amp;keywords=%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BARxjs" target="_blank" rel="noopener">æ·±å…¥æµ…å‡ºRxjs</a><br><a href="https://www.amazon.cn/dp/B014SCOQA0/ref=sr_1_1?ie=UTF8&amp;qid=1535945728&amp;sr=8-1&amp;keywords=%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%80%9D%E7%BB%B4" target="_blank" rel="noopener">å‡½æ•°å¼ç¼–ç¨‹æ€ç»´</a><br><a href="https://juejin.im/post/5950b0c56fb9a06bca0b7c04" target="_blank" rel="noopener">å‘½ä»¤å¼ã€å£°æ˜å¼ã€é¢å‘å¯¹è±¡ã€å‡½æ•°å¼ã€æ§åˆ¶åè½¬ä¹‹åå±±è®ºå‰‘ï¼ˆä¸Šï¼‰</a><br><a href="https://github.com/ReactiveX/rxjs" target="_blank" rel="noopener">RxJs å“åº”å¼ä»£ç åº“</a><br><a href="https://github.com/ramda/ramda" target="_blank" rel="noopener">Ramda å‡½æ•°å¼å·¥å…·åº“</a><br><a href="https://www.haskell.org/" target="_blank" rel="noopener">Haskell çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€</a><br><a href="https://www.zhihu.com/question/28292740" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹æ€ç»´</a><br><a href="http://pinggod.com/2016/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%9C%AF%E8%AF%AD%E8%A7%A3%E6%9E%90/" target="_blank" rel="noopener">å‡½æ•°å¼ç¼–ç¨‹æœ¯è¯­è§£æ</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ</title>
    <url>/2018/07/circular-reference/</url>
    <content><![CDATA[<p>æœ¬ç¯‡ä¸»è¦è¯´ä¸€äº›åŸºç¡€çŸ¥è¯†ç‚¹ï¼Œå…³äºå¤šé¡¹èµ‹å€¼é¡ºåºï¼Œå¯¹è±¡å¼•ç”¨ç­‰ï¼ŒæœŸé—´æ’å…¥ä¸€ç‚¹es6åªæ˜¯ä»¥åŠè§£å†³é—®é¢˜çš„æ€è·¯ã€‚</p>
<p>å¼€å¤´å…ˆæ¥åšä¸€é“é¢è¯•é¢˜</p>
<h2 id="part1"><a href="#part1" class="headerlink" title="part1"></a>part1</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a=&#123;<span class="attr">n</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> b=a;</span><br><span class="line">a.x=a=&#123;<span class="attr">n</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a.x);</span><br><span class="line"><span class="built_in">console</span>.log(b.x);</span><br></pre></td></tr></table></figure>
<p>æœ€åè¾“å‡ºçš„æ˜¯ä»€ä¹ˆï¼Ÿ å…ˆä¸è¯´ç­”æ¡ˆï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹</p>
<p>L2(ç¬¬äºŒè¡Œ) æˆ‘ä»¬æŠŠaèµ‹å€¼ç»™bï¼Œ ç”±äºaæ˜¯å¯¹è±¡ç±»å‹ï¼Œè¿™å°±æ„å‘³ç€bå’ŒaæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€</p>
<p>L3 <code>a.x = a = { n: 2}</code></p>
<p>è¿™é‡Œæˆ‘ä»¬æœ‰ä¸ªç–‘æƒ‘ï¼Œè¿™å¥è¯­å¥æ‰§è¡Œé¡ºåºæ˜¯ <code>a = {n: 2} &amp;&amp; a.x = {n:2}</code> è¿˜æ˜¯ <code>a.x = {n:2} &amp;&amp; a= {n:2}</code> è¿˜æ˜¯è¿™ç§ <code>a = {n: 2} &amp;&amp; a.x = a</code></p>
<p>æˆ‘ä»¬è¿™é‡Œå¯ä»¥å€ŸåŠ© <code>Object.defineProperty</code> æˆ– ES6çš„ <code>Proxy</code>æ¥éªŒè¯å¤šé¡¹èµ‹å€¼çš„é¡ºåºæ˜¯æ€æ ·çš„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">  <span class="keyword">set</span>(target, key, value, r) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key, value)</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="string">'a'</span>) <span class="built_in">Reflect</span>.set(target, key, <span class="string">'isA'</span>, r);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">Reflect</span>.set(target, key, value, r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">obj.b = obj.a= &#123;<span class="attr">n</span>: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="comment">// è¾“å‡º:</span></span><br><span class="line"><span class="comment">// "a" &#123;n: 1&#125;</span></span><br><span class="line"><span class="comment">// "b" &#123;n: 1&#125;</span></span><br><span class="line"></span><br><span class="line">obj.a; <span class="comment">// isA</span></span><br><span class="line">obj.b; <span class="comment">// &#123;n: 1&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡º èµ‹å€¼çš„é¡ºåºæ˜¯ä»å³è¾¹å¼€å§‹åˆ°å·¦è¾¹çš„ã€‚è€Œä¸”æ˜¯ç›´æ¥ <code>a = {n: 1}, a.x = {n:1 }</code>ï¼Œè€Œä¸æ˜¯ <code>a.x = a</code> è¿™æ ·å»èµ‹å€¼</p>
<p>ç°åœ¨æˆ‘ä»¬å†å€ŸåŠ© Proxy æ¥åˆ†æä¸€å¼€å§‹part1è¿™é“é¢˜ï¼Œç”¨obj.a, obj.b æ¥ä»£æ›¿åŸé¢˜ç›®çš„ aå’Œbã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">  <span class="keyword">get</span>: function (target, key, receiver) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`getting <span class="subst">$&#123;key&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, key, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span>: function (target, key, value, receiver) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`setting <span class="subst">$&#123;key&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, key, value, receiver);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">obj.a = &#123;<span class="attr">n</span>: <span class="number">1</span> &#125;;<span class="comment">// getting a;</span></span><br><span class="line">obj.b = obj.a; <span class="comment">// getting a; setting b;</span></span><br><span class="line">obj.a.x = obj.a = &#123;<span class="attr">n</span>:<span class="number">2</span> &#125;; <span class="comment">// getting a; setting a;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ° <code>obj.a.x = obj.a = {n: 2}</code>è¿™æ®µè¯­å¥æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆè¾“å‡ºä¸€ä¸ª <strong>getting a</strong> å†è¾“å‡º <strong>setting a</strong>ã€‚<br>è¿™å°±æ„å‘³ç€åœ¨å¯¹ <code>obj.a.x</code> èµ‹å€¼æ—¶ï¼Œç¨‹åºæ˜¯å…ˆè·å– <code>obj.a</code>æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œæ­¤æ—¶è§¦å‘äº† <strong>getting a</strong>ï¼Œç„¶åå†å¯¹å³è¾¹ <code>obj.a</code> è¿›è¡Œèµ‹å€¼ï¼Œè§¦å‘äº† <strong>setting a</strong>ï¼Œ èµ‹å€¼å®Œæœ€åä¸€æ­¥æ‰æ˜¯å¯¹ <code>obj.a.x</code>èµ‹å€¼ <code>{n:2 }</code>ã€‚</p>
<p><strong>é‡ç‚¹: åœ¨å¯¹obj.a.xèµ‹å€¼çš„æ—¶åˆ»å·²ç»è·å–äº†obj.aè¯¥å¯¹è±¡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œæ‰€ä»¥åé¢aå°±ç®—æŒ‡å‘å…¶ä»–åœ°å€ï¼Œä¹Ÿå’Œè¿™é‡Œçš„obj.a.xæ— å…³ã€‚æ­¤æ—¶æŒ‡å‘è¯¥åœ°å€çš„è¿˜æœ‰obj.b</strong></p>
<p>æˆ‘ä»¬å†ç”¨ä¸‰å¼ å›¾æ¥æ‹ä¸€æ‹æ•´ç†çš„æ€è·¯</p>
<p>æ‰§è¡Œ <code>obj.a = {n: 1}; obj.b = obj.a</code>åobjå¯¹åº”çš„å¼•ç”¨æ˜¯è¿™æ ·çš„</p>
<p><image src="./init.png" width="600"><br><br><br></image></p>
<p>æ‰§è¡Œ <code>obj.a.x = xxx</code> æ—¶</p>
<p><image src="./obj.a.x.png" width="600"><br><br><br></image></p>
<p>æ‰§è¡Œ<code>obj.a.x = obj.a = {n:2}</code> å</p>
<p><image src="./result.png" width="600"><br><br><br></image></p>
<p>è‡³æ­¤ï¼Œè¿™é“é¢è¯•é¢˜ç›¸ä¿¡å¤§å®¶éƒ½æœ‰ç­”æ¡ˆäº†ï¼Œå¯ä»¥è‡ªå·±å»æ§åˆ¶å°éªŒè¯ä¸€ä¸‹ã€‚ å‡å¦‚è¿™æ—¶å€™å†æ‰§è¡Œ <code>obj.a.n = 3</code>ï¼Œ æ‰“å°<code>obj.b</code>ä¼šè¾“å‡ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h2 id="part2"><a href="#part2" class="headerlink" title="part2"></a>part2</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹å¦ä¸€é“é¢˜ï¼Œå…³äºå¯¹è±¡å¾ªç¯å¼•ç”¨çš„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">n</span>: <span class="number">1</span>&#125;</span><br><span class="line">a.b = a;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„aæ˜æ˜¾æ˜¯å¾ªç¯å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ€æ ·æ‰èƒ½åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¾ªç¯å¼•ç”¨å‘¢ï¼Ÿ</p>
<p>å…¶å®è¿™é“é¢˜æˆ‘ä¸€å¼€å§‹é™¤äº†é€’å½’åˆ¤æ–­å¤–æ²¡æœ‰å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œåé¢æ˜¯ç¾¤é‡Œä¸€ä¸ªå«<code>è¯è´¹</code>çš„å¤§ä½¬è¯´(è¿™é“é¢˜ä¹Ÿæ˜¯ä»–å‡ºçš„)ç›´æ¥ç”¨ <code>JSON.stringify</code>ï¼Œå¾®ä¿¡å°æ¸¸æˆçš„æºç é‡Œé¢å°±æ˜¯è¿™ä¹ˆå»åˆ¤æ–­ã€‚</p>
<p><code>JSON.stringify</code> å¦‚æœé‡åˆ°å‚æ•°é‡Œæœ‰å¾ªç¯å¼•ç”¨çš„ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¾ªç¯è°ƒç”¨çš„é”™è¯¯ <strong>Uncaught TypeError: Converting circular structure to JSON</strong> </p>
<p>é‚£å¦‚æœä¸ç”¨JSON.stringifyæˆ–è€…æƒ³è¦è‡ªå·±å®ç°ä¸€ä¸ªå»æ£€æµ‹å¾ªç¯è°ƒç”¨ï¼Œè¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿï¼ˆé¢è¯•å®˜å’Œéƒ¨é—¨å‰ç«¯leaderæœ€å–œæ¬¢è¿™ä¹ˆé—®ï¼‰</p>
<p>ä¸€èˆ¬é‡åˆ°è¿™ç§ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å»æ‰¾è¿™ä¸ªæ–¹æ³•çš„ polyfillï¼Œ <a href="https://github.com/bestiejs/json3" target="_blank" rel="noopener">json3</a>ã€‚æˆ‘æ‰¾çš„æ˜¯ json3çš„ polyfill é‡Œé¢å¤§æ¦‚æ˜¯éå†å¯¹è±¡å­˜åˆ°stackæ•°ç»„ï¼Œå†åœ¨è§£æçš„æ—¶å€™å»åˆ¤æ–­æ˜¯å¦æœ‰å¾ªç¯å¼•ç”¨çš„æƒ…å†µã€‚ <a href="https://github.com/bestiejs/json3/blob/master/lib/json3.js#L482" target="_blank" rel="noopener">json3.js#L482</a></p>
<p>ç…§ç€ä»–çš„æ€è·¯å¤§æ¦‚å†™äº†ä¸€ä¸ªï¼Œå…¶å®å°±æ˜¯å‰é¢è¯´åˆ°çš„ç®€å•é€’å½’åˆ¤æ–­<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> stack = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> len;</span><br><span class="line">    <span class="keyword">for</span> (len = stack.length; len--;) &#123;</span><br><span class="line">        <span class="keyword">if</span> (stack[len] === obj) <span class="keyword">throw</span> <span class="built_in">TypeError</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    stack.push(obj);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">const</span> value = obj[k]</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">'object'</span>) fn(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç¬¬ä¸€æ¬¡è®²å…³äºè¯­è¨€çŸ¥è¯†ç‚¹çš„ï¼Œå¦‚æœå‘ç°æœ‰é”™è¯¯çš„åœ°æ–¹ æ¬¢è¿æŒ‡å‡º~<br>æœ€åè°¢è°¢æƒ é¡¾ï¼Œè¯·ç¬‘çº³</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>è§†é¢‘è½¬å­—ç¬¦ç”»</title>
    <url>/2018/07/video-to-chat/</url>
    <content><![CDATA[<p>å…ˆçœ‹ä¸€ä¸‹æ•ˆæœï¼ŒåŸè§†é¢‘æ˜¯è¿™æ ·çš„</p>
<video src="../2018-07-27/b_1.mp4" width="300" controls></video>

<p>æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœæ˜¯è¿™æ ·å­çš„ï¼Œä¹‹æ‰€ä»¥æ‰¾è¿™ä¸ªè§†é¢‘æ˜¯å› ä¸ºâ€¦è¿™ä¸ªè§†é¢‘å’ŒèƒŒæ™¯çš„å¯¹æ¯”åº¦æ¯”è¾ƒé«˜åšå‡ºæ¥æ¯”è¾ƒæœ‰è¾¨è¯†åº¦ï¼Œæ²¡æœ‰å…¶ä»–çš„æ„æ€ ( *ãƒ»Ï‰ãƒ»)âœ„â•°ã²â•¯</p>
<video src="../2018-07-27/b.mp4" width="300" controls></video>

<h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p><img src="./wechat.png" width="300"><br>æŸå¤©ä¸€ä¸ªåŸºå‹åœ¨ç¾¤é‡Œé—®æˆ‘ï¼Œåœ¨æŠ–éŸ³çœ‹åˆ°ä¸€ç§è§†é¢‘ï¼Œé—®æˆ‘æ˜¯ä¸æ˜¯èƒ½å®ç°ã€‚æˆ‘è¯´å¯ä»¥çš„~<br>äºæ˜¯å½“å¤©æ™šä¸ŠèŠ±äº†ä¸€ä¸ªå¤šå°æ—¶æŠ˜è…¾äº†ä¸€ä¸ªç²—ç³™ç‰ˆæœ¬â€¦ </p>
<p>å…ˆæŠŠè§†é¢‘ä¸¢åˆ°éƒ¨é—¨æŠ€æœ¯ç¾¤é—®æœ‰æ²¡æœ‰å…³é”®å­—ï¼Œç»™äº†ä¸€ä¸ªkeyword <strong>å›¾ç‰‡è½¬å­—ç¬¦ä¸²</strong> äºæ˜¯ç…§ç€è¿™ä¸ªæ€è·¯å»gayhubæ‰¾èµ„æºæ‹¼ä¹é«˜ï¼</p>
<h2 id="æ•´ä½“æ€è·¯"><a href="#æ•´ä½“æ€è·¯" class="headerlink" title="æ•´ä½“æ€è·¯"></a>æ•´ä½“æ€è·¯</h2><ul>
<li>ç¬¬ä¸€æ­¥æˆ‘ä»¬é€šè¿‡ <code>input[type=&quot;file&quot;]</code> è·å–æ–‡ä»¶</li>
<li>æ‹¿åˆ°æ–‡ä»¶ä¹‹åï¼Œç”¨ <code>URL.createObjectURL</code>æ¥è·å–è§†é¢‘çš„è·¯å¾„</li>
<li>é€šè¿‡ <code>ctx.drawImage</code> æˆ‘ä»¬å¯ä»¥æŠŠæŸä¸ª video å½“å‰çš„å›¾åƒæ¸²æŸ“åˆ° canvasé‡Œé¢</li>
<li><code>ctx.getImageData</code> å¯ä»¥è·å–å½“å‰canvas é‡Œé¢å›¾ç‰‡çš„è‰²å€¼ï¼Œåˆ©ç”¨å…¬å¼è®¡ç®—å‡ºç°åº¦</li>
<li>æ ¹æ®ç°åº¦çš„æ·±æµ…å»åŒ¹é…è¦æ˜¾ç¤ºçš„å­—ç¬¦ï¼Œæ·±è‰²åŒ¹é…æ¯”è¾ƒå¯†é›†çš„å­—ç¬¦ï¼Œæœ€æµ…çš„ç›´æ¥ç”¨ç©ºæ ¼ä»£æ›¿ï¼Œç„¶åç”¨ <code>ctx.fillText</code>é‡ç»˜è¿›å»</li>
<li>è®¾ç½® <code>video.currentTime</code> æ¥è·å¾—è§†é¢‘çš„æŸä¸€æ—¶åˆ»å›¾åƒï¼Œé‡å¤ä¸Šè¿°é‡ç»˜è¿‡ç¨‹<!-- ç°åº¦è¶…è¿‡æŸä¸ªå€¼ç”¨#ï¼Œä½äºæŸä¸ªå€¼ç”¨ Â· ä»£æ›¿ -->
</li>
</ul>
<p>æ—¢ç„¶å¤§æ¦‚çš„æ€è·¯å·²ç»ç†æ¸…ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å…·ä½“çš„ç¼–ç ï¼ŒæŠŠæƒ³æ³•å†™å‡ºæ¥çš„è¿‡ç¨‹</p>
<h2 id="å…·ä½“ç¼–ç å®ç°"><a href="#å…·ä½“ç¼–ç å®ç°" class="headerlink" title="å…·ä½“ç¼–ç å®ç°"></a>å…·ä½“ç¼–ç å®ç°</h2><h3 id="è·å–è§†é¢‘æ–‡ä»¶"><a href="#è·å–è§†é¢‘æ–‡ä»¶" class="headerlink" title="è·å–è§†é¢‘æ–‡ä»¶"></a>è·å–è§†é¢‘æ–‡ä»¶</h3><p>é¦–å…ˆæˆ‘ä»¬å…ˆç¡®å®šä¸‹htmléœ€è¦å“ªäº›å…ƒç´ </p>
<ol>
<li>ä¸€ä¸ª input[type=â€fileâ€] ç”¨æ¥ç»™ç”¨æˆ·ä¸Šä¼ çš„</li>
<li>ä¸€ä¸ª video ç”¨æ¥æ‰¿è½½ä¸Šä¼ çš„video</li>
<li>ä¸€ä¸ª canvas ç”¨æ¥å±•ç¤ºæœ€ç»ˆçš„ç»“æœ</li>
</ol>
<p>å¤§æ¦‚æ˜¯é•¿è¿™æ ·ï¼š<br><figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"inputFile"</span> <span class="attr">accept</span>=<span class="string">".mp4"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvasShow"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"video"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥jsæ–‡ä»¶ï¼Œæˆ‘ä»¬è¦å…ˆå¯¹ input ç»‘å®šä¸ªç›‘å¬äº‹ä»¶ï¼Œæ‹¿åˆ°æ–‡ä»¶urlä¹‹åè®¾ç½®ç»™video<br>è¿™é‡Œè¦æ³¨æ„ä¸¤ç‚¹ï¼Œä¸€ä¸ªæ˜¯ <code>url</code>ç”¨å®Œä¸ç”¨çš„è¯ï¼Œç”¨ <code>URL.revokeObjectURL</code> é‡Šæ”¾èµ„æºï¼› ä¸€ä¸ªæ˜¯æˆ‘ä»¬è¿™é‡Œç”¨äº† <code>await</code> åœ¨domVide.onCanplayä¹‹å‰ä¸åšä»»ä½•æ“ä½œï¼Œé˜²æ­¢è§†é¢‘æ²¡æœ‰åŠ è½½å®Œå°±æ“ä½œï¼Œæœ‰é»‘å±é£é™©ã€‚</p>
<p>å¦‚æœå¯¹ es6ã€es7ã€es8ä¸ç†Ÿæ‚‰çš„å°ä¼™ä¼´è¦å»è¡¥ä¸€ä¸‹äº†~ ç°åœ¨åŸºæœ¬ä¸ä¼šè¿™äº›åŸºæœ¬è¯­æ³•éƒ½çœ‹ä¸æ‡‚demo= =<br>é™„ä¸Š<a href="http://es6.ruanyifeng.com" target="_blank" rel="noopener">é˜®ä¸€å³°è€å¸ˆçš„ES6æ•™ç¨‹</a>ï¼Œåˆæƒ³èµ·é¢è¯•è¢«é—®ES7æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§ ç®€ç›´æ˜¯*äº†ç‹—<br><figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line">domInput.addEventListener(<span class="string">'change'</span>, <span class="keyword">async</span>(&#123;<span class="attr">target</span>: &#123;files &#125;&#125;)=&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> file = files[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> url = URL.createObjectURL(file);</span><br><span class="line">  domVideo.src = urlrl;</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> domVideo.addEventListener(<span class="string">'canplay'</span>, res));</span><br><span class="line">  <span class="comment">// next ====&gt;  handleVideoInit()</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="å°†è§†é¢‘æ¸²æŸ“åˆ°canvas"><a href="#å°†è§†é¢‘æ¸²æŸ“åˆ°canvas" class="headerlink" title="å°†è§†é¢‘æ¸²æŸ“åˆ°canvas"></a>å°†è§†é¢‘æ¸²æŸ“åˆ°canvas</h3><p>æ‹¿åˆ°è§†é¢‘ä¹‹åï¼Œæˆ‘ä»¬è¦æŠŠå½“å‰è¿™ä¸€ä¸ªæ—¶åˆ»çš„å›¾åƒæ¸²æŸ“åˆ°canvasé‡Œé¢<br>å…ˆç”¨<code>ctx.drawImage(video, 0, 0, width, height)</code> æŠŠvideo domå½“å‰å±æ¸²æŸ“è¿›canvas<br>å†ç”¨<code>ctx.getImageData(0, 0, width, height)</code> è·å–å›¾ç‰‡çš„è‰²å€¼æ¥åšå¤„ç†<br>å¯ä»¥é€šè¿‡è°ƒæ•´ <code>img2Text</code> æ¥é€‰æ‹©æ¸²æŸ“å‡ºæ¥çš„å›¾ç‰‡æ˜¯æƒ³è¦æ€æ ·çš„(ç”±å“ªäº›å­—ç¬¦ç»„æˆç­‰ç­‰)<br>æ¯”å¦‚æŠŠ textListæ”¹ä¸º [â€˜Aaâ€™, â€˜Bvâ€™, â€˜Ccâ€™, â€˜Ddâ€™, â€˜#â€™, â€˜&amp;â€™, â€˜@â€™, â€˜$â€™, â€˜*â€™, â€˜?â€™, â€˜;â€™, â€˜^â€™, â€˜Â·â€™, â€˜Â·â€™, â€˜Â·â€™, â€˜Â·â€™]ï¼Œè¾¨è¯†åº¦ä¼šé«˜ä¸€ç‚¹</p>
<figure class="highlight javascript"><figcaption><span>index.js handleVideoInit</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">domVide =&gt; videoå…ƒç´ </span></span><br><span class="line"><span class="comment">size =&gt; å­˜æ”¾videoç­‰å…ƒç´ çš„é•¿å®½</span></span><br><span class="line"><span class="comment">canvasVideo =&gt; å­˜æ”¾videoå½“å‰çš„å›¾åƒçš„canvas</span></span><br><span class="line"><span class="comment">canvasShow =&gt; å­˜æ”¾æœ€åå±•ç¤ºæ•ˆæœçš„canvas</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> size = &#123;<span class="attr">w</span>: <span class="number">0</span>, <span class="attr">h</span>: <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> canvasVideo = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleVideoInit</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  domVideo.currentTime = <span class="number">0</span>;</span><br><span class="line">  size.w = domVideo.width = canvasVideo.width = canvasShow.width = domVideo.videoWidth * <span class="number">.5</span>;</span><br><span class="line">  size.h = domVideo.height = canvasVideo.height = canvasShow.height = domVideo.videoHeight * <span class="number">.5</span>;</span><br><span class="line">  video2Img();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">video2Img</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; w, h &#125; = size;</span><br><span class="line">  ctxVideo.drawImage(domVideo, <span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  <span class="keyword">const</span> &#123; data &#125; = ctxVideo.getImageData(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  ctxShow.clearRect(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> _h= <span class="number">0</span>; _h&lt; h; _h+= <span class="number">8</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> _w= <span class="number">0</span>; _w&lt; w; _w+= <span class="number">8</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> index = (_w + w * _h) * <span class="number">4</span>;</span><br><span class="line">      <span class="keyword">const</span> r = data[index + <span class="number">0</span>];</span><br><span class="line">      <span class="keyword">const</span> g = data[index + <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">const</span> b = data[index + <span class="number">2</span>];</span><br><span class="line">      <span class="keyword">const</span> gray = <span class="number">.299</span> * r + <span class="number">.587</span> * g + <span class="number">.114</span> * b;</span><br><span class="line">      ctxShow.fillText(img2Text(gray), _w, _h + <span class="number">8</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">img2Text</span>(<span class="params">g</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> i = g % <span class="number">16</span> === <span class="number">0</span> ? <span class="built_in">parseInt</span>(g / <span class="number">16</span>) - <span class="number">1</span> : <span class="built_in">parseInt</span>(g/ <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">'#'</span>, <span class="string">'&amp;'</span>, <span class="string">'@'</span>, <span class="string">'%'</span>, <span class="string">'$'</span>, <span class="string">'w'</span>, <span class="string">'*'</span>, <span class="string">'+'</span>, <span class="string">'o'</span>, <span class="string">'?'</span>, <span class="string">'!'</span>, <span class="string">';'</span>, <span class="string">'^'</span>, <span class="string">','</span>, <span class="string">'.'</span>, <span class="string">' '</span>][i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œå…¶å®å·²ç»å®ç°äº†æŠŠä¸€å¼ å›¾ç‰‡å˜ä¸ºå­—ç¬¦å¡«å……å›¾äº†,å‰©ä¸‹çš„å·¥ä½œæ— éå°±æ˜¯æŠŠè§†é¢‘å˜æˆä¸€å¼ å¼ çš„å›¾ç‰‡ï¼Œç„¶åé‡å¤æ‰§è¡Œè¿™äº›é€»è¾‘</p>
<h3 id="æŒç»­è°ƒç”¨æ¸²æŸ“å­—ç¬¦è§†é¢‘"><a href="#æŒç»­è°ƒç”¨æ¸²æŸ“å­—ç¬¦è§†é¢‘" class="headerlink" title="æŒç»­è°ƒç”¨æ¸²æŸ“å­—ç¬¦è§†é¢‘"></a>æŒç»­è°ƒç”¨æ¸²æŸ“å­—ç¬¦è§†é¢‘</h3><p>æˆ‘ä»¬æ”¹ä¸€ä¸‹  video2Img å‡½æ•°ï¼Œå°†å…¶å®ç°ä¸ºèƒ½æŒç»­è°ƒç”¨çš„å½¢å¼ï¼Œ å†æ·»åŠ ä¸€ä¸ªå‡½æ•° <code>clear</code> ç”¨æ¥æ¸…ç†åƒåœ¾</p>
<p>è¿™é‡Œç”¨åˆ°çš„æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame" target="_blank" rel="noopener">window.requestAnimationFrame</a> å»æŒç»­è°ƒç”¨<br><figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">video2Img</span>(<span class="params">&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">  timePoint= <span class="number">0</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  curT= Date.now(</span>),</span></span><br><span class="line"><span class="function">  <span class="title">prevT</span>= <span class="title">Date</span>.<span class="title">now</span>(<span class="params"></span>),</span></span><br><span class="line"><span class="function">  <span class="title">prevInterval</span>,</span></span><br><span class="line"><span class="function">&#125;) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; w, h &#125; = size;</span><br><span class="line">  ctxVideo.drawImage(domVideo, <span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  drawOnce();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> _interval = <span class="built_in">Math</span>.max((curT - prevT), <span class="number">16</span>) / <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">if</span> (curT - prevT !== <span class="number">0</span>) _interval -= prevInterval;</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> setTimeout(res, _interval*<span class="number">1000</span>));</span><br><span class="line">  <span class="keyword">const</span> nextTimePoint = _interval + timePoint;</span><br><span class="line">  <span class="keyword">if</span> (nextTimePoint &gt; domVideo.duration) <span class="keyword">return</span> clear();</span><br><span class="line"></span><br><span class="line">  tId = <span class="built_in">window</span>.requestAnimationFrame(<span class="function"><span class="params">()</span>=&gt;</span> video2Img(&#123;</span><br><span class="line">    timePoint: nextTimePoint,</span><br><span class="line">    prevT: curT,</span><br><span class="line">    curT: <span class="built_in">Date</span>.now(),</span><br><span class="line">    prevInterval: _interval,</span><br><span class="line">  &#125;));  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawOnce</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data &#125; = ctxVideo.getImageData(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  ctxShow.clearRect(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> _h= <span class="number">0</span>; _h&lt; h; _h+= <span class="number">8</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> _w= <span class="number">0</span>; _w&lt; w; _w+= <span class="number">8</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> index = (_w + w * _h) * <span class="number">4</span>;</span><br><span class="line">      <span class="keyword">const</span> r = data[index + <span class="number">0</span>];</span><br><span class="line">      <span class="keyword">const</span> g = data[index + <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">const</span> b = data[index + <span class="number">2</span>];</span><br><span class="line">      <span class="keyword">const</span> gray = <span class="number">.299</span> * r + <span class="number">.587</span> * g + <span class="number">.114</span> * b;</span><br><span class="line">      ctxShow.fillText(img2Text(gray), _w, _h + <span class="number">8</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cleart</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;w, h&#125; = size;</span><br><span class="line">  lastUrl &amp;&amp; URL.revokeObjectURL(lastUrl);</span><br><span class="line">  tId &amp;&amp; <span class="built_in">window</span>.cancelAnimationFrame(tId);</span><br><span class="line">  ctxShow.clearRect(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  ctxVideo.clearRect(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="æºç ä¸demo"><a href="#æºç ä¸demo" class="headerlink" title="æºç ä¸demo"></a>æºç ä¸demo</h2><p>è‡³æ­¤ï¼ŒåŠŸèƒ½åŸºæœ¬éƒ½å®ç°äº†ï¼Œä¸‹é¢æä¾›åœ¨çº¿çš„å‘†æ¯›å’Œgithubä»“åº“åœ°å€~</p>
<h3 id="åœ¨çº¿å‘†æ¯›"><a href="#åœ¨çº¿å‘†æ¯›" class="headerlink" title="åœ¨çº¿å‘†æ¯›"></a><a href="/demo/video2char/index.html">åœ¨çº¿å‘†æ¯›</a></h3><h3 id="github-æºç "><a href="#github-æºç " class="headerlink" title="github æºç "></a><a href="https://github.com/jsonz1993/wheel/tree/master/video2char" target="_blank" rel="noopener">github æºç </a></h3><p>videoè½¬å›¾ç‰‡å¿˜äº†æ˜¯åœ¨githubçœ‹å“ªä¸ªé¡¹ç›®çš„ï¼Œ<code>ctx.drawImage(video, 0, 0, width, height)</code>è¿™ä¸ªæ˜¯çœ‹å®Œæ‰çŸ¥é“çš„ã€‚</p>
<p>å›¾ç‰‡è½¬å­—ç¬¦åŸºæœ¬æ˜¯çœ‹è¿™ä¸ªå¤§å“¥çš„<a href="https://github.com/Leo-0/img2Char" target="_blank" rel="noopener">github</a></p>
<p>åœ¨æ‰¾æ–¹æ¡ˆçš„æ—¶å€™çœ‹åˆ°çš„ä¸€ä¸ªåƒç´ å›¾å®ç°ï¼ŒæŒºæœ‰è¶£çš„ï¼Œä»¥å‰å®ç°é©¬èµ›å…‹æ˜¯æ‹¿å‘¨å›´åƒç´ å€¼å–å¹³å‡å»åšï¼Œè¿™ä¸ªå“¥ä»¬æ˜¯ç›´æ¥æ”¾å¤§æˆªå›¾ æ›´ç®€å•ç²—æš´<a href="https://segmentfault.com/a/1190000007977592" target="_blank" rel="noopener">ä¼ é€é—¨</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
        <tag>Canvas</tag>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>2018-07-27 å°è®°</title>
    <url>/2018/07/2018-07-27/</url>
    <content><![CDATA[<p>ä¸Šä¸€ç¯‡æ–‡å·²ç»æ˜¯ä¸€ä¸ªæœˆå‰çš„ï¼Œè¿˜æ˜¯æ”¹ä¸äº†æ‡’çš„ä¹ æƒ¯</p>
<p>ä¹ æƒ¯æ€§å¯¹æœ€è¿‘åšä¸€äº›æ€»ç»“ï¼Œå…³äºé¢è¯•ï¼Œå…³äºå·¥ä½œä¸Šï¼Œå…³äºæœ€è¿‘å­¦ä¹ çš„ä¸œè¥¿ã€‚</p>
<h2 id="å…³äºé¢è¯•"><a href="#å…³äºé¢è¯•" class="headerlink" title="å…³äºé¢è¯•"></a>å…³äºé¢è¯•</h2><p>è®°å¾—ä»å››æœˆå°¾å°±ä¸€æ®µæ—¶é—´å»é¢ä¸€æ¬¡ï¼Œç°åœ¨å·²ç»ç¡®å®šç»§ç»­ç•™åœ¨ç§Ÿç§Ÿè½¦ã€‚é¡ºè·¯æ£é¼“ä¸€äº›ä¸œè¥¿ï¼Œè€ƒè€ƒä¸“å‡æœ¬ã€‚</p>
<p>è‡ªè”æä¹‹åé¢äº†å››å®¶</p>
<ul>
<li>cvte</li>
<li>é˜¿é‡Œå¤–åŒ…</li>
<li>YY</li>
<li>è½¦ä¸»æ— å¿§</li>
</ul>
<h3 id="cvte"><a href="#cvte" class="headerlink" title="cvte"></a>cvte</h3><p>cvte æˆ‘éƒ½å¿˜äº†æœ‰æŠ•ä»–å…¬å¸ç®€å†ï¼Œä¸€å¤©æ™šä¸Šçœ‹ä¹¦ï¼Œçªç„¶å°±æ¥äº†ä¸ªç”µè¯è¯´æ˜¯xxxxçš„xxxï¼Œæ¥è¿›è¡Œç”µè¯é¢è¯•ã€‚<br>ç„¶åå°±ç¨€é‡Œç³Šæ¶‚èŠäº†åŠä¸ªå¤šå°æ—¶ï¼Œä¹‹åå°±è¯´ç­‰hrç”µè¯ã€‚</p>
<p>hrç”µè¯èŠäº†ä¸‹åŠ ç­æƒ…å†µï¼Œä¼ä¸šæ–‡åŒ–ï¼Œç¦åˆ©ç­‰ä¸œè¥¿ã€‚</p>
<p>å…¶å®ä¹‹å‰å°±ä¸€ç›´å¬è¯´cvteå¾ˆå°é—­ï¼Œåˆå¾ˆä¼ ç»Ÿï¼ŒåŠ ç­è´¼ç–¯ç‹‚ï¼Œä¼ä¸šæ–‡åŒ–åˆå¾ˆé‚£å•¥ï¼Œæ‰€ä»¥æ‰“å¿ƒé‡Œä¸ä¼šå»é‚£é‡Œ</p>
<p>æ‰€ä»¥hré¢çš„æ—¶å€™ï¼Œä¹Ÿæ²¡æœ‰æ€ä¹ˆå›ç­”ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹æ˜¯cvteå±…ç„¶æ˜¯æ²¡æœ‰è–ªèµ„ä¿å¯†çš„ï¼Œæ‰€ä»¥æˆ‘å°±é¡ºè·¯é—®äº†hrçš„è–ªèµ„çœ‹æ˜¯ä¸æ˜¯çœŸçš„åƒä»–è¯´çš„ä¸€æ · è–ªèµ„å…è®¸è®¨è®ºã€‚ç»“æœä¼°è®¡å› ä¸ºè¿™ä¸ªå¾—ç½ªäº†hr= =æ²¡æœ‰è¿‡hré¢</p>
<h3 id="é˜¿é‡Œå¤–åŒ…"><a href="#é˜¿é‡Œå¤–åŒ…" class="headerlink" title="é˜¿é‡Œå¤–åŒ…"></a>é˜¿é‡Œå¤–åŒ…</h3><p>é˜¿é‡Œå¤–åŒ…å…¶å®æ˜¯æœ€æ„å¤–çš„ä¸€å®¶<br>æ˜¯æ­¦æ±‰ä¸€å®¶å…¬å¸è”ç³»ä¸Šçš„ï¼Œè”ç³»ä¹‹åæƒ³ç€å»è¯•ä¸€ä¸‹é˜¿é‡Œçš„é¢è¯•åˆ°åº•æ˜¯æ€æ ·çš„ æ‰€ä»¥å°±ç­”åº”äº†<br>hréå¸¸çš„å¥½ï¼Œé¢è¯•å‰å†ä¸‰å®å˜±ï¼Œä¹ŸæŠŠé¢è¯•å®˜çœ‹å®Œç®€å†çš„åé¦ˆå‘Šè¯‰äº†æˆ‘<br>è¿˜è®©åŒäº‹æå‰é¢æˆ‘ä¸€è½®ï¼Œé¢å®Œè¯´ æ²¡ä»€ä¹ˆé—®é¢˜</p>
<p>é¢è¯•å½“å¤©èŠäº†ä¸‹é¡¹ç›®ç»éªŒè¿˜æœ‰åŸºç¡€çŸ¥è¯†å’Œä¸€äº›é—®é¢˜çš„æ’æŸ¥æ€è·¯</p>
<p>æœ¬ä»¥ä¸ºç­”çš„æŒºä¸é”™çš„ï¼Œå’Œé¢è¯•å®˜ä¹ŸèŠå¾—å¾ˆæ„‰å¿«ã€‚åé¢é¢è¯•å®˜è¯´å»æ‰¾è€å¤§æ¥é¢ï¼Œè®©æˆ‘éªšç­‰ç‰‡åˆ»</p>
<p>è¿‡æ®µæ—¶é—´åè¯´è€å¤§åœ¨å¼€ä¼šï¼Œè®©æˆ‘å›å»ç­‰é€šçŸ¥â€¦ç°åœ¨æƒ³èµ·æ‰çŸ¥é“åŸæ¥è€å¤§åœ¨å¼€ä¼šæ˜¯ä¸€ä¸ªæ‹’ç»äººçš„å¥—è·¯ å›¾æ ·å›¾æ£®ç ´</p>
<p>å»é˜¿é‡Œé¢æƒ³èµ·äº†ä¸€å¹´å‰å»é¢ucï¼Œé‚£æ—¶å€™ä¹Ÿé¢å¾—å¾ˆå¼€å¿ƒï¼Œåé¢å¾—çŸ¥æ˜¯åº”è˜å¤–åŒ…å²—å°±æ²¡æ€ä¹ˆæƒ³ç»§ç»­ä¸‹å»â€¦</p>
<p>ä½†æ˜¯é˜¿é‡Œçš„é¢è¯•å®˜ç»™æˆ‘çš„æ„Ÿè§‰æ²¡æœ‰åƒä¸€äº›å°å…¬å¸çš„äººä¸€æ ·ï¼Œç»™äººçš„æ„Ÿè§‰æ˜¯å¾ˆäº²åˆ‡çš„ã€‚å’Œæˆ‘è¯´å¦‚æœæƒ³è¿›æŸä¸ªå¤§å…¬å¸ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å‚ä¸è¯¥å…¬å¸çš„å¼€æºé¡¹ç›®ï¼Œè¿™æ˜¯æ”¶è·æœ€å¤§çš„ä¸€ä¸ªç‚¹ã€‚</p>
<p>è™½ç„¶è¿‡äº†ä¸ä¼šå»ï¼Œä½†æ˜¯æ€»ä½“æ¥è¯´è¿˜æ˜¯å¾ˆæ„å¤–ã€‚</p>
<h3 id="è½¦ä¸»æ— å¿§"><a href="#è½¦ä¸»æ— å¿§" class="headerlink" title="è½¦ä¸»æ— å¿§"></a>è½¦ä¸»æ— å¿§</h3><p>è½¦ä¸»æ— å¿§è¿™ä¸ªå°±æ¯”è¾ƒå°´å°¬äº†ï¼Œæ˜¯åœ¨å…¬å¸åŒä¸€æ ‹â€¦é¢è¯•å¤§æ¦‚çš„æ„Ÿè§‰å°±æ˜¯æŒºå®¹æ˜“çš„ï¼Œé¢è¯•å®˜é—®çš„é—®é¢˜éƒ½æ˜¯é’ˆå¯¹é¡¹ç›®ç»éªŒï¼Œæ‰€ä»¥åŸºæœ¬æ²¡æœ‰é€ å‡åˆ’æ°´å°±æ²¡ä»€ä¹ˆé—®é¢˜ã€‚<br>é¢ä¸‰å››è½®ï¼ŒæŠ€æœ¯é¢é¢å‰ç«¯Leaderï¼ŒæŠ€æœ¯äºŒé¢é¢éƒ¨é—¨è´Ÿè´£äººï¼Œç„¶åå°±æ˜¯ctoé¢ï¼Œé¢å®Œhrå’Œæˆ‘è¯´ä¸èƒ½ç»™æˆ‘æœŸæœ›è–ªèµ„<br>ä¸‰å¹´æœ€å¤šåªèƒ½ç»™xxkâ€¦è¯´ä¸€å¼€å§‹ä»¥ä¸ºæˆ‘æ˜¯æœ‰ä¸‰å¹´åŠç»éªŒï¼Œæ‰€ä»¥å¯ä»¥ç»™å››å¹´çš„è–ªèµ„<br>åé¢æ¥äº†offerè€ƒè™‘ä¸‹å®Œå…¨ä¸å€¼å¾—è·³å°±æ”¾å¼ƒ</p>
<p>ä½†æ˜¯è½¦ä¸»æ— å¿§æœ‰ä¸ªé¢˜å¤–è¯ï¼Œå’ŒhrèŠå¤©èŠå¾ˆä¹…ï¼Œhrè¯´ ä¹‹å‰ç§Ÿç§Ÿè½¦æœ‰é«˜çº§å‰ç«¯æ¥é¢è¯•ç»™å‡ºçš„è¯„ä»·æ˜¯å¾ˆæ°´ï¼Œæ‰€ä»¥å¯¹æˆ‘åŸæœ¬çš„ä¸æŠ±ä»€ä¹ˆå¸Œæœ›ã€‚ä½†æ˜¯æŠ€æœ¯é¢ç»™çš„è¯„ä»·æ˜¯å¾ˆä¸é”™ï¼Œæ‰€ä»¥æœ‰ç‚¹æƒŠè®¶ç§Ÿç§Ÿè½¦å†…éƒ¨çš„æ°´å¹³å·®å¼‚å¤§ã€‚</p>
<h3 id="YY-UED"><a href="#YY-UED" class="headerlink" title="YY UED"></a>YY UED</h3><p>é¢YYæ˜¯æœ€è¿‘æœ€å¼€å¿ƒï¼Œæ”¶è·æœ€å¤§çš„ä¸€æ¬¡é¢è¯•ã€‚<br>UEDå½“æ—¶é¢è¯•çš„æ—¶å€™åªæœ‰å››ä¸ªå‰ç«¯ï¼Œæˆ‘æ€»å…±é¢äº†äº”è½®ï¼ŸåŸºæœ¬ä¸Šå°±æ˜¯éƒ¨é—¨è½®ç€äººæ¥è™æˆ‘= =</p>
<p>ä¸€é¢å’ŒleaderèŠèŠå¤©ï¼Œè¯´ä¸€äº›åœºæ™¯çš„è§£å†³æ–¹æ¡ˆ</p>
<p>ç„¶åå°±æ˜¯ç¬”è¯•é¢˜ï¼Œåšå®Œä¹‹åå°±æ˜¯é¢ä¸‰é¢ã€‚</p>
<p>ä¸‰é¢å’Œéƒ¨é—¨ä¸€ä¸ªæŠ€æœ¯å¤§ç‰›èŠèŠå¤©ï¼ŒèŠæ¡†æ¶å±…å¤šï¼Œä¸€ä¸ªvueçš„äºº å¯¹reactäº†è§£æ¯”æˆ‘æ·±å¾ˆå¤šï¼Œè¿™æ˜¯æŒºä½©æœçš„<br>ä»–æœ‰ä¸ªè¯„åˆ†æ ‡å‡†ï¼Œå¤§æ¦‚å°±æ˜¯æƒ³æ‹›vue 6åˆ†ä»¥ä¸Šï¼Œä»¥å†™å†™demoçœ‹çœ‹apiä¸º1åˆ†ï¼›èƒ½ä¿è¯é¡¹ç›®æ­£å¸¸ä¸Šçº¿5åˆ†ï¼›ç†Ÿæ‚‰æ•´ä¸ªæ¡†æ¶ç»“æ„åŸç†ï¼Œé‡åˆ°é—®é¢˜èƒ½å‡†ç¡®çŸ¥é“æ˜¯åœ¨å“ªä¸ªç¯èŠ‚å‡ºé—®é¢˜ï¼Œå¯¹æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŠè¿è½¬å¾ˆç†Ÿæ‚‰ä¸º6åˆ†ï¼›å¯¹æ•´ä¸ªvueç”Ÿæ€éƒ½å¾ˆäº†è§£ï¼Œç²¾å‡†åˆ°æ¯æ¬¡è¿­ä»£æ”¹åŠ¨çš„æºç éƒ¨åˆ†ï¼Œè¿˜æœ‰vuexç­‰ç”Ÿæ€ä¹Ÿå¾ˆå…³æ³¨ä¸º10åˆ†ã€‚<br>å¤§ç‰›è¯´æˆ‘æ˜¯é¢è¿‡çš„åŒç­‰å·¥ä½œå¹´é™çš„ä¸­ä¸Šæ°´å¹³ï¼Œè¿™å¥è¯è®©æˆ‘å¼€å¿ƒäº†å¥½ä¹…å¥½ä¹…â€¦.å“ˆå“ˆå“ˆå“ˆ<br>ç»™å‡ºçš„è¯„ä»·æ˜¯å„æ–¹é¢éƒ½å¾ˆå‡è¡¡ï¼Œæ²¡ä»€ä¹ˆæ˜ç¡®çš„ç¼ºç‚¹ï¼Œä½†æ˜¯è¿™ä¹Ÿæ„å‘³ç€æ²¡æœ‰ä¸€ä¸ªèƒ½æ‹¿å‡ºæ¥è®²çš„æœ‰æ·±å…¥ç ”ç©¶çš„æ–¹å‘ã€‚<br>æœ€åè®©æˆ‘å›å»ç­‰é€šçŸ¥</p>
<p>å‡ å¤©åhræ‰“ç”µè¯è¯´è¿‡å»é¢è¯•ï¼Œå¼€å¿ƒã€‚<br>å››é¢æ˜¯éƒ¨é—¨å¦ä¸€ä¸ªå‰ç«¯é¢è¯•ï¼ŒèŠäº†ä¸€äº›åŸºç¡€çŸ¥è¯†å§ï¼Œè¿˜æœ‰ä¸€äº›åœºæ™¯å’Œæ¦‚å¿µæ€§çš„é—®é¢˜ã€‚<br>å…·ä½“é—®ä»€ä¹ˆå¿˜äº†ï¼Œåªè®°å¾—èŠçš„ä¹ŸæŒºæ„‰å¿«çš„ã€‚é¢å®Œä¹‹åæ˜¯leaderä¸‹æ¥é—²èŠä¸€ä¸‹ï¼Œé—®è¿˜æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ²¡æœ‰å°±é¢hräº†</p>
<p>hré¢æ˜¯åœ¨yyé¢è¯•æœ€ç´¯çš„ä¸€ä¸ªï¼Œå…¨ç¨‹hræ‹¿ç€å°æœ¬æœ¬ï¼Œè¾¹é—®è¾¹è®°ã€‚å¯èƒ½æ˜¯å‰é¢å’ŒæŠ€æœ¯å°ä¼™ä¼´èŠå¾—æ¯”è¾ƒopenï¼Œåˆ°hrè¿™è¾¹çªç„¶å˜å¾—è°¨æ…äº†ï¼Œæ‰€ä»¥é¢å®Œhrä¹‹å æ•´ä¸ªäººéƒ½å¥½ç´¯ã€‚ä¹Ÿæ˜¯å¾ˆä¼ ç»Ÿçš„é—®äº†ä»¥å‰çš„å…¬å¸ï¼Œä¸ºä»€ä¹ˆè·³æ§½å•Šä¹‹ç±»çš„ã€‚ æœ‰ä¸€äº›ä¸ä¸€æ ·çš„å°±æ˜¯é—®æˆ‘æ€ä¹ˆä¿è¯æœ‰æŒç»­çš„äº§å‡ºå’Œèƒ½ä¿æŒé«˜æ•ˆé•¿æœŸå­¦ä¹ ï¼Œå› ä¸ºUEDæ˜¯éœ€è¦ä¸æ–­çš„æ¢ç´¢å‰ç»æŠ€æœ¯çš„ï¼Œè¿˜æœ‰å°±æ˜¯é—®æˆ‘æœ‰æ²¡æœ‰blogï¼Œå¤šå°‘äººè®¢é˜…â€¦emmmm æˆ‘è¯´æˆ‘çš„åšå®¢æ²¡äººè®¢é˜…æ²¡äººçœ‹ï¼Œè‡ªå·±å†™ç€ç© ğŸ¤¦â€</p>
<p>è¿‡äº†å‡ å¤©åhræ‰“ç”µè¯èŠofferï¼Œæ€»ä½“æ¥è¯´æ¯”ç°åœ¨çš„é«˜äº†ä¸å°‘ï¼Œç®—æ˜¯å¾ˆæ»¡æ„çš„ä¸€ä¸ªofferäº†ã€‚</p>
<p>æœ¬æ¥é“äº†å¿ƒè¦è¿‡å»é‚£è¾¹æµªï¼Œæ¯•ç«Ÿéƒ¨é—¨çš„åŒäº‹åŸºæœ¬éƒ½è§äº†ä¸€é å“ˆå“ˆå“ˆå“ˆï¼Œç„¶åofferåˆæ¯”è¾ƒå¿ƒæ°´ã€‚</p>
<p>åé¢å› ä¸ºä¸ªäººåŸå› é€‰æ‹©ç»§ç»­ç•™åœ¨ç§Ÿç§Ÿè½¦ï¼Œä½†æ˜¯å¦‚æœåœ¨ä»¥åæœ‰æœºä¼šï¼Œè¿˜æ˜¯ä¼šä¼˜å…ˆè€ƒè™‘yyçš„ã€‚</p>
<h2 id="å…³äºå·¥ä½œ"><a href="#å…³äºå·¥ä½œ" class="headerlink" title="å…³äºå·¥ä½œ"></a>å…³äºå·¥ä½œ</h2><h3 id="é¡¹ç›®æ‹†åŒ…"><a href="#é¡¹ç›®æ‹†åŒ…" class="headerlink" title="é¡¹ç›®æ‹†åŒ…"></a>é¡¹ç›®æ‹†åŒ…</h3><p>æ—¢ç„¶é€‰æ‹©ç•™åœ¨ç§Ÿç§Ÿè½¦ï¼Œè‚¯å®šå°±ä¸èƒ½åƒä¹‹å‰åŠå¹´åˆ’åˆ’æ°´å°±è¿‡å»</p>
<p>æœ€è¿‘å·¥ä½œä¸Šä¸»è¦è´Ÿè´£çš„æ˜¯ï¼Œæƒ³ç€æŠŠéƒ¨é—¨çš„é¡¹ç›®åšä¸ªæ‹†åŒ…</p>
<p>åŸæœ¬å°é¡¹ç›®æ…¢æ…¢è¿­ä»£æˆå¾ˆå¤§çš„é¡¹ç›®ï¼Œä¸€æ¬¡æ‰“åŒ…è¦èŠ±åŠä¸ªå°æ—¶â€¦.åŠ ä¸Šç°åœ¨ç›®å½•çš„é—®é¢˜ï¼Œæ¯å¤©è¿‡æ¥éƒ½è¦æ‰“ä¸€ä¸ªå…¨é‡åŒ…ã€‚</p>
<p>æ‰€ä»¥ç°åœ¨çš„è®¡åˆ’æ˜¯ï¼Œå¯¹é¡¹ç›®æ¨¡å—è¿›è¡Œæ‹†åŒ…ï¼Œä¸€ä¸ªæ¨¡å—ç‹¬ç«‹æˆä¸€ä¸ªé¡¹ç›®ï¼Œæœ‰è‡ªå·±çš„node_modelsï¼Œä½†æ˜¯å…±ç”¨ä¸€ä¸ªgitã€‚</p>
<p>è¿™ä¸ªå…¶å®ä»åŠå¹´å‰å°±æœ‰äººæå‡ºæ¥ï¼Œä½†æ˜¯å¤ªéš¾æäº† æ‰€ä»¥ä¸€ç›´æ²¡äººå»æ¨</p>
<p>é¦–å…ˆè¦è€ƒè™‘çš„æ˜¯éƒ¨é—¨ä¸å¯èƒ½åœæ‰æ—¥å¸¸è¿­ä»£ï¼Œæ¥ç­‰ä½ æ‹†åŒ…ã€‚è€Œä¸”ä½ çš„éœ€æ±‚ä¹Ÿä¸ä¼šå› ä¸ºè¿™ä¸ªæŠ€æœ¯éœ€æ±‚è€Œå‡å°‘ï¼Œæ‰€ä»¥è¦åœ¨å¹³æ—¶åšéœ€æ±‚çš„é—´éš™åšè¿™ä»¶äº‹æƒ…ã€‚</p>
<p>å°½å¯èƒ½æŠŠè·¯å¾„æ›¿æ¢ï¼Œæ–‡ä»¶è¿ç§»ç­‰åšæˆè„šæœ¬å»è·‘ï¼Œä¸ç„¶åšä¸ä¸‹å»ã€‚<br>è€Œä¸”æ‹†åŒ…ä¹‹åï¼Œè¦è€ƒè™‘åç«¯çš„æ¨¡æ¿è·¯å¾„é—®é¢˜è¿˜æœ‰éƒ¨ç½²çš„é—®é¢˜ï¼ŒåŠ ä¸Šä¸€äº›å‰ç«¯ pwa,ampçš„æ„å»ºè€ƒè™‘<br>çœŸæ˜¯ä¸ªå¤§å·¥ç¨‹â€¦</p>
<p>æœ€è¿‘çš„æˆæœæ˜¯æœ¬åœ°èƒ½è·‘èµ·æ¥ï¼Œä½†æ˜¯è¿˜ç¼ºä¸€ä¸ª æœ¬åœ°æœåŠ¡ï¼ŒåŠ ä¸Šè¿˜æ²¡æœ‰å’Œåç«¯ï¼Œéƒ¨ç½²é‚£å—æ²Ÿé€šã€‚</p>
<p>ä»»é‡é“è¿œ</p>
<h3 id="ä¸‹åŠå¹´çš„æŒ‡æ ‡"><a href="#ä¸‹åŠå¹´çš„æŒ‡æ ‡" class="headerlink" title="ä¸‹åŠå¹´çš„æŒ‡æ ‡"></a>ä¸‹åŠå¹´çš„æŒ‡æ ‡</h3><p>ä¸‹åŠå¹´ï¼Œè€å¤§ç»™å®šçš„æŠ€æœ¯æŒ‡æ ‡æ˜¯Reactå’ŒWebpackä¸¤é¡¹</p>
<p>å…¶å®åŸæœ¬ç»™çš„æ˜¯Httpå’Œæµè§ˆå™¨å†…æ ¸ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¯´ç°åœ¨æˆ‘å»äº†è§£é‚£ä¸¤å—æ²¡ä»€ä¹ˆå¤§çš„æ”¶è·ã€‚</p>
<p>åŠ ä¸Šåœ¨yyé¢è¯•ä¹‹åï¼Œé¢è¯•å®˜ä¸€ç›´ç»™çš„è¯„ä»·æ˜¯æ²¡æœ‰ä¸€ä¸ªå¾ˆæ·±å…¥çš„ç‚¹ï¼Œæ‰€ä»¥å°±é€‰äº†Reactå»åšæ·±å…¥çš„æ–¹å‘ã€‚</p>
<p>Reactæ¢ç´¢ä¹‹ä½™äº†è§£Webpackå’Œ PWAéƒ¨åˆ†</p>
<h3 id="å…³äºwebpack"><a href="#å…³äºwebpack" class="headerlink" title="å…³äºwebpack"></a>å…³äºwebpack</h3><p>å‰å‡ å¤©æœ‰ä¸ªéœ€æ±‚æ˜¯é¡¹ç›®ä¸Šç”¨åˆ°çš„cookieéƒ½è¦è®°å½•åˆ°æŸä¸ªæ–‡æ¡£é‡Œé¢ï¼Œä¸€å¼€å§‹æƒ³ç€å†™ä¸€ä¸ªwebpackæ’ä»¶å»åšè¿™ä»¶äº‹æƒ…ã€‚ é¡¹ç›®çš„webpackæ˜¯3.xï¼Œå®˜æ–¹çš„æ–‡æ¡£å…¨éƒ½å‡çº§åˆ°4.xï¼Œä¸€å¼€å§‹æœ‰ç‚¹è›‹ç–¼ï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ªæ¯”è¾ƒé€‚åˆå…¥é—¨çš„demoï¼Œè¦ä¸å°±æ˜¯å¤ªç®€å•ï¼Œè¦ä¸å°±æ˜¯å¾ˆå¤æ‚çš„ã€‚</p>
<p>åé¢ç»ˆäºå¤§æ¦‚è·‘äº†èµ·æ¥ï¼Œä½†æ˜¯è·‘èµ·æ¥ä¹‹åï¼Œå‘ç°å’Œé¢„æƒ³çš„ä¸ä¸€è‡´ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>æ–‡æ¡£éœ€è¦è®°å½•çš„æ˜¯ key value description, ä¸¾ä¸ªä¾‹å­<br>cookie.set(â€˜nameâ€™, â€˜jsonzâ€™, â€˜ç”¨æˆ·åâ€™);</p>
<p>æˆ‘çš„æ–¹æ¡ˆæ˜¯åœ¨webpackç¼–è¯‘çš„æ—¶å€™æ‹¿åˆ°babelè½¬ä¹‰å’Œä»£ç å‹ç¼©ä¼˜åŒ–ä¹‹å‰çš„å†…å®¹ï¼Œå› ä¸ºé¡¹ç›®ä¸Šæ¶‰åŠåˆ°cookieçš„æ“ä½œéƒ½ä¼šç”¨ä¸€ä¸ª <code>cookie-js</code> çš„ç±»åº“ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨è¿™ä¸ªåšä¸ºåˆ‡å…¥ç‚¹ã€‚</p>
<p>å¤§æ¦‚çš„æ€è·¯æ˜¯ï¼š webpackç”Ÿå‘½å‘¨æœŸé‡Œé¢å»æ‹¿åˆ°æºæ–‡ä»¶ï¼Œç„¶åç”¨ä¸€ä¸ªè¯­æ³•åˆ†ææ ‘ï¼Œè§£ææˆASTï¼Œå†æ ¹æ®ç±»å‹å»ç­›é€‰å‡º cookie-js å‡½æ•°è°ƒç”¨ä¼ å…¥çš„å‚æ•°</p>
<p>æœ¬æ¥è§‰å¾—å¤©è¡£æ— ç¼ï¼Œä½†æ˜¯ç†æƒ³å¾ˆå¤©çœŸï¼Œå®é™…é¡¹ç›®ä¸Šäº”èŠ±å…«é—¨ï¼Œæ¯”å¦‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Cookie <span class="keyword">from</span> <span class="string">'Cookie-js'</span>;</span><br><span class="line"><span class="keyword">const</span> cookie = <span class="built_in">require</span>(<span class="string">'Cookie-js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> key = IS_DEV? <span class="string">'_name'</span>: <span class="string">'name'</span>;</span><br><span class="line"><span class="keyword">const</span> value = <span class="built_in">JSON</span>.parse(Cookie.get(<span class="string">'obj'</span>)).name;</span><br><span class="line">Cookie.set(key, value, <span class="string">'åå­—'</span>);</span><br><span class="line"></span><br><span class="line">cookie.set(<span class="string">'user'</span>, &#123;</span><br><span class="line">  name: <span class="string">'jsonz'</span>,</span><br><span class="line">  age: <span class="number">25</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥å…¶å®å¦‚æœçœŸçš„è¦ç”¨è„šæœ¬è®°å½•ï¼Œåªèƒ½åœ¨è¿è¡Œç¯å¢ƒä¸‹è®°å½•ï¼Œæ‰€ä»¥æ”¾å¼ƒè¿™ä¸ªæ–¹æ¡ˆâ€¦.</p>
<h2 id="å…³äºæ£é¼“"><a href="#å…³äºæ£é¼“" class="headerlink" title="å…³äºæ£é¼“"></a>å…³äºæ£é¼“</h2><h3 id="å°ç¨‹åº"><a href="#å°ç¨‹åº" class="headerlink" title="å°ç¨‹åº"></a>å°ç¨‹åº</h3><p>å‰æ®µæ—¶é—´æ˜¯è‡ªå·±æ£é¼“äº†ä¸€ä¸ªå°ç¨‹åºï¼Œç”¨æ¥ç»™æ¯å¤©åšè®¡åˆ’çš„ã€‚å¤§æ¦‚é•¿è¿™æ ·<br><img src="./wechat.jpeg" alt="wechat å°ç¨‹åº"></p>
<p>æŠ€æœ¯æ ˆ:<br>å‰ç«¯: ç”¨çš„æ˜¯ç¾å›¢çš„ mpvueï¼Œæš‚æ—¶å‘ç°å…¶å®å’Œå†™vueå¾ˆå¤šä¸ä¸€æ ·ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå¯èƒ½æ˜¯å°ç¨‹åºçš„å±€é™é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯è½¬æ¢é—®é¢˜ï¼Œnå¤šè«åå…¶å¦™çš„bugè€Œä¸”è¿˜æ— æ³•æ­£é¢å¹²ã€‚</p>
<p>åç«¯:<br>Node: åšä¸»è¦æœåŠ¡ç«¯è¯­è¨€ï¼Œç”¨çš„é˜¿é‡ŒEgg.jsæ¡†æ¶<br>MySQL: ä¸ºä»€ä¹ˆé€‰æ‹©MySQLè€Œä¸æ˜¯å‰ç«¯(node)æƒ¯ç”¨çš„mongodbå‘¢ï¼Ÿ ä¸»è¦åŸå› æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯mongoä½“éªŒè¿‡äº†ï¼›ä¸€ä¸ªæ˜¯ç°åœ¨ä¸šç•Œå…¶å®mySqlè¿˜æ˜¯å ç»å¤§å¤šæ•°ï¼Œè€Œä¸”æ¯”è¾ƒæˆç†Ÿï¼Œæƒ³ä½“éªŒä¸€æ³¢å…³ç³»å‹æ•°æ®åº“ã€‚</p>
<p>æœåŠ¡å™¨ï¼š<br>Nginx: æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå¯¹äºä¸€ä¸ªæ²¡æœ‰æŠ˜è…¾è¿‡çš„äººæ¥è¯´è¿˜æ˜¯æŒºå¼€å¿ƒçš„<br>Centos</p>
<p>çœ‹èµ·æ¥æ˜¯æŒºç®€å•çš„ï¼Œä½†æ˜¯å¯¹äºä¸ªäººå­¦ä¹ æ¥è¯´æ˜¯ä¸ªæŒºå¥½çš„é¡¹ç›®ã€‚ç‰¹åˆ«æ˜¯ä¸€ä¸ªå®Œå…¨æ²¡æœ‰çœŸæ­£æ£é¼“è¿‡åç«¯ï¼ŒæœåŠ¡ç«¯çš„äººæ¥è¯´ï¼ŒçœŸçš„å¾ˆhappyï¼Œæ¯”å•çº¯å†™å‰ç«¯è¦è€ƒè™‘çš„äº‹æƒ…å¤šå¾ˆå¤šã€‚</p>
<p>ä½†æ˜¯æœ€è¿‘å› ä¸ºå·¥ä½œçš„äº‹æƒ…ï¼Œæš‚æ—¶æç½®ä¸€è¾¹ï¼Œç›®å‰è¿˜æ˜¯ 0.0.1 å¯ä»¥ç”¨æœ€ç®€å•çš„è®¡åˆ’çš„åŠŸèƒ½ã€‚åé¢æ‹†åŒ…å®Œæˆä¹‹åå°±å›æ¥åŠ åŠŸèƒ½å†å‘å¸ƒ</p>
<h3 id="å›¾ç‰‡è½¬å­—ç¬¦"><a href="#å›¾ç‰‡è½¬å­—ç¬¦" class="headerlink" title="å›¾ç‰‡è½¬å­—ç¬¦"></a>å›¾ç‰‡è½¬å­—ç¬¦</h3><p>å‰å‡ å¤©æœ‰é«˜ä¸­å¥½æœ‹å‹åœ¨ç¾¤é‡Œå‘ä¸€ä¸ªè§†é¢‘ï¼Œé—®æˆ‘ä»¬è¯´çœŸçš„æ˜¯å¯ä»¥è¿™æ ·çš„å—ï¼Ÿ</p>
<video src="./a.mp4" controls></video><br>åŸè§†é¢‘æ˜¯æ­»è‚¥å®…éƒ½çŸ¥é“çš„æä¹å‡€åœŸï¼Œç„¶åæˆ‘è§‰å¾—å¾ˆæœ‰è¶£ï¼Œå°±é—®å…¬å¸ç¾¤è¿™ç§æ€ä¹ˆå®ç°ï¼Œå¤§æ¦‚æ˜¯å›¾ç‰‡è½¬å­—ç¬¦ä¸²<br><br>äºæ˜¯å°±å»æœäº†ä¸€ä¸‹ canvas è½¬å­—ç¬¦ä¸²ï¼Œå†æ‰¾äº†ä¸‹æ€ä¹ˆæŠŠè§†é¢‘è½¬å›¾ç‰‡ ğŸ¤¦â€æ²¡é”™ï¼Œæˆ‘å°±æ˜¯å¤§è‡ªç„¶çš„æ¬è¿å·¥<br><br>æœ€åå®ç°å‡ºæ¥å¤§æ¦‚æ˜¯è¿™æ ·å­<br><video src="./b.mp4" width="300" controls></video>


<p>å¤§æ¦‚çš„å®ç°æ€è·¯æ˜¯ é€šè¿‡videoå’ŒcanvasæŠŠè§†é¢‘é€å¸§ä¸¢åˆ°canvasé‡Œé¢ï¼Œå†ç”¨canvasè¯»å‡ºæ¯ä¸ªåƒç´ çš„ç°åº¦å»åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åç”¨è¿™äº›å­—ç¬¦ä¸²é‡å†™ä¸€ä¸ªcanvaså‡ºæ¥ã€‚</p>
<p>åé¢æœ‰æ—¶é—´å†æŠŠè¿™ä¸ªæ•´ç†æˆä¸€ç¯‡æ–‡ç« å‡ºæ¥</p>
<h2 id="å…³äºå­¦ä¹ "><a href="#å…³äºå­¦ä¹ " class="headerlink" title="å…³äºå­¦ä¹ "></a>å…³äºå­¦ä¹ </h2><p>æœ€è¿‘æ˜¯æœ‰ç‚¹æ‡’æƒ°äº†ï¼Œä¸“å‡æœ¬ä¸€ç›´çœ‹ç¦»æ•£æ•°å­¦ï¼ŒåŸæœ¬é¢„è®¡7æœˆä»½è¦çœ‹å®Œé¡ºè·¯åšä¸€å¥—é¢˜ï¼Œç°åœ¨æ€•æ˜¯è¦å»¶è¿Ÿä¸€ä¸ªæ˜ŸæœŸæœ€å°‘ã€‚<br>çœ‹å®Œè¿˜æœ‰ä¸‡æ¶çš„ç½‘ç»œåŸç†å’Œæ•°æ®åº“åŸç†â€¦</p>
<p>åŠ æ²¹ğŸ’ª</p>
<p>æœ€åé™„ä¸Šå‘¨æœ«å›¢å»ºçš„å›¾<br><img src="./c.jpg" width="400"></p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>window.printâ€”â€”å…³äºæµè§ˆå™¨æ‰“å°</title>
    <url>/2018/06/window-print%E2%80%94%E2%80%94%E5%85%B3%E4%BA%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%8D%B0/</url>
    <content><![CDATA[<p>è¿‘æ—¥æœ‰ä¸ªéœ€æ±‚æ˜¯åšé¡µé¢æ‰“å°çš„ï¼Œè¶è¿™ä¸ªæœºä¼šè¡¥ä¸€ä¸‹æ¯”è¾ƒå†·é—¨çš„æµè§ˆå™¨æ‰“å°çŸ¥è¯†ã€‚æœ¬æ–‡ä¸»è¦è®¨è®º Chromeã€Safariã€Firefoxæµè§ˆå™¨çš„æƒ…å†µã€‚</p>
<h2 id="æ‰“å°æ¥å£"><a href="#æ‰“å°æ¥å£" class="headerlink" title="æ‰“å°æ¥å£"></a>æ‰“å°æ¥å£</h2><p>é¦–å…ˆæµè§ˆå™¨æ‰“å°æ˜¯ä¸€ä¸ªå¾ˆæˆç†Ÿçš„åº”ç”¨~ è‡³å°‘æ˜¯å¾ˆæ—©å°±å·²ç»æœ‰åº”ç”¨çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ä»€ä¹ˆå…¼å®¹é—®é¢˜</p>
<p>æœ€ç®€å•çš„æ‰“å°å°±æ˜¯ç›´æ¥è°ƒç”¨ <code>window.print()</code>ï¼Œå½“ç„¶ç”¨ <code>document.execCommand(&#39;print&#39;)</code> ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚</p>
<p>è¿™æ—¶å€™åœ¨Safariå’ŒChromeéƒ½ä¼šå¼¹èµ·æ‰“å°é¢„è§ˆçš„çª—å£,FireFoxæ²¡æœ‰é¢„è§ˆè€Œæ˜¯ç›´æ¥è®©ä½ é€‰æ‹©æ‰“å°æœºï¼ŒOSxä¸‹å¯ä»¥é€šè¿‡é¢„è§ˆPDFæ¥é¢„è§ˆ~</p>
<p>ä¸€èˆ¬è¿™ç§ç›´æ¥åœ¨ç½‘é¡µä¸Šè°ƒç”¨ print çš„æ–¹æ³•æ˜¯æ²¡åŠæ³•æ»¡è¶³æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæ¯”å¦‚è¯´ï¼š</p>
<ul>
<li>è°ƒæ•´å¸ƒå±€å’Œå­—ä½“å¤§å°æ¥é€‚åº”A4çº¸</li>
<li>æ‰“å°çš„æ—¶å€™ç”¨ä¸åŒçš„æ ·å¼é£æ ¼</li>
<li>ä½¿ç”¨æ›´é«˜æ¸…çš„å›¾ç‰‡æ¥æ‰“å°</li>
<li>æŸä¸€äº›ä¸ç›¸å…³çš„ä¸œè¥¿ä¸å‡ºç°åœ¨æ‰“å°ä¸­ç­‰ç­‰ç­‰ç­‰</li>
</ul>
<p>é‚£ä¹ˆæœ‰å“ªäº›æ–¹æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ‰“å°çš„ç”¨æˆ·ä½“éªŒå‘¢ï¼Ÿ</p>
<h2 id="ä½¿ç”¨-print-style-sheet-æ‰“å°æ ·å¼è¡¨"><a href="#ä½¿ç”¨-print-style-sheet-æ‰“å°æ ·å¼è¡¨" class="headerlink" title="ä½¿ç”¨ print style sheet (æ‰“å°æ ·å¼è¡¨)"></a>ä½¿ç”¨ print style sheet (æ‰“å°æ ·å¼è¡¨)</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨ link ä¸ŠåŠ ä¸Šä¸€ä¸ª media=â€printâ€ æ¥æ ‡è¯†è¿™æ˜¯æ‰“å°æœºæ‰ä¼šåº”ç”¨çš„æ ·å¼è¡¨, å¦‚:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/example.css"</span> <span class="attr">media</span>=<span class="string">"print"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æ‰“å°çš„æ—¶å€™ï¼Œå°±ä¼šé»˜è®¤å°†è¯¥æ ·å¼è¡¨åº”ç”¨åˆ°æ–‡æ¡£ä¸­</p>
<h2 id="ä½¿ç”¨åª’ä»‹æŸ¥è¯¢"><a href="#ä½¿ç”¨åª’ä»‹æŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨åª’ä»‹æŸ¥è¯¢"></a>ä½¿ç”¨åª’ä»‹æŸ¥è¯¢</h2><p>å…¼å®¹æ€§: IE9+ å…¶ä»–ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒ<br>å½“æˆ‘ä»¬è¦ä¿®æ”¹çš„æ ·å¼æ²¡æœ‰é‚£ä¹ˆå¤šçš„æ—¶å€™ï¼Œå…¶å®å®Œå…¨ä¸éœ€è¦é‡æ–°å†™ä¸ªæ ·å¼è¡¨ï¼Œåªè¦å†™ä¸Šä¸€ä¸ªåª’ä»‹æŸ¥è¯¢ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå¦‚:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h2><h3 id="beforeprint-amp-amp-afterprint"><a href="#beforeprint-amp-amp-afterprint" class="headerlink" title="beforeprint &amp;&amp; afterprint"></a>beforeprint &amp;&amp; afterprint</h3><p>æœ‰ä¸¤ä¸ªäº‹ä»¶å¯ä»¥ç›‘å¬åˆ°åˆ°æ‰“å°äº‹ä»¶ï¼Œä¸€ä¸ªæ˜¯<code>beforeprint</code>,ä¸€ä¸ªæ˜¯<code>afterprint</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæ‰“å°äº‹ä»¶è§¦å‘å‰åã€‚<br>è¿™ä¸ªäº‹ä»¶åœ¨ IE6 å°±å·²ç»æ”¯æŒäº†ï¼Œä¸è¿‡ä¸€ç‚¹éƒ½ä¸æƒŠè®¶~ æ¯•ç«ŸIEå¾ˆæ—©å°±æ”¯æŒå¾ˆå¤šæ¥å£è°ƒç”¨ï¼Œä¹‹å‰å¥½åƒåšè¿‡IEæ‰“å¼€Excelçš„éœ€æ±‚~<br>å…¼å®¹å¤§æ¦‚æ˜¯ Firefoxã€IEå…¨æ”¯æŒ, Chrome63+æ”¯æŒ, Safariæš‚ä¸æ”¯æŒï¼Œç®—æ˜¯ä¸€åŠä¸€åŠå§ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'beforeprint'</span>, ()=&gt; &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.innerHTML = <span class="string">'æ­£åœ¨æ‰“å°...'</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'afterprint'</span>, ()=&gt; &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.innerHTML = <span class="string">'æ‰“å°å®Œæˆ...'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="window-matchMedia-æµ‹è¯•åª’ä½“æŸ¥è¯¢æ¥å£"><a href="#window-matchMedia-æµ‹è¯•åª’ä½“æŸ¥è¯¢æ¥å£" class="headerlink" title="window.matchMedia æµ‹è¯•åª’ä½“æŸ¥è¯¢æ¥å£"></a>window.matchMedia æµ‹è¯•åª’ä½“æŸ¥è¯¢æ¥å£</h3><p>å¦‚æœä½ æƒ³è¦å…¼å®¹Safariæˆ–è®¸å¯ä»¥è¯•ä¸€ä¸‹ <code>window.matchMedia</code><br>å…¼å®¹æ˜¯ IE10+ï¼Œå…¶ä»–ä¸»æµæµè§ˆå™¨å®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªçš„ç”¨æ³•ç¨å¾®æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªMediaQueryListå¯¹è±¡ï¼Œå†é€šè¿‡ä»–ç›‘å¬å˜åŒ–ï¼Œå¦‚:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> printMedia = <span class="built_in">window</span>.matchMedia(<span class="string">'print'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printChange</span>(<span class="params">&#123; matches, &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.body.innerHTML = matches? <span class="string">'æ­£åœ¨æ‰“å°...'</span>: <span class="string">'æ‰“å°å®Œæˆ/å–æ¶ˆ'</span>;</span><br><span class="line">&#125;</span><br><span class="line">printMedia.addListener(printChange);</span><br></pre></td></tr></table></figure></p>
<h2 id="æ›´åŠ ä¸ªæ€§åŒ–å®šåˆ¶æ‰“å°åŒºåŸŸ-æ‰“å°å†…å®¹"><a href="#æ›´åŠ ä¸ªæ€§åŒ–å®šåˆ¶æ‰“å°åŒºåŸŸ-æ‰“å°å†…å®¹" class="headerlink" title="æ›´åŠ ä¸ªæ€§åŒ–å®šåˆ¶æ‰“å°åŒºåŸŸ/æ‰“å°å†…å®¹"></a>æ›´åŠ ä¸ªæ€§åŒ–å®šåˆ¶æ‰“å°åŒºåŸŸ/æ‰“å°å†…å®¹</h2><p>å¦‚æœé¡¹ç›®ä¸Šç”¨çš„æ˜¯jqç­‰ï¼Œæˆ–è€…æƒ³ç®€å•ç²—æš´çš„æ‰“å°æŸä¸ªåŒºåŸŸåˆä¸æƒ³é‡æ–°å†™æ ·å¼è¡¨å•Šï¼Œä»€ä¹ˆçš„ã€‚<br>æœ€å‚»ç“œç‰ˆçš„æ–¹å¼å°±æ˜¯ç›´æ¥ç”¨jqæ’ä»¶ <a href="https://github.com/DoersGuild/jQuery.print" target="_blank" rel="noopener">jQuery.print</a></p>
<p>ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªå»å¤„ç†ï¼Œå¤§æ¦‚çš„æ€è·¯æ˜¯åˆ›å»ºä¸€ä¸ªiframeï¼ŒæŠŠè¦æ‰“å°çš„domå’Œæ ·å¼è¡¨éƒ½ä¸¢è¿›å»ï¼Œå†è°ƒç”¨iframeçš„æ‰“å°äº‹ä»¶ã€‚ è¿™é‡Œå†™ä¸€ä¸ªç®€å•çš„ <a href="https://github.com/jsonz1993/wheel/blob/master/print-partial/index.js" target="_blank" rel="noopener">demo</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printPartial</span>(<span class="params">dom, &#123; title= document.title,&#125;= &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!dom) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">let</span> copyDom = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);</span><br><span class="line">  <span class="keyword">const</span> styleDom = <span class="built_in">document</span>.querySelectorAll(<span class="string">'style, link, meta'</span>);</span><br><span class="line">  <span class="keyword">const</span> titleDom = <span class="built_in">document</span>.createElement(<span class="string">'title'</span>);</span><br><span class="line">  titleDom.innerText = title;</span><br><span class="line"></span><br><span class="line">  copyDom.appendChild(titleDom);</span><br><span class="line">  <span class="built_in">Array</span>.from(styleDom).forEach(<span class="function"><span class="params">item</span>=&gt;</span> &#123;</span><br><span class="line">    copyDom.appendChild(item.cloneNode(<span class="literal">true</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">  copyDom.appendChild(dom.cloneNode(<span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> htmlTemp = copyDom.innerHTML;</span><br><span class="line">  copyDom = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> iframeDom = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</span><br><span class="line">  <span class="keyword">const</span> attrObj = &#123;</span><br><span class="line">    height: <span class="number">0</span>,</span><br><span class="line">    width: <span class="number">0</span>,</span><br><span class="line">    border: <span class="number">0</span>,</span><br><span class="line">    wmode: <span class="string">'Opaque'</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> styleObj = &#123;</span><br><span class="line">    position: <span class="string">'absolute'</span>,</span><br><span class="line">    top: <span class="string">'-999px'</span>,</span><br><span class="line">    left: <span class="string">'-999px'</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">Object</span>.entries(attrObj).forEach(<span class="function">(<span class="params">[key, value]</span>)=&gt;</span> iframeDom.setAttribute(key, value));</span><br><span class="line">  <span class="built_in">Object</span>.entries(styleObj).forEach(<span class="function">(<span class="params">[key, value]</span>)=&gt;</span> iframeDom.style[key] = value);</span><br><span class="line">  <span class="built_in">document</span>.body.insertBefore(iframeDom, <span class="built_in">document</span>.body.children[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">const</span> iframeWin = iframeDom.contentWindow;</span><br><span class="line">  <span class="keyword">const</span> iframeDocs = iframeWin.document;</span><br><span class="line">  iframeDocs.write(<span class="string">`&lt;!doctype html&gt;`</span>);</span><br><span class="line">  iframeDocs.write(htmlTemp);</span><br><span class="line">  iframeWin.focus();</span><br><span class="line">  iframeWin.print();</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(iframeDom);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printPartial(<span class="built_in">document</span>.querySelector(<span class="string">'#description'</span>));</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€äº›æ³¨æ„çš„äº‹æƒ…</p>
<ul>
<li>æ‰“å°ä¼šæ‰“å°documentä¸‹æ‰€æœ‰å¯è§å…ƒç´ ï¼Œ åŒ…æ‹¬ <code>&lt;header&gt;</code> é‡Œé¢çš„</li>
<li>èƒŒæ™¯éƒ½ä¸ä¼šè¢«æ‰“å°å‡ºæ¥ï¼ŒåŒ…æ‹¬èƒŒæ™¯è‰²å•ŠèƒŒæ™¯å›¾ç‰‡å•Šç­‰ç­‰</li>
<li>å¦‚æœå›¾ç‰‡æ˜¯æ‡’åŠ è½½çš„ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œä¸ç„¶æ‰“å°çš„æ—¶å€™ä¼šç›´æ¥ç©ºç™½</li>
</ul>
<p>å‚è€ƒ:<br><a href="https://blog.csdn.net/fengshuiyue/article/details/57483057" target="_blank" rel="noopener">https://blog.csdn.net/fengshuiyue/article/details/57483057</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/print" target="_blank" rel="noopener">Mozilla print</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Printing#Using_a_print_style_sheet" target="_blank" rel="noopener">Mozilla Using_a_print_style_sheet</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTPå¸¸ç”¨çŸ¥è¯†ç‚¹æ€»ç»“</title>
    <url>/2018/05/http-mini-book/</url>
    <content><![CDATA[<p>åŒæ ·æ˜¯å› ä¸ºé¢è¯•çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°è‡ªå·±å¯¹httpçš„ä¸€äº›æ¦‚å¿µå’ŒçŸ¥è¯†ç‚¹å’Œé›¶ç¢ï¼Œå€Ÿæ­¤æœºä¼šçœ‹äº†ã€ŠHTTPå°ä¹¦ã€‹ï¼Œé¡ºæ‰‹å†™äº†ç¯‡è®°å½•æ€»ç»“ä¸€äº›å¸¸è§çš„httpçŸ¥è¯†ç‚¹ã€‚</p>
<h1 id="http-ç®€ä»‹"><a href="#http-ç®€ä»‹" class="headerlink" title="http ç®€ä»‹"></a>http ç®€ä»‹</h1><p>è¯·æ±‚:<br>å®¢æˆ·ç«¯è½¯ä»¶æ‰“å¼€åˆ°æœåŠ¡å™¨çš„è¿æ¥ï¼Œå‘èµ·è¯·æ±‚å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /hello.htm HTTP/1.1</span><br><span class="line">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36</span><br><span class="line">Host: example.com</span><br><span class="line">Accept-Language: en-us</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br></pre></td></tr></table></figure></p>
<p>å“åº”:<br>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚æ¶ˆæ¯åæ ¹æ®èµ„æºå®šä½ç¬¦åœ¨æœåŠ¡å™¨æ‰¾åˆ°è¯¥èµ„æºï¼Œå¹¶å“åº”ç»™å®¢æˆ·ç«¯:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">X-Powered-By: Express</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Content-Length: 22</span><br><span class="line">ETag: W/&quot;16-dDTk/xb5lvRNBfrz6lE//HVBox8&quot;</span><br><span class="line">Date: Tue, 22 May 2018 03:04:08 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;Hello, Jsonz!&lt;/h1&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="è¯·æ±‚æ¶ˆæ¯"><a href="#è¯·æ±‚æ¶ˆæ¯" class="headerlink" title="è¯·æ±‚æ¶ˆæ¯"></a>è¯·æ±‚æ¶ˆæ¯</h2><p>è¯·æ±‚ä¿¡æ¯ä¸€èˆ¬ç”±è¯·æ±‚è¡Œã€å¤´éƒ¨å­—æ®µåŒºã€CRLFä¸æ¶ˆæ¯ä¸»ä½“ï¼ˆå¯é€‰ï¼‰ç»„æˆ</p>
<h3 id="è¯·æ±‚è¡Œ"><a href="#è¯·æ±‚è¡Œ" class="headerlink" title="è¯·æ±‚è¡Œ"></a>è¯·æ±‚è¡Œ</h3><p>è¯·æ±‚æ¶ˆæ¯çš„ç¬¬ä¸€è¡Œç§°ä¸ºè¯·æ±‚è¡Œï¼Œä¸€èˆ¬åŒ…æ‹¬ <code>è¯·æ±‚æ–¹æ³•</code>ï¼Œ <code>è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦</code> è¿˜æœ‰è¯·æ±‚çš„<code>åè®®ç‰ˆæœ¬</code></p>
<blockquote>
<p>Request-List = Method SPACE Request-URI SPACE HTTP-Version CRLF</p>
</blockquote>
<p>è¯·æ±‚æ–¹æ³•æ¯”è¾ƒå¸¸ç”¨çš„æœ‰ <code>GET</code>, <code>POST</code>ã€‚ è¿™é‡Œç”¨çš„æ˜¯<code>GET</code> å‘èµ·ä¸€ä¸ªè¯·æ±‚è·å–èµ„æº</p>
<ul>
<li>GET è¯·æ±‚ä¸€ä¸ªåˆ¶å®šåç§°çš„èµ„æº</li>
<li>POST åˆ›å»ºä¸€ä¸ªæ–°çš„å­èµ„æºï¼Œæˆ–è€…æ›´æ–°ä¸€ä¸ªå­˜åœ¨çš„èµ„æº</li>
<li>PUT æŒ‡å®šçš„URLä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™ä¿®æ”¹</li>
<li>DELETE åˆ é™¤æŒ‡å®šèµ„æº</li>
<li>OPTIONS è¿”å›æœåŠ¡å™¨æ”¯æŒçš„æ–¹æ³•</li>
<li>CONNECTã€TRACE</li>
</ul>
<blockquote>
<p>å¯¹äº POST å’Œ PUTçš„é€‰æ‹©ï¼Œä½œè€…ç»™å‡ºçš„ä¾‹å­æ˜¯åˆ›å»ºè®¢å•<br>PUT /other/1 åˆ›å»ºå•å·ä¸º1çš„è®¢å•ï¼Œå¦‚æœå­˜åœ¨å°±æ›´æ–°ä»–ï¼Œè®¢å•å·ç”±å®¢æˆ·ç«¯æä¾›<br>POST /other åˆ›å»ºè®¢å•ï¼Œè®¢å•å·ç”±æœåŠ¡ç«¯æä¾›<br>POST /other/1 æ›´æ–°è®¢å•ï¼Œå¦‚æœä¸å­˜åœ¨åº”è¯¥æŠ›é”™<br>é‡å¤æ‰§è¡ŒPUTè¯·æ±‚ä¸ä¼šå½±å“æœåŠ¡å™¨çŠ¶æ€ï¼Œè€ŒPOSTåˆ™ä¼šå¯¼è‡´åˆ›å»ºä¸¤ä¸ªè®¢å•</p>
</blockquote>
<p>ä½†æ˜¯å·¥ä½œä¸­ï¼Œå‡ ä¹åªç”¨è¿‡GETå’ŒPOSTï¼Œå¯¹äºåˆ›å»ºè®¢å•çš„ä¾‹å­ä¸­ï¼ŒPUTå’ŒPOSTçš„åŒºåˆ«æˆ‘çš„ç†è§£æ¯”è¾ƒæµ…æ˜¾ï¼Œä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯/æœåŠ¡ç«¯æä¾›è®¢å•å·ï¼Œä¸€ä¸ªæ˜¯è¯­ä¹‰åŒ–ã€‚</p>
<h3 id="å¤´éƒ¨å­—æ®µ"><a href="#å¤´éƒ¨å­—æ®µ" class="headerlink" title="å¤´éƒ¨å­—æ®µ"></a>å¤´éƒ¨å­—æ®µ</h3><p>ä»ç¬¬äºŒè¡Œåˆ°ç©ºè¡Œä¹‹é—´éƒ½å±äºå¤´éƒ¨å­—æ®µåŒºï¼Œç”¨æ¥ä¼ é€’æ›´å¤šè¯¦ç»†çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæ¡ˆä¾‹é‡Œé¢æ˜¯<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36</span><br><span class="line">Host: example.com</span><br><span class="line">Accept-Language: en-us</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br></pre></td></tr></table></figure></p>
<p>æ¯”å¦‚è¯´è¿™é‡Œ:<br><code>User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36</code> æˆ‘ä»¬å¯ä»¥çŸ¥é“å®¢æˆ·ç«¯ç”¨çš„æ˜¯ Mac OSxç³»ç»Ÿï¼ŒChrome v66.0.xç‰ˆæœ¬çš„æµè§ˆå™¨<br><code>Accept-Language: en-us</code> è¯­è¨€æ˜¯è‹±è¯­<br><code>Accept-Encoding: gzip, deflate</code> æ”¯æŒçš„å‹ç¼©ç¼–ç ä¸ºgzipå’Œdeflate</p>
<h3 id="ç©ºè¡Œ-CRLF"><a href="#ç©ºè¡Œ-CRLF" class="headerlink" title="ç©ºè¡Œ(CRLF)"></a>ç©ºè¡Œ(CRLF)</h3><p>ç©ºè¡Œä¹Ÿå«CRLFï¼Œæ˜¯éš”å¼€è¯·æ±‚å¤´ä¸è¯·æ±‚ä¸»ä½“çš„</p>
<h3 id="æ¶ˆæ¯ä¸»ä½“"><a href="#æ¶ˆæ¯ä¸»ä½“" class="headerlink" title="æ¶ˆæ¯ä¸»ä½“"></a>æ¶ˆæ¯ä¸»ä½“</h3><p>å‘é€ç»™æœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼Œæ¯”å¦‚ç”¨POSTæ–¹æ³•æäº¤è¡¨å•æ—¶ï¼Œè¡¨å•çš„å†…å®¹å°±æ˜¯å­˜åœ¨æ¶ˆæ¯ä¸»ä½“é‡Œé¢ã€‚å¦‚æœæ˜¯ç”¨GETæ–¹æ³•å°±ä¼šä¸¢åˆ°è¯·æ±‚URLé‡Œ</p>
<h2 id="å“åº”ä¿¡æ¯"><a href="#å“åº”ä¿¡æ¯" class="headerlink" title="å“åº”ä¿¡æ¯"></a>å“åº”ä¿¡æ¯</h2><p>å“åº”ä¿¡æ¯å’Œè¯·æ±‚ä¿¡æ¯çš„ç»„æˆç»“æ„ç›¸ä¼¼ï¼Œç”±çŠ¶æ€è¡Œã€å¤´éƒ¨å­—æ®µè¡Œã€ç©ºè¡Œï¼ˆCRLFï¼‰å’Œæ¶ˆæ¯ä¸»ä½“æ„æˆã€‚</p>
<h3 id="çŠ¶æ€è¡Œ"><a href="#çŠ¶æ€è¡Œ" class="headerlink" title="çŠ¶æ€è¡Œ"></a>çŠ¶æ€è¡Œ</h3><p><code>HTTP/1.1 200 OK</code></p>
<p>è¯·æ±‚è¡Œä¸€èˆ¬ç”± <code>åè®®ç‰ˆæœ¬å·</code>ã€<code>çŠ¶æ€ç </code>ä¸<code>çŠ¶æ€ç æè¿°</code>ç»„æˆã€‚</p>
<p>åè®®ç‰ˆæœ¬å·æœ‰: 0.9ã€1.0ã€1.1ã€2.0ç­‰ï¼Œç›®å‰æ¯”è¾ƒæµè¡Œçš„æ˜¯2.0ä¸1.1</p>
<p>çŠ¶æ€ç æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼ŒçŠ¶æ€ç å’Œå‰ç«¯å¼€å‘ä¼šæ¯”è¾ƒç›¸å…³ä¸€ç‚¹ï¼Œæ›´å…·ä½“çš„ä»‹ç»åé¢ä¼šè¯¦ç»†è¯´</p>
<ul>
<li>1xx ä¿¡æ¯æç¤º</li>
<li>2xx æˆåŠŸ</li>
<li>3xx é‡å®šå‘</li>
<li>4xx å®¢æˆ·ç«¯é”™è¯¯</li>
<li>5xx æœåŠ¡ç«¯é”™è¯¯</li>
</ul>
<h3 id="å¤´éƒ¨å­—æ®µ-1"><a href="#å¤´éƒ¨å­—æ®µ-1" class="headerlink" title="å¤´éƒ¨å­—æ®µ"></a>å¤´éƒ¨å­—æ®µ</h3><p>çŠ¶æ€è¡Œä¸ç©ºè¡Œä¹‹é—´å°±æ˜¯å“åº”å¤´éƒ¨å­—æ®µäº†ï¼Œ å“åº”å¤´æ¯”è¯·æ±‚å¤´åŠŸèƒ½ç›¸å¯¹æ¥è¯´å¤šä¸€ç‚¹ï¼Œæ¯”å¦‚åé¢ä¼šè¯´åˆ°çš„<code>Set-Cookie</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">X-Powered-By: Express</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Content-Length: 22</span><br><span class="line">ETag: W/&quot;16-dDTk/xb5lvRNBfrz6lE//HVBox8&quot;</span><br><span class="line">Date: Tue, 22 May 2018 03:04:08 GMT</span><br><span class="line">Connection: keep-alive</span><br></pre></td></tr></table></figure></p>
<p>å“åº”å¤´åŒ…æ‹¬ä¸€äº›æœåŠ¡æœ¬èº«çš„ä¿¡æ¯ä»¥åŠå“åº”å†…å®¹ä½“çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¿™é‡Œçš„<br><code>Date: Tue, 22 May 2018 03:04:08 GMT</code> æ˜¯å“åº”çš„æ—¶é—´<br><code>Content-Length: 22</code>æ˜¯è¿”å›çš„æ¶ˆæ¯ä½“é•¿åº¦ã€‚</p>
<h3 id="ç©ºè¡Œ-CRLF-1"><a href="#ç©ºè¡Œ-CRLF-1" class="headerlink" title="ç©ºè¡Œ(CRLF)"></a>ç©ºè¡Œ(CRLF)</h3><p>å’Œè¯·æ±‚çš„CRLFæ˜¯ä¸€æ ·çš„ï¼Œç”¨æ¥éš”å¼€å“åº”å¤´å’Œå“åº”å†…å®¹ä¸»ä½“</p>
<h3 id="å“åº”æ¶ˆæ¯ä¸»ä½“"><a href="#å“åº”æ¶ˆæ¯ä¸»ä½“" class="headerlink" title="å“åº”æ¶ˆæ¯ä¸»ä½“"></a>å“åº”æ¶ˆæ¯ä¸»ä½“</h3><p>åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œé¢æ˜¯ä¸€å¥å¾ˆç®€å•çš„ <code>&lt;h1&gt;Hello, Jsonz!&lt;/h1&gt;</code>ï¼Œè¿™é‡Œå“åº”ä¸»ä½“æœ‰å¾ˆå¤šç§æ ¼å¼ï¼Œå¦‚æœæ˜¯gifçš„è¯ä¼šè¿”å›gifçš„äºŒè¿›åˆ¶å­—èŠ‚é›†åˆ</p>
<h1 id="è¯·æ±‚"><a href="#è¯·æ±‚" class="headerlink" title="è¯·æ±‚"></a>è¯·æ±‚</h1><p>è¯·æ±‚çš„ç»“æ„ç»„æˆRequest:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Request-Line CRLF</span><br><span class="line">*Request-HEAD CRLF</span><br><span class="line">CRLF</span><br><span class="line">[ message-body ]</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Request-Line =&gt; Request-List = Method SPACE Request-URI SPACE HTTP-Version CRLF<br>è¿™é‡Œæˆ‘ä»¬ä¸»è¦Request-Methodséƒ¨åˆ†</p>
</blockquote>
<h2 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h2><p>GET æ–¹æ³•ä¸€èˆ¬æ˜¯ç”¨æ¥è·å–URLæŒ‡å®šçš„èµ„æº</p>
<h3 id="å¯ä»¥é…åˆ-Range-æ¥è·å–å±€éƒ¨èµ„æºã€‚"><a href="#å¯ä»¥é…åˆ-Range-æ¥è·å–å±€éƒ¨èµ„æºã€‚" class="headerlink" title="å¯ä»¥é…åˆ Range æ¥è·å–å±€éƒ¨èµ„æºã€‚"></a>å¯ä»¥é…åˆ <code>Range</code> æ¥è·å–å±€éƒ¨èµ„æºã€‚</h3><p>å‘èµ·è¯·æ±‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /index.txt HTTP/1.1</span><br><span class="line">Range: bytes=0-4</span><br></pre></td></tr></table></figure></p>
<p>æœåŠ¡ç«¯å“åº”<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 206 Partial Content</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Range: bytes 0-5/12</span><br><span class="line">Content-Length: 5</span><br><span class="line">hello</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ä¸€äº›è§†é¢‘çš„åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»åˆ°æŸä¸ªè¿›åº¦ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»è¯¥è¿›åº¦å»è¯·æ±‚ï¼Œè€Œä¸æ˜¯æ•´ä¸€ä¸ªè§†é¢‘éƒ½è¯·æ±‚ä¸‹æ¥ã€‚<br>å“åº”å¤´çš„<code>Content-Range: bytes 0-5/12</code>æŒ‡çš„æ˜¯å½“å‰è¿”å›0-5ï¼Œæ€»é•¿ä¸º12ã€‚</p>
<h3 id="é…åˆ-ETag-åšç¼“å­˜"><a href="#é…åˆ-ETag-åšç¼“å­˜" class="headerlink" title="é…åˆ ETag åšç¼“å­˜"></a>é…åˆ ETag åšç¼“å­˜</h3><p>æœåŠ¡ç«¯åœ¨å“åº”å¤´é‡Œé¢ä¼šç»™ä¸€ä¸ª<code>ETag</code>æ ‡è¯†ï¼Œè¿™ä¸ªæ ‡è¯†æˆ‘ä»¬åœ¨å¼€å¤´çš„æ—¶å€™æœ‰è¯´äº†æ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆåšï¼Œåœ¨GETè¯·æ±‚æ—¶ä½¿ç”¨æ¡ä»¶è·å–å¤´éƒ¨å­—æ®µï¼Œå¦‚æœæœåŠ¡ç«¯å‘ç°è¿™ä¸ªå­—æ®µä¸æ–‡ä»¶çš„ETagæ ‡è¯†åŒ¹é…ï¼Œåˆ™å¯ä»¥åšç¼“å­˜ï¼Œå¦åˆ™å‘é€æ–°çš„æ–‡æ¡£è¿‡æ¥ã€‚</p>
<p>å‘èµ·è¯·æ±‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /hello.htm HTTP/1.1</span><br><span class="line">If-None-Match:  W/&quot;16-dDTk/xb5lvRNBfrz6lE//HVBox8&quot;</span><br></pre></td></tr></table></figure></p>
<p>æœåŠ¡ç«¯å“åº”<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 304 Not Modified</span><br><span class="line">X-Powered-By: Express</span><br><span class="line">ETag: W/&quot;16-dDTk/xb5lvRNBfrz6lE//HVBox8&quot;</span><br><span class="line">Date: Tue, 22 May 2018 12:08:23 GMT</span><br><span class="line">Connection: keep-alive</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæˆ‘ä»¬çš„ETagä¸æ–‡ä»¶åŒ¹é…ä¸Šäº†ï¼Œæ‰€ä»¥æœåŠ¡ç«¯ç›´æ¥å“åº” 304 çŠ¶æ€ç (Not Modified);</p>
<h2 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h2><p>HEADæ–¹æ³•å’ŒGETæ–¹æ³•çš„åŒºåˆ«æ˜¯ HEADæ–¹æ³•è¯·æ±‚ï¼Œå“åº”çš„æ—¶å€™å°±åªä¼šå‘é€å“åº”æ¶ˆæ¯çš„å¤´éƒ¨å­—æ®µï¼Œä¸ä¼šæŠŠå“åº”æ¶ˆæ¯ä¸»ä½“è¿”å›</p>
<p>é‚£ä¹ˆHEADçš„åœºæ™¯ä¸€èˆ¬åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ ä¸€èˆ¬å¯ç”¨äºå‘èµ·ä¸€ä¸ªè¯·æ±‚æ¥è·å–æœåŠ¡ç«¯çš„èµ„æºå¤§å°ï¼Œå†åˆ†æ®µè·å–ã€‚</p>
<h2 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h2><p>æˆ‘ä»¬å¹³æ—¶å¤§éƒ¨åˆ†åœºæ™¯ç”¨çš„éƒ½æ˜¯POSTæ–¹æ³•ï¼Œå› ä¸ºPOSTæ–¹æ³•ä¸ä¼šæŠŠå‚æ•°éƒ½ä¸¢åœ¨URLä¸Šï¼Œå¯¹è¯·æ±‚çš„æ•°æ®å¤§å°æ²¡æœ‰é™åˆ¶ï¼Œè¯·æ±‚ä¹Ÿä¸ä¼šç¼“å­˜ã€‚</p>
<h2 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h2><p>OPTIONSæ–¹æ³•ä¸»è¦æ˜¯ç”¨æ¥æŸ¥è¯¢URLæŒ‡å®šçš„èµ„æºæ‰€æ”¯æŒçš„æ–¹æ³•åˆ—è¡¨</p>
<p>å‘èµ·è¯·æ±‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OPTIONS /hello.htm HTTP/1.1</span><br></pre></td></tr></table></figure></p>
<p>æœåŠ¡ç«¯å“åº”<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">X-Powered-By: Express</span><br><span class="line">Allow: GET,HEAD</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Content-Length: 8</span><br><span class="line">ETag: W/&quot;8-ZRAf8oNBS3Bjb/SU2GYZCmbtmXg&quot;</span><br><span class="line">Date: Tue, 22 May 2018 12:20:42 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">GET,HEAD%</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œåˆ—å‡ºäº†è¿™ä¸ªèµ„æºæ”¯æŒ GETä¸HEADæ–¹æ³•</p>
<h2 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a>PUT</h2><p>PUTæ–¹æ³•ä¸Šé¢è®²äº†æ˜¯ å¯¹URLæŒ‡å®šçš„èµ„æºè¿›è¡Œåˆ›å»ºï¼Œå¦‚æœå­˜åœ¨å°±ä¿®æ”¹ä»–ã€‚</p>
<p>ç†è®ºä¸Šè¿™ç§éœ€æ±‚ç›´æ¥ç”¨POSTæ–¹æ³•å°±å®Œå…¨å¤Ÿç”¨äº†ï¼Œæ¯”å¦‚åˆ›å»ºè®¢å•<code>POST /order/create</code><br>æ›´æ–°è®¢å• <code>POST /order/orderId</code></p>
<p>ä½†æ˜¯è¿™é‡Œå¦‚æœæ”¹æˆPUTåˆ›å»ºçš„è¯ï¼Œå¯ä»¥ç›´æ¥è¿™æ · <code>PUT /order</code> æ›´ç¬¦åˆRestful APIè§„èŒƒï¼Œå¦‚æœæ¢æˆå‰ç«¯çš„å±‚é¢æ¥è¯´ï¼Œå°±åƒ<code>div</code>ä¸<code>header, nav, section, aside, footer</code>è¿™äº›æ›´æœ‰è¯­ä¹‰åŒ–çš„æ ‡ç­¾ã€‚</p>
<h2 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h2><p>åˆ é™¤æŸä¸ªèµ„æºï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„</p>
<h2 id="CONNECT"><a href="#CONNECT" class="headerlink" title="CONNECT"></a>CONNECT</h2><blockquote>
<p>åœ¨å½“å‰å·²ç»å»ºç«‹HTTPè¿æ¥çš„æƒ…å†µä¸‹ï¼ŒCONNECT æ–¹æ³•ç”¨æ¥å‘ŠçŸ¥ä»£ç†æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯æƒ³è¦å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹SSLè¿æ¥ã€‚</p>
</blockquote>
<blockquote>
<p>å®¢æˆ·ç«¯ä½¿ç”¨å¦‚ä¸‹æ¶ˆæ¯ï¼Œé€šçŸ¥ä»£ç†æœåŠ¡å™¨ï¼Œå»åšä¸€ä¸ªè¿æ¥åˆ°æŒ‡å®šçš„æœåŠ¡å™¨åœ°å€å’Œç«¯å£:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CONNECT example.com 443 HTTP/1.1</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>ä»£ç†æœåŠ¡å™¨éšåæå–CONNECT æ–¹æ³•æŒ‡å®šçš„åœ°å€å’Œç«¯å£ï¼ˆè¿™é‡Œæ˜¯ example.com 443 ï¼‰ï¼Œå»ºç«‹å’Œæ­¤æœåŠ¡å™¨çš„SSLè¿æ¥ï¼ŒæˆåŠŸåéšåé€šçŸ¥å®¢æˆ·ç«¯ï¼Œéœ€è¦çš„è¿æ¥å»ºç«‹å®Œæ¯•ï¼š</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 OK</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨CONNECTå‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¸ä¼šå»è§£æå­—æ®µç­‰æ“ä½œï¼Œè€Œæ˜¯å®Œå®Œå…¨å…¨å•çº¯çš„åšè½¬å‘ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé€æ˜ä»£ç†ã€‚</p>
<h2 id="TRACE"><a href="#TRACE" class="headerlink" title="TRACE"></a>TRACE</h2><p>æŸ¥è¯¢åˆ°ç›®æ ‡èµ„æºç»è¿‡çš„ä¸­é—´èŠ‚ç‚¹ã€‚</p>
<h1 id="å“åº”"><a href="#å“åº”" class="headerlink" title="å“åº”"></a>å“åº”</h1><p>å“åº”ç»“æ„ç»„æˆResponse:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Response-Line</span><br><span class="line">*(header CRLF) </span><br><span class="line">CRLF</span><br><span class="line">[ message-body ]</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Response-Line =&gt; HTTP-Version SPACE Status-Code SPACE Reason-Phrease CRLF<br>è¿™é‡Œæˆ‘ä»¬ä¸»è¦Status-Codeéƒ¨åˆ†</p>
</blockquote>
<h2 id="1xx"><a href="#1xx" class="headerlink" title="1xx"></a>1xx</h2><h3 id="100-Continue"><a href="#100-Continue" class="headerlink" title="100 Continue"></a>100 Continue</h3><p>æœåŠ¡å™¨å·²ç»æ¥æ”¶åˆ°è¯·æ±‚å¤´ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯åº”ç»§ç»­å‘é€è¯·æ±‚ä¸»ä½“ï¼ˆåœ¨éœ€è¦å‘é€èº«ä½“çš„è¯·æ±‚çš„æƒ…å†µä¸‹ï¼šä¾‹å¦‚ï¼ŒPOSTè¯·æ±‚ï¼‰ï¼Œæˆ–è€…å¦‚æœè¯·æ±‚å·²ç»å®Œæˆï¼Œå¿½ç•¥è¿™ä¸ªå“åº”ã€‚</p>
<p>æ¯”å¦‚å®¢æˆ·ç«¯ä¸Šä¼ ä¸€äº›è§†é¢‘æ–‡ä»¶ï¼Œå¯ä»¥å…ˆåœ¨è¯·æ±‚å¤´åŠ ä¸€ä¸ª<code>Expect: 100-continue</code> å¦‚æœæœåŠ¡ç«¯å…è®¸æ¥æ”¶è¯¥æ–‡ä»¶ï¼ˆå¤§å°ï¼‰ï¼Œå°±è¿”å›100ï¼Œä¸å…è®¸åˆ™è¿”å›417çŠ¶æ€ç ã€‚</p>
<h2 id="2xx"><a href="#2xx" class="headerlink" title="2xx"></a>2xx</h2><p>2xx ç³»åˆ—éƒ½æ˜¯è¡¨ç¤ºè¯·æ±‚å·²ç»æˆåŠŸå¤„ç†äº†ï¼Œè¿™é‡Œåˆ—ä¸¾å‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„</p>
<h3 id="200-OK"><a href="#200-OK" class="headerlink" title="200 OK"></a>200 OK</h3><p>æœ€å¸¸è§çš„å¯èƒ½å°±æ˜¯200äº†ï¼Œå¹³æ—¶å†™ajaxå¾ˆå¤šéƒ½æ˜¯ç›´æ¥åˆ¤æ–­ <code>xmlhttp.status==200</code>, ä»–ä»£è¡¨çš„æ˜¯è¯·æ±‚å·²ç»æˆåŠŸå®Œæˆ</p>
<h3 id="201-Created"><a href="#201-Created" class="headerlink" title="201 Created"></a>201 Created</h3><p>201è¡¨ç¤ºè¯·æ±‚å·²ç»è¢«å®ç°ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ–°çš„èµ„æºå·²ç»ä¾æ®è¯·æ±‚çš„éœ€è¦è€Œåˆ›å»ºï¼Œä¸”å…¶URIå·²ç»éšLocationå¤´ä¿¡æ¯è¿”å›ã€‚å‡å¦‚éœ€è¦çš„èµ„æºæ— æ³•åŠæ—¶åˆ›å»ºçš„è¯ï¼Œåº”å½“è¿”å›â€™202 Acceptedâ€™ã€‚</p>
<h3 id="202-Accepted"><a href="#202-Accepted" class="headerlink" title="202 Accepted"></a>202 Accepted</h3><p>202ä»£è¡¨æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚æœ€ç»ˆè¯¥è¯·æ±‚å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šè¢«æ‰§è¡Œï¼Œå¹¶ä¸”å¯èƒ½åœ¨å¤„ç†å‘ç”Ÿæ—¶è¢«ç¦æ­¢</p>
<h3 id="204-No-Content"><a href="#204-No-Content" class="headerlink" title="204 No Content"></a>204 No Content</h3><p>æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œæ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚</p>
<h3 id="206-Partical-Content"><a href="#206-Partical-Content" class="headerlink" title="206 Partical Content"></a>206 Partical Content</h3><p>206ä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒå¤§æ–‡ä»¶çš„åˆ†æ®µä¸‹è½½ï¼Œç±»ä¼¼è¿…é›·è¿™ç±»çš„HTTP ä¸‹è½½å·¥å…·éƒ½æ˜¯ä½¿ç”¨æ­¤ç±»å“åº”å®ç°æ–­ç‚¹ç»­ä¼ æˆ–è€…å°†ä¸€ä¸ªå¤§æ–‡æ¡£åˆ†è§£ä¸ºå¤šä¸ªä¸‹è½½æ®µåŒæ—¶ä¸‹è½½ã€‚</p>
<p>è¿™é‡Œç”¨ä¹¦é‡Œçš„ä¸€ä¸ªä¾‹å­æ¥å±•ç¤º,å…ˆç”¨ HEAD è·å–è¯¥èµ„æºçš„å¤§å°ï¼Œå†ç”¨Rangeåˆ†æ®µè·å–ï¼Œè¿™äº›æ–¹æ³•ä¸Šé¢éƒ½æœ‰ä»‹ç»è¿‡ï¼Œè¿™é‡Œç»¼åˆèµ·æ¥è¿ç”¨:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HEAD /large.jpg HTTP/1.1</span><br><span class="line">Host: example.com</span><br><span class="line"></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Content-Length: 4000</span><br><span class="line"></span><br><span class="line">Get /large.jpg HTTP/1.1</span><br><span class="line">Host: example.com</span><br><span class="line">Range: bytes=0-1999</span><br><span class="line"></span><br><span class="line">HTTP/1.1 206 Partical Content</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Content-Length: 2000</span><br><span class="line">Content-Range: bytes 0-1999/4000</span><br><span class="line"></span><br><span class="line">&#123;binary data&#125;</span><br><span class="line"></span><br><span class="line">GET /large.jpg HTTP/1.1</span><br><span class="line">Host: example.com</span><br><span class="line">Range: bytes=2000-</span><br><span class="line"></span><br><span class="line">HTTP/1.1 206 Partical Content</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Content-Length: 2000</span><br><span class="line">Content-Range: bytes 2000-3999/4000</span><br><span class="line"></span><br><span class="line">&#123;binary data&#125;</span><br></pre></td></tr></table></figure></p>
<p>2xx å¾ˆå¤šåªæ˜¯è§„èŒƒä¸è¯­ä¹‰åŒ–çš„åŒºåˆ«ã€‚</p>
<h2 id="3xx"><a href="#3xx" class="headerlink" title="3xx"></a>3xx</h2><p>3xxç³»åˆ—é™¤äº† 304 ä»¥å¤–ï¼Œå…¶ä»–éƒ½æ˜¯ç”¨äºé‡å®šå‘çš„</p>
<h3 id="300-Multiple-Choices"><a href="#300-Multiple-Choices" class="headerlink" title="300 Multiple Choices"></a>300 Multiple Choices</h3><p>300æ˜¯è¯·æ±‚çš„èµ„æºæœ‰ä¸€ç³»åˆ—å¯ä¾›é€‰æ‹©çš„å›é¦ˆä¿¡æ¯ï¼Œç”¨æˆ·æˆ–æµè§ˆå™¨èƒ½å¤Ÿè‡ªè¡Œé€‰æ‹©ä¸€ä¸ªé¦–é€‰çš„åœ°å€è¿›è¡Œé‡å®šå‘ã€‚</p>
<h3 id="301-Moved-Permanently-amp-amp-302-Found"><a href="#301-Moved-Permanently-amp-amp-302-Found" class="headerlink" title="301 Moved Permanently &amp;&amp; 302 Found"></a>301 Moved Permanently &amp;&amp; 302 Found</h3><p>301 ä¸ 302 éƒ½ä»£è¡¨å½“å‰è®¿é—®çš„URLå¯¹åº”çš„èµ„æºè¢«ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä¼šåœ¨å“åº”å¤´Locationå†…æŒ‡å®šã€‚<br>ä»–ä»¬çš„åŒºåˆ«æ˜¯ 301æ˜¯æ°¸ä¹…è¢«ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œè€Œ302æ˜¯æš‚æ—¶æ€§çš„ä¸´æ—¶é‡å®šå‘</p>
<h3 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h3><p>304æˆ‘ä»¬åœ¨å‰é¢å·²ç»æœ‰è§åˆ°è¿‡äº†ï¼Œç”¨ETagä¸If-None-Matché…åˆåšç¼“å­˜æ—¶ï¼Œå°±ä¼šè¿”å›304 ä»£è¡¨è¯¥èµ„æºæœªè¢«ä¿®æ”¹ï¼Œå¯ä»¥ç»§ç»­ç”¨ä»¥å‰ä¸‹è½½çš„å‰¯æœ¬ã€‚</p>
<h2 id="400"><a href="#400" class="headerlink" title="400"></a>400</h2><p>400æŒ‡çš„æ˜¯å®¢æˆ·ç«¯é”™è¯¯ï¼Œæ—¢æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯¥è¯·æ±‚ï¼Œä½†æ˜¯æ”¶åˆ°çš„è¯·æ±‚æ— æ³•å¤„ç†,è¿™é‡Œåˆ—å‡ºå¸¸è§çš„å‡ ç§</p>
<h3 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h3><p>ç”±äºæ˜æ˜¾çš„å®¢æˆ·ç«¯é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œæ ¼å¼é”™è¯¯çš„è¯·æ±‚è¯­æ³•ï¼Œå¤ªå¤§çš„å¤§å°ï¼Œæ— æ•ˆçš„è¯·æ±‚æ¶ˆæ¯æˆ–æ¬ºéª—æ€§è·¯ç”±è¯·æ±‚ï¼‰ï¼ŒæœåŠ¡å™¨ä¸èƒ½æˆ–ä¸ä¼šå¤„ç†è¯¥è¯·æ±‚</p>
<h3 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h3><p>401æ—¢æœªè®¤è¯ï¼Œåº”è¯¥æ˜¯æœ€ç®€å•çš„ç”¨æˆ·è®¤è¯ç™»å½•ç³»ç»Ÿäº†ã€‚ä¸403ä¸åŒï¼Œè¿™é‡Œå¦‚æœç”¨æˆ·æä¾›å¿…è¦çš„å‡­æ®ï¼Œå°±å¯ä»¥è®¿é—®èµ„æºã€‚</p>
<h3 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h3><p>æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚ä¸401å“åº”ä¸åŒçš„æ˜¯ï¼Œèº«ä»½éªŒè¯å¹¶ä¸èƒ½æä¾›ä»»ä½•å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¸ªè¯·æ±‚ä¹Ÿä¸åº”è¯¥è¢«é‡å¤æäº¤ã€‚é¡¹ç›®ä¸­çš„ç»éªŒå°±æ˜¯ï¼Œå¦‚æœç”¨æˆ·ç™»å½•çŠ¶æ€è¿‡æœŸï¼Œåå°è¿”å›403çŠ¶æ€ç ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å†å»æ‰§è¡Œè‡ªåŠ¨ç™»å½•æˆ–è€…æç¤ºç™»å½•çš„é€»è¾‘ã€‚</p>
<h3 id="404-Not-Fount"><a href="#404-Not-Fount" class="headerlink" title="404 Not Fount"></a>404 Not Fount</h3><p>è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚æ‰€å¸Œæœ›å¾—åˆ°çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘ç°ï¼Œä½†å…è®¸ç”¨æˆ·çš„åç»­è¯·æ±‚ã€‚è¿™ä¸ªå¯èƒ½æ˜¯æœ€å¸¸è§çš„4xxçŠ¶æ€ç </p>
<h3 id="412-Precondition-Failed"><a href="#412-Precondition-Failed" class="headerlink" title="412 Precondition Failed"></a>412 Precondition Failed</h3><blockquote>
<p>å®¢æˆ·ç«¯å‘èµ·äº†æ¡ä»¶è¯·æ±‚ï¼ŒæœåŠ¡å™¨å‘ç°è¿™ä¸ªè¯·æ±‚ä¸­çš„å…¶ä¸­ä¸€ä¸ªæ¡ä»¶å¹¶ä¸æˆç«‹ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç”¨æ­¤é”™è¯¯ç ä½œä¸ºå“åº”æ¶ˆæ¯çš„çŠ¶æ€ç è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<br>æ¯”å¦‚æˆ‘ä»¬åœ¨è¯·æ±‚å¤´è®¾ç½®æ¡ä»¶é™å®š:<code>If-Unmodified-Since</code>ï¼Œå¦‚æœæœåŠ¡ç«¯æ ¡éªŒè¿™ä¸ªæ¡ä»¶ï¼Œå‘ç°è¯´æ²¡æœ‰æ»¡è¶³çš„è¯ï¼Œå°±ä¼šè¿”å› 412 çŠ¶æ€ç ã€‚</p>
</blockquote>
<h2 id="5xx"><a href="#5xx" class="headerlink" title="5xx"></a>5xx</h2><p>400æ˜¯å®¢æˆ·ç«¯é”™è¯¯ï¼Œ500å°±æ˜¯æœåŠ¡ç«¯çš„é”™è¯¯çŠ¶æ€ç ã€‚</p>
<h3 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h3><p>500ä¸ºé€šç”¨é”™è¯¯æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæœªæ›¾é¢„æ–™çš„çŠ¶å†µï¼Œå¯¼è‡´äº†å®ƒæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚æ²¡æœ‰ç»™å‡ºå…·ä½“é”™è¯¯ä¿¡æ¯ï¼Œä¸€èˆ¬å¼€å‘è€…å¯ä»¥æŸ¥æ—¥å¿—ç­‰å»è§£å†³è¯¥é”™è¯¯ã€‚</p>
<h3 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h3><blockquote>
<p>è¯´æ˜æœåŠ¡å™¨ç°åœ¨æ— æ³•æä¾›æœåŠ¡ï¼Œä½†æ˜¯å°†æ¥å¯ä»¥ã€‚å¦‚æœæœåŠ¡å™¨çŸ¥é“ä½•æ—¶èµ„æºå¯ç”¨ï¼Œåº”è¯¥åœ¨å“åº”ä¸­åŒ…å«Retry-Afterçš„é¦–éƒ¨ï¼Œæç¤ºå®¢æˆ·ç«¯å¯ä»¥é‡è¯•æœåŠ¡çš„æ—¶é—´ã€‚<br>å¦‚æœæ²¡æœ‰æä¾›Retry-Afterå¤´éƒ¨ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯åº”å½“ä»¥å¤„ç†500å“åº”çš„æ–¹å¼å¤„ç†å®ƒã€‚</p>
</blockquote>
<p>ä»¥ä¸Šæ˜¯è§‰å¾—æ¯”è¾ƒå¸¸è§çš„çŠ¶æ€ç ï¼Œæ›´å¤šè¯·è§<a href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a></p>
<h2 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h2><p>ä¸€èˆ¬æˆ‘ä»¬åœ¨æœåŠ¡ç«¯å“åº”å¯ä»¥åŠ ä¸Šè¿™ä¸ªå“åº”å¤´<code>Cache-Control: max-age=2592000</code> æ¥è®©æµè§ˆå™¨æŠŠè¿™ä¸ªèµ„æºç¼“å­˜ä¸‹æ¥ï¼Œç¼“å­˜çš„æ—¶é—´ä¸º<code>2592000</code>æ—¢30å¤©ï¼Œä¹Ÿå¯ä»¥åœ¨æ—¶é—´åé¢åŠ ä¸Šä¸ª<code>public</code>æ¥æŒ‡ç¤ºè¯¥å“åº”å¯ä»¥è¢«ä»»ä½•ä¸­é—´äººï¼ˆcdn,ä»£ç†)ç¼“å­˜ã€‚</p>
<h1 id="æ¶ˆæ¯ä¸»ä½“-1"><a href="#æ¶ˆæ¯ä¸»ä½“-1" class="headerlink" title="æ¶ˆæ¯ä¸»ä½“"></a>æ¶ˆæ¯ä¸»ä½“</h1><p>åœ¨è¯·æ±‚æ¶ˆæ¯æˆ–å“åº”æ¶ˆæ¯é‡Œé¢ï¼Œéƒ½å¯ä»¥åŒ…å«ä¸€ä¸ªå¯é€‰çš„æ¶ˆæ¯ä¸»ä½“ï¼ŒæœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯éƒ½æ²¡åŠæ³•ä»æ¶ˆæ¯ä¸»ä½“é‡Œé¢è·å–æ˜¯ä»€ä¹ˆå†…å®¹å•Šï¼Œä»€ä¹ˆç±»å‹å•Šä»€ä¹ˆçš„ï¼Œæ‰€ä»¥å°±ä¼šæœ‰ä¸€ç»„å¤´éƒ¨å­—æ®µæ¥æ ‡ç¤ºä»–ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Content-Type å®ä½“ä¸­æ‰€æ‰¿è½½å¯¹è±¡çš„ç±»å‹,å¦‚ txt/html; image/jpeg</span><br><span class="line">Content-Length æ‰€ä¼ é€å®ä½“ä¸»ä½“çš„é•¿åº¦æˆ–å¤§å°ã€‚</span><br><span class="line">Content-Language ä¸æ‰€ä¼ é€å¯¹è±¡æœ€ç›¸é…çš„äººç±»è¯­è¨€, en-usç­‰</span><br><span class="line">Content-Encoding å¯¹è±¡æ•°æ®æ‰€åšçš„å‹ç¼©æ ¼å¼,gzipç­‰.</span><br><span class="line">Content-Location ä¸€ä¸ªå¤‡ç”¨ä½ç½®ï¼Œè¯·æ±‚æ—¶å¯é€šè¿‡å®ƒè·å¾—å¯¹è±¡ã€‚</span><br><span class="line">Content-Range è¯´æ˜å®ƒæ˜¯æ•´ä½“çš„å“ªä¸ªéƒ¨åˆ†,å¯ç”¨äºåˆ†æ®µè·å–ã€‚</span><br><span class="line">Content-MD5 å®ä½“ä¸»ä½“å†…å®¹çš„æ ¡éªŒå’Œã€‚</span><br><span class="line">Last-Modified æ‰€ä¼ è¾“å†…å®¹åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºæˆ–æœ€åä¿®æ”¹çš„æ—¥æœŸæ—¶é—´ã€‚</span><br><span class="line">Expires å®ä½“æ•°æ®å°†è¦å¤±æ•ˆçš„æ—¥æœŸæ—¶é—´ã€‚</span><br><span class="line">Allow è¯¥èµ„æºæ‰€å…è®¸çš„å„ç§è¯·æ±‚æ–¹æ³•ï¼Œä¾‹å¦‚ï¼ŒGET å’Œ HEADã€‚</span><br><span class="line">ETag è¿™ä»½æ–‡æ¡£çš„å”¯ä¸€éªŒè¯ç ï¼Œå¯ç”¨äºç¼“å­˜</span><br></pre></td></tr></table></figure>
<h1 id="HTTP-2-0-h2"><a href="#HTTP-2-0-h2" class="headerlink" title="HTTP/2.0(h2)"></a>HTTP/2.0(h2)</h1><p>è¿™é‡Œç®€å•è¯´ä¸€ä¸‹h2ä¸HTTP/1.1å¯¹äºå‰ç«¯å¼€å‘äººå‘˜æ¥è¯´æ¯”è¾ƒå¤§çš„æ”¹åŠ¨ã€‚</p>
<h2 id="å¤šè·¯å¤ç”¨-Multiplexing"><a href="#å¤šè·¯å¤ç”¨-Multiplexing" class="headerlink" title="å¤šè·¯å¤ç”¨ (Multiplexing)"></a>å¤šè·¯å¤ç”¨ (Multiplexing)</h2><p>å¤šè·¯å¤ç”¨å…è®¸åŒæ—¶é€šè¿‡å•ä¸€çš„ HTTP/2 è¿æ¥å‘èµ·å¤šé‡çš„è¯·æ±‚-å“åº”æ¶ˆæ¯ã€‚<br>åœ¨HTTP/1.1ä¸­ï¼Œæˆ‘ä»¬å®¢æˆ·ç«¯åœ¨åŒä¸€æ—¶é—´ï¼Œé’ˆå¯¹åŒä¸€äºåŸŸåä¸‹çš„è¯·æ±‚ä¼šæœ‰é™åˆ¶ï¼Œå¦‚æœè¶…è¿‡æŸä¸ªå€¼çš„è¯·æ±‚ä¼šè¢«å µå¡åˆ°ã€‚æ‰€ä»¥ä¸€èˆ¬çš„ä¼˜åŒ–æœ‰å‰ç«¯ç”¨é›ªç¢§å›¾æ¥åˆå¹¶å¤šä¸ªå°å›¾ç‰‡å‡å°‘è¯·æ±‚ï¼Œåç«¯æŠŠèµ„æºåˆ†åˆ°ä¸åŒçš„åŸŸä¸‹é¢ï¼Œå‡å°‘åŒåŸŸçš„é™åˆ¶ã€‚<br>ä½†æ˜¯å¦‚æœç½‘ç«™ç”¨äº†h2çš„è¯ï¼Œå‰ç«¯ä¸éœ€è¦è€ƒè™‘ç±»ä¼¼é›ªç¢§å›¾ä¹‹ç±»çš„æŠŠå¤šä¸ªè¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªå‡å°‘çš„ä¼˜åŒ–ã€‚</p>
<h1 id="æœ€åå•°å—¦ä¸¤å¥"><a href="#æœ€åå•°å—¦ä¸¤å¥" class="headerlink" title="æœ€åå•°å—¦ä¸¤å¥"></a>æœ€åå•°å—¦ä¸¤å¥</h1><p>ä¹‹æ‰€ä»¥ä¼šçœ‹ã€ŠHTTPå°ä¹¦ã€‹æ˜¯å› ä¸ºå‰æ®µæ—¶é—´é—®æˆ‘ä¸€ä¸ªæœ‹å‹è¯´æœ‰æ²¡æœ‰å…³äºHTTPæ¯”è¾ƒå¥½çš„ä¹¦ç±æ¨èï¼Œã€ŠHTTPæƒå¨æŒ‡å—ã€‹å…­ä¸ƒç™¾é¡µç»†èŠ‚å¤ªå¤šæ€•æ˜¯çœ‹å®Œç•™ä¸ä½ä»€ä¹ˆæ¦‚å¿µã€‚ä»–ç»™æˆ‘æ¨äº†ã€ŠHTTPå°ä¹¦ã€‹ï¼Œè¿™æœ¬ä¹¦ç®—æ˜¯æœ‰ç‚¹æ”¹å˜æˆ‘ä¸€äº›å…³äºçŸ¥è¯†è·å–çš„è®¤çŸ¥ã€‚<br>ç®€å•æ¥è¯´å°±æ˜¯ï¼Œå¤§å®¶åˆ«çœ‹9å—é’±çš„ä¹¦å°±é‚£ä¹ˆå‡ é¡µï¼Œç¿»ä¸€ä¸ªä¸Šåˆæˆ–è€…ä¸€å¤©å°±çœ‹å®Œï¼Œç„¶åå°±è§‰å¾—ä¸å€¼ï¼Œéå¾—è¦çœ‹å“ªç§å‡ ç™¾é¡µçš„æ‰è§‰å¾—é’±å›æœ¬äº†ã€‚<br>è¿™ç¯‡æ–‡åªæ˜¯ä¸ªäººåœ¨çœ‹çš„æ—¶å€™åšäº†ä¸€äº›å½’çº³ï¼Œä¹¦ä¸­æœ‰æ›´è¯¦ç»†æ›´å¥½çš„è§£é‡Šï¼Œå…³é”®æ˜¯æä¾›äº†æºç ä¸ä¾‹å­ï¼Œåœ¨çœ‹æ¦‚å¿µçš„æ—¶å€™å®æ“ä¸€éä¼šåŠ æ·±å¾ˆå¤šå°è±¡ã€‚<br>æ€»çš„æ¥è¯´ï¼Œè¿™æœ¬ä¹¦æŒºå€¼çš„ï¼Œå’Œä»–çš„æ ‡è¯­ä¸€æ ·ï¼š<em>å‡†èƒ½å¸®ä½ çœä¸‹ä¸å°‘<strong>æ—¶é—´</strong></em></p>
<p><a href="http://www.ituring.com.cn/book/1791" target="_blank" rel="noopener">ã€ŠHTTPå°ä¹¦ã€‹</a><br><a href="https://juejin.im/user/58774201570c35006207d274" target="_blank" rel="noopener">ã€ŠHTTPå°ä¹¦ã€‹ä½œè€…åˆ˜ä¼ å›</a><br><a href="http://www.cnblogs.com/machao/p/5788425.html" target="_blank" rel="noopener">HTTP Method æ›´è¯¦ç»†çš„ä»‹ç»</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ" target="_blank" rel="noopener">HTTPç¼“å­˜ - MDN</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>Book</tag>
        <tag>HTTP</tag>
      </tags>
  </entry>
  <entry>
    <title>2018-05-21 å°è®°</title>
    <url>/2018/05/2018-05-21/</url>
    <content><![CDATA[<p>æœ€è¿‘å·¥ä½œä¸æ˜¯å¾ˆå¿™ï¼Œä¹Ÿæ²¡æœ‰å†æŠ•ç®€å†å»é¢è¯•ï¼Œå¥½åƒåˆå¼€å§‹æ¢å¤ä»¥å‰çš„å­¦ä¹ çƒ­æƒ…ä¸èŠ‚å¥ã€‚</p>
<p>å‘äº†å‡ ç¯‡æ°´æ–‡~ çœ‹äº†ä¸€ä¸ªå°è„šæ‰‹æ¶çš„éƒ¨åˆ†æºç ã€Šcreate-react-appã€‹ï¼Œçœ‹äº†ä¸€æœ¬æŠ€æœ¯ä¹¦ã€Šcssä¸–ç•Œã€‹ï¼Œä¸€æœ¬å°è¯´ã€Šç™½é‡‘æ•°æ®ã€‹ã€‚</p>
<p>ä½†æ˜¯å†™è¿™ç¯‡æµæ°´çš„ä¸»è¦ç›®çš„æ˜¯å†æ¬¡æ„è¯†åˆ°è‡ªå·±çœ‹é—®é¢˜å¤ªè¿‡ <strong>å±€é™</strong>ã€‚</p>
<p>å…ˆäº¤ä»£ä¸€ä¸‹èƒŒæ™¯ï¼š</p>
<ol>
<li>ç›®å‰å…¬å¸çš„é¡¹ç›®æ˜¯åŸºäº cookie å»åˆ¤æ–­ä¸€äº›ç¯å¢ƒï¼Œç„¶åæŒ‡å‘æµ‹è¯•ç¯å¢ƒæˆ–è€…æ­£å¼ç¯å¢ƒ</li>
<li>å¯¹äº font å­—ä½“æ–‡ä»¶æ¥è¯´ï¼Œä»–çš„è¯·æ±‚æ˜¯æ²¡æœ‰å¸¦ä¸Šcookieçš„ï¼ˆchromeçš„bugï¼Œchromeè§‰å¾—è¯´è¿™ä¸ªæ–‡ä»¶ä¸éœ€è¦å¸¦ä¸Šcookieï¼Œsafariå°±ä¼šå¸¦)</li>
<li>å‡ºç°çš„é—®é¢˜æ˜¯ï¼š å¦‚æœæµ‹è¯•ç¯å¢ƒæœ‰äº†æ–°çš„ font å­—ä½“ï¼Œé‚£ä¹ˆå› ä¸ºä»–æ²¡æœ‰å¸¦ä¸Šcookieï¼Œæ‰€ä»¥ä¼šè¢«æŒ‡å‘æ­£å¼ç¯å¢ƒæœåŠ¡å™¨å»è¯·æ±‚èµ„æºï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™æ­£å¼ç¯å¢ƒè¿˜æ²¡æœ‰è¿™ä¸ª font å­—ä½“ï¼Œæ‰€ä»¥ä¼šæŠ¥404ã€‚ æ€ä¹ˆè§£å†³ï¼Ÿ</li>
</ol>
<p>æˆ‘ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯:</p>
<ol>
<li>åç«¯ç»™å‡ºä¸€ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬æ‰“åŒ…åæŠŠå­—ä½“æ–‡ä»¶ä¸¢åˆ°æ­£å¼ç¯å¢ƒä¸Šé¢</li>
<li>å¦‚æœä¸æƒ³è¿™ä¹ˆlowæ‰‹åŠ¨çš„è¯ï¼Œ é‚£å°±åœ¨æ‰“åŒ…å­—ä½“çš„å‘½ä»¤è¡Œåé¢è‡ªåŠ¨å»æäº¤åˆ°æ­£å¼ç¯å¢ƒ</li>
</ol>
<p>è€å¤§ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯:<br>ç›´æ¥æ ¹æ®ç›®å‰çš„ç¯å¢ƒåˆ†ç¦»æœºåˆ¶ï¼Œåœ¨nginxé…ç½®ä¸€ä¸‹ï¼šæµ‹è¯•ç¯å¢ƒä¸‹æ‰€æœ‰é™æ€èµ„æºç›´æ¥æŒ‡åˆ°æµ‹è¯•ç¯å¢ƒ</p>
<p>= =ç®€ç›´è¢«åŠæ‰“ï¼Œçœ‹é—®é¢˜è¿˜æ˜¯å¾ˆå±€é™ æ²¡æœ‰è·³å‡ºå‰ç«¯çš„åœˆå­â€¦â•®(â•¯â–½â•°)â•­</p>
<p>æ‰€ä»¥æ¥ä¸‹æ¥ä¼˜å…ˆè¡¥åç«¯çš„ä¸€äº›åŸºç¡€çŸ¥è¯† ğŸ’ª</p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šcssä¸–ç•Œã€‹å¸¸ç”¨æŠ€å·§ â€”â€” è¯»ä¹¦ç¬”è®°</title>
    <url>/2018/05/css-world/</url>
    <content><![CDATA[<p>å‰æ®µæ—¶é—´é¢äº†è”æï¼Œåé¦ˆè¯´å¯¹ä¸€äº›cssæ¦‚å¿µæ€§çš„ä¸œè¥¿æŒæ¡ä¸æ˜¯å¾ˆå¥½~ æ‰€ä»¥æœ€è¿‘æœ‰ç©ºçœ‹äº†å¼ é‘«æ—­å¤§ä½¬çš„ã€ŠCSSä¸–ç•Œã€‹<br>å…¨æœ¬é€šç†Ÿæ˜“æ‡‚ï¼Œç»§æ‰¿äº†åšå®¢çš„ç”»é£ï¼Œå…¥å£å³åŒ–</p>
<p>å¾ˆå¤šä¸œè¥¿ä¸‰è¨€ä¸¤è¯­è®²ä¸æ¸…æ¥šï¼Œå¤§å®¶å¯ä»¥å…¥æ‰‹å¼ é‘«æ—­å¤§ä½¬çš„ä¹¦æ¥çœ‹çœ‹ï¼Œé‡Œé¢å¾ˆå¤šå¸¸ç”¨çš„æ¦‚å¿µå’Œå±æ€§éƒ½å¸®æˆ‘ä»¬æ‹ä¸€éã€‚<a href="http://www.cssworld.cn/" target="_blank" rel="noopener">ã€Šcssä¸–ç•Œã€‹è´­ä¹°é“¾æ¥</a><br>é™„ä¸Šå¼ é‘«æ—­å¤§ä½¬çš„åšå®¢ï¼Œæœ‰äº‹æ²¡äº‹çœ‹ä¸€çœ‹ç»å¸¸ä¼šæœ‰æ„å¤–æ”¶è·<a href="http://www.zhangxinxu.com/" target="_blank" rel="noopener">å¼ é‘«æ—­åšå®¢</a></p>
<h2 id="æ”¹å˜-width-height-ä½œç”¨ç»†èŠ‚çš„-box-sizing"><a href="#æ”¹å˜-width-height-ä½œç”¨ç»†èŠ‚çš„-box-sizing" class="headerlink" title="æ”¹å˜ width/height ä½œç”¨ç»†èŠ‚çš„ box-sizing"></a>æ”¹å˜ width/height ä½œç”¨ç»†èŠ‚çš„ box-sizing</h2><blockquote>
<p>box-sizingçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ä¸€å¥è¯ï¼Œæ”¹å˜äº† width ä½œç”¨çš„ç›’å­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œwidth æ˜¯ä½œç”¨åœ¨ content box ä¸Šçš„ï¼Œbox-sizing çš„ä½œç”¨å°±æ˜¯å¯ä»¥æŠŠ width ä½œç”¨çš„ç›’å­å˜æˆå…¶ä»–å‡ ä¸ªã€‚</p>
</blockquote>
<p>ä½†æ˜¯ç›®å‰ box-sizing ä»…æ”¯æŒ <code>content-box</code> å’Œ <code>border-box</code>ã€‚<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* è¿™é‡Œ box1å®½åº¦é»˜è®¤ä½œç”¨åœ¨content-box,æ‰€ä»¥ width è¡¨ç°ä¸º 100 + 10*2 + 20*2 = 160px */</span></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¿™é‡Œ box2æ·»åŠ äº† box-sizing: border-box; æ‰€ä»¥å®½åº¦ä½œç”¨æ”¹æˆäº†contentã€paddingä¸borderï¼Œwidth è¡¨ç°ä¸º100px, contentä¸º: 100- 10* 2- 20* 2 = 40px*/</span></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="./box-sizing.png" width="200" alt="box-sizing" align="center"></p>
<h2 id="min-width-max-width-min-height-max-height-æƒé‡è¶…è¶Š-important-min-widthè¶…è¶Šmax-width"><a href="#min-width-max-width-min-height-max-height-æƒé‡è¶…è¶Š-important-min-widthè¶…è¶Šmax-width" class="headerlink" title="min-width/max-width min-height/max-height æƒé‡è¶…è¶Š !important, min-widthè¶…è¶Šmax-width"></a>min-width/max-width min-height/max-height æƒé‡è¶…è¶Š !important, min-widthè¶…è¶Šmax-width</h2><p><strong>min-*åˆå§‹å€¼è§„èŒƒé‡Œä¸º 0ï¼Œå®é™…å°è¯•ä¸ºauto</strong><br><strong>max-*åˆå§‹å€¼ä¸º auto</strong><br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸‹é¢ä»£ç è¡¨ç°ä¸º 100px</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">100px</span></span><br><span class="line">  max-width: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="paddingçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™æ˜¯ç›¸å¯¹äºå®½åº¦è®¡ç®—çš„"><a href="#paddingçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™æ˜¯ç›¸å¯¹äºå®½åº¦è®¡ç®—çš„" class="headerlink" title="paddingçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™æ˜¯ç›¸å¯¹äºå®½åº¦è®¡ç®—çš„"></a>paddingçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™æ˜¯ç›¸å¯¹äºå®½åº¦è®¡ç®—çš„</h2><p>è¿™é‡Œå¼•å‡ºä¸€é“é¢è¯•é¢˜ï¼Œ <strong>ä¸å€ŸåŠ©jsçš„æƒ…å†µä¸‹ç”¨ä¸€ä¸ªå…ƒç´ å®ç°ç›¸å¯¹äºæµè§ˆå™¨çª—å£å®½åº¦1/2çš„æ­£æ–¹å½¢</strong><br>å½“æ—¶æˆ‘çš„å›ç­”æ˜¯ç”¨<code>vw</code>ï¼Œå¦‚æœæ—©ç‚¹çœ‹cssä¸–ç•Œå°±çŸ¥é“paddingè¿™ä¸ªå±æ€§äº†ã€‚<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* vwæ–¹æ³• */</span></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50vw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* paddingæ–¹æ³• */</span></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">25%</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="padding-çš„å›¾å½¢ç»˜åˆ¶-ä¸€ä¸ªå…ƒç´ ç”»å‡ºçº¢é¢†å·¾çš„â€œä¸‰é“æ â€"><a href="#padding-çš„å›¾å½¢ç»˜åˆ¶-ä¸€ä¸ªå…ƒç´ ç”»å‡ºçº¢é¢†å·¾çš„â€œä¸‰é“æ â€" class="headerlink" title="padding çš„å›¾å½¢ç»˜åˆ¶ ä¸€ä¸ªå…ƒç´ ç”»å‡ºçº¢é¢†å·¾çš„â€œä¸‰é“æ â€"></a>padding çš„å›¾å½¢ç»˜åˆ¶ ä¸€ä¸ªå…ƒç´ ç”»å‡ºçº¢é¢†å·¾çš„â€œä¸‰é“æ â€</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">background</span>: currentColor;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">140px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">10px</span> solid;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">10px</span> solid;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">35px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/* è¿™é‡Œå…¶å®å…³é”®èµ·ä½œç”¨çš„è¿˜æ˜¯ background-clip: content-box; æŠŠèƒŒæ™¯è‰²ä½œç”¨ä»border-boxæ”¹ä¸ºcontent-box*/</span></span><br><span class="line">  <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="./padding1.png" alt title="ä¸‰é“æ "></p>
<h2 id="padding-çš„å›¾å½¢ç»˜åˆ¶-ä¸€ä¸ªå…ƒç´ ç”»å‡ºåŒå±‚åœ†ç‚¹å›¾å½¢æ•ˆæœ"><a href="#padding-çš„å›¾å½¢ç»˜åˆ¶-ä¸€ä¸ªå…ƒç´ ç”»å‡ºåŒå±‚åœ†ç‚¹å›¾å½¢æ•ˆæœ" class="headerlink" title="padding çš„å›¾å½¢ç»˜åˆ¶ ä¸€ä¸ªå…ƒç´ ç”»å‡ºåŒå±‚åœ†ç‚¹å›¾å½¢æ•ˆæœ"></a>padding çš„å›¾å½¢ç»˜åˆ¶ ä¸€ä¸ªå…ƒç´ ç”»å‡ºåŒå±‚åœ†ç‚¹å›¾å½¢æ•ˆæœ</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">background</span>: currentColor;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid;</span><br><span class="line">  <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="./padding2.png" alt title="åŒå±‚åœ†ç‚¹"></p>
<h2 id="marginçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™å’Œpaddingä¸€æ ·ï¼Œä½†æ˜¯marginåœ¨å‚ç›´æ–¹å‘æ²¡åŠæ³•æ”¹å˜è‡ªèº«å†…éƒ¨å°ºå¯¸å¾€å¾€è¦å€ŸåŠ©çˆ¶å…ƒç´ ä½œä¸ºè½½ä½“ï¼Œè¿˜å­˜åœ¨marginåˆå¹¶çš„é—®é¢˜"><a href="#marginçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™å’Œpaddingä¸€æ ·ï¼Œä½†æ˜¯marginåœ¨å‚ç›´æ–¹å‘æ²¡åŠæ³•æ”¹å˜è‡ªèº«å†…éƒ¨å°ºå¯¸å¾€å¾€è¦å€ŸåŠ©çˆ¶å…ƒç´ ä½œä¸ºè½½ä½“ï¼Œè¿˜å­˜åœ¨marginåˆå¹¶çš„é—®é¢˜" class="headerlink" title="marginçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™å’Œpaddingä¸€æ ·ï¼Œä½†æ˜¯marginåœ¨å‚ç›´æ–¹å‘æ²¡åŠæ³•æ”¹å˜è‡ªèº«å†…éƒ¨å°ºå¯¸å¾€å¾€è¦å€ŸåŠ©çˆ¶å…ƒç´ ä½œä¸ºè½½ä½“ï¼Œè¿˜å­˜åœ¨marginåˆå¹¶çš„é—®é¢˜"></a>marginçš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è§„åˆ™å’Œpaddingä¸€æ ·ï¼Œä½†æ˜¯marginåœ¨å‚ç›´æ–¹å‘æ²¡åŠæ³•æ”¹å˜è‡ªèº«å†…éƒ¨å°ºå¯¸å¾€å¾€è¦å€ŸåŠ©çˆ¶å…ƒç´ ä½œä¸ºè½½ä½“ï¼Œè¿˜å­˜åœ¨marginåˆå¹¶çš„é—®é¢˜</h2><p>è¿˜æ˜¯é‚£é“æµè§ˆå™¨çª—å£1/2çš„é¢è¯•é¢˜ï¼Œå¦‚æœæ²¡æœ‰è¦æ±‚åªç”¨ä¸€ä¸ªå…ƒç´ å®ç°çš„è¯ï¼Œå¯ä»¥ç”¨marginå»å®ç°</p>
<p>è¿™é‡Œç®€å•è¯´ä¸€ä¸‹ï¼Œä¹‹æ‰€ä»¥è®¾ç½®çˆ¶çº§box1çš„overflow:hiddenï¼Œæ˜¯å› ä¸ºè¦åˆ›å»ºä¸€ä¸ªå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡å…ƒç´ ,ä¸€æ–¹é¢å¯ä»¥ç”¨å­çº§marginæ’‘èµ·é«˜åº¦ï¼Œå¦ä¸€æ–¹é¢å¤„ç†marginåˆå¹¶é—®é¢˜ï¼Œæ‰€ä»¥å­çº§.box2ç›´æ¥ç”¨margin:100%ï¼Œè€Œä¸æ˜¯200%ã€‚<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: currentColor;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="comment">/* å®½åº¦çª—å£1/2 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="comment">/* é«˜åº¦çª—å£1/2 */</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="marginåˆå¹¶çš„è§£å†³æ–¹æ³•"><a href="#marginåˆå¹¶çš„è§£å†³æ–¹æ³•" class="headerlink" title="marginåˆå¹¶çš„è§£å†³æ–¹æ³•"></a>marginåˆå¹¶çš„è§£å†³æ–¹æ³•</h2><p>è¿™é‡Œåªåˆ—ä¸¾å‡ºmargin-topåˆå¹¶çš„æƒ…å†µ, margin-bottomä¸å…¶ç›¸å¯¹åº”</p>
<ul>
<li>çˆ¶å…ƒç´ è®¾ä¸ºå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œ7å°±æ˜¯</li>
<li>çˆ¶å…ƒç´ è®¾ç½®border-top</li>
<li>çˆ¶å…ƒç´ è®¾ç½®padding-top (è¿™é‡Œå¯ä»¥ç”¨margin-topè´Ÿå€¼æ¥æ¶ˆé™¤ä½œç”¨)</li>
<li>çˆ¶å…ƒç´ ä¸ç¬¬ä¸€ä¸ªå­å…ƒç´ ä¹‹é—´æ·»åŠ å†…è”å…ƒç´ è¿›è¡Œåˆ†éš”</li>
</ul>
<h2 id="åˆ©ç”¨-margin-auto-åšå‚ç›´ä¸Šä¸‹å±…ä¸­"><a href="#åˆ©ç”¨-margin-auto-åšå‚ç›´ä¸Šä¸‹å±…ä¸­" class="headerlink" title="åˆ©ç”¨ margin: auto åšå‚ç›´ä¸Šä¸‹å±…ä¸­"></a>åˆ©ç”¨ margin: auto åšå‚ç›´ä¸Šä¸‹å±…ä¸­</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid ;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: currentColor;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="border-é»˜è®¤é¢œè‰²ä¸ºå…ƒç´ colorå€¼"><a href="#border-é»˜è®¤é¢œè‰²ä¸ºå…ƒç´ colorå€¼" class="headerlink" title="border é»˜è®¤é¢œè‰²ä¸ºå…ƒç´ colorå€¼"></a>border é»˜è®¤é¢œè‰²ä¸ºå…ƒç´ colorå€¼</h2><h2 id="borderç»˜åˆ¶ä¸‰è§’å½¢"><a href="#borderç»˜åˆ¶ä¸‰è§’å½¢" class="headerlink" title="borderç»˜åˆ¶ä¸‰è§’å½¢"></a>borderç»˜åˆ¶ä¸‰è§’å½¢</h2><p>é¡¹ç›®ä¸Šç”»ä¸‰è§’å½¢ç»å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨borderï¼Œå¥½æ§åˆ¶ï¼Œå®ç°ç®€å•ï¼Œæˆæœ¬ä½åªéœ€ä¸€ä¸ªå…ƒç´ ã€‚<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-color</span>: currentColor transparent transparent;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="csså°ºå¯¸å•ä½exï¼ŒæŒ‡çš„æ˜¯å­—æ¯xçš„é«˜åº¦ã€‚"><a href="#csså°ºå¯¸å•ä½exï¼ŒæŒ‡çš„æ˜¯å­—æ¯xçš„é«˜åº¦ã€‚" class="headerlink" title="csså°ºå¯¸å•ä½exï¼ŒæŒ‡çš„æ˜¯å­—æ¯xçš„é«˜åº¦ã€‚"></a>csså°ºå¯¸å•ä½<code>ex</code>ï¼ŒæŒ‡çš„æ˜¯å­—æ¯xçš„é«˜åº¦ã€‚</h2><p>è¿™é‡Œç®€å•è¯´ä¸€ä¸‹ï¼Œcssé‡Œé¢çš„åŸºçº¿(baseline)å…¶å®å°±æ˜¯å­—æ¯xçš„ä¸‹è¾¹ç¼˜çº¿<br>å…³äºexçš„åº”ç”¨è¿™é‡Œä¸å†™å‘†æ¯›äº†ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä»–æ¥å®ç°æ–‡å­—ä¸å›¾ç‰‡å±…ä¸­ï¼Œç›´æ¥ç»™å¼ é‘«æ—­å¤§ä½¬çš„<a href="http://demo.cssworld.cn/5/1-1.php" target="_blank" rel="noopener">demo</a><br><em>å†æ„Ÿæ…¨ä¸€ä¸‹ï¼Œè™½ç„¶è¿™äº›ä¸œè¥¿å¤šå¤šå°‘å°‘éƒ½åœ¨å¼ é‘«æ—­åšå®¢çœ‹åˆ°ï¼Œä½†æ˜¯è¿™æœ¬ä¹¦çœŸçš„å¯¹ä¸€äº›ä¸œè¥¿çš„è®²è§£å¾ˆé€šä¿—æ˜“æ‡‚ã€‚å¤§å®¶å¯ä»¥å…¥æ‰‹æœ‰ç©ºç¿»ä¸€ç¿»</em></p>
<h2 id="BFC-å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡"><a href="#BFC-å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡" class="headerlink" title="BFC å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡"></a>BFC å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡</h2><p>åœ¨ä¸Šé¢æˆ‘ä»¬è®²è¿‡äº†è®¾ç½®overflow:hidden;å¯ä»¥åˆ›å»ºBFCæ¥æ¸…é™¤æµ®åŠ¨ï¼Œé‚£ä¹ˆè¿˜æœ‰å“ªäº›æ–¹æ³•å¯ä»¥åˆ›å»ºBFCå‘¢ï¼Ÿ</p>
<ul>
<li><html>æ ¹ç›®å½•</html></li>
<li>float å€¼ä¸ä¸º node</li>
<li>overflow çš„å€¼ä¸º autoã€scrollæˆ–hidden(å¸¸ç”¨)</li>
<li>display å€¼ä¸º table-cellã€ table-captionå’Œ inline-block(å¸¸ç”¨)</li>
<li>position çš„å€¼ä¸ä¸º relativeå’Œ static<br>BFCçš„ç»“ç•Œç‰¹æ€§æœ€é‡è¦çš„ç”¨é€”ä¸æ˜¯å»marginé‡å æˆ–æ¸…é™¤floatå½±å“ï¼Œè€Œæ˜¯å®ç°æ›´å¥å£®ã€æ›´æ™ºèƒ½çš„è‡ªé€‚åº”å¸ƒå±€<br><em>é¢è¯•çš„æ—¶å€™é¢è¯•å®˜é—®æˆ‘BFCä¸»è¦ç”¨æ¥åšä»€ä¹ˆï¼Œæˆ‘çš„å›ç­”æ˜¯ æ¸…é™¤æµ®åŠ¨å’Œå»marginé‡å ã€‚çœŸçš„æ˜¯å“ªå£¶ä¸å¼€æå“ªå£¶â€¦å“­æ­»ğŸ˜­</em></li>
</ul>
<h2 id="ç”¨BFCå®ç°ä¸€è¾¹å›ºå®šå®½åº¦ï¼Œå¦ä¸€è¾¹è‡ªé€‚åº”å¸ƒå±€"><a href="#ç”¨BFCå®ç°ä¸€è¾¹å›ºå®šå®½åº¦ï¼Œå¦ä¸€è¾¹è‡ªé€‚åº”å¸ƒå±€" class="headerlink" title="ç”¨BFCå®ç°ä¸€è¾¹å›ºå®šå®½åº¦ï¼Œå¦ä¸€è¾¹è‡ªé€‚åº”å¸ƒå±€"></a>ç”¨BFCå®ç°ä¸€è¾¹å›ºå®šå®½åº¦ï¼Œå¦ä¸€è¾¹è‡ªé€‚åº”å¸ƒå±€</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">    float: left;</span><br><span class="line">    width: 200px;</span><br><span class="line">    background: currentColor;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">    overflow: hidden;</span><br><span class="line">    background: red;</span><br><span class="line">  &#125;</span><br><span class="line">  div &#123;</span><br><span class="line">    height: 200px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ— ä¾èµ–absoluteç»å¯¹å®šä½ï¼ˆæ²¡æœ‰left-top-right-bottom"><a href="#æ— ä¾èµ–absoluteç»å¯¹å®šä½ï¼ˆæ²¡æœ‰left-top-right-bottom" class="headerlink" title="æ— ä¾èµ–absoluteç»å¯¹å®šä½ï¼ˆæ²¡æœ‰left/top/right/bottom)"></a>æ— ä¾èµ–absoluteç»å¯¹å®šä½ï¼ˆæ²¡æœ‰left/top/right/bottom)</h2><p>æˆ‘ä»¬å¹³æ—¶å¦‚æœå¯¹å…ƒç´ è¿›è¡Œ absolute å®šä½ï¼Œå¤šåŠä¼šåŠ å¤šä¸ª left,topç„¶åç»™çˆ¶çº§åŠ ä¸ª relativeã€‚<br>å®é™…ä¸Šå¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨marginè¾…åŠ©å®šä½ï¼Œ<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.father</span>&#123; <span class="attribute">position</span>: relative; &#125;</span><br><span class="line"><span class="comment">/* @before */</span></span><br><span class="line"><span class="selector-class">.son</span> &#123;<span class="attribute">position</span>: absolute; <span class="attribute">top</span>: <span class="number">10px</span>; <span class="attribute">left</span>: <span class="number">10px</span>;&#125;</span><br><span class="line"><span class="comment">/* @after */</span></span><br><span class="line"><span class="selector-class">.son</span> &#123;<span class="attribute">position</span>: absolute; <span class="attribute">margin-top</span>: <span class="number">10px</span>; <span class="attribute">margin-left</span>: <span class="number">10px</span>;&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¹ˆå®ç°æœ‰ä¸¤ä¸ªå¥½å¤„ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬ä¸éœ€è¦çˆ¶çº§å»åŠ ä¸ª<code>relative</code>åé¢è¦æ’¤é”€ï¼Œç›´æ¥æ”¹ .sonæ ·å¼å°±å¥½ã€‚<br>ç¬¬äºŒä¸ªå¥½å¤„å°±æ˜¯æŸäº›åœºæ™¯é€‚åº”æ€§æ¯”ä¾èµ–é¡¹å®šä½å¥½<br><img src="./absolute.png" alt title="Hotä¸ºæ— ä¾èµ– Nä¸ºä¾èµ–"><br><img src="./absolute2.png" alt title="æ”¹å˜æ–‡å­—é•¿åº¦ä¹‹åçš„æƒ…å†µ"><br><strong>æ— ä¾èµ–åœ¨æœ‰å¤šè¯­è¨€åœºæ™¯ä¸‹åšè§’æ ‡ç®€ç›´æ˜¯å¤©ä½¿ï¼ï¼ï¼ä¸ç„¶ä¸€ä¸ªè‹±è¯­åœºæ™¯ï¼Œä¸€ä¸ªæ—¥è¯­åœºæ™¯ç½‘ç«™è‚¯å®šä¼šä¹±å¥—â€¦.</strong></p>
<h2 id="å•è¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ"><a href="#å•è¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ" class="headerlink" title="å•è¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ"></a>å•è¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.p1</span> &#123;</span></span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">    width: 200px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"p1"</span>&gt;</span></span><br><span class="line">  ç›®å‰ï¼Œå¯¹-webkit-ç§æœ‰å‰ç¼€æ”¯æŒè‰¯å¥½çš„æµè§ˆå™¨è¿˜å¯ä»¥å®ç°å¤šè¡Œæ–‡å­—æ‰“ç‚¹æ•ˆæœï¼Œä½†æ˜¯å´æ—  é¡»ä¾èµ– overflow:hiddenã€‚æ¯”æ–¹è¯´ï¼Œæœ€å¤šæ˜¾ç¤º 2 è¡Œå†…å®¹ï¼Œå†å¤šå°±æ‰“ç‚¹å°±</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="./ellipsis1.png" alt></p>
<h2 id="å¤šè¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ"><a href="#å¤šè¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ" class="headerlink" title="å¤šè¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ"></a>å¤šè¡Œæ˜¾ç¤ºâ€¦æ›´å¤šæ•ˆæœ</h2><p>è¿™é‡Œç”¨äº†Overflowæ˜¯å› ä¸ºï¼Œä¸ç”¨çš„è¯ï¼Œä¼šæŠŠå¤šä½™çš„å†…å®¹å±•ç¤ºå‡ºæ¥ï¼Œä½†æ˜¯ç”¨ä¸ç”¨éƒ½ä¼šæœ‰çœç•¥å·æ•ˆæœ<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">	<span class="selector-class">.p1</span> &#123;</span></span><br><span class="line">		display: -webkit-box;</span><br><span class="line">		-webkit-box-orient: vertical;</span><br><span class="line">		-webkit-line-clamp: 2;</span><br><span class="line">		width: 500px;</span><br><span class="line">		overflow: hidden;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"p1"</span>&gt;</span></span><br><span class="line">	ç›®å‰ï¼Œå¯¹-webkit-ç§æœ‰å‰ç¼€æ”¯æŒè‰¯å¥½çš„æµè§ˆå™¨è¿˜å¯ä»¥å®ç°å¤šè¡Œæ–‡å­—æ‰“ç‚¹æ•ˆæœï¼Œä½†æ˜¯å´æ—  é¡»ä¾èµ– overflow:hiddenã€‚æ¯”æ–¹è¯´ï¼Œæœ€å¤šæ˜¾ç¤º 2 è¡Œå†…å®¹ï¼Œå†å¤šå°±æ‰“ç‚¹å°±</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="./ellipsis2.png" alt></p>
<h2 id="outlineè‡ªåŠ¨å¡«æ»¡å±å¹•å‰©ä½™ç©ºé—´çš„åº”ç”¨æŠ€å·§"><a href="#outlineè‡ªåŠ¨å¡«æ»¡å±å¹•å‰©ä½™ç©ºé—´çš„åº”ç”¨æŠ€å·§" class="headerlink" title="outlineè‡ªåŠ¨å¡«æ»¡å±å¹•å‰©ä½™ç©ºé—´çš„åº”ç”¨æŠ€å·§"></a>outlineè‡ªåŠ¨å¡«æ»¡å±å¹•å‰©ä½™ç©ºé—´çš„åº”ç”¨æŠ€å·§</h2><p><em>tip:clipæ˜¯è£å‰ªåŠŸèƒ½ï¼Œå¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éƒ½ç”¨ä»–æ¥å®ç°ä¸€äº›éšè—çš„æ•ˆæœï¼Œæ¯”å¦‚è¿™ä¸ªæ —å­ğŸŒ°..</em><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">	<span class="selector-class">.footer</span> &#123;</span></span><br><span class="line">		height: 50px;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="css">	<span class="selector-class">.footer</span> &gt;<span class="selector-tag">p</span> &#123;</span></span><br><span class="line">		position: absolute;</span><br><span class="line">		left: 0;right: 0;</span><br><span class="line"><span class="css">		<span class="selector-tag">background-color</span>: <span class="selector-id">#abcdef</span>;</span></span><br><span class="line"><span class="css">		<span class="selector-tag">outline</span>: 9999<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#abcdef</span>;</span></span><br><span class="line">		clip: rect(0 9999px 9999px 0);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>I am Jsonz.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="./outline.png" alt></p>
<h2 id="å±‚å ä¸Šä¸‹æ–‡"><a href="#å±‚å ä¸Šä¸‹æ–‡" class="headerlink" title="å±‚å ä¸Šä¸‹æ–‡"></a>å±‚å ä¸Šä¸‹æ–‡</h2><p>ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡ï¼Ÿ</p>
<blockquote>
<p>å±‚å ä¸Šä¸‹æ–‡ï¼Œè‹±æ–‡ç§°ä½œ stacking contextï¼Œæ˜¯ HTML ä¸­çš„ä¸€ä¸ªä¸‰ç»´çš„æ¦‚å¿µã€‚å¦‚æœä¸€ä¸ªå…ƒç´ å« æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªå…ƒç´ åœ¨ z è½´ä¸Šå°±â€œé«˜äººä¸€ç­‰â€ã€‚</p>
</blockquote>
<p>å±‚å ä¸Šä¸‹æ–‡ç”Ÿæˆè§„åˆ™:</p>
<ul>
<li>position å€¼ä¸º relative/absolute</li>
<li>flex å¸ƒå±€</li>
<li>opacity å€¼ä¸æ˜¯ 1</li>
<li>transform å€¼ä¸æ˜¯ none</li>
<li>filter å€¼ä¸æ˜¯ none</li>
<li>-webkit-overflow-scrolling è®¾ä¸º touch</li>
</ul>
<p>å±‚å ä¸Šä¸‹æ–‡çš„é¡ºåº:</p>
<ol>
<li>å¦‚æœä¸ä¾èµ–z-indexï¼Œåˆ™å¯ä»¥çœ‹æˆ z-index: 0</li>
<li>ä¾èµ–z-index åˆ™çœ‹ z-index çš„å€¼</li>
</ol>
<h2 id="textarea-å®½åº¦100-è‡ªé€‚åº”æ•ˆæœ"><a href="#textarea-å®½åº¦100-è‡ªé€‚åº”æ•ˆæœ" class="headerlink" title="textarea å®½åº¦100%è‡ªé€‚åº”æ•ˆæœ"></a>textarea å®½åº¦100%è‡ªé€‚åº”æ•ˆæœ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="comment">/*çˆ¶çº§*/</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">    width: 280px;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    padding: 10px 0;</span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#abcdef</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="comment">/* æ¨¡æ‹Ÿè¾¹æ¡†ä¸padding */</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">      padding: 9px 8px;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#d0d0d5</span>;</span></span><br><span class="line">      border-radius: 4px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>; </span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="comment">/* çœŸå® textarea */</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.box2</span>&gt; <span class="selector-tag">textarea</span> &#123;</span></span><br><span class="line">      width: 100%;</span><br><span class="line">      line-height: 20px;</span><br><span class="line">      padding: 0;</span><br><span class="line">      border: 0 none;</span><br><span class="line">      outline: 0 none;</span><br><span class="line">      background: none;</span><br><span class="line">      resize: none;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="./textarea.png" alt></p>
<h2 id="ç©ºå…ƒç´ é€‰æ‹©å™¨-empty"><a href="#ç©ºå…ƒç´ é€‰æ‹©å™¨-empty" class="headerlink" title="ç©ºå…ƒç´ é€‰æ‹©å™¨ :empty"></a>ç©ºå…ƒç´ é€‰æ‹©å™¨ :empty</h2><p>çœ‹ã€Šcssä¸–ç•Œã€‹ä¹‹åæ‰çŸ¥é“æœ‰è¿™ä¹ˆä¸€ä¸ªç©ºå…ƒç´ é€‰æ‹©å™¨â€¦ç»å¯¹ä¸æ˜¯å…¶ä»–ç›®çš„<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">span</span><span class="selector-pseudo">:empty</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">		content: 'æ˜¯å¸…å“¥';</span><br><span class="line">	&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Jsonz<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="./empty.png" alt></p>
<h2 id="ç¬¬ä¸€è¡Œè¦é€‰æ‹©å™¨-first-line"><a href="#ç¬¬ä¸€è¡Œè¦é€‰æ‹©å™¨-first-line" class="headerlink" title="ç¬¬ä¸€è¡Œè¦é€‰æ‹©å™¨:first-line"></a>ç¬¬ä¸€è¡Œè¦é€‰æ‹©å™¨:first-line</h2><p>åŒä¸Šï¼Œæ¯”è¾ƒå°‘ç”¨çš„é€‰æ‹©å™¨ï¼Œä½†æ˜¯æ„Ÿè§‰éƒ¨åˆ†åœºæ™¯æŒºå®ç”¨çš„<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span><span class="selector-pseudo">:first-line</span> &#123; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span> &#123; <span class="attribute">width</span>: <span class="number">40px</span>; &#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> å¯ä¹é¸¡ç¿… <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="./first-line.png" alt></p>
<h2 id="ç¬¬ä¸€ä¸ªå­—ï¼ˆæ¯ï¼‰é€‰æ‹©å™¨-first-letter"><a href="#ç¬¬ä¸€ä¸ªå­—ï¼ˆæ¯ï¼‰é€‰æ‹©å™¨-first-letter" class="headerlink" title="ç¬¬ä¸€ä¸ªå­—ï¼ˆæ¯ï¼‰é€‰æ‹©å™¨:first-letter"></a>ç¬¬ä¸€ä¸ªå­—ï¼ˆæ¯ï¼‰é€‰æ‹©å™¨:first-letter</h2><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¿™é‡Œæˆ‘ç”¨çš„æ˜¯å­—ï¼ˆæ¯ï¼‰æ¥æè¿°é€‰æ‹©å™¨ï¼Œæ„å‘³ç€ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ˜¯ç¬¦å·çš„è¯ï¼Œä¼šæ‰¾ä¸‹ä¸€ä¸ªç›´åˆ°æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ‰ä¼šæ¸²æŸ“æˆæˆ‘ä»¬è¦çš„æ ·å¼ï¼Œå¦åˆ™éƒ½æ˜¯é»˜è®¤æ ·å¼ã€‚<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span><span class="selector-pseudo">:first-letter</span> &#123; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  !!!!åæ²™èŠ‹</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>!!!!!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="./first-letter.png" alt></p>
<h2 id="åŠ¨æ€loadingæ‰“ç‚¹æ•ˆæœ"><a href="#åŠ¨æ€loadingæ‰“ç‚¹æ•ˆæœ" class="headerlink" title="åŠ¨æ€loadingæ‰“ç‚¹æ•ˆæœ"></a>åŠ¨æ€loadingæ‰“ç‚¹æ•ˆæœ</h2><p>è¿™é‡Œä¸»è¦åˆ©ç”¨äº†content æ”¯æŒ<code>\A</code>æ¢è¡Œæ¥å®ç°ï¼Œç”¨<code>dot</code>æ˜¯å› ä¸º</p>
<blockquote>
<p><dot>æ˜¯è‡ªå®šä¹‰çš„ä¸€ä¸ªæ ‡ç­¾å…ƒç´ ï¼Œé™¤äº†ç®€çº¦ã€è¯­ä¹‰åŒ–æ˜æ˜¾<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">	dot &#123;</span><br><span class="line">    display: inline-block; </span><br><span class="line">    height: 1em;</span><br><span class="line">    line-height: 1;</span><br><span class="line">    text-align: left;</span><br><span class="line"><span class="css">    <span class="selector-tag">vertical-align</span>: <span class="selector-tag">-</span><span class="selector-class">.25em</span>;</span></span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">dot</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">    display: block;</span><br><span class="line">    content: '...\A..\A.';</span><br><span class="line">    white-space: pre-wrap;</span><br><span class="line">    animation: dot 3s infinite step-start both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="keyword">@keyframes</span> dot &#123;</span></span><br><span class="line"><span class="css">    33% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2em</span>); &#125;</span></span><br><span class="line"><span class="css">    66% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">1em</span>); &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">æ­£åœ¨åŠ è½½ä¸­<span class="tag">&lt;<span class="name">dot</span>&gt;</span>...<span class="tag">&lt;/<span class="name">dot</span>&gt;</span></span><br></pre></td></tr></table></figure></dot></p>
</blockquote>
<p><img src="loading.gif" width="200"></p>
<h2 id="å•è¡Œæ–‡å­—å±…ä¸­å¯¹é½ï¼Œå¤šè¡Œæ–‡å­—å·¦å¯¹é½"><a href="#å•è¡Œæ–‡å­—å±…ä¸­å¯¹é½ï¼Œå¤šè¡Œæ–‡å­—å·¦å¯¹é½" class="headerlink" title="å•è¡Œæ–‡å­—å±…ä¸­å¯¹é½ï¼Œå¤šè¡Œæ–‡å­—å·¦å¯¹é½"></a>å•è¡Œæ–‡å­—å±…ä¸­å¯¹é½ï¼Œå¤šè¡Œæ–‡å­—å·¦å¯¹é½</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">  text-align: center;</span><br><span class="line">  width: 200px;</span><br><span class="line">  border: 1px solid ;</span><br><span class="line">&#125;</span><br><span class="line">p &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  text-align: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¤§å®¶å¥½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯Jsonzï¼Œç°åœ¨æ˜¯ä¸€åå°åˆ‡å›¾ä»”<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="./yo.png" alt></p>
<h2 id="å­—ä½“ä½¿ç”¨ç³»ç»Ÿå­—ä½“"><a href="#å­—ä½“ä½¿ç”¨ç³»ç»Ÿå­—ä½“" class="headerlink" title="å­—ä½“ä½¿ç”¨ç³»ç»Ÿå­—ä½“"></a>å­—ä½“ä½¿ç”¨ç³»ç»Ÿå­—ä½“</h2><p>è¿™é‡Œä¸ªäººæœ‰ç‚¹ç–‘æƒ‘~ å¦‚æœå•çº¯æ˜¯æƒ³ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ä½“ï¼Œç›´æ¥ä¸è®¾ç½® font ä¸å°±å¥½äº†~ å¤šæ­¤ä¸€ä¸¾è®¾ç½®ä¸ª <code>menu</code>â€¦<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123; <span class="attribute">font</span>: menu; &#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">font-size</span>: <span class="number">16px</span>; &#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¹¦é‡Œæ›´å¤šçš„ä¸æ˜¯ç»™æˆ‘ä»¬å±•ç¤ºè¿™äº›å°æŠ€å·§ï¼Œè€Œæ˜¯å¸®æˆ‘ä»¬è®²æ¸…æ¥šå¾ˆå¤šæ¦‚å¿µä¸ä»–çš„ç‰¹æ€§ï¼Œè¿™ç¯‡æ–‡æ¯”è¾ƒæ²¡ç»éªŒï¼Œæ•ˆæœå›¾éƒ½æ˜¯ç”¨çš„æˆªå›¾â€¦ä¸‹æ¬¡æœ‰æœºä¼šçš„è¯æ³¨æ„ç›´æ¥å±•ç¤ºä¸ªdemoå¯èƒ½çœ‹èµ·æ¥ä¼šæ›´ç›´è§‚</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>CSS</tag>
        <tag>Book</tag>
      </tags>
  </entry>
  <entry>
    <title>æµè§ˆå™¨æ¢å¤æ»šåŠ¨è¡Œä¸º â€”â€” history.scrollRestoration</title>
    <url>/2018/05/history-scroll-restoration/</url>
    <content><![CDATA[<p>ç›´å…¥ä¸»é¢˜ã€‚ä¹‹å‰åšç§»åŠ¨ç«¯çš„éœ€æ±‚æ—¶ï¼Œç»å¸¸é‡åˆ°ä¸€ç§å¸¸è§ï¼Œå°±æ˜¯:<br>aé¡µé¢æ˜¯ä¸€ä¸ªé•¿åˆ—è¡¨ï¼Œæˆ‘ä»¬æ»‘åŠ¨åˆ°æŸä¸ªåœ°æ–¹å‡è®¾ä¸º <strong>100px</strong> ï¼Œç‚¹å‡»ä¹‹åè¿›å…¥åˆ°bé¡µé¢<br>å†ä»bé¡µé¢å›åˆ°aé¡µé¢ï¼Œè¿™æ—¶å€™æµè§ˆå™¨çš„æ»šåŠ¨æ¡ä¼šè‡ªåŠ¨å›åˆ°æˆ‘ä»¬è·³è½¬å‰çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ <strong>100px</strong> çš„ä½ç½®ã€‚<br><img src="./history-scroll-restoration.gif" alt title="æµè§ˆå™¨è®°ä½æ»šåŠ¨è¡Œä¸º"></p>
<p>è¿™ç§ä½“è´´çš„è¡Œä¸ºæˆ‘æ˜¯å¾ˆå–œæ¬¢çš„~ ä½†æ˜¯æœ‰æ—¶å€™äº§å“å°±éè¦æŠ¬æ ï¼Œè¯´ æˆ‘å°±ä¸æƒ³è¦è¿™ç§è¡Œä¸ºï¼Œä½ ç»™æˆ‘å›åˆ°é¡¶éƒ¨å»(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»</p>
<p>ä»¥å‰æ²¡åŠæ³•å°±ç»å¸¸ç”¨ä»€ä¹ˆ setTimeout å¤§æ³•å»æ‰‹åŠ¨å¤„ç†è¿™äº›ä¸œè¥¿</p>
<p>æ°®ç´ !!! å¦‚æœåªæ˜¯è¯´setTimeoutå¤§æ³•çš„è¯ï¼Œå°±æ²¡æˆ‘ä»€ä¹ˆäº‹äº†ã€‚<br>ä»Šå¤©è¦è¯´çš„æ˜¯ <strong>history.scrollRestoration</strong> ï¼Œè¿™ä¸ªå±æ€§æ˜¯å®éªŒæ€§çš„å±æ€§ï¼Œä»–çš„ä½œç”¨æ˜¯: <strong>å…è®¸Webåº”ç”¨ç¨‹åºåœ¨å†å²å¯¼èˆªä¸Šæ˜¾å¼åœ°è®¾ç½®é»˜è®¤æ»šåŠ¨æ¢å¤è¡Œä¸ºã€‚æ­¤å±æ€§å¯ä»¥æ˜¯è‡ªåŠ¨çš„ï¼ˆautoï¼‰æˆ–è€…æ‰‹åŠ¨çš„ï¼ˆmanualï¼‰ã€‚</strong></p>
<p>è¯´çš„å¾ˆæ˜ç™½äº†ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒ <code>history.scrollRestoration</code>å¹¶ä¸”å€¼ä¸º<code>auto</code>åˆ™ä¼šé»˜è®¤æ¢å¤æ»šåŠ¨è¡Œä¸ºã€‚å¦‚æœè®¾ç½®ä¸º <code>manual</code>åˆ™å¯ä»¥å–æ¶ˆï¼Œè¿™ä¸ªè¡Œä¸ºä¸ç”¨å»è€ƒè™‘å…¼å®¹æ€§çš„é—®é¢˜ï¼Œå¦‚æœæœ‰è¿™ä¸ªåŠŸèƒ½æ‰ä¼šæœ‰æ¢å¤æ»šåŠ¨ï¼Œæ‰€ä»¥ç›´æ¥åˆ¤æ–­ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚æ— éœ€å¤šè€ƒè™‘</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.history.scrollRestoration &amp;&amp; (<span class="built_in">window</span>.history.scrollRestoration = <span class="string">'auto'</span>);</span><br></pre></td></tr></table></figure>
<p>ä»¥åå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘è¢«äº§å“æ€¼äº† O(âˆ©_âˆ©)O~~</p>
<p><a href="https://developers.google.com/web/updates/2015/09/history-api-scroll-restoration" target="_blank" rel="noopener">google-developers èµ„æ–™</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History" target="_blank" rel="noopener">mozilla-developer èµ„æ–™</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>create-react-app æºç è§£æä¹‹react-scripts</title>
    <url>/2018/05/create-react-app-t/</url>
    <content><![CDATA[<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬å·²ç»è®²äº† <code>create-react-app</code>é‡Œé¢åˆ›å»º<code>package.json</code>å®‰è£…ä¾èµ–å¹¶ä¸”æ‹·è´å¯è¿è¡Œçš„demoç­‰æ­¥éª¤ã€‚<a href="https://jsonz1993.github.io/2018/05/create-react-app-o/">ä¼ é€é—¨</a></p>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬æ¥è®²ä¸€ä¸‹ <code>create-react-app</code>é‡Œé¢çš„å¯åŠ¨æœåŠ¡ç­‰éƒ¨åˆ†ï¼Œå°±æ˜¯å¹³æ—¶æˆ‘ä»¬å®‰è£…å®Œä¾èµ–ä¹‹åï¼Œå¯åŠ¨å¼€å‘æœåŠ¡:<code>npm start</code>ã€‚è¿™ä¸€å—æ¶‰åŠåˆ°å¤ªå¤šå…³äºwebpackä¸é…ç½®çš„ä¸œè¥¿ï¼ŒåŠ ä¸Šç¬¬ä¸€ç¯‡è§‰å¾—æè¿°çš„å¤ªè¿‡å†—ä½™~æ‰€ä»¥è¿™ç¯‡ä¸ä¼šè®²å¾—å¾ˆç»†ï¼Œåªæ˜¯å¤§æ¦‚æŠŠä»–è¿è½¬çš„é€»è¾‘æ€è·¯å†™å‡ºæ¥ï¼Œå…·ä½“æºç ä¼šæä¾›ä¼ é€é—¨ã€‚</p>
<p>æ¨èå¤§å®¶çœ‹ç¬¬ä¸€ç¯‡çš„ <strong>é¡¹ç›®åˆå§‹åŒ–</strong> å’Œ <strong>æ–­ç‚¹è°ƒè¯•</strong> éƒ¨åˆ†ï¼Œè¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚<a href="https://jsonz1993.github.io/2018/05/create-react-app-o/#%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96">ä¼ é€é—¨ é¡¹ç›®åˆå§‹åŒ–æ–­ç‚¹è°ƒè¯•éƒ¨åˆ†</a></p>
<h1 id="å‡†å¤‡é˜¶æ®µ"><a href="#å‡†å¤‡é˜¶æ®µ" class="headerlink" title="å‡†å¤‡é˜¶æ®µ"></a><a href="#å‡†å¤‡é˜¶æ®µ">å‡†å¤‡é˜¶æ®µ</a></h1><p><strong>è¿™é‡Œæˆ‘ä»¬è®¨è®ºçš„create-react-appç‰ˆæœ¬ä¾æ—§æ˜¯<code>v1.1.4</code></strong></p>
<p>æ—¢ç„¶è¿™ç¯‡æˆ‘ä»¬ä¸»è¦è®²çš„æ˜¯ <code>create-react-app</code>é‡Œé¢çš„webpackæœåŠ¡ï¼Œé‚£æˆ‘ä»¬è‚¯å®šè¦å…ˆæ–°å»ºä¸€ä¸ªé¡¹ç›®ã€‚</p>
<ul>
<li><code>npm install create-react-app -g</code> å…¨å±€å®‰è£…create-react-app</li>
<li><code>create-react-app my-react-project</code> ç”¨create-react-appæ–°å»ºä¸€ä¸ªé¡¹ç›®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd my-react-project</span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºå®Œä¹‹åï¼Œç»ˆç«¯æç¤ºäº†æˆ‘ä»¬ç›´æ¥è¿›å…¥é¡¹ç›®ï¼Œè·‘ yarn(npm) start å°±å¯ä»¥å¼€å‘äº†ã€‚æˆ‘ä»¬æ‰“å¼€ <code>package.json</code>å°±å¯ä»¥çœ‹åˆ° yarn start è·‘çš„å‘½ä»¤æ˜¯ <code>&quot;react-scripts start&quot;</code></p>
<p>é‚£ä¹ˆè¿™ä¸ª react-scripts å‘½ä»¤åˆ°åº•æ˜¯å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p>
<p>ä¸€èˆ¬å†™åœ¨ <code>package.json=&gt; scripts</code> çš„å‘½ä»¤ï¼Œéƒ½ä¼šå…ˆå» <code>project_path(é¡¹ç›®ç›®å½•ï¼‰/node_modules/.bin</code> æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°å†æ‰¾å…¨å±€å®‰è£…çš„åŒ…ã€‚</p>
<p>é‚£ä¹ˆ node_modules/.bin é‡Œé¢çš„æ–‡ä»¶åˆæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ<br>æˆ‘ä»¬å¦‚æœåœ¨åŒ…çš„ package.json åŠ ä¸Š <code>bin</code> å­—æ®µï¼Œnpmå°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ˜ å°„åˆ° node_modules/.bin é‡Œé¢ <a href="https://docs.npmjs.com/files/package.json#bin" target="_blank" rel="noopener">npm binæ–‡æ¡£ä¼ é€é—¨</a></p>
<p>æˆ‘ä»¬ç›´æ¥æ‰“å¼€ <code>node_modules/react-scripts/package.json</code> èƒ½çœ‹åˆ°è¿™ä¹ˆä¸€è¡Œ<code>&quot;react-scripts&quot;: &quot;./bin/react-scripts.js&quot;</code>,ç›´æ¥æŠŠå‘½ä»¤æŒ‡å‘<code>node_modules/react-scripts/.bin/react-scripts.js</code>ï¼Œä¹ŸéªŒè¯äº†æˆ‘ä»¬çš„è§‚ç‚¹ã€‚</p>
<p>è¿˜è®°å¾—ä¸Šä¸€ç¯‡ï¼Œæˆ‘ä»¬åœ¨ <code>create-react-app/packages</code> é‡Œé¢å‘ç°äº†æœ‰ä¸€ä¸ª <code>react-scripts</code>ã€‚å…¶å®æ˜¯åŒä¸€ä¸ªä¸œè¥¿æ¥çš„ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„æ­¥éª¤å°±å¾ˆæ˜ç¡®äº†ï¼Œç›´æ¥ç”¨è€åŠæ³•ï¼Œæ”¹ä¸‹é…ç½®ï¼Œç„¶åç”¨vscodeè·‘æ–­ç‚¹è°ƒè¯•é˜…è¯»<code>project_path/node_modules/react-scripts/.bin/react-scripts.js</code>çš„æºç  ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<h3 id="vscode-launch-json"><a href="#vscode-launch-json" class="headerlink" title="vscode launch.json"></a><a href="#vscode_launch.json">vscode launch.json</a></h3><p>è¿™é‡Œæˆ‘ä»¬ä¼ å…¥ start ä½œä¸ºå‚æ•°,æ¨¡æ‹Ÿåœ¨é¡¹ç›®é‡Œè·‘ <code>yarn start</code> çš„æ•ˆæœã€‚<br><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"å¯åŠ¨ç¨‹åº"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/node_modules/react-scripts/bin/react-scripts.js"</span>, <span class="comment">//è°ƒè¯•çš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">      <span class="attr">"args"</span>: [</span><br><span class="line">        <span class="string">"start"</span> <span class="comment">// ä¼ å…¥ start åšä¸ºå‚æ•°</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><em><strong>ps:ä¸‹é¢çš„<code>react-scripts</code>æ²¡æœ‰ç‰¹æ®Šè¯´æ˜ï¼Œéƒ½ä»£è¡¨<code>project_path/node_modules/react-scripts</code>ç›®å½•æ–¹ä¾¿é˜…è¯»</strong></em></p>
<h1 id="react-scripts-bin-react-scripts-js"><a href="#react-scripts-bin-react-scripts-js" class="headerlink" title="react-scripts/.bin/react-scripts.js"></a><a href="#react-scripts-bin-react-scripts-js">react-scripts/.bin/react-scripts.js</a></h1><p><a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/react-scripts/bin/react-scripts.js" target="_blank" rel="noopener">æ–‡ä»¶ä¼ é€é—¨</a><br>è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯è€åŠæ³•ï¼Œå…ˆä¸çœ‹ä¾èµ– çœ‹ä¸»æµç¨‹ç†è§£å…ˆï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œéå¸¸ç®€çŸ­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> args = process.argv.slice(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> scriptIndex = args.findIndex(</span><br><span class="line">  x =&gt; x === <span class="string">'build'</span> || x === <span class="string">'eject'</span> || x === <span class="string">'start'</span> || x === <span class="string">'test'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> script = scriptIndex === <span class="number">-1</span> ? args[<span class="number">0</span>] : args[scriptIndex];</span><br><span class="line"><span class="keyword">const</span> nodeArgs = scriptIndex &gt; <span class="number">0</span> ? args.slice(<span class="number">0</span>, scriptIndex) : [];</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆå¤„ç†ä¼ è¿›æ¥çš„å‚æ•°ï¼Œç”¨<code>script</code>å˜é‡æ¥è·å–æˆ‘ä»¬è·‘çš„å‘½ä»¤æ˜¯å“ªä¸€ä¸ªï¼Œæœ‰[â€˜buildâ€™, â€˜ejectâ€™, â€˜startâ€™, â€˜testâ€™]è¿™ä¹ˆå‡ ç§ï¼Œåˆ†åˆ«å¯¹åº” æ„å»ºã€æš´éœ²é…ç½®ã€å¼€å‘ã€æµ‹è¯•å‘½ä»¤ã€‚<br>ç„¶åå†è·å–ä¸€èµ·ä¼ å…¥çš„å…¶ä»–çš„å‚æ•°ï¼Œæ¯”å¦‚<code>npm test</code>å‘½ä»¤å°±ä¼šå¸¦ä¸€ä¸ªé¢å¤–çš„å‚æ•°<code>--env=jsdom</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (script) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'build'</span>:</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'eject'</span>:</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'start'</span>:</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'test'</span>: &#123;</span><br><span class="line">    <span class="comment">// ç”¨ cross-spawn å»è·‘ä¸€ä¸ªåŒæ­¥çš„å‘½ä»¤</span></span><br><span class="line">    <span class="comment">// æ ¹æ®ä¼ å…¥çš„å‘½ä»¤æ¥æ‹¼æ¥å¯¹åº”çš„è·¯å¾„ ç”¨nodeå»è·‘</span></span><br><span class="line">    <span class="keyword">const</span> result = spawn.sync(</span><br><span class="line">      <span class="string">'node'</span>,</span><br><span class="line">      nodeArgs</span><br><span class="line">        .concat(<span class="built_in">require</span>.resolve(<span class="string">'../scripts/'</span> + script))</span><br><span class="line">        .concat(args.slice(scriptIndex + <span class="number">1</span>)),</span><br><span class="line">      &#123; <span class="attr">stdio</span>: <span class="string">'inherit'</span> &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span> (result.signal) &#123;</span><br><span class="line">      <span class="keyword">if</span> (result.signal === <span class="string">'SIGKILL'</span>) &#123;</span><br><span class="line">        <span class="comment">// è¾“å‡ºé”™è¯¯æé†’æ—¥å¿—</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result.signal === <span class="string">'SIGTERM'</span>) &#123;</span><br><span class="line">        <span class="comment">// è¾“å‡ºé”™è¯¯æé†’æ—¥å¿—</span></span><br><span class="line">      &#125;</span><br><span class="line">      process.exit(<span class="number">1</span>); <span class="comment">// é€€å‡ºè¿›ç¨‹ï¼Œ ä¼ 1ä»£è¡¨æœ‰é”™è¯¯</span></span><br><span class="line">    &#125;</span><br><span class="line">    process.exit(result.status);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">// è¿™é‡Œè¾“å‡ºåŒ¹é…ä¸åˆ°å¯¹åº”çš„å‘½ä»¤</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ ¹æ®è·å–åˆ°çš„å‘½ä»¤ï¼Œå¯¹åº”åˆ°<code>react-scripts/scripts</code>ä¸‹é¢çš„æ–‡ä»¶å»è·‘ï¼Œæ¯”å¦‚ <code>react-scripts start</code> å°±ä¼šå»è·‘ <code>react-scripts/scripts/start.js</code>ã€‚</p>
<p>è¿™é‡Œæ’å‡ å¥è®²ä¸€ä¸‹ä¸€ä¸ªé¡¹ç›®ä¸Šæ¯”è¾ƒå¸¸è§çš„ç±»åº“è§£è€¦æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„ <code>spawn</code>å¼•ç”¨çš„æ˜¯<code>react-dev-utils/crossSpawn</code>ã€‚è€Œåœ¨<code>react-dev-utils/corssSpawn</code>é‡Œé¢ä¹Ÿåªæ˜¯ç®€ç®€å•å•çš„å‡ å¥ï¼Œå¼•å…¥<code>cross-spawn</code>å†æŠŠ<code>cross-spawn</code>æš´éœ²å‡ºå»ã€‚<br>ä½†æ˜¯è¿™ä¹ˆå†™å°±å¯ä»¥èµ·åˆ°ç±»åº“è§£è€¦çš„ä½œç”¨ï¼Œæ¯”å¦‚ä»¥åè¿™ä¸ªåº“è¢«çˆ†å‡ºæœ‰é‡å¤§çš„bugæˆ–è€…åœæ­¢ç»´æŠ¤äº†ï¼Œç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å¼•å…¥å…¶ä»–çš„ç±»åº“ï¼Œå…¶ä»–å¼•ç”¨è¯¥æ–‡ä»¶çš„ä»£ç å°±ä¸éœ€è¦æ”¹åŠ¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// react-dev-utils/corssSpawn</span></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> crossSpawn = <span class="built_in">require</span>(<span class="string">'cross-spawn'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = crossSpawn;</span><br></pre></td></tr></table></figure>
<h1 id="react-scripts-scripts-start-js"><a href="#react-scripts-scripts-start-js" class="headerlink" title="react-scripts/scripts/start.js"></a><a href="#react-scripts-scripts-start-js">react-scripts/scripts/start.js</a></h1><p><a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/react-scripts/scripts/start.js" target="_blank" rel="noopener">æ–‡ä»¶ä¼ é€é—¨</a></p>
<p>çœ‹è¿‡ç¬¬ä¸€ç¯‡çš„äººå¯¹è¿™ä¸ªæ–‡ä»¶å¤¹åº”è¯¥ä¸é™Œç”Ÿï¼Œ<code>create-react-app</code> åœ¨å®‰è£…å®Œ <code>react</code> ç­‰ä¾èµ–ä¹‹åï¼Œå°±ä¼šè·‘è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„<code>init.js</code>æ¥æ‹·è´æ¨¡ç‰ˆæ–‡ä»¶ï¼Œä¿®æ”¹<code>package.json</code>ç­‰æ“ä½œã€‚</p>
<p>æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“ä»–è¦æ‰§è¡Œ start.js, æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠvscodeè°ƒè¯•æ–‡ä»¶ä¿®æ”¹ä¸º start.js æ–‡ä»¶<code>&quot;program&quot;: &quot;${workspaceFolder}/node_modules/react-scripts/scripts/start.js&quot;,</code> ä¹‹æ‰€ä»¥è¦ä¿®æ”¹æ˜¯å› ä¸ºä»–è¿™é‡Œä¸æ˜¯å¼•ç”¨jsæ–‡ä»¶æ¥è¿è¡Œï¼Œè€Œæ˜¯ç”¨ç»ˆç«¯æ¥è·‘ï¼Œæ‰€ä»¥ä¸å±äºæˆ‘ä»¬çš„é¡¹ç›®è°ƒè¯•èŒƒå›´~</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">process.env.BABEL_ENV = <span class="string">'development'</span>;</span><br><span class="line">process.env.NODE_ENV = <span class="string">'development'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Makes the script crash on unhandled rejections instead of silently</span></span><br><span class="line"><span class="comment">// ignoring them. In the future, promise rejections that are not handled will</span></span><br><span class="line"><span class="comment">// terminate the Node.js process with a non-zero exit code.</span></span><br><span class="line">process.on(<span class="string">'unhandledRejection'</span>, err =&gt; &#123;</span><br><span class="line">  <span class="keyword">throw</span> err;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶çš„æœ€å¼€å¤´è®¾ç½®äº†ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œå› ä¸º start æ˜¯ç”¨æ¥è·‘å¼€å‘çš„ï¼Œæ‰€ä»¥è¿™é‡Œçš„ç¯å¢ƒå˜é‡éƒ½æ˜¯ <code>development</code>ï¼Œç„¶åå†ç»™ <code>process</code> ç»‘å®šä¸€ä¸ªé”™è¯¯ç›‘å¬å‡½æ•°ï¼Œè¿™ä¸ªé”™è¯¯ç›‘å¬å®è´¨ä¸Šæ˜¯ç”¨æ¥ç›‘å¬ <em>ä¸€äº›æ²¡æœ‰è¢«.catchçš„Promise</em>ã€‚ <a href="https://nodejs.org/dist/latest-v8.x/docs/api/process.html#process_event_unhandledrejection" target="_blank" rel="noopener">å…·ä½“å¯ä»¥çœ‹nodeçš„æ–‡æ¡£</a>, å…³äº Promiseå¯ä»¥çœ‹ä¸€ä¸‹ä¹‹å‰å†™è¿‡çš„ä¸€ç¯‡<a href="https://jsonz1993.github.io/2017/12/%E6%B5%85%E6%9E%90Promise/">ä»‹ç»Promiseçš„æ–‡ç« ä»ç”¨æ³•å’Œå®ç°åŸç†éƒ½æœ‰æ‰€æ¶‰åŠ</a></p>
<p>æ¥ç€å¼•è¿›ä¸€ä¸ª <code>../config/env</code>ï¼Œ çœ‹æ–‡ä»¶åçŒœåº”è¯¥æ˜¯åšä¸€äº›å…³äºç¯å¢ƒé…ç½®çš„äº‹æƒ…ï¼Œæ‰¾åˆ°æ–‡ä»¶æ–­ç‚¹è¿›æ¥</p>
<h1 id="react-scripts-config-env-js"><a href="#react-scripts-config-env-js" class="headerlink" title="react-scripts/config/env.js"></a><a href="#react-scripts-config-env-js">react-scripts/config/env.js</a></h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> paths = <span class="built_in">require</span>(<span class="string">'./paths'</span>);</span><br><span class="line"><span class="comment">// Make sure that including paths.js after env.js will read .env variables.</span></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">require</span>.cache[<span class="built_in">require</span>.resolve(<span class="string">'./paths'</span>)];</span><br></pre></td></tr></table></figure>
<p><code>env.js</code> æ–‡ä»¶åœ¨å¼•å…¥ <code>./paths.js</code> ä¹‹åï¼Œç«‹å³æŠŠä»–ä»cacheä¸­åˆ é™¤æ‰ï¼Œè¿™æ ·ä¸‹æ¬¡å¦‚æœæœ‰å…¶ä»–çš„æ¨¡å—å¼•å…¥<code>paths.js</code>ï¼Œå°±ä¸ä¼šä»ç¼“å­˜é‡Œé¢å»è·å–ï¼Œä¿è¯äº†<code>paths.js</code>é‡Œé¢æ‰§è¡Œé€»è¾‘éƒ½ä¼šç”¨åˆ°æœ€æ–°çš„ç¯å¢ƒå˜é‡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dotenvFiles = [</span><br><span class="line">  <span class="comment">// ä¸¾ä¸ªä¾‹å­ï¼šç¬¬ä¸€ä¸ªå…ƒç´ åœ¨æˆ‘çš„ç”µè„‘è·¯å¾„æ˜¯è¿™æ ·çš„ Users/jsonz/Documents/my-react-project/.env.development.local.js</span></span><br><span class="line">  <span class="string">`<span class="subst">$&#123;paths.dotenv&#125;</span>.<span class="subst">$&#123;NODE_ENV&#125;</span>.local`</span>,</span><br><span class="line">  <span class="string">`<span class="subst">$&#123;paths.dotenv&#125;</span>.<span class="subst">$&#123;NODE_ENV&#125;</span>`</span>,</span><br><span class="line">  NODE_ENV !== <span class="string">'test'</span> &amp;&amp; <span class="string">`<span class="subst">$&#123;paths.dotenv&#125;</span>.local`</span>,</span><br><span class="line">  paths.dotenv,</span><br><span class="line">].filter(<span class="built_in">Boolean</span>);</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†æ ¹æ®pathsç»™å‡ºçš„åœ°å€å»æ‹¿å…¶ä»–çš„ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œ<code>paths.js</code>ä¼šæ ¹æ®ä¸åŒçš„æƒ…å†µç»™å‡ºä¸åŒçš„è·¯å¾„ï¼Œæˆ‘ä»¬è®¨è®ºçš„æ˜¯æ­£å¸¸çš„åˆ›å»ºé¡¹ç›®æƒ…å†µã€‚<br>å…¶ä»–çš„å‡ ç§æƒ…å†µæœ‰ï¼š</p>
<ol>
<li>æˆ‘ä»¬åœ¨å·²ç»åˆ›å»ºçš„é¡¹ç›®è·‘äº† <code>npm(yarn) eject</code>ï¼Œè¿™æ—¶å€™ <code>react-scripts</code>ä¼šæŠŠé…ç½®éƒ½æš´éœ²åˆ° <code>project_path/config</code> æ–¹ä¾¿æˆ‘ä»¬å»æ ¹æ®é¡¹ç›®ä¿®æ”¹é…ç½®ï¼Œè¿™ä¸ªæ“ä½œæ˜¯ä¸å¯é€†çš„ã€‚</li>
<li>æˆ‘ä»¬æ­£å¸¸åˆ›å»ºé¡¹ç›®ï¼Œç›´æ¥è·‘é¡¹ç›®ï¼Œè¿™æ—¶å€™é…ç½®å°±å­˜æ”¾åœ¨<code>project/node_modules/react-scripts</code>ã€‚</li>
<li>å¼€å‘äººå‘˜è‡ªå·±è°ƒè¯•ç”¨çš„ï¼Œè¿™æ—¶å€™é…ç½®å­˜æ”¾åœ¨<code>create-react/packages/react-scripts/config</code>ã€‚</li>
</ol>
<p>æ‹¼è£…å®Œè·¯å¾„ä¹‹åï¼Œç”¨<a href="https://www.npmjs.com/package/dotenv-expand" target="_blank" rel="noopener">dotenv-expand</a>å’Œ<a href="https://www.npmjs.com/package/dotenv" target="_blank" rel="noopener">dotenv</a>æ¥æŠŠæ–‡ä»¶é‡Œé¢çš„ç¯å¢ƒå˜é‡åŠ è½½è¿›æ¥ï¼Œè¿™ä¸€å—ä¸€èˆ¬åœºæ™¯ç”¨ä¸ä¸Šã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getClientEnvironment</span>(<span class="params">publicUrl</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> raw = <span class="built_in">Object</span>.keys(process.env)</span><br><span class="line">    .filter(<span class="function"><span class="params">key</span> =&gt;</span> REACT_APP.test(key))</span><br><span class="line">    .reduce(</span><br><span class="line">      (env, key) =&gt; &#123;</span><br><span class="line">        env[key] = process.env[key];</span><br><span class="line">        <span class="keyword">return</span> env;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        NODE_ENV: process.env.NODE_ENV || <span class="string">'development'</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  <span class="keyword">const</span> stringified = &#123;</span><br><span class="line">    <span class="string">'process.env'</span>: <span class="built_in">Object</span>.keys(raw).reduce(<span class="function">(<span class="params">env, key</span>) =&gt;</span> &#123;</span><br><span class="line">      env[key] = <span class="built_in">JSON</span>.stringify(raw[key]);</span><br><span class="line">      <span class="keyword">return</span> env;</span><br><span class="line">    &#125;, &#123;&#125;),</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123; raw, stringified &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åè¿”å›ä¸€ä¸ª <code>getClientEnvironment</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ‰§è¡Œåä¼šè¿”å›å®¢æˆ·ç«¯çš„ç¯å¢ƒå˜é‡ã€‚</p>
<h1 id="react-scripts-scripts-start-js-2"><a href="#react-scripts-scripts-start-js-2" class="headerlink" title="react-scripts/scripts/start.js(2)"></a><a href="#react-scripts-scripts-start-js-2">react-scripts/scripts/start.js(2)</a></h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> WebpackDevServer = <span class="built_in">require</span>(<span class="string">'webpack-dev-server'</span>);</span><br><span class="line"><span class="keyword">const</span> clearConsole = <span class="built_in">require</span>(<span class="string">'react-dev-utils/clearConsole'</span>);</span><br><span class="line"><span class="keyword">const</span> checkRequiredFiles = <span class="built_in">require</span>(<span class="string">'react-dev-utils/checkRequiredFiles'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  choosePort,</span><br><span class="line">  createCompiler,</span><br><span class="line">  prepareProxy,</span><br><span class="line">  prepareUrls,</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">'react-dev-utils/WebpackDevServerUtils'</span>);</span><br><span class="line"><span class="keyword">const</span> openBrowser = <span class="built_in">require</span>(<span class="string">'react-dev-utils/openBrowser'</span>);</span><br><span class="line"><span class="keyword">const</span> paths = <span class="built_in">require</span>(<span class="string">'../config/paths'</span>);</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../config/webpack.config.dev'</span>);</span><br><span class="line"><span class="keyword">const</span> createDevServerConfig = <span class="built_in">require</span>(<span class="string">'../config/webpackDevServer.config'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useYarn = fs.existsSync(paths.yarnLockFile);</span><br><span class="line"><span class="keyword">const</span> isInteractive = process.stdout.isTTY;</span><br></pre></td></tr></table></figure>
<p>åŠ è½½å®Œå„ç§ç¯å¢ƒå˜é‡ä¹‹åï¼Œæˆ‘ä»¬å›åˆ°<code>react-scripts/scripts/start.js</code>ï¼Œè€è§„çŸ©ï¼Œä¸€ç³»åˆ—çš„ä¾èµ–å…ˆè·³è¿‡ä¸çœ‹ï¼Œåé¢ç”¨åˆ°å†æ¥çœ‹ã€‚<br>è¿˜è®°å¾—æˆ‘ä»¬åœ¨<code>env.js</code>é‡Œé¢deletæ‰node.catchå—ï¼Œè¿™é‡Œ<code>conts paths = require(&#39;../config/paths)</code>å°±ä¸ä¼šä»ç¼“å­˜é‡Œé¢å»æ‹¿è€Œæ˜¯é‡æ–°å»åŠ è½½ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!checkRequiredFiles([paths.appHtml, paths.appIndexJs])) &#123;</span><br><span class="line">  process.exit(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…ˆåˆ¤æ–­ä¸€ä¸‹æˆ‘ä»¬ä¸¤ä¸ªå…¥å£æ–‡ä»¶æœ‰æ²¡æœ‰å­˜åœ¨ï¼Œåˆ†åˆ«æ˜¯<code>project_path/public/index.html</code>å’Œ<code>project_path/src/index.js</code>ï¼Œå¦‚æœä¸å­˜åœ¨ç»™å‡ºæç¤ºç»“æŸç¨‹åºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> DEFAULT_PORT = <span class="built_in">parseInt</span>(process.env.PORT, <span class="number">10</span>) || <span class="number">3000</span>;</span><br><span class="line"><span class="keyword">const</span> HOST = process.env.HOST || <span class="string">'0.0.0.0'</span>;</span><br></pre></td></tr></table></figure>
<p>ç„¶åè®¾ç½®é»˜è®¤çš„ç«¯å£å’Œhostï¼Œå¦‚æœæœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯ä»¥ä»ç¯å¢ƒå˜é‡ä¼ è¿›å»æ”¹å˜ï¼Œæ²¡æœ‰å°±ä¼šç”¨é»˜è®¤çš„<code>3000</code>ç«¯å£ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">choosePort(HOST, DEFAULT_PORT).then(...) <span class="comment">// @return Promise</span></span><br></pre></td></tr></table></figure>
<p>è®¾ç½®å®Œé»˜è®¤çš„ç«¯å£ä¸hostä¹‹åï¼Œå¼€å§‹åˆ¤æ–­è¿™ä¸ªç«¯å£æœ‰æ²¡æœ‰è¢«å…¶ä»–çš„è¿›ç¨‹å ç”¨ï¼Œæœ‰çš„è¯ä¼šæä¾›ä¸‹ä¸€ä¸ªå¯ç”¨çš„ç«¯å£ï¼Œæˆ‘ä»¬é¡ºç€<code>choosePort</code>å»æ–‡ä»¶å¤´æ‰¾ä¾èµ–ï¼Œæ‰¾åˆ°è¯¥æ–¹æ³•ä½äºä¾èµ–<code>react-dev-utils/WebpackDevServerUtils</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">choosePort</span>(<span class="params">host, defaultPort</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> detect(defaultPort, host).then(</span><br><span class="line">    port =&gt;</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (port === defaultPort) &#123;</span><br><span class="line">          <span class="keyword">return</span> resolve(port);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> message =</span><br><span class="line">          process.platform !== <span class="string">'win32'</span> &amp;&amp; defaultPort &lt; <span class="number">1024</span> &amp;&amp; !isRoot()</span><br><span class="line">            ? <span class="string">`Admin permissions are required to run a server on a port below 1024.`</span></span><br><span class="line">            : <span class="string">`Something is already running on port <span class="subst">$&#123;defaultPort&#125;</span>.`</span>;</span><br><span class="line">        <span class="keyword">if</span> (isInteractive) &#123;</span><br><span class="line">          clearConsole();</span><br><span class="line">          <span class="keyword">const</span> existingProcess = getProcessForPort(defaultPort);</span><br><span class="line">          <span class="keyword">const</span> question = &#123;</span><br><span class="line">            type: <span class="string">'confirm'</span>,</span><br><span class="line">            name: <span class="string">'shouldChangePort'</span>,</span><br><span class="line">            message:</span><br><span class="line">              chalk.yellow(</span><br><span class="line">                message +</span><br><span class="line">                  <span class="string">`<span class="subst">$&#123;existingProcess ? <span class="string">` Probably:\n  <span class="subst">$&#123;existingProcess&#125;</span>`</span> : <span class="string">''</span>&#125;</span>`</span></span><br><span class="line">              ) + <span class="string">'\n\nWould you like to run the app on another port instead?'</span>,</span><br><span class="line">            <span class="keyword">default</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;;</span><br><span class="line">          inquirer.prompt(question).then(<span class="function"><span class="params">answer</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (answer.shouldChangePort) &#123;</span><br><span class="line">              resolve(port);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              resolve(<span class="literal">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(chalk.red(message));</span><br><span class="line">          resolve(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;),</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="comment">// è¾“å‡ºé”™è¯¯æ—¥å¿—</span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>choosePort</code> é‡Œé¢ç”¨åˆ°<a href="https://www.npmjs.com/package/detect-port-alt" target="_blank" rel="noopener">detect-port-alt</a>å»æ£€æµ‹ç«¯å£å ç”¨ï¼Œå¦‚æœè¢«å ç”¨äº†è¿”å›ä¸€ä¸ªæœ€æ¥è¿‘çš„é€’å¢æ–¹å‘å¯ç”¨çš„ç«¯å£ï¼Œæ¯”å¦‚3000ç«¯å£è¢«å ç”¨,3001æ²¡è¢«å ç”¨å°±è¿”å›å›æ¥ã€‚<br>å¦‚æœå‘ç°è¿”å›çš„å¯ç”¨ç«¯å£ä¸æ˜¯é»˜è®¤çš„ç«¯å£ï¼Œç»™å‡ºä¸€ä¸ªäº¤äº’å¼çš„å‘½ä»¤è¯¢é—®ç”¨æˆ·æ˜¯å¦è¦æ¢ä¸€ä¸ªç«¯å£å»è®¿é—®ï¼Œäº¤äº’å¼å‘½ä»¤ç”¨çš„æ˜¯<a href="https://www.npmjs.com/package/inquirer" target="_blank" rel="noopener">inquirer</a>è¿™ä¸ªåŒ…ã€‚<br>è¿™é‡Œå¦‚æœç”¨vsCodeæ¥è°ƒè¯•ï¼Œ<code>process.stdout.isTTY</code> è¿”å›çš„å€¼æ˜¯<code>undefined</code>ã€‚æ‰€ä»¥å¦‚æœè¦æµ‹è¯•è¿™ä¸€å—äº¤äº’å¼å‘½ä»¤ï¼Œåªèƒ½åˆ‡å›ç³»ç»Ÿçš„ç»ˆç«¯å»è°ƒè¯•~</p>
<p><img src="./tty_choose_port.png" alt="äº¤äº’å¼å‘½ä»¤è¯¢é—®æ˜¯å¦åˆ‡æ¢ç«¯å£" title="äº¤äº’å¼å‘½ä»¤è¯¢é—®æ˜¯å¦åˆ‡æ¢ç«¯å£"></p>
<p><a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/react-scripts/scripts/start.js#L71" target="_blank" rel="noopener">æ–‡ä»¶ä¼ é€é—¨</a><br>æ£€æµ‹å®Œå¯ç”¨ç«¯å£ä¹‹åï¼Œå›åˆ°<code>start.js</code>ã€‚</p>
<p>å‰ç«¯å¤„ç†ä¸€å †ç¯å¢ƒå˜é‡ï¼Œè¿˜æœ‰åŠ è½½ä¸€å †é…ç½®ï¼Œå…¨éƒ½ç”¨åœ¨è¿™ä¸€å—ã€‚è¿™é‡Œä¸»è¦åšçš„å°±æ˜¯æŠŠç¯å¢ƒå˜é‡å’Œé…ç½®ç»„è£…èµ·æ¥ï¼Œå¼€ä¸ªwebpackæœ¬åœ°è°ƒè¯•æœåŠ¡ã€‚ä¸»è¦åšçš„äº‹æƒ…æœ‰:</p>
<ol>
<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ç”¨çš„ç«¯å£ç›´æ¥è¿”å›ä¸ç»§ç»­æ‰§è¡Œä¸‹å»</li>
<li>æ ¹æ®ç¯å¢ƒå˜é‡åˆ¤æ–­æ˜¯å¦å¯ç”¨<code>https</code>ï¼Œé»˜è®¤æ˜¯<code>http</code>ã€‚</li>
<li>æ ¹æ® host, protocol, port æ‹¼è£…ä¸€ç³»åˆ—çš„urlï¼ŒåŒ…æ‹¬<code>Browser</code>çš„urlä¸<code>Terminal</code>çš„urlã€‚</li>
<li>è°ƒç”¨<code>createCompiler</code> ä¼ å…¥webpackï¼Œwebpacké…ç½®ï¼ŒappNameï¼Œç¬¬ä¸‰æ­¥è·å–çš„urlï¼Œè¿˜æœ‰æ˜¯å¦ä½¿ç”¨Yarnç­‰å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ª webpackCompilerã€‚createCompilerè´Ÿè´£çš„ä¸œè¥¿æœ‰:<br>4.1 æ ¹æ®ç¯å¢ƒå˜é‡åˆ¤æ–­æ˜¯å¦æœ‰å†’çƒŸæµ‹è¯•çš„éœ€æ±‚ï¼Œå¦‚æœæœ‰åŠ ä¸€ä¸ª <code>handleCompile</code>ï¼Œä¸€æœ‰é”™è¯¯å°±ä¸­æ–­ç¨‹åºã€‚<br>4.2 ç”¨ä¼ è¿›æ¥çš„é…ç½®å’ŒhandleCompileç”Ÿæˆä¸€ä¸ªwebpackCompiler<br>4.2 å¢åŠ <code>invalid</code>é’©å­ï¼Œä¸€æ£€æµ‹åˆ°æ›´æ”¹æ–‡ä»¶ï¼Œè€Œä¸”æ˜¯äº¤äº’å¼ç»ˆç«¯çš„è¯ï¼Œå…ˆæ¸…ç©ºæ§åˆ¶å°ï¼Œå†è¾“å‡ºæ—¥å¿—<br>4.3 å¢åŠ <code>done</code>é’©å­ï¼Œå¯¹webpackçš„è¾“å‡ºæ—¥å¿—æ•´ç†ç»Ÿä¸€è¾“å‡º</li>
<li>åˆ›å»ºå¼€å‘æœåŠ¡é…ç½® å…·ä½“çš„é…ç½®ä»£ç æ”¾åœ¨<code>webpackDevServer.config.js</code></li>
<li>æŠŠ4å’Œ5ä¸¢ç»™ <code>WebpackDevServer</code>ï¼Œç”Ÿæˆä¸€ä¸ª webpack æœ¬åœ°å¼€å‘æœåŠ¡</li>
<li>å¤§åŠŸå‘Šæˆï¼Œæ¸…é™¤å±å¹•ï¼Œæ‰“å¼€è°ƒè¯•è¿æ¥</li>
</ol>
<p>ç›¸å…³çš„ä»£ç æ‰§è¡Œå†™åˆ°æ³¨é‡Šé‡Œé¢å»äº†ï¼Œæ²¡åŠæ³•æ¯ä¸ªæ–¹æ³•é…ç½®éƒ½æ‹å‡ºæ¥è®²â€¦ä¸ç„¶ç¯‡å¹…ä¼šå¾ˆé•¿ï¼Œè¿™é‡Œé¢å¾ˆå¤šç‚¹ä¸€è®²éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">choosePort(HOST, DEFAULT_PORT)</span><br><span class="line">  .then(<span class="function"><span class="params">port</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰æ‰¾åˆ°å¯ç”¨ç«¯å£ï¼Œç›´æ¥return</span></span><br><span class="line">    <span class="keyword">if</span> (port == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ¹æ®ç¯å¢ƒå˜é‡åˆ¤æ–­æ˜¯å¦è¦ç”¨https</span></span><br><span class="line">    <span class="keyword">const</span> protocol = process.env.HTTPS === <span class="string">'true'</span> ? <span class="string">'https'</span> : <span class="string">'http'</span>;</span><br><span class="line">    <span class="keyword">const</span> appName = <span class="built_in">require</span>(paths.appPackageJson).name;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰çš„ host, port, protocol ç”Ÿæˆä¸€ç³»åˆ—url</span></span><br><span class="line">    <span class="keyword">const</span> urls = prepareUrls(protocol, HOST, port);</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªwebpack compiler</span></span><br><span class="line">    <span class="keyword">const</span> compiler = createCompiler(webpack, config, appName, urls, useYarn);</span><br><span class="line">    <span class="comment">// åŠ è½½ä»£ç†çš„é…ç½®ï¼Œåœ¨ project_path/package.json é‡Œé¢åŠ è½½é…ç½®</span></span><br><span class="line">    <span class="keyword">const</span> proxySetting = <span class="built_in">require</span>(paths.appPackageJson).proxy;</span><br><span class="line">    <span class="keyword">const</span> proxyConfig = prepareProxy(proxySetting, paths.appPublic);</span><br><span class="line">    <span class="comment">// ç”Ÿæˆ webpack dev server çš„é…ç½®</span></span><br><span class="line">    <span class="keyword">const</span> serverConfig = createDevServerConfig(</span><br><span class="line">      proxyConfig,</span><br><span class="line">      urls.lanUrlForConfig</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">const</span> devServer = <span class="keyword">new</span> WebpackDevServer(compiler, serverConfig);</span><br><span class="line">    <span class="comment">// ç›‘å¬ devServer</span></span><br><span class="line">    devServer.listen(port, HOST, err =&gt; &#123;</span><br><span class="line">      <span class="comment">// ä¸€äº›æ—¥å¿—è¾“å‡º</span></span><br><span class="line">      <span class="comment">// è‡ªåŠ¨ç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€è°ƒè¯•é“¾æ¥</span></span><br><span class="line">      openBrowser(urls.localUrlForBrowser);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p><code>react-dev-utils/WebpackDevServerUtils.js</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCompiler</span>(<span class="params">webpack, config, appName, urls, useYarn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> compiler;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    compiler = webpack(config, handleCompile); <span class="comment">// handleCompileä¸ºå†’çƒŸæµ‹è¯•çš„å¯¹åº”å¤„ç†</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯æç¤º</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  compiler.plugin(<span class="string">'invalid'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="comment">// invalid é’©å­ï¼Œå¦‚æœå½“å‰å¤„äºTTYç»ˆç«¯ï¼Œé‚£ä¹ˆå…ˆæ¸…é™¤æ§åˆ¶å°å†è¾“å‡º Compiling...</span></span><br><span class="line">    <span class="keyword">if</span> (isInteractive) &#123;</span><br><span class="line">      clearConsole();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Compiling...'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> isFirstCompile = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  compiler.plugin(<span class="string">'done'</span>, stats =&gt; &#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬äº† done äº‹ä»¶ï¼Œå¯¹è¾“å‡ºçš„æ—¥å¿—åšäº†æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">    <span class="comment">// æ­£å¸¸æƒ…å†µä¸‹ä¼šç›´æ¥è¾“å‡º `Compiled successfully!`</span></span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰é”™è¯¯åˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œè¿™é‡Œå¯¹é”™è¯¯ä¿¡æ¯åšä¸€äº›å¤„ç†ï¼Œè®©å…¶è¾“å‡ºæ¯”è¾ƒå‹å¥½</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> compiler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="./webpackDevServer_error.png" alt="è¾“å‡ºæ—¥å¿—æ ¼å¼åŒ–å¤„ç†" title="è¾“å‡ºæ—¥å¿—ç»Ÿä¸€æ ¼å¼åŒ–å¤„ç†"></p>
<h1 id="æœ€åè®²ä¸¤å¥"><a href="#æœ€åè®²ä¸¤å¥" class="headerlink" title="æœ€åè®²ä¸¤å¥"></a>æœ€åè®²ä¸¤å¥</h1><p>ä¹‹å‰å°±ä¸€ç›´å¥½å¥‡ï¼Œè¿™äº›è„šæ‰‹æ¶æ˜¯æ€ä¹ˆæ¸…ç©ºæˆ‘ä»¬çš„ç»ˆç«¯å±å¹•çš„ã€‚åœ¨çœ‹<code>create-react-app</code>çš„æ—¶å€™ï¼Œç„åˆ°æœ‰è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶<a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/react-dev-utils/clearConsole.js" target="_blank" rel="noopener">react-dev-utils/clearConsole.js</a>ã€‚è¿™ä¸ªæ–‡ä»¶ååˆ†å‰ªçŸ­ï¼Œæ ¸å¿ƒä»£ç å°±é‚£ä¹ˆä¸€å¥:</p>
<h2 id="react-dev-utils-clearConsole-js"><a href="#react-dev-utils-clearConsole-js" class="headerlink" title="react-dev-utils/clearConsole.js"></a><a href="#react-dev-utils-clearConsole-js">react-dev-utils/clearConsole.js</a></h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">process.stdout.write(process.platform === <span class="string">'win32'</span> ? <span class="string">'\x1B[2J\x1B[0f'</span> : <span class="string">'\x1B[2J\x1B[3J\x1B[H'</span>);</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¥½å¥‡å¿ƒç‰¹åˆ«é‡ï¼Œä¸çŸ¥é“åé¢ä¸¤ä¸²æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸€ç›´æœæ²¡æœ‰æ‰¾åˆ°æƒ³è¦çš„ç­”æ¡ˆã€‚é—®äº†èº«è¾¹çš„åŒäº‹ï¼Œè¯´æ˜¯åå…­è¿›åˆ¶ï¼Œè€Œåœ¨æˆ‘ç‹­éš˜çš„è®¤çŸ¥é‡Œé¢ä¸€ç›´ä»¥ä¸ºåå…­è¿›åˆ¶åªèƒ½è½¬æˆæ•°å­—â€¦.ä½†æ˜¯å®šç›ä¸€çœ‹ï¼Œè¿™æœ‰ä¸ª<code>J</code> æ˜æ˜¾ä¸æ˜¯åå…­è¿›åˆ¶ã€‚ä¸€ä¸ªå¥³è£…å¤§ä½¬å’Œæˆ‘è¯´è¿™æ˜¯ASCIIç ï¼Œç™¾åº¦äº†ä¸€ä¸‹ASCIIç ï¼Œçœ‹äº† <code>\x1B</code> ASCIIå¯¹åº”åˆ° <code>ESC</code>ã€‚ ä½†æ˜¯åé¢çš„ <code>[2J</code> <code>[3J</code> <code>[H</code> æ˜¯ä»€ä¹ˆæ„æ€è¿˜æ˜¯ä¸æ¸…æ¥šâ€¦<br>åé¢å¤§ä½¬åˆå’Œæˆ‘è¯´æ‰¾åˆ°å¯èƒ½æ˜¯ <strong>Linux ANSI æ§åˆ¶ç </strong> æ‰¾æ¥æ‰¾å»æŠ˜è…¾äº†æŒºä¹…çš„åé¢æ‰æ­å¼€ç¥ç§˜é¢çº±~<br>è¿™å‡ ä¸ªå‘½ä»¤å¤§æ¦‚çš„æ„æ€æ˜¯:<br><code>[2J</code> æ¸…é™¤æ§åˆ¶å°<br><code>[H</code> å°†å…‰æ ‡ç§»è‡³æœ€é¡¶éƒ¨<br><code>[3J</code>è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°ï¼Œåº”è¯¥æ˜¯æ›´é«˜çº§çš„ç³»ç»Ÿå±‚çº§çš„æ¸…é™¤æ§åˆ¶å°<br>ç»™å‡ºå‡ ä¸ª Linux ANSI æ§åˆ¶ç èµ„æ–™ç½‘ç«™<br><a href="http://manpages.ubuntu.com/manpages/bionic/zh_CN/man4/console_codes.4.html" target="_blank" rel="noopener">Ubuntu Manpage: æ§åˆ¶ç»ˆç«¯ä»£ç  - Linux æ§åˆ¶ç»ˆç«¯è½¬ä¹‰å’Œæ§åˆ¶åºåˆ—</a><br><a href="www.cnblogs.com/mugua/archive/2009/11/25/1610118.html">æ§åˆ¶ç»ˆç«¯ä»£ç  - Linux æ§åˆ¶ç»ˆç«¯è½¬ä¹‰å’Œæ§åˆ¶åºåˆ—(è½¬) - æœ¨ç“œè„‘è¢‹ - åšå®¢å›­</a></p>
<p>æœ€åå‰ç«¯çš„å°ä¼™ä¼´å¾ˆå¤šå’Œæˆ‘ä¸€æ ·ä¸æ˜¯ç§‘ç­å‡ºèº«çš„ï¼ŒçœŸçš„å¾—åŠ æŠŠåŠ²è¡¥è¡¥ä¸€äº›è®¡ç®—æœºæ¯”è¾ƒåŸç†æ€§æˆ–æ¯”è¾ƒæ¥è¿‘ç³»ç»Ÿå±‚çº§çš„çŸ¥è¯†~</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>2018-05-08é¢è¯•è®°B</title>
    <url>/2018/05/2018-05-08/</url>
    <content><![CDATA[<p>æ¬§å•¦å•¦å•¦å•¦å•¦å•¦å•¦å•¦å•¦ </p>
<p>è®°å½•ä¸‹æœ€è¿‘çš„é¢è¯•ç­‰æƒ…å†µ~~~ </p>
<h2 id="ç®€å†æŠ•é€’æƒ…å†µ2"><a href="#ç®€å†æŠ•é€’æƒ…å†µ2" class="headerlink" title="ç®€å†æŠ•é€’æƒ…å†µ2"></a>ç®€å†æŠ•é€’æƒ…å†µ2</h2><p><a href="https://jsonz1993.github.io/2018/04/2018-04-29/">ç®€å†æŠ•é€’æƒ…å†µä¼ é€é—¨</a><br>æ®ä¸å®Œå…¨ç»Ÿè®¡:<br>æŠ• <code>è”æ</code> æŠ€æœ¯é¢<br>æŠ• <code>100æ•™è‚²</code> å¾…æ²Ÿé€š<br>æŠ• <code>å°šå¾·æ•™è‚²</code> æ²¡é¢è¯•æœºä¼š</p>
<p>æœ€æœ€æœ€æœ€æœ€å¼€å¿ƒçš„äº‹æƒ…å¯èƒ½å°±æ˜¯é¢äº†è”æ~ è™½ç„¶æœ€åæ²¡æœ‰è¿‡ ä¸è¿‡è¿˜æ˜¯æŒºä¸é”™çš„ä¸€æ¬¡ä½“éªŒ è®°å½•ä¸€ä¸‹</p>
<p>é¦–å…ˆæµç¨‹æ˜¯ï¼š ç¬”è¯• =&gt; æœºè¯• =&gt; ä¸¤ä¸ªäººçš„æŠ€æœ¯é¢</p>
<p>ç¬”è¯•æ¯”è¾ƒåŸºç¡€çš„é—®é¢˜ï¼Œä½†æ˜¯é¢è¯•å®˜ä¼šæ ¹æ®å†™çš„é¢˜é—®æ€è·¯ï¼Œè€Œä¸”ä¼šå„ç§å˜å½¢é—®ï¼Œå¯ä»¥æ¯”è¾ƒæ·±äº†è§£åŸºç¡€çš„çŸ¥è¯†ã€‚</p>
<p>ä»¥ä¸‹åªæ˜¯ä¸ªäººçš„é¢è¯•è®°å½•ï¼Œå¦‚æœå‘ç°æœ‰ä¸å¦¥çš„è”ç³»å³åˆ ã€‚</p>
<h2 id="è”æç¬”è¯•"><a href="#è”æç¬”è¯•" class="headerlink" title="è”æç¬”è¯•"></a>è”æç¬”è¯•</h2><ol>
<li><p>ä½œç”¨åŸŸçš„é—®é¢˜</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  t = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">typeof</span> a();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜æœ‰å„ç§å˜å½¢</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">  t = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">  t = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">  t = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  t = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨æ¨¡æ‹Ÿ Function.prototype.bind</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ç›´æ¥ç”¨ call || allpy æ¨¡æ‹Ÿï¼Œè¿”å›ä¸€ä¸ªé—­åŒ…ï¼Œå‚æ•°ç”¨ <span class="built_in">Array</span>.prototype.slice.apple å»å–å³å¯~</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…³äºæ­£åˆ™çš„æ¯”è¾ƒç®€å•~ ä¸å†™å‡ºæ¥äº†</p>
</li>
<li><p>å…³äºzIndexçš„ï¼Œæ¨èç›´æ¥çœ‹å¼ é‘«æ—­å¤§ä½¬çš„æ–‡ç« ï¼Œè¶…ä¸è¿‡é‚£ä¸ªèŒƒå›´<a href="http://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/" target="_blank" rel="noopener">å¼ é‘«æ—­å¤§ä½¬ä¼ é€é—¨</a></p>
</li>
<li><p>å®ç°ä¸€ä¸ªå®½é«˜éƒ½æ˜¯æµè§ˆå™¨ 40%çš„æ­£æ–¹å½¢</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. ç”¨vwæ–¹æ¡ˆ</span><br><span class="line">2. ç”¨padding ( emmm è¿™ä¸ªé¢è¯•å¤§ä½¬æç¤ºäº†æ‰æƒ³èµ· padding æ˜¯æ ¹æ®çˆ¶çº§å®½åº¦çš„)</span><br></pre></td></tr></table></figure>
</li>
<li><p>a,b,c,d å››ä¸ªæ¥å£ï¼Œæ±‚æœ€å¿« || æœ€æ…¢çš„å“åº”æ—¶é—´</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ç›´æ¥ç”¨ <span class="built_in">Promise</span>.all || <span class="built_in">Promise</span>.race å³å¯</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ç¬”è¯•é¢˜è¿˜å¥½ï¼Œä½œç”¨åŸŸé‚£ä¸€é¢˜æœ‰ç‚¹æ·· å…¶ä»–æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œç®—æ˜¯æœ‰æƒŠæ— é™©</p>
<h2 id="æœºè¯•"><a href="#æœºè¯•" class="headerlink" title="æœºè¯•"></a>æœºè¯•</h2><p>æœºè¯•é¢˜äºŒé€‰ä¸€ ä¸€ä¸ªæ˜¯å®ç°ä¸€ä¸ª<code>dialog</code> ä¸€ä¸ªæ˜¯å®ç°ä¸€ä¸ªéªŒè¯è¡¨å•<br>é€‰äº† dialog åšçš„æ—¶å€™æ²¡æœ‰çœ‹é¢˜â€¦æœ‰ä¸ªåŠŸèƒ½ç‚¹æ²¡æœ‰å®ç°å®Œå…¨å°±è·‘å»åšéªŒè¯é¢˜ï¼ŒéªŒè¯é¢˜æ²¡æœ‰åšå®Œ<br>dialog åº”è¯¥ç®—æ˜¯å®ç°çš„ä¸å¤ŸåŠæ ¼çº¿</p>
<p>å¼•å‡ºäº†æŒºå¤šä¼˜åŒ–æ–¹æ¡ˆçš„ï¼Œæ¯”å¦‚ dom å¤„ç†ï¼Œæ¯”å¦‚åŠ¨ç”»å¤„ç†ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªé¢è¯•å®˜æš—ç¤ºäº†å¥½å¤šæ¬¡ï¼Œä½†æ˜¯æ²¡æœ‰æƒ³èµ·æ¥çš„ä¸€ä¸ªapi <a href="https://developer.mozilla.org/zh-CN/docs/Web/Events/animationend" target="_blank" rel="noopener">animationend</a><br><a href="http://www.runoob.com/jsref/event-animationend.html" target="_blank" rel="noopener">animationend demo</a></p>
<h2 id="é¢è¯•"><a href="#é¢è¯•" class="headerlink" title="é¢è¯•"></a>é¢è¯•</h2><p>é¢è¯•å°±æ ¹æ®å‰é¢åšçš„ä¸¤ä»½é¢˜æ‰©å±•å»é—®æ€è·¯ç­‰ç­‰</p>
<p>é—®é¢˜çš„å¥—è·¯æ˜¯æ¯”è¾ƒå–œæ¬¢çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>Q: å·¦è¾¹è‡ªé€‚åº”ï¼Œå³è¾¹å›ºå®šæœ‰ä»€ä¹ˆå¸ƒå±€?<br>A: flexå¸ƒå±€, flex: 1 &amp;&amp; width: â€¦<br>Q: æµè§ˆå™¨è¿™æ—¶å€™ç¼©å°ä¼šæœ‰ä»€ä¹ˆæƒ…å†µï¼Ÿ<br>A: flex: 1 æ…¢æ…¢ç¼©å°ï¼Œå¦ä¸€ä¸ªä¸å˜ï¼ˆè¿™ä¸ªå›ç­”æˆ‘æ¨¡æ£±ä¸¤å¯çŠ¹è±«äº†ï¼Œè™½ç„¶çŸ¥é“æ˜¯ä¸å˜ï¼Œä½†æ˜¯å¥½åƒé¡¹ç›®ä¸­æœ‰é‡è¿‡å˜çš„â€¦æ‰£åˆ†äº†)<br>Q: è¿˜æœ‰å…¶ä»–çš„å—?<br>A: æµ®åŠ¨ float:left; overflow: auto<br>Q: æ¸…é™¤æµ®åŠ¨æœ‰å“ªäº›<br>A: å§”å…ƒç´ æ¸…é™¤ &amp;&amp; BFC<br>Q: BFCæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Œæ€ä¹ˆè®¾ç½®BFC<br>A: å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œæ¸…é™¤æµ®åŠ¨æˆ–è€…æ¶ˆé™¤masteråˆå¹¶ï¼Œå¯ä»¥ç”¨overflow(hidden,auto,scroll) || float(left,right) || display(inline-block) || position(absolute, fixed)</p>
<p>åé¢èŠäº†ä¸‹ å·¥ä½œçš„ä¼˜åŒ–ï¼Œ webpackæ„å»ºï¼Œ reactä¼˜åŒ–, ç¼“å­˜æœºåˆ¶(æ¶‰åŠhttp), pwaç­‰ç­‰</p>
<p>è¿˜é—®äº†å°ç¨‹åºå’Œvueçš„ä¸œè¥¿ï¼Œä½†æ˜¯å…¶å®ä¸Šä¸€æ¬¡åšå°ç¨‹åºå·²ç»æ˜¯ä¸€å¹´å‰äº†ï¼Œè¯´äº†vueå’Œå°ç¨‹åºçš„ä¸Šæ‰‹ä¸åº”è¯¥æˆä¸ºä¸€ä¸ªé—®é¢˜æ‰€åœ¨ã€‚</p>
<p>ç„¶åé—®äº†ä¸‹èŒä¸šè§„åˆ’ï¼Œè¯´äº†æœ€è¿‘æ˜¯åœ¨çœ‹ <code>create-react-app</code>æºç ï¼Œæ¥ä¸‹æ¥çš„è§„åˆ’æ˜¯ <strong>ä¸“å‰ç«¯ é€šå…¶ä»–</strong></p>
<h2 id="è”æç»“æœ"><a href="#è”æç»“æœ" class="headerlink" title="è”æç»“æœ"></a>è”æç»“æœ</h2><p>å·¥ä½œä¼˜åŒ–å¯èƒ½ä¸æ˜¯å¾ˆæ»¡æ„<br>webpackæ„å»ºä¼˜åŒ–åº”è¯¥è¿˜è¡Œï¼Œæ¯•ç«Ÿé¡¹ç›®ä¸Šç”¨çš„æ¯”è¾ƒå¤š<br>reactä¹Ÿè¿˜å¥½ï¼Œè™½ç„¶é¢è¯•çš„æ˜¯ç”¨vueå’Œå°ç¨‹åº<br>pwaä¹Ÿæœ‰æ‰€äº†è§£<br>ä¸»è¦æ˜¯ httpè¿™å—æš´éœ²äº†åå°çŸ¥è¯†è–„å¼±ï¼Œæ²¡æœ‰å½¢æˆä¸€ä¸ªæ¯”è¾ƒå…¨é¢çŸ¥è¯†ä½“ç³»</p>
<p>åé¢è¿˜è¢«å«Œå¼ƒäº†ä¸‰å¹´å‘†äº†ä¸‰ä¸ªå…¬å¸å¤ªè¿‡é¢‘ç¹</p>
<p>æœ€åè®©é¢è¯•å®˜ç»™äº†ä¸€ä¸‹é¢è¯•çš„è¯„ä»·ï¼š<br><strong>1. css æ¦‚å¿µä¸ç†Ÿ</strong><br><strong>2. æµè§ˆå™¨apiè®¤è¯†ä¸å…¨</strong><br><strong>3. httpã€åç«¯çŸ¥è¯†æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ </strong><br><strong>4. è·³æ§½è¿‡å¤š~ ä¸‰å¹´å‘†äº†ä¸‰ä¸ªå…¬å¸</strong></p>
<p>â•®(â•¯â–½â•°)â•­å“ è¿˜é—¹äº†ä¸ªä¹Œé¾™ï¼Œæƒ³è¯´ ã€ŠCSSä¸–ç•Œã€‹ è¯´æˆ ã€Šcssæ­ç§˜ã€‹</p>
<p>æœ€è¿‘åº”è¯¥æŠ˜è…¾å®Œæ‰‹ä¸Šä¸œè¥¿åï¼Œä¼šæ¯”è¾ƒç³»ç»Ÿçš„å»çœ‹ åˆ‡å›¾å†™é¡µé¢çš„è¿™ä¸€å—ï¼Œæ¯”è¾ƒ html+css å…¶å®ä¹Ÿæ˜¯å¾ˆé‡è¦çš„</p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>create-react-app æºç è§£æ</title>
    <url>/2018/05/create-react-app-o/</url>
    <content><![CDATA[<p>æœ€è¿‘å·¥ä½œå¼€å§‹ç¨³å®šä¸‹æ¥ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šåŠ ç­ï¼ŒåŠ ä¸Šè¯´æŠ•ç®€å†æ‰¾é¢è¯•ä¸€ç›´æ²¡æ‹¿åˆ°é¢è¯•æœºä¼šâ€¦æ‰€ä»¥å¼€å§‹æœ‰ç©ºé—²çš„æ—¶é—´</p>
<p>ä¹‹å‰å…¬å¸æœ‰ä¸ªå¤§ä½¬å†™äº†ä¸ªç±»ä¼¼ create-react-app çš„è„šæ‰‹æ¶ï¼Œç”¨æ¥åˆ›å»ºå…¬å¸çš„é¡¹ç›®ã€‚ä¸€ç›´ä¸çŸ¥é“é‡Œé¢å®ç°çš„åŸç†ï¼Œå€Ÿæ­¤æœºä¼šä¸€æ¢ <code>create-react-app</code> æºç ï¼Œäº†è§£ä¸‹é‡Œé¢è¿è¡Œçš„æœºåˆ¶ã€‚</p>
<p>æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ï¼Œå¸Œæœ›é€šè¿‡è¿™ç¯‡æ–‡ç« ä¹‹åï¼Œå¯¹å¤§å®¶ä»¥åçœ‹æºç å¯ä»¥æœ‰æ‰€å¸®åŠ©ã€‚<br>å¤§å®¶ä¹Ÿä¸è¦ä¸€çœ‹åˆ°æºç å°±å®³æ€•ä¸æ•¢å»çœ‹ï¼Œç°åœ¨è¿™ä¹ˆä¼˜ç§€é¡¹ç›®éƒ½å¼€æºäº†ï¼ŒåŠ ä¸Šå„ç§IDEæ”¯æŒå¾ˆå¥½ï¼Œç›´æ¥æ‰“ä¸ªæ–­ç‚¹è¿›å»è°ƒè¯•ï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºä¸ªå¤§æ¦‚ã€‚<br>ä¹Ÿå¯ä»¥ç”¨è¿™ç§æ€è·¯å»äº†è§£å…¶ä»–çš„å¼€æºé¡¹ç›®</p>
<h1 id="å¿«é€Ÿäº†è§£"><a href="#å¿«é€Ÿäº†è§£" class="headerlink" title="å¿«é€Ÿäº†è§£"></a><a href="#å¿«é€Ÿäº†è§£">å¿«é€Ÿäº†è§£</a></h1><p>å¯¹äºæƒ³å¿«é€Ÿäº†è§£çš„ç›´æ¥æµè§ˆè¿™ä¸€å—å³å¯<br>create-react-app å…¶å®å°±æ˜¯ç”¨nodeå»è·‘ä¸€äº›åŒ…å®‰è£…æµç¨‹ï¼Œå¹¶ä¸”æŠŠæ–‡ä»¶æ¨¡æ¿demoè€ƒåˆ°å¯¹äºçš„ç›®å½•ä¸‹ã€‚<br>å¯ä»¥ç®€å•åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:</p>
<ul>
<li>åˆ¤æ–­Nodeç‰ˆæœ¬</li>
<li>åšä¸€äº›å‘½ä»¤è¡Œå¤„ç†çš„åˆå§‹åŒ–ï¼Œæ¯”å¦‚è¾“å…¥ <code>-help</code> åˆ™è¾“å‡ºå¸®åŠ©å†…å®¹</li>
<li>åˆ¤æ–­æ˜¯å¦æœ‰è¾“å…¥é¡¹ç›®åï¼Œæœ‰åˆ™æ ¹æ®å‚æ•°å»è·‘åŒ…å®‰è£…ï¼Œé»˜è®¤æ˜¯yarnå®‰è£…æ–¹å¼ï¼Œeg: <code>yarn add react react-dom react-scripts</code></li>
<li>ä¿®æ”¹package.jsoné‡Œé¢å·²å®‰è£…çš„ä¾èµ–ç‰ˆæœ¬ï¼Œä»ç²¾ç¡®ç‰ˆæœ¬<code>16.0.0</code>æ”¹ä¸º^å‘ä¸Šå…¼å®¹ç‰ˆæœ¬<code>^16.0.0</code> å¹¶åŠ å…¥ <code>start</code>,<code>build</code>ç­‰å¯åŠ¨è„šæœ¬</li>
<li>æ‹·è´ <code>react-scripts</code>ä¸‹çš„ <code>template</code> åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œé‡Œé¢æœ‰<code>public</code>,<code>src</code>ç­‰æ–‡ä»¶å¤¹ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„å¯è¿è¡Œdemo</li>
<li>END~</li>
</ul>
<p>ç»§ç»­å¾€ä¸‹çœ‹çš„å°ä¼™ä¼´å¯ä»¥è·Ÿç€ä¸€æ­¥ä¸€æ­¥äº†è§£é‡Œé¢çš„å®ç°é€»è¾‘ï¼Œå…ˆä¾‹è¡Œäº¤ä»£ä¸‹ç¯å¢ƒç‰ˆæœ¬:<br><strong>create-react-app v1.1.4</strong><br>macOS 10.13.4<br>node v8.9.4<br>npm 6.0.0<br>yarn 1.6.0<br>vsCode 1.22.2</p>
<h1 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a><a href="#é¡¹ç›®åˆå§‹åŒ–">é¡¹ç›®åˆå§‹åŒ–</a></h1><p>å…ˆä¸Šgithub æ‹‰é¡¹ç›®ä»£ç ï¼Œæ‹‰ä¸‹æ¥ä¹‹ååˆ‡æ¢åˆ°æŒ‡å®šçš„ <code>tag</code></p>
<ul>
<li><code>git clone https://github.com/facebook/create-react-app.git</code></li>
<li><code>git checkout v1.1.4</code></li>
<li><code>yarn</code> //å¦‚æœä¸éœ€è¦æ–­ç‚¹è°ƒè¯•ï¼Œè¿™ä¸€æ­¥å¯ä»¥è·³è¿‡</li>
</ul>
<blockquote>
<p>è¿™é‡Œå¯èƒ½yarn ç‰ˆæœ¬å¤ªä½çš„è¯ï¼Œä¼šæŠ¥ä¸€ç³»åˆ—é”™è¯¯ï¼Œä¹‹å‰ç”¨çš„æ˜¯ 0.xç‰ˆæœ¬çš„ï¼Œå‡çº§åˆ°1.xå°±æ²¡é—®é¢˜äº†</p>
</blockquote>
<p>ä¸‹é¢æˆ‘ä»¬ç”¨ <code>root</code> ä»£æ›¿é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œæ–¹ä¾¿ç†è§£</p>
<p>é¦–å…ˆæˆ‘ä»¬æ‰“å¼€é¡¹ç›®èƒ½çœ‹åˆ°ä¸€å †çš„é…ç½®æ–‡ä»¶å’Œä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼šeslinté…ç½®æ–‡ä»¶ã€traviséƒ¨ç½²é…ç½®ã€yarné…ç½®ã€æ›´æ–°æ—¥å¿—ã€å¼€æºå£°æ˜ç­‰ç­‰â€¦è¿™äº›æˆ‘ä»¬å…¨éƒ½å¯ä»¥ä¸ç”¨å»çœ‹ï¼Œé‚£æˆ‘ä»¬è¦çœ‹çš„æ ¸å¿ƒæºç æ”¾åœ¨å“ªé‡Œå‘¢<br><img src="./create-react-app-file.png" alt></p>
<p>åˆ’é‡ç‚¹: <strong>å¦‚æœé¡¹ç›®ä¸çŸ¥é“ä»å“ªé‡Œå…¥æ‰‹çš„è¯ï¼Œé¦–å…ˆä»package.jsonæ–‡ä»¶å¼€å§‹</strong><br><figure class="highlight json"><figcaption><span>root/package.json</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"workspaces"</span>: [</span><br><span class="line">    <span class="string">"packages/*"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"cd packages/react-scripts &amp;&amp; node scripts/start.js"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"lint-staged"</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰“å¼€æ ¹ç›®å½• package.json æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢å¾ˆç®€æ´~ npmè„šæœ¬å‘½ä»¤ï¼Œå¼€å‘ä¾èµ–ï¼Œè¿˜æœ‰æäº¤é’©å­ï¼Œå‰©ä¸‹çš„å°±æ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„ <strong>workspaces</strong> è¿™é‡ŒæŒ‡å‘çš„æ˜¯ <code>&quot;packages/*&quot;</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨çš„é‡ç‚¹å°±æ”¾åœ¨ <strong>packages</strong> æ–‡ä»¶å¤¹</p>
<p>packages æ–‡ä»¶å¤¹ä¸‹é¢ä¹Ÿæœ‰å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™é‡Œæ–‡ä»¶å¤¹å‘½åå¾ˆè§„èŒƒï¼Œä¸€çœ‹å°±çŸ¥é“åŠŸèƒ½åˆ’åˆ†ï¼Œæ‰€ä»¥è¿˜æ˜¯è€å¥—è·¯ç›´æ¥çœ‹ <code>root/packages/create-react-app/package.json</code></p>
<figure class="highlight json"><figcaption><span>packages/create-react-app/package.json</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"create-react-app"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.5.2"</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"MIT"</span>,</span><br><span class="line">  <span class="attr">"engines"</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"bugs"</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"files"</span>: [</span><br><span class="line">    <span class="string">"index.js"</span>,</span><br><span class="line">    <span class="string">"createReactApp.js"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"bin"</span>: &#123;</span><br><span class="line">    <span class="attr">"create-react-app"</span>: <span class="string">"./index.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™æ²¡æœ‰ <code>workspaces</code>é¡¹ï¼Œ æˆ‘ä»¬å¯ä»¥çœ‹ <code>bin</code> binçš„åŠŸèƒ½æ˜¯æŠŠå‘½ä»¤å¯¹åº”åˆ°å¯æ‰§è¡Œçš„æ–‡ä»¶ï¼Œå…·ä½“çš„ä»‹ç»å¯ä»¥çœ‹<a href="https://docs.npmjs.com/files/package.json#bin" target="_blank" rel="noopener">package Document</a></p>
<p>è¿™é‡Œå¯ä»¥ç®€å•ç†è§£æˆï¼Œå½“æˆ‘ä»¬å…¨å±€å®‰è£…äº† <code>create-react-app</code> ä¹‹åï¼Œè·‘ <code>create-react-app my-react-app</code> ç³»ç»Ÿä¼šå¸®æˆ‘ä»¬å»è·‘ <code>packages/create-react-app/index.js my-react-app</code></p>
<p>ç»ˆäºæ‰¾åˆ°æºç çš„å…¥å£äº†ï¼Œå¯¹äºç®€å•çš„æºç æˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹ï¼Œå¯¹äºæ¯”è¾ƒå¤æ‚çš„ æˆ–è€…æƒ³è¦çœ‹åˆ°æ‰§è¡Œåˆ°æ¯ä¸€è¡Œä»£ç æ—¶é‚£äº›å˜é‡æ˜¯ä»€ä¹ˆå€¼çš„æƒ…å†µï¼Œæˆ‘ä»¬å°±è¦ç”¨IDEæˆ–å…¶ä»–å·¥å…·æ¥æ–­ç‚¹è°ƒè¯•ä»£ç äº†ã€‚</p>
<h1 id="é…ç½®æ–­ç‚¹è°ƒè¯•"><a href="#é…ç½®æ–­ç‚¹è°ƒè¯•" class="headerlink" title="é…ç½®æ–­ç‚¹è°ƒè¯•"></a><a href="#é…ç½®æ–­ç‚¹è°ƒè¯•">é…ç½®æ–­ç‚¹è°ƒè¯•</a></h1><p>å¯¹äºvscodeæˆ–nodeè°ƒè¯• æ¯”è¾ƒç†Ÿæ‚‰çš„å¯ä»¥è·³è¿‡ç›´æ¥çœ‹ <a href="#å¼€å§‹æ–­ç‚¹é˜…è¯»æºç ">å¼€å§‹æ–­ç‚¹é˜…è¯»æºç </a></p>
<h2 id="vscode-debug"><a href="#vscode-debug" class="headerlink" title="vscode debug"></a><a href="#vscode_debug">vscode debug</a></h2><p>å¯¹äºvscodeç”¨æˆ·æ¥è¯´ï¼Œè°ƒè¯•éå¸¸ç®€å•ï¼Œç‚¹å‡»ä¾§è¾¹æ çš„å°ç”²è™«å›¾æ ‡ï¼Œç‚¹å‡»è®¾ç½®<br>ç„¶åç›´æ¥ä¿®æ”¹ â€œprogramâ€çš„å€¼ï¼Œä¿®æ”¹å®Œç‚¹å‡»å·¦ä¸Šè§’çš„ç»¿è‰²ç®­å¤´å°±å¯ä»¥è·‘èµ·æ¥äº†ï¼Œå¦‚æœè¦åœ¨æŸä¸€å¤„æ–­ç‚¹ï¼Œæ¯”å¦‚ <code>create-react-app/index.js</code> line39 æ–­ç‚¹ï¼Œç›´æ¥åœ¨è¡Œå·çš„å·¦è¾¹ç‚¹ä¸€ä¸‹é¼ æ ‡å°±å¯ä»¥äº†<br><img src="./debug1.png" alt><br><img src="./debug2.png" alt><br><figure class="highlight json"><figcaption><span>launch.json é…ç½®</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"å¯åŠ¨ç¨‹åº"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/packages/create-react-app/index.js"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="node-è°ƒè¯•"><a href="#node-è°ƒè¯•" class="headerlink" title="node è°ƒè¯•"></a>node è°ƒè¯•</h2><p>å¦‚æœå¹³æ—¶æ²¡æœ‰ç”¨vscodeå¼€å‘æˆ–è€…ä¹ æƒ¯chrome-devtoolçš„ï¼Œå¯ä»¥ç›´æ¥ç”¨nodeå‘½ä»¤è·‘ï¼Œç„¶ååœ¨chromeé‡Œé¢è°ƒè¯•<br>é¦–å…ˆä¿è¯nodeçš„ç‰ˆæœ¬çš„ 6 ä»¥ä¸Š<br>ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ <code>node --inspect-brk packages/create-react-app/index.js</code><br>åœ¨chromeåœ°å€æ è¾“å…¥ chrome://inspect/#devices ç„¶åå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¦è°ƒè¯•çš„è„šæœ¬äº†<br>å…³äºnode chrome-devtool è°ƒè¯•è¯¦ç»†å¯ä»¥çœ‹è¿™é‡Œ <a href="https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27" target="_blank" rel="noopener">ä¼ é€é—¨</a></p>
<p><img src="./debug3.png" alt title="ç»ˆç«¯å¯åŠ¨nodeè°ƒè¯•"><br><img src="./debug4.png" alt><br><img src="./debug5.png" alt><br>(psï¼šè¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥nodeåœ¨æ¨¡å—åŒ–çš„å®ç°æ˜¯é€šè¿‡ç”¨ä¸€ä¸ªå‡½æ•°åŒ…è£¹èµ·æ¥ï¼Œç„¶åæŠŠ exports, requestdç­‰å‚æ•°ä¼ è¿›æ¥ä»¥ä¾›ä½¿ç”¨)</p>
<h1 id="å¼€å§‹æ–­ç‚¹é˜…è¯»æºç "><a href="#å¼€å§‹æ–­ç‚¹é˜…è¯»æºç " class="headerlink" title="å¼€å§‹æ–­ç‚¹é˜…è¯»æºç "></a><a href="#å¼€å§‹æ–­ç‚¹é˜…è¯»æºç ">å¼€å§‹æ–­ç‚¹é˜…è¯»æºç </a></h1><h2 id="packages-create-react-app-index-js-githubæ–‡ä»¶ä¼ é€é—¨"><a href="#packages-create-react-app-index-js-githubæ–‡ä»¶ä¼ é€é—¨" class="headerlink" title="packages/create-react-app/index.js githubæ–‡ä»¶ä¼ é€é—¨"></a><a href="#packages/create-react-app/index.js">packages/create-react-app/index.js</a> <a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/create-react-app/index.js" target="_blank" rel="noopener">githubæ–‡ä»¶ä¼ é€é—¨</a></h2><p><img src="./create-react-app_index.png" alt title="packages/creat-react-app/index.js"><br>è¿™ä¸ªæ–‡ä»¶ååˆ†ç®€å•ï¼Œåªæ˜¯åšä¸ºä¸€ä¸ªå…¥å£æ–‡ä»¶åˆ¤æ–­ä¸€ä¸‹ nodeç‰ˆæœ¬ï¼Œå°äº 4.xçš„æç¤ºå¹¶ç»ˆæ­¢ç¨‹åºï¼Œ å¦‚æœæ­£å¸¸åˆ™åŠ è½½ <code>./createReactApp</code> è¿™ä¸ªæ–‡ä»¶ï¼Œä¸»è¦çš„é€»è¾‘åœ¨è¯¥æ–‡ä»¶å®ç°ã€‚</p>
<h2 id="packages-create-react-app-createReactApp-js-githubæ–‡ä»¶ä¼ é€é—¨"><a href="#packages-create-react-app-createReactApp-js-githubæ–‡ä»¶ä¼ é€é—¨" class="headerlink" title="packages/create-react-app/createReactApp.js githubæ–‡ä»¶ä¼ é€é—¨"></a><a href="#packages/create-react-app/createReactApp.js">packages/create-react-app/createReactApp.js</a> <a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/create-react-app/createReactApp.js" target="_blank" rel="noopener">githubæ–‡ä»¶ä¼ é€é—¨</a></h2><p>é¡ºç€æˆ‘ä»¬çš„æ–­ç‚¹è¿›å…¥åˆ° <code>createReactApp.js</code> è¿™ä¸ªæ–‡ä»¶æœ‰750è¡Œä¹ä¸€çœ‹å¾ˆå¤šï¼Œæ–‡ä»¶å¤´åˆæœ‰åå‡ ä¸ªä¾èµ–å¼•å…¥ï¼Œä½†æ˜¯ä¸è¦è¢«å“åˆ°ï¼Œä¸€èˆ¬è¿™ç§é«˜è´¨é‡çš„å¼€æºé¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸€å¤§åŠæ˜¯æ³¨é‡Šå’Œé”™è¯¯å‹å¥½ä¿¡æ¯ã€‚</p>
<blockquote>
<p>è¿™é‡Œå»ºè®®æ²¡æœ‰æ‰“æ–­ç‚¹è°ƒè¯•çš„å°ä¼™ä¼´è¯•ä¸€ä¸‹æŠŠä»£ç å¤åˆ¶åˆ°å¦ä¸€ä¸ªjsæ–‡ä»¶ï¼Œç„¶åå…ˆä¸çœ‹å‰é¢çš„ä¾èµ–ï¼Œä¸‹é¢ç”¨åˆ°å†å» npmæŸ¥ä¸€ä¸‹æ˜¯ä»€ä¹ˆä½œç”¨çš„ã€‚ä¸è¦è¢«ç»•è¿›å»çœ‹äº†ä¸€ä¸ªåˆä¸€ä¸ªçš„ä¾èµ–ï¼Œæ ¸å¿ƒä»£ç åè€Œæ²¡æœ‰çœ‹åˆ°ã€‚ ç„¶åçœ‹ä¸€éƒ¨åˆ†ä¹‹åå°±æŠŠé‚£éƒ¨åˆ†çš„ä»£ç åˆ æ‰ï¼Œæ¯”å¦‚æˆ‘çœ‹äº†200è¡Œï¼Œå°±æŠŠå‰é¢200è¡Œåˆ äº†ï¼Œè¿™æ ·å‰©ä¸‹500è¡Œçœ‹ç€å°±æ²¡æœ‰é‚£ä¹ˆå¿ƒè™šäº†ã€‚å½“ç„¶è¿˜æ˜¯å»ºè®®ç”¨æ–­ç‚¹è°ƒè¯•é˜…è¯»ï¼Œé€»è¾‘ä¼šæ¯”è¾ƒæ¸…æ™°ã€‚</p>
</blockquote>
<p>é¦–å…ˆæ–‡ä»¶å¤´éƒ¨è¿™ä¸€å¤§ä¸²çš„ä¾èµ–ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸å»å…³æ³¨ä»–ä»¬ï¼Œç­‰åé¢ç”¨åˆ°å†å»æŸ¥<br><figure class="highlight javascript"><figcaption><span>createReactApp.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> validateProjectName = <span class="built_in">require</span>(<span class="string">'validate-npm-package-name'</span>);</span><br><span class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>);</span><br><span class="line"><span class="keyword">const</span> commander = <span class="built_in">require</span>(<span class="string">'commander'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs-extra'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> execSync = <span class="built_in">require</span>(<span class="string">'child_process'</span>).execSync;</span><br><span class="line"><span class="keyword">const</span> spawn = <span class="built_in">require</span>(<span class="string">'cross-spawn'</span>);</span><br><span class="line"><span class="keyword">const</span> semver = <span class="built_in">require</span>(<span class="string">'semver'</span>);</span><br><span class="line"><span class="keyword">const</span> dns = <span class="built_in">require</span>(<span class="string">'dns'</span>);</span><br><span class="line"><span class="keyword">const</span> tmp = <span class="built_in">require</span>(<span class="string">'tmp'</span>);</span><br><span class="line"><span class="keyword">const</span> unpack = <span class="built_in">require</span>(<span class="string">'tar-pack'</span>).unpack;</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">const</span> hyperquest = <span class="built_in">require</span>(<span class="string">'hyperquest'</span>);</span><br><span class="line"><span class="keyword">const</span> envinfo = <span class="built_in">require</span>(<span class="string">'envinfo'</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="commander-å‘½ä»¤è¡Œå¤„ç†ç¨‹åº"><a href="#commander-å‘½ä»¤è¡Œå¤„ç†ç¨‹åº" class="headerlink" title="commander å‘½ä»¤è¡Œå¤„ç†ç¨‹åº"></a><a href="#commander">commander å‘½ä»¤è¡Œå¤„ç†ç¨‹åº</a></h3><p>æ¥ä¸‹æ¥é¡ºç€æˆ‘ä»¬çš„æ–­ç‚¹ï¼Œç¬¬ä¸€è¡Œè¢«æ‰§è¡Œçš„ä»£ç æ˜¯ <a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/create-react-app/createReactApp.js#L56" target="_blank" rel="noopener">L56</a></p>
<figure class="highlight javascript"><figcaption><span>createReactApp.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> program = <span class="keyword">new</span> commander.Command(packageJson.name)</span><br><span class="line">  .version(packageJson.version) <span class="comment">// create-react-app -v æ—¶è¾“å‡º $&#123;packageJson.version&#125;</span></span><br><span class="line">  .arguments(<span class="string">'&lt;project-directory&gt;'</span>) <span class="comment">// è¿™é‡Œç”¨&lt;&gt; åŒ…ç€project-directory è¡¨ç¤º project-directoryä¸ºå¿…å¡«é¡¹</span></span><br><span class="line">  .usage(<span class="string">`<span class="subst">$&#123;chalk.green(<span class="string">'&lt;project-directory&gt;'</span>)&#125;</span> [options]`</span>) <span class="comment">// ç”¨ç»¿è‰²å­—ä½“è¾“å‡º &lt;project-directory&gt;</span></span><br><span class="line">  .action(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">    projectName = name;</span><br><span class="line">  &#125;) <span class="comment">// è·å–ç”¨æˆ·ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º projectName **ä¸‹é¢å°±ä¼šç”¨åˆ°**</span></span><br><span class="line">  .option(<span class="string">'--verbose'</span>, <span class="string">'print additional logs'</span>) <span class="comment">// optionç”¨äºé…ç½®`create-react-app -[option]`çš„é€‰é¡¹ï¼Œæ¯”å¦‚è¿™é‡Œå¦‚æœç”¨æˆ·å‚æ•°å¸¦äº† --verboseï¼Œ ä¼šè‡ªåŠ¨è®¾ç½®program.verbose = true;</span></span><br><span class="line">  .option(<span class="string">'--info'</span>, <span class="string">'print environment debug info'</span>) <span class="comment">// åé¢ä¼šç”¨åˆ°è¿™ä¸ªå‚æ•°ï¼Œç”¨äºæ‰“å°å‡ºç¯å¢ƒè°ƒè¯•çš„ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">  .option(</span><br><span class="line">    <span class="string">'--scripts-version &lt;alternative-package&gt;'</span>,</span><br><span class="line">    <span class="string">'use a non-standard version of react-scripts'</span></span><br><span class="line">  )</span><br><span class="line">  .option(<span class="string">'--use-npm'</span>)</span><br><span class="line">  .allowUnknownOption()</span><br><span class="line">   <span class="comment">// on('option', cb) è¾“å…¥ create-react-app --help è‡ªåŠ¨æ‰§è¡Œåé¢çš„æ“ä½œè¾“å‡ºå¸®åŠ©</span></span><br><span class="line">  .on(<span class="string">'--help'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`    Only <span class="subst">$&#123;chalk.green(<span class="string">'&lt;project-directory&gt;'</span>)&#125;</span> is required.`</span>);</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`    A custom <span class="subst">$&#123;chalk.cyan(<span class="string">'--scripts-version'</span>)&#125;</span> can be one of:`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`      - a specific npm version: <span class="subst">$&#123;chalk.green(<span class="string">'0.8.2'</span>)&#125;</span>`</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`      - a custom fork published on npm: <span class="subst">$&#123;chalk.green(</span></span></span><br><span class="line"><span class="string"><span class="subst">        <span class="string">'my-react-scripts'</span></span></span></span><br><span class="line"><span class="string"><span class="subst">      )&#125;</span>`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`      - a .tgz archive: <span class="subst">$&#123;chalk.green(</span></span></span><br><span class="line"><span class="string"><span class="subst">        <span class="string">'https://mysite.com/my-react-scripts-0.8.2.tgz'</span></span></span></span><br><span class="line"><span class="string"><span class="subst">      )&#125;</span>`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`      - a .tar.gz archive: <span class="subst">$&#123;chalk.green(</span></span></span><br><span class="line"><span class="string"><span class="subst">        <span class="string">'https://mysite.com/my-react-scripts-0.8.2.tar.gz'</span></span></span></span><br><span class="line"><span class="string"><span class="subst">      )&#125;</span>`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`    It is not needed unless you specifically want to use a fork.`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`    If you have any problems, do not hesitate to file an issue:`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`      <span class="subst">$&#123;chalk.cyan(</span></span></span><br><span class="line"><span class="string"><span class="subst">        <span class="string">'https://github.com/facebookincubator/create-react-app/issues/new'</span></span></span></span><br><span class="line"><span class="string"><span class="subst">      )&#125;</span>`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">  &#125;)</span><br><span class="line">  .parse(process.argv); <span class="comment">// è§£æä¼ å…¥çš„å‚æ•° å¯ä»¥ä¸ç”¨ç†ä¼š</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ª commander çš„ä¾èµ–ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å»npm æœä¸€ä¸‹ä»–çš„ä½œç”¨äº†ã€‚å®˜ç½‘çš„æè¿°æ˜¯ <code>The complete solution for node.js command-line interfaces, inspired by Ruby&#39;s commander.API documentation</code> ç¿»è¯‘è¿‡æ¥æ˜¯ node.js å‘½ä»¤è¡Œæ¥å£çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼ŒåŸºæœ¬çš„åŠŸèƒ½çœ‹æ³¨é‡Šå³å¯ï¼Œå¤§æ¦‚äº†è§£ä¸€ä¸‹æœ‰è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œåé¢è‡ªå·±è¦åšçš„æ—¶å€™æœ‰é—¨è·¯å³å¯ã€‚<a href="https://github.com/tj/commander.js" target="_blank" rel="noopener">githubä¼ é€é—¨</a>ã€‚</p>
<h3 id="åˆ¤æ–­æ˜¯å¦æœ‰ä¼ projectName"><a href="#åˆ¤æ–­æ˜¯å¦æœ‰ä¼ projectName" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æœ‰ä¼ projectName"></a><a href="#projectName">åˆ¤æ–­æ˜¯å¦æœ‰ä¼ projectName</a></h3><figure class="highlight javascript"><figcaption><span>createReactApp.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> projectName === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (program.info) &#123; <span class="comment">// å¦‚æœå‘½ä»¤è¡Œæœ‰å¸¦ --info å‚æ•°ï¼Œè¾“å‡º react,react-dom,react-scriptsç‰ˆæœ¬ ç„¶åé€€å‡º</span></span><br><span class="line">    envinfo.print(&#123;</span><br><span class="line">      packages: [<span class="string">'react'</span>, <span class="string">'react-dom'</span>, <span class="string">'react-scripts'</span>],</span><br><span class="line">      noNativeIDE: <span class="literal">true</span>,</span><br><span class="line">      duplicates: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    process.exit(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">  è¿™é‡Œè¾“å‡ºäº†ä¸€äº›é”™è¯¯æç¤ºä¿¡æ¯</span><br><span class="line">  ...</span><br><span class="line">  process.exit(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¾€ä¸‹çœ‹æ˜¯ä¸€ä¸ªåˆ¤æ–­å¿…é¡»ä¼ å…¥çš„å‚æ•° <code>projectName</code>ï¼Œè¿™é‡Œçš„ <code>projectName</code> å°±æ˜¯ä¸Šé¢é€šè¿‡ <code>.action(name =&gt; { projectName = name;})</code> è·å–çš„ã€‚<br>åˆ¤æ–­å¦‚æœæ²¡æœ‰è¾“å…¥çš„è¯ï¼Œç›´æ¥åšä¸€äº›ä¿¡æ¯æç¤ºï¼Œç„¶åç»ˆæ­¢ç¨‹åºã€‚<br>è¿™é‡Œå‚æ•°å¦‚æœä¼ å…¥äº† <code>--info</code> çš„è¯ï¼Œ ä¼šæ‰§è¡Œåˆ°<code>envinfo.print</code>ã€‚ æ—¥å¸¸npm æœä¸€ä¸‹ envinfo è¿™æ˜¯ä¸€ä¸ªç”¨æ¥è¾“å‡ºå½“å‰ç¯å¢ƒç³»ç»Ÿçš„ä¸€äº›ç³»ç»Ÿä¿¡æ¯ï¼Œæ¯”å¦‚ç³»ç»Ÿç‰ˆæœ¬ï¼Œnpmç­‰ç­‰è¿˜æœ‰react,react-dom,react-scriptsè¿™äº›åŒ…çš„ç‰ˆæœ¬ï¼Œéå¸¸å¥½ç”¨ã€‚è¿™ä¸ªåŒ…ç°åœ¨çš„ç‰ˆæœ¬å’Œcreate-react-appçš„ç‰ˆæœ¬å·®å¼‚æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯ä¸å½±å“æˆ‘ä»¬ä½¿ç”¨~ <a href="https://www.npmjs.com/package/envinfo" target="_blank" rel="noopener">envinfo npmä¼ é€é—¨</a></p>
<p>å¦‚æœæ˜¯ç”¨æˆ‘ä¸Šé¢æä¾›çš„ vscode debugé…ç½®çš„è¯ï¼Œåˆ°è¿™é‡Œç¨‹åºåº”è¯¥å°±è¿è¡Œç»“æŸäº†ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å¯åŠ¨è°ƒè¯•æœåŠ¡çš„æ—¶å€™ï¼Œæ²¡æœ‰ç»™è„šæœ¬ä¼ å…¥å‚æ•°ä½œä¸º <code>projectName</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ vscode <code>launch.json</code> åŠ å¤šä¸ªå­—æ®µ <code>&quot;args&quot;: [&quot;test-create-react-app&quot;]</code> <a href="#vscode_debug">å¿˜è®°æ€ä¹ˆè®¾ç½®çš„ç‚¹è¿™é‡Œ</a>~ ä¼ å…¥äº† <code>projectName</code> å‚æ•° ç„¶åé‡æ–°å¯åŠ¨è°ƒè¯•æœåŠ¡<br><figure class="highlight json"><figcaption><span>åŠ å…¥projectName åçš„ launch.json</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="attr">"configurations"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"å¯åŠ¨ç¨‹åº"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/packages/create-react-app/index.js"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [</span><br><span class="line">        <span class="string">"test-create-react-app"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="éšè—çš„-commander-å‚æ•°"><a href="#éšè—çš„-commander-å‚æ•°" class="headerlink" title="éšè—çš„ commander å‚æ•°"></a><a href="#dev_commander">éšè—çš„ commander å‚æ•°</a></h3><p>æ¥ç€èµ°åˆ¤æ–­å®Œ projectName ä¹‹åï¼Œæ¥åˆ° <a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/create-react-app/createReactApp.js#L140" target="_blank" rel="noopener">Line140</a></p>
<figure class="highlight javascript"><figcaption><span>createReactApp.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hiddenProgram = <span class="keyword">new</span> commander.Command()</span><br><span class="line">  .option(</span><br><span class="line">    <span class="string">'--internal-testing-template &lt;path-to-template&gt;'</span>,</span><br><span class="line">    <span class="string">'(internal usage only, DO NOT RELY ON THIS) '</span> +</span><br><span class="line">      <span class="string">'use a non-standard application template'</span></span><br><span class="line">  )</span><br><span class="line">  .parse(process.argv);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ˜¯ä¸€ä¸ªéšè—çš„è°ƒè¯•é€‰é¡¹ï¼Œç»™å‡ºä¸€ä¸ªå‚æ•°ç”¨äºä¼ å…¥æ¨¡ç‰ˆè·¯å¾„ï¼Œç»™å¼€å‘äººå‘˜è°ƒè¯•ç”¨çš„â€¦æ²¡äº‹ä¸æŠ˜è…¾ä»–</p>
<h3 id="createApp"><a href="#createApp" class="headerlink" title="createApp"></a><a href="#createApp">createApp</a></h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">createApp(</span><br><span class="line">  projectName,</span><br><span class="line">  program.verbose,</span><br><span class="line">  program.scriptsVersion,</span><br><span class="line">  program.useNpm,</span><br><span class="line">  hiddenProgram.internalTestingTemplate</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>æ¥ç€å¾€ä¸‹å°±æ˜¯è°ƒç”¨äº† <code>createApp</code>, ä¼ å…¥çš„å‚æ•°å¯¹äºçš„å«ä¹‰æ˜¯ï¼š<code>é¡¹ç›®å</code>ï¼Œ<code>æ˜¯å¦è¾“å‡ºé¢å¤–ä¿¡æ¯</code>ï¼Œ<code>ä¼ å…¥çš„è„šæœ¬ç‰ˆæœ¬</code>ï¼Œ<code>æ˜¯å¦ä½¿ç”¨npm</code>ï¼Œ<code>è°ƒè¯•çš„æ¨¡æ¿è·¯å¾„</code>ã€‚æ¥ä¸‹æ¥å•æ­¥è¿›å…¥å‡½æ•°ä½“çœ‹ä¸€ä¸‹ <code>createApp</code> åˆ°åº•åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚</p>
<figure class="highlight javascript"><figcaption><span>createReactApp.js createApp</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createApp</span>(<span class="params">name, verbose, version, useNpm, template</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> root = path.resolve(name);</span><br><span class="line">  <span class="keyword">const</span> appName = path.basename(root);</span><br><span class="line"></span><br><span class="line">  checkAppName(appName); <span class="comment">// æ£€æŸ¥ä¼ å…¥çš„é¡¹ç›®ååˆæ³•æ€§</span></span><br><span class="line">  fs.ensureDirSync(name); <span class="comment">// è¿™é‡Œçš„fsç”¨çš„æ˜¯ fs-extraï¼Œ å¯¹nodeçš„fsæä¾›ä¸€äº›æ‰©å±•æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ–°å»ºè¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯å¦æ˜¯å®‰å…¨çš„ ä¸å®‰å…¨ç›´æ¥é€€å‡º</span></span><br><span class="line">  <span class="keyword">if</span> (!isSafeToCreateProjectIn(root, name)) &#123;</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨æ–°å»ºçš„æ–‡ä»¶å¤¹ä¸‹å†™å…¥ package.json æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> packageJson = &#123;</span><br><span class="line">    name: appName,</span><br><span class="line">    version: <span class="string">'0.1.0'</span>,</span><br><span class="line">    private: <span class="literal">true</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  fs.writeFileSync(</span><br><span class="line">    path.join(root, <span class="string">'package.json'</span>),</span><br><span class="line">    <span class="built_in">JSON</span>.stringify(packageJson, <span class="literal">null</span>, <span class="number">2</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> useYarn = useNpm ? <span class="literal">false</span> : shouldUseYarn();</span><br><span class="line">  <span class="keyword">const</span> originalDirectory = process.cwd();</span><br><span class="line">  process.chdir(root);</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ä½¿ç”¨npmï¼Œæ£€æµ‹npmæ˜¯å¦åœ¨æ­£ç¡®ç›®å½•ä¸‹æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">if</span> (!useYarn &amp;&amp; !checkThatNpmCanReadCwd()) &#123;</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­nodeç¯å¢ƒï¼Œè¾“å‡ºä¸€äº›æç¤ºä¿¡æ¯, å¹¶é‡‡ç”¨æ—§ç‰ˆæœ¬çš„ react-scripts</span></span><br><span class="line">  <span class="keyword">if</span> (!semver.satisfies(process.version, <span class="string">'&gt;=6.0.0'</span>)) &#123;</span><br><span class="line">    <span class="comment">// è¾“å‡ºä¸€äº›æç¤ºæ›´æ–°ä¿¡æ¯</span></span><br><span class="line">    version = <span class="string">'react-scripts@0.9.x'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!useYarn) &#123;</span><br><span class="line">    <span class="comment">// æ£€æµ‹npmç‰ˆæœ¬ åˆ¤æ–­npmç‰ˆæœ¬ï¼Œå¦‚æœä½äº3.xï¼Œä½¿ç”¨æ—§ç‰ˆçš„ react-scriptsæ—§ç‰ˆæœ¬</span></span><br><span class="line">    <span class="keyword">const</span> npmInfo = checkNpmVersion();</span><br><span class="line">    <span class="keyword">if</span> (!npmInfo.hasMinNpm) &#123;</span><br><span class="line">      version = <span class="string">'react-scripts@0.9.x'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­ç»“æŸä¹‹åï¼Œè·‘run æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// ä¼ å…¥ é¡¹ç›®è·¯å¾„ï¼Œé¡¹ç›®åï¼Œ reactScriptsç‰ˆæœ¬ï¼Œ æ˜¯å¦è¾“å…¥é¢å¤–ä¿¡æ¯ï¼Œ è¿è¡Œçš„è·¯å¾„ï¼Œ æ¨¡æ¿ï¼ˆå¼€å‘è°ƒè¯•ç”¨çš„ï¼‰, æ˜¯å¦ä½¿ç”¨yarn</span></span><br><span class="line">  run(root, appName, version, verbose, originalDirectory, template, useYarn);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/create-react-app/createReactApp.js#L156" target="_blank" rel="noopener">createReactApp.js createApp ä¼ é€é—¨</a><br>è¿™é‡Œæˆ‘ç²¾ç®€äº†ä¸€äº›ä¸œè¥¿ï¼Œåˆ é™¤ä¸€äº›è¾“å‡ºä¿¡æ¯ï¼ŒåŠ äº†ä¸€äº›æ³¨é‡Š<br><code>createApp</code> ä¸»è¦åšçš„äº‹æƒ…å°±æ˜¯åšä¸€äº›å®‰å…¨åˆ¤æ–­æ¯”å¦‚ï¼šæ£€æŸ¥é¡¹ç›®åæ˜¯å¦åˆæ³•ï¼Œæ£€æŸ¥æ–°å»ºçš„è¯æ˜¯å¦å®‰å…¨ï¼Œæ£€æŸ¥npmç‰ˆæœ¬ï¼Œå¤„ç†<code>react-script</code>çš„ç‰ˆæœ¬å…¼å®¹<br>å…·ä½“çš„æ‰§è¡Œé€»è¾‘å†™åœ¨æ³¨é‡Šé‡Œäº†ï¼Œä¸€ç³»åˆ—çš„æ£€æŸ¥å¤„ç†ä¹‹åï¼Œè°ƒç”¨ run æ–¹æ³•ï¼Œä¼ å…¥å‚æ•°ä¸º <code>é¡¹ç›®è·¯å¾„</code>ï¼Œ<code>é¡¹ç›®å</code>ï¼Œ <code>reactScriptsç‰ˆæœ¬</code>ï¼Œ <code>æ˜¯å¦è¾“å…¥é¢å¤–ä¿¡æ¯</code>ï¼Œ <code>è¿è¡Œçš„è·¯å¾„</code>ï¼Œ <code>æ¨¡æ¿ï¼ˆå¼€å‘è°ƒè¯•ç”¨çš„ï¼‰</code>, <code>æ˜¯å¦ä½¿ç”¨yarn</code>ã€‚<br>äº†è§£å¤§æ¦‚çš„æµç¨‹ä¹‹åï¼Œå†ä¸€ä¸ªå‡½æ•°ä¸€ä¸ªå‡½æ•°è¿›å»çœ‹ã€‚</p>
<blockquote>
<p>checkAppName()  // æ£€æŸ¥ä¼ å…¥çš„é¡¹ç›®ååˆæ³•æ€§<br>isSafeToCreateProjectIn(root, name) // åˆ¤æ–­æ–°å»ºè¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯å¦æ˜¯å®‰å…¨çš„<br>shouldUseYarn() // æ£€æŸ¥yarn<br>checkThatNpmCanReadCwd() // æ£€æŸ¥npm<br>run() // æ£€æŸ¥å®Œä¹‹åè°ƒç”¨runæ‰§è¡Œå®‰è£…ç­‰æ“ä½œ</p>
</blockquote>
<h3 id="checkAppName-æ£€æŸ¥projectNameæ˜¯å¦åˆæ³•"><a href="#checkAppName-æ£€æŸ¥projectNameæ˜¯å¦åˆæ³•" class="headerlink" title="checkAppName  æ£€æŸ¥projectNameæ˜¯å¦åˆæ³•"></a><a href="#checkAppName">checkAppName</a>  æ£€æŸ¥projectNameæ˜¯å¦åˆæ³•</h3><figure class="highlight javascript"><figcaption><span>createReactApp.js checkAppName</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAppName</span>(<span class="params">appName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> validationResult = validateProjectName(appName);</span><br><span class="line">  <span class="keyword">if</span> (!validationResult.validForNewPackages) &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦ç¬¦åˆnpmè§„èŒƒå¦‚æœä¸ç¬¦åˆï¼Œè¾“å‡ºæç¤ºå¹¶ç»“æŸä»»åŠ¡</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dependencies = [<span class="string">'react'</span>, <span class="string">'react-dom'</span>, <span class="string">'react-scripts'</span>].sort();</span><br><span class="line">  <span class="keyword">if</span> (dependencies.indexOf(appName) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦é‡åï¼Œå¦‚æœé‡ååˆ™è¾“å‡ºæç¤ºå¹¶ç»“æŸä»»åŠ¡</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>checkAppName</code> ç”¨äºåˆ¤æ–­å½“å‰çš„é¡¹ç›®åæ˜¯å¦ç¬¦åˆnpmè§„èŒƒï¼Œæ¯”å¦‚ä¸èƒ½å¤§å†™ç­‰ï¼Œç”¨çš„æ˜¯ä¸€ä¸ª<a href="validate-npm-package-name">validate-npm-package-name</a>çš„npmåŒ…ã€‚è¿™é‡Œç®€åŒ–äº†å¤§éƒ¨åˆ†çš„é”™è¯¯æç¤ºä»£ç ï¼Œä½†æ˜¯ä¸å½±å“å£æ„Ÿã€‚</p>
<h3 id="shouldUseYarn-åˆ¤æ–­æ˜¯å¦æœ‰è£…yarn-åŒç†çš„æœ‰-checkThatNpmCanReadCwd-ç”¨æ¥åˆ¤æ–­npm"><a href="#shouldUseYarn-åˆ¤æ–­æ˜¯å¦æœ‰è£…yarn-åŒç†çš„æœ‰-checkThatNpmCanReadCwd-ç”¨æ¥åˆ¤æ–­npm" class="headerlink" title="shouldUseYarn åˆ¤æ–­æ˜¯å¦æœ‰è£…yarn åŒç†çš„æœ‰ checkThatNpmCanReadCwd ç”¨æ¥åˆ¤æ–­npm"></a><a href="#shouldUseYarn">shouldUseYarn</a> åˆ¤æ–­æ˜¯å¦æœ‰è£…yarn åŒç†çš„æœ‰ <code>checkThatNpmCanReadCwd</code> ç”¨æ¥åˆ¤æ–­npm</h3><figure class="highlight javascript"><figcaption><span>createReactApp.js shouldUseYarn</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shouldUseYarn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    execSync(<span class="string">'yarnpkg --version'</span>, &#123; <span class="attr">stdio</span>: <span class="string">'ignore'</span> &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="run"><a href="#run" class="headerlink" title="run"></a><a href="#run">run</a></h3><p>å‰é¢çš„é‚£äº›æ“ä½œå¯ä»¥è¯´éƒ½æ˜¯å¤„ç†ä¸€äº›åˆ¤æ–­ä¸å…¼å®¹é€»è¾‘ï¼Œåˆ°<code>run</code>è¿™é‡Œæ‰æ˜¯ çœŸæ­£çš„æ ¸å¿ƒå®‰è£…é€»è¾‘ï¼Œ<strong>å¼€å§‹å®‰è£…ä¾èµ–ï¼Œæ‹·è´æ¨¡ç‰ˆ</strong>ç­‰ã€‚</p>
<figure class="highlight javascript"><figcaption><span>createReactApp.js run</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">...</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œè·å–è¦å®‰è£…çš„packageï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ `react-scripts`ã€‚ ä¹Ÿå¯èƒ½æ˜¯æ ¹æ®ä¼ å‚å»æ‹¿å¯¹åº”çš„åŒ…</span></span><br><span class="line">  <span class="keyword">const</span> packageToInstall = getInstallPackage(version, originalDirectory);</span><br><span class="line">  <span class="comment">// éœ€è¦å®‰è£…æ‰€æœ‰çš„ä¾èµ–ï¼Œ react, react-dom, react-script</span></span><br><span class="line">  <span class="keyword">const</span> allDependencies = [<span class="string">'react'</span>, <span class="string">'react-dom'</span>, packageToInstall];</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>run</code> åšçš„äº‹æƒ…ä¸»è¦æœ‰è¿™ä¹ˆå‡ ä¸ªï¼Œå…ˆæ ¹æ®ä¼ å…¥çš„ç‰ˆæœ¬<code>version</code> å’ŒåŸå§‹ç›®å½•<code>originalDirectory</code> å»è·å–è¦å®‰è£…çš„æŸä¸ª packageã€‚<br>é»˜è®¤çš„ version ä¸ºç©º,è·å–åˆ°çš„ packageToInstall å€¼æ˜¯ <code>react-scripts</code>, ç„¶åå°†<code>packageToInstall</code>æ‹¼æ¥åˆ° <code>allDependencies</code>æ„ä¸ºæ‰€æœ‰éœ€è¦å®‰è£…çš„ä¾èµ–ã€‚<br>è¿™é‡Œè¯´ä¸€ä¸‹<code>react-scripts</code>å…¶å®å°±æ˜¯ä¸€ç³»åˆ—çš„webpacké…ç½®ä¸æ¨¡ç‰ˆï¼Œå±äº <code>create-react-app</code> å¦ä¸€ä¸ªæ ¸å¿ƒçš„ä¸€ä¸ªå¤§æ¨¡å—ã€‚<a href="https://www.npmjs.com/package/react-scripts" target="_blank" rel="noopener">ä¼ é€é—¨</a></p>
<figure class="highlight javascript"><figcaption><span>createReactApp.js run</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">...</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// è·å–åŒ…åï¼Œæ”¯æŒ taz|taræ ¼å¼ã€gitä»“åº“ã€ç‰ˆæœ¬å·ã€æ–‡ä»¶è·¯å¾„ç­‰ç­‰</span></span><br><span class="line">  getPackageName(packageToInstall)</span><br><span class="line">    .then(<span class="function"><span class="params">packageName</span> =&gt;</span></span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯yarn,åˆ¤æ–­æ˜¯å¦åœ¨çº¿æ¨¡å¼ï¼ˆå¯¹åº”çš„å°±æ˜¯ç¦»çº¿æ¨¡å¼ï¼‰ï¼Œå¤„ç†å®Œåˆ¤æ–­å°±è¿”å›ç»™ä¸‹ä¸€ä¸ªthenå¤„ç†</span></span><br><span class="line">      checkIfOnline(useYarn).then(<span class="function"><span class="params">isOnline</span> =&gt;</span> (&#123;</span><br><span class="line">        isOnline: isOnline,</span><br><span class="line">        packageName: packageName,</span><br><span class="line">      &#125;))</span><br><span class="line">    )</span><br><span class="line">    .then(<span class="function"><span class="params">info</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> isOnline = info.isOnline;</span><br><span class="line">      <span class="keyword">const</span> packageName = info.packageName;</span><br><span class="line">      <span class="comment">/** å¼€å§‹æ ¸å¿ƒçš„å®‰è£…éƒ¨åˆ† ä¼ å…¥`å®‰è£…è·¯å¾„`ï¼Œ`æ˜¯å¦ä½¿ç”¨yarn`,`æ‰€æœ‰ä¾èµ–`ï¼Œ`æ˜¯å¦è¾“å‡ºé¢å¤–ä¿¡æ¯`ï¼Œ`åœ¨çº¿çŠ¶æ€` **/</span></span><br><span class="line">      <span class="comment">/** è¿™é‡Œä¸»è¦çš„æ“ä½œæ˜¯ æ ¹æ®ä¼ å…¥çš„å‚æ•°ï¼Œå¼€å§‹è·‘ npm || yarn å®‰è£…react react-domç­‰ä¾èµ– **/</span></span><br><span class="line">      <span class="comment">/** è¿™é‡Œå¦‚æœç½‘ç»œä¸å¥½ï¼Œå¯èƒ½ä¼šæŒ‚ **/</span></span><br><span class="line">      <span class="keyword">return</span> install(root, useYarn, allDependencies, verbose, isOnline).then(</span><br><span class="line">        () =&gt; packageName</span><br><span class="line">      );</span><br><span class="line">    &#125;)</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¦‚æœå½“å‰æ˜¯é‡‡ç”¨yarnå®‰è£…æ–¹å¼çš„è¯ï¼Œå°±åˆ¤æ–­æ˜¯å¦å¤„äºç¦»çº¿çŠ¶æ€ã€‚åˆ¤æ–­å®Œè¿ç€å‰é¢çš„ <code>packageToInstall</code> å’Œ <code>allDependencies</code> ä¸€èµ·ä¸¢ç»™ <code>install</code> æ–¹æ³•ï¼Œå†ç”±<code>install</code>æ–¹æ³•å»è·‘å®‰è£…ã€‚</p>
<blockquote>
<p>runæ–¹æ³•<br>getInstallPackage(); // è·å–è¦å®‰è£…çš„æ¨¡ç‰ˆåŒ… é»˜è®¤æ˜¯ react-scripts<br>install(); // ä¼ å‚æ•°ç»™install è´Ÿè´£å®‰è£… allDependencies<br>init(); // è°ƒç”¨å®‰è£…äº†çš„ react-scripts/script/init å»æ‹·è´æ¨¡ç‰ˆ<br>.catch(); // é”™è¯¯å¤„ç†</p>
</blockquote>
<h3 id="install"><a href="#install" class="headerlink" title="install"></a><a href="#install">install</a></h3><figure class="highlight javascript"><figcaption><span>createReactApp.js install</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">install</span>(<span class="params">root, useYarn, dependencies, verbose, isOnline</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä¸»è¦æ ¹æ®å‚æ•°æ‹¼è£…å‘½ä»¤è¡Œï¼Œç„¶åç”¨nodeå»è·‘å®‰è£…è„šæœ¬ å¦‚ `npm install react react-dom --save` æˆ–è€… `yarn add react react-dom`</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> command;</span><br><span class="line">    <span class="keyword">let</span> args;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å§‹æ‹¼è£… yarn å‘½ä»¤è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (useYarn) &#123;</span><br><span class="line">      command = <span class="string">'yarnpkg'</span>;</span><br><span class="line">      args = [<span class="string">'add'</span>, <span class="string">'--exact'</span>]; <span class="comment">// ä½¿ç”¨ç¡®åˆ‡ç‰ˆæœ¬æ¨¡å¼</span></span><br><span class="line">      <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç¦»çº¿çŠ¶æ€ åŠ ä¸ªçŠ¶æ€</span></span><br><span class="line">      <span class="keyword">if</span> (!isOnline) &#123;</span><br><span class="line">        args.push(<span class="string">'--offline'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      [].push.apply(args, dependencies);</span><br><span class="line">      <span class="comment">// å°†cwdè®¾ç½®ä¸ºæˆ‘ä»¬è¦å®‰è£…çš„ç›®å½•è·¯å¾„</span></span><br><span class="line">      args.push(<span class="string">'--cwd'</span>);</span><br><span class="line">      args.push(root);</span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯ç¦»çº¿çš„è¯è¾“å‡ºä¸€äº›æç¤ºä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// npm å®‰è£…æ¨¡å¼ï¼Œä¸yarnåŒç†</span></span><br><span class="line">      command = <span class="string">'npm'</span>;</span><br><span class="line">      args = [</span><br><span class="line">        <span class="string">'install'</span>,</span><br><span class="line">        <span class="string">'--save'</span>,</span><br><span class="line">        <span class="string">'--save-exact'</span>,</span><br><span class="line">        <span class="string">'--loglevel'</span>,</span><br><span class="line">        <span class="string">'error'</span>,</span><br><span class="line">      ].concat(dependencies);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰ä¼ verboseï¼Œ åˆ™åŠ è¯¥å‚æ•° è¾“å‡ºé¢å¤–çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (verbose) &#123;</span><br><span class="line">      args.push(<span class="string">'--verbose'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨ cross-spawn è·¨å¹³å°æ‰§è¡Œå‘½ä»¤è¡Œ</span></span><br><span class="line">    <span class="keyword">const</span> child = spawn(command, args, &#123; <span class="attr">stdio</span>: <span class="string">'inherit'</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  å…³é—­çš„å¤„ç†</span></span><br><span class="line">    child.on(<span class="string">'close'</span>, code =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (code !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(&#123; <span class="attr">command</span>: <span class="string">`<span class="subst">$&#123;command&#125;</span> <span class="subst">$&#123;args.join(<span class="string">' '</span>)&#125;</span>`</span>, &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é¡ºç€æ–­ç‚¹ä»<code>run</code>è·‘åˆ°<code>install</code>æ–¹æ³•ï¼Œèƒ½çœ‹åˆ°ä»£ç é‡Œæ ¹æ®æ˜¯å¦ä½¿ç”¨yarnåˆ†æˆä¸¤ç§å¤„ç†æ–¹æ³•ã€‚<br><code>if (useYarn) { yarn å®‰è£…é€»è¾‘ } else { npm å®‰è£…é€»è¾‘ }</code><br>å¤„ç†æ–¹æ³•éƒ½æ˜¯åŒä¸ªé€»è¾‘ï¼Œæ ¹æ®ä¼ å…¥çš„ <code>dependencies</code> å»æ‹¼æ¥éœ€è¦å®‰è£…çš„ä¾èµ–ï¼Œä¸»è¦æœ‰ <code>react</code>,<code>react-dom</code>,<code>react-script</code> ã€‚å†åˆ¤æ–­<code>verbose</code>å’Œ<code>isOnline</code> åŠ ä¸€äº›å‘½ä»¤è¡Œçš„å‚æ•°ã€‚<br>æœ€åå†ç”¨nodeè·‘å‘½ä»¤ï¼Œå¹³å°å·®å¼‚çš„è¯æ˜¯å€ŸåŠ©<a href="https://www.npmjs.com/package/cross-spawn" target="_blank" rel="noopener">cross-spawn</a>å»å¤„ç†çš„ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚<br>å…·ä½“é€»è¾‘è§ä¸Šé¢ä»£ç ï¼Œå»æ‰ä¸é‡è¦çš„ä¿¡æ¯è¾“å‡ºï¼Œä»£ç è¿˜æ˜¯æ¯”è¾ƒæ˜“æ‡‚ã€‚</p>
<blockquote>
<p>install<br>æ ¹æ®ä¼ è¿›æ¥çš„å‚æ•°åˆ¤æ–­ç”¨yarnè¿˜æ˜¯npm<br>æ‹¼è£…éœ€è¦çš„ä¾èµ–<br>ç”¨cross-spawnè·‘å‘½ä»¤å®‰è£…</p>
</blockquote>
<p>åœ¨<code>install</code>ä¼šè¿”å›ä¸€ä¸ª<code>Promise</code>åœ¨å®‰è£…å®Œä¹‹åï¼Œæ–­ç‚¹åˆå›åˆ°æˆ‘ä»¬çš„<code>run</code>å‡½æ•°ç»§ç»­èµ°æ¥ä¸‹æ¥çš„é€»è¾‘ã€‚<br><figure class="highlight javascript"><figcaption><span>createReactApp.js run</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  getPackageName()</span><br><span class="line">    .then(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> install(root, useYarn, allDependencies, verbose, isOnline).then(</span><br><span class="line">            () =&gt; packageName</span><br><span class="line">      );</span><br><span class="line">    &#125;)</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ—¢ç„¶æˆ‘ä»¬çš„<code>install</code>å·²ç»æŠŠå¼€å‘éœ€è¦çš„ä¾èµ–å®‰è£…å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å¼€åˆ¤æ–­å½“å‰è¿è¡Œçš„<code>node</code>æ˜¯å¦ç¬¦åˆæˆ‘ä»¬å·²ç»å®‰è£…çš„<code>react-scripts</code>é‡Œé¢çš„<code>packages.json</code>è¦æ±‚çš„nodeç‰ˆæœ¬ã€‚<br>è¿™å¥è¯æœ‰ç‚¹ç»•ï¼Œç®€å•æ¥è¯´å°±æ˜¯åˆ¤æ–­å½“å‰è¿è¡Œçš„nodeç‰ˆæœ¬æ˜¯å¦<code>react-scripts</code>è¿™ä¸ªä¾èµ–æ‰€éœ€ã€‚</p>
<p>ç„¶åå°±æŠŠå¼€å§‹ä¿®æ”¹<code>package.json</code>æˆ‘ä»¬å·²ç»å®‰è£…çš„ä¾èµ–(react, react-dom, react-scripts)ç‰ˆæœ¬ä»åŸæœ¬çš„ç²¾ç¡®ç‰ˆæœ¬eg(16.0.0)ä¿®æ”¹ä¸ºé«˜äºç­‰äºç‰ˆæœ¬eg(^16.0.0)ã€‚<br>è¿™äº›å¤„ç†åšå®Œä¹‹åï¼Œæˆ‘ä»¬çš„ç›®å½•æ˜¯é•¿è¿™æ ·å­çš„ï¼Œé‡Œé¢é™¤äº†å®‰è£…çš„ä¾èµ–å’Œ<code>package.json</code>å¤–æ²¡æœ‰ä»»ä½•ä¸œè¥¿ã€‚æ‰€ä»¥æ¥ä¸‹æ¥çš„æ“ä½œæ˜¯ç”Ÿæˆä¸€äº›webpackçš„é…ç½®å’Œä¸€ä¸ªç®€å•çš„å¯å¯åŠ¨demoã€‚<br><img src="./create-react-app1.png" alt></p>
<p>é‚£ä¹ˆä»–æ˜¯æ€ä¹ˆå¿«é€Ÿç”Ÿæˆè¿™äº›ä¸œè¥¿çš„å‘¢ï¼Ÿ<br>è¿˜è®°å¾—ä¸€å¼€å§‹è¯´äº†æœ‰ä¸€ä¸ª éšè—çš„å‘½ä»¤è¡Œå‚æ•° <code>--internal-testing-template</code> ç”¨æ¥ç»™å¼€å‘è€…è°ƒè¯•ç”¨çš„å—ï¼Œæ‰€ä»¥å…¶å®create-react-appç”Ÿæˆè¿™äº›çš„æ–¹æ³•å°±æ˜¯ç›´æ¥æŠŠæŸä¸€ä¸ªè·¯å¾„çš„æ¨¡æ¿æ‹·è´åˆ°å¯¹åº”çš„åœ°æ–¹ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ç²—æš´hhhhh</p>
<figure class="highlight javascript"><figcaption><span>createReactApp.js run</span></figcaption><table><tr><td class="code"><pre><span class="line">run(...) &#123;</span><br><span class="line">  ...</span><br><span class="line">    getPackageName(packageToInstall)</span><br><span class="line">    .then(...)</span><br><span class="line">    .then(<span class="function"><span class="params">info</span> =&gt;</span> install(...).then(<span class="function"><span class="params">()</span>=&gt;</span> packageName))</span><br><span class="line">    <span class="comment">/** install å®‰è£…å®Œä¹‹åçš„é€»è¾‘ **/</span></span><br><span class="line">    <span class="comment">/** ä»è¿™é‡Œå¼€å§‹æ‹·è´æ¨¡æ¿é€»è¾‘ **/</span></span><br><span class="line">    .then(<span class="function"><span class="params">packageName</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å®‰è£…å®Œ react, react-dom, react-scripts ä¹‹åæ£€æŸ¥å½“å‰ç¯å¢ƒè¿è¡Œçš„nodeç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚</span></span><br><span class="line">      checkNodeVersion(packageName);</span><br><span class="line">      <span class="comment">// è¯¥é¡¹package.jsoné‡Œreact, react-domçš„ç‰ˆæœ¬èŒƒå›´ï¼Œeg: 16.0.0 =&gt; ^16.0.0</span></span><br><span class="line">      setCaretRangeForRuntimeDeps(packageName);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åŠ è½½scriptè„šæœ¬ï¼Œå¹¶æ‰§è¡Œinitæ–¹æ³•</span></span><br><span class="line">      <span class="keyword">const</span> scriptsPath = path.resolve(</span><br><span class="line">        process.cwd(),</span><br><span class="line">        <span class="string">'node_modules'</span>,</span><br><span class="line">        packageName,</span><br><span class="line">        <span class="string">'scripts'</span>,</span><br><span class="line">        <span class="string">'init.js'</span></span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">const</span> init = <span class="built_in">require</span>(scriptsPath);</span><br><span class="line">      <span class="comment">// init æ–¹æ³•ä¸»è¦æ‰§è¡Œçš„æ“ä½œæ˜¯</span></span><br><span class="line">      <span class="comment">// å†™å…¥package.json ä¸€äº›è„šæœ¬ã€‚eg: script: &#123;start: 'react-scripts start'&#125;</span></span><br><span class="line">      <span class="comment">// æ”¹å†™README.MD</span></span><br><span class="line">      <span class="comment">// æŠŠé¢„è®¾çš„æ¨¡ç‰ˆæ‹·è´åˆ°é¡¹ç›®ä¸‹</span></span><br><span class="line">      <span class="comment">// è¾“å‡ºæˆåŠŸä¸åç»­æ“ä½œçš„ä¿¡æ¯</span></span><br><span class="line">      init(root, appName, verbose, originalDirectory, template);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (version === <span class="string">'react-scripts@0.9.x'</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æ—§ç‰ˆæœ¬çš„ react-scripts è¾“å‡ºæç¤º</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å‡ºé”™çš„è¯ï¼ŒæŠŠå®‰è£…äº†çš„æ–‡ä»¶å…¨åˆ äº† å¹¶è¾“å‡ºä¸€äº›æ—¥å¿—ä¿¡æ¯ç­‰</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå®‰è£…å®Œä¾èµ–ä¹‹åï¼Œæ‰§è¡Œ<code>checkNodeVersion</code>åˆ¤æ–­nodeç‰ˆæœ¬æ˜¯å¦ä¸ä¾èµ–ç›¸ç¬¦ã€‚<br>ä¹‹åæ‹¼æ¥è·¯å¾„å»è·‘<code>ç›®å½•/node_modules/react-scripts/scripts/init.js</code>ï¼Œä¼ å‚è®©ä»–å»åšä¸€äº›åˆå§‹åŒ–çš„äº‹æƒ…ã€‚<br>ç„¶åå¯¹å‡ºé”™æƒ…å†µåšä¸€äº›ç›¸åº”çš„å¤„ç†</p>
<h2 id="node-modules-react-scripts-script-init-js"><a href="#node-modules-react-scripts-script-init-js" class="headerlink" title="/node_modules/react-scripts/script/init.js"></a><a href="#/node_modules/react-scripts/script/init.js">/node_modules/react-scripts/script/init.js</a></h2><figure class="highlight javascript"><figcaption><span>ç›®æ ‡æ–‡ä»¶å¤¹/node_modules/react-scripts/script/init.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  appPath,</span></span></span><br><span class="line"><span class="function"><span class="params">  appName,</span></span></span><br><span class="line"><span class="function"><span class="params">  verbose,</span></span></span><br><span class="line"><span class="function"><span class="params">  originalDirectory,</span></span></span><br><span class="line"><span class="function"><span class="params">  template</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ownPackageName = <span class="built_in">require</span>(path.join(__dirname, <span class="string">'..'</span>, <span class="string">'package.json'</span>))</span><br><span class="line">    .name;</span><br><span class="line">  <span class="keyword">const</span> ownPath = path.join(appPath, <span class="string">'node_modules'</span>, ownPackageName);</span><br><span class="line">  <span class="keyword">const</span> appPackage = <span class="built_in">require</span>(path.join(appPath, <span class="string">'package.json'</span>));</span><br><span class="line">  <span class="keyword">const</span> useYarn = fs.existsSync(path.join(appPath, <span class="string">'yarn.lock'</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. æŠŠå¯åŠ¨è„šæœ¬å†™å…¥ç›®æ ‡ package.json </span></span><br><span class="line">  appPackage.scripts = &#123;</span><br><span class="line">    start: <span class="string">'react-scripts start'</span>,</span><br><span class="line">    build: <span class="string">'react-scripts build'</span>,</span><br><span class="line">    test: <span class="string">'react-scripts test --env=jsdom'</span>,</span><br><span class="line">    eject: <span class="string">'react-scripts eject'</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  fs.writeFileSync(</span><br><span class="line">    path.join(appPath, <span class="string">'package.json'</span>),</span><br><span class="line">    <span class="built_in">JSON</span>.stringify(appPackage, <span class="literal">null</span>, <span class="number">2</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. æ”¹å†™README.MDï¼ŒæŠŠä¸€äº›å¸®åŠ©ä¿¡æ¯å†™è¿›å»</span></span><br><span class="line">  <span class="keyword">const</span> readmeExists = fs.existsSync(path.join(appPath, <span class="string">'README.md'</span>));</span><br><span class="line">  <span class="keyword">if</span> (readmeExists) &#123;</span><br><span class="line">    fs.renameSync(</span><br><span class="line">      path.join(appPath, <span class="string">'README.md'</span>),</span><br><span class="line">      path.join(appPath, <span class="string">'README.old.md'</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. æŠŠé¢„è®¾çš„æ¨¡ç‰ˆæ‹·è´åˆ°é¡¹ç›®ä¸‹ï¼Œä¸»è¦æœ‰ public, src/[APP.css, APP.js, index.js,....], .gitignore</span></span><br><span class="line">  <span class="keyword">const</span> templatePath = template</span><br><span class="line">    ? path.resolve(originalDirectory, template)</span><br><span class="line">    : path.join(ownPath, <span class="string">'template'</span>);</span><br><span class="line">  <span class="keyword">if</span> (fs.existsSync(templatePath)) &#123;</span><br><span class="line">    fs.copySync(templatePath, appPath);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  fs.move(</span><br><span class="line">    path.join(appPath, <span class="string">'gitignore'</span>),</span><br><span class="line">    path.join(appPath, <span class="string">'.gitignore'</span>),</span><br><span class="line">    [],</span><br><span class="line">    err =&gt; &#123; <span class="comment">/* é”™è¯¯å¤„ç† */</span>  &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡Œå†æ¬¡è¿›è¡Œå‘½ä»¤è¡Œçš„æ‹¼æ¥ï¼Œå¦‚æœåé¢å‘ç°æ²¡æœ‰å®‰è£…reactå’Œreact-dom,é‡æ–°å®‰è£…ä¸€æ¬¡</span></span><br><span class="line">  <span class="keyword">let</span> command;</span><br><span class="line">  <span class="keyword">let</span> args;</span><br><span class="line">  <span class="keyword">if</span> (useYarn) &#123;</span><br><span class="line">    command = <span class="string">'yarnpkg'</span>;</span><br><span class="line">    args = [<span class="string">'add'</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    command = <span class="string">'npm'</span>;</span><br><span class="line">    args = [<span class="string">'install'</span>, <span class="string">'--save'</span>, verbose &amp;&amp; <span class="string">'--verbose'</span>].filter(<span class="function"><span class="params">e</span> =&gt;</span> e);</span><br><span class="line">  &#125;</span><br><span class="line">  args.push(<span class="string">'react'</span>, <span class="string">'react-dom'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> templateDependenciesPath = path.join(</span><br><span class="line">    appPath,</span><br><span class="line">    <span class="string">'.template.dependencies.json'</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">if</span> (fs.existsSync(templateDependenciesPath)) &#123;</span><br><span class="line">    <span class="keyword">const</span> templateDependencies = <span class="built_in">require</span>(templateDependenciesPath).dependencies;</span><br><span class="line">    args = args.concat(</span><br><span class="line">      <span class="built_in">Object</span>.keys(templateDependencies).map(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;key&#125;</span>@<span class="subst">$&#123;templateDependencies[key]&#125;</span>`</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">    fs.unlinkSync(templateDependenciesPath);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!isReactInstalled(appPackage) || template) &#123;</span><br><span class="line">    <span class="keyword">const</span> proc = spawn.sync(command, args, &#123; <span class="attr">stdio</span>: <span class="string">'inherit'</span> &#125;);</span><br><span class="line">    <span class="keyword">if</span> (proc.status !== <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(<span class="string">`\`<span class="subst">$&#123;command&#125;</span> <span class="subst">$&#123;args.join(<span class="string">' '</span>)&#125;</span>\` failed`</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5. è¾“å‡ºæˆåŠŸçš„æ—¥å¿—</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>init</code>æ–‡ä»¶åˆæ˜¯ä¸€ä¸ªå¤§å¤´ï¼Œå¤„ç†çš„é€»è¾‘ä¸»è¦æœ‰</p>
<ol>
<li>ä¿®æ”¹package.jsonï¼Œå†™å…¥ä¸€äº›å¯åŠ¨è„šæœ¬ï¼Œæ¯”å¦‚<code>script: {start: &#39;react-scripts start&#39;}</code>ï¼Œç”¨æ¥å¯åŠ¨å¼€å‘é¡¹ç›®</li>
<li>æ”¹å†™README.MDï¼ŒæŠŠä¸€äº›å¸®åŠ©ä¿¡æ¯å†™è¿›å»</li>
<li>æŠŠé¢„è®¾çš„æ¨¡ç‰ˆæ‹·è´åˆ°é¡¹ç›®ä¸‹ï¼Œä¸»è¦æœ‰ <code>public</code>, <code>src/[APP.css, APP.js, index.js,....]</code>, <code>.gitignore</code></li>
<li>å¯¹æ—§ç‰ˆçš„nodeåšä¸€äº›å…¼å®¹çš„å¤„ç†ï¼Œè¿™é‡Œè¡¥ä¸€å¥ï¼Œåœ¨é€‰æ‹© react-scripts æ—¶å°±æœ‰æ ¹æ®nodeç‰ˆæœ¬å»åˆ¤æ–­é€‰æ‹©æ¯”è¾ƒè€çš„ @0.9.x ç‰ˆã€‚</li>
<li>å¦‚æœå®Œæˆè¾“å‡ºå¯¹åº”çš„ä¿¡æ¯ï¼Œå¦‚æœå¤±è´¥ï¼Œåšä¸€äº›è¾“å‡ºæ—¥å¿—ç­‰æ“ä½œã€‚</li>
</ol>
</blockquote>
<p>è¿™é‡Œä»£ç æœ‰ç‚¹å¤šï¼Œæ‰€ä»¥åˆ äº†ä¸€å°éƒ¨åˆ†ï¼Œå¦‚æœå¯¹åˆå§‹çš„ä»£ç æ„Ÿå…´è¶£å¯ä»¥è·³è½¬åˆ°è¿™å„¿çœ‹<a href="https://github.com/facebook/create-react-app/blob/v1.1.4/packages/react-scripts/scripts/init.js" target="_blank" rel="noopener">react-scripts/scripts/init.js ä¼ é€é—¨</a></p>
<h1 id="END"><a href="#END" class="headerlink" title="END~"></a>END~</h1><p>åˆ°è¿™é‡Œ <code>create-react-app</code> é¡¹ç›®æ„å»ºçš„éƒ¨åˆ†å¤§æµç¨‹å·²ç»èµ°å®Œäº†ï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ï¼š</p>
<ol>
<li>åˆ¤æ–­nodeç‰ˆæœ¬å¦‚æœå°äº4å°±é€€å‡ºï¼Œå¦åˆ™æ‰§è¡Œ <code>createReactApp.js</code> æ–‡ä»¶</li>
<li><code>createReactApp.js</code>å…ˆåšä¸€äº›å‘½ä»¤è¡Œçš„å¤„ç†å“åº”å¤„ç†ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦æœ‰ä¼ å…¥ <code>projectName</code> æ²¡æœ‰å°±æç¤ºå¹¶é€€å‡º</li>
<li>æ ¹æ®ä¼ å…¥çš„ <code>projectName</code> åˆ›å»ºç›®å½•ï¼Œå¹¶åˆ›å»º<code>package.json</code>ã€‚</li>
<li>åˆ¤æ–­æ˜¯å¦æœ‰ç‰¹æ®Šè¦æ±‚æŒ‡å®šå®‰è£…æŸä¸ªç‰ˆæœ¬çš„<code>react-scripts</code>ï¼Œç„¶åç”¨<code>cross-spawn</code>å»å¤„ç†è·¨å¹³å°çš„å‘½ä»¤è¡Œé—®é¢˜ï¼Œç”¨<code>yarn</code>æˆ–<code>npm</code>å®‰è£…<code>react</code>, <code>react-dom</code>, <code>react-scripts</code>ã€‚</li>
<li>å®‰è£…å®Œä¹‹åè·‘ <code>react-scripts/script/init.js</code> ä¿®æ”¹ <code>package.json</code> çš„ä¾èµ–ç‰ˆæœ¬ï¼Œè¿è¡Œè„šæœ¬ï¼Œå¹¶æ‹·è´å¯¹åº”çš„æ¨¡æ¿åˆ°ç›®å½•é‡Œã€‚</li>
<li>å¤„ç†å®Œè¿™äº›ä¹‹åï¼Œè¾“å‡ºæç¤ºç»™ç”¨æˆ·ã€‚</li>
</ol>
<p>æœ¬æ¥æƒ³æŠŠæ•´ä¸ª create-react-app è¯´å®Œï¼Œä½†æ˜¯å‘ç°è¯´ä¸€ä¸ªåˆ›å»ºå°±å†™äº†è¿™ä¹ˆå¤šï¼Œæ‰€ä»¥åé¢å¦‚æœæœ‰æƒ³ç»§ç»­çœ‹ <code>react-scripts</code>çš„è¯ï¼Œä¼šå¦å¤–å¼€ä¸€ç¯‡æ¥è®²ã€‚<br>å¤§å®¶ä¹Ÿå¯ä»¥æ ¹æ®è¿™ä¸ªæ€è·¯è‡ªå·±æ–­ç‚¹å»çœ‹ï¼Œä¸è¿‡ <code>react-scripts</code> ä¸»è¦å¯èƒ½æ˜¯webpacké…ç½®å±…å¤šï¼Œæ–­ç‚¹å¸®åŠ©åº”è¯¥ä¸å¤§ã€‚</p>
<h1 id="create-react-appç³»åˆ—ç¬¬äºŒç¯‡ä¼ é€é—¨"><a href="#create-react-appç³»åˆ—ç¬¬äºŒç¯‡ä¼ é€é—¨" class="headerlink" title="create-react-appç³»åˆ—ç¬¬äºŒç¯‡ä¼ é€é—¨"></a><a href="https://jsonz1993.github.io/2018/05/create-react-app-t/">create-react-appç³»åˆ—ç¬¬äºŒç¯‡ä¼ é€é—¨</a></h1>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>2018-04-29é¢è¯•è®°A</title>
    <url>/2018/04/2018-04-29/</url>
    <content><![CDATA[<p>4.10å· å·²ç»åœ¨ç§Ÿç§Ÿè½¦å‘†äº†ä¸€å‘¨å¹´ï¼Œä¸€ç›´æœ‰ä¸ªè§„å¾‹æ˜¯ å¤§æ¦‚ä¸€å¹´å°±è¦å»å¤–é¢æ‰¾æ‰¾è™ã€‚<br>ä¸€æ–¹é¢æ˜¯ä¸ºäº†ä¸‹å¤–é¢çš„å¸‚åœºï¼Œçœ‹ä¸‹æœ‰æ²¡æœ‰æ›´å¥½çš„æœºä¼š<br>å¦ä¸€æ–¹é¢æ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹å¾…ä¹…äº† å¯èƒ½ä¼šå˜å¾—æ¯”è¾ƒå®‰é€¸ï¼Œæ¯”è¾ƒè€æ²¹æ¡ï¼Œè¿™æ—¶å€™å»å¤–é¢å’Œå…¶ä»–å…¬å¸å‰ç«¯é¢è¯•æ²Ÿé€šï¼Œå¯ä»¥äº†è§£å¤–é¢çš„æŠ€æœ¯<br>è®©è‡ªå·±æ›´æœ‰ç›®çš„æ€§ã€æ›´æœ‰åŠ¨åŠ›å»å­¦ä¹ ã€‚</p>
<p>ä½†æ˜¯ä»Šå¹´çš„æƒ…å†µæœ‰ç‚¹å‡ºä¹æˆ‘æ„æ–™ï¼Œä¸çŸ¥é“æ˜¯å› ä¸ºé‡‘ä¸‰é“¶å››åŠ ä¸Šä»Šå¹´è¿‡å¹´æ—©çš„åŸå› ï¼Œæ‰€ä»¥åŸºæœ¬ä¼ä¸šå•ä½å‘éƒ½å¡«æ»¡äº†ï¼Œ<br>è¿˜æ˜¯ç°åœ¨é€‰æ‹©å…¬å¸æ¯”è¾ƒæŒ‘å‰”ï¼Œé«˜ä¸æˆä½ä¸å°±ã€‚</p>
<p>è§„æ¨¡å¤ªå°ä¸æƒ³å»ï¼ŒäºŒä¸‰çº¿äº’è”ç½‘å…¬å¸ï¼ŒåŸºæœ¬åˆè¦æ±‚æœ¬ç§‘â€¦å“ å­¦å†çš„çŸ­æ¿å˜å¾—è¶Šæ¥è¶Šå¤§</p>
<h1 id="ç®€å†æŠ•é€’æƒ…å†µ"><a href="#ç®€å†æŠ•é€’æƒ…å†µ" class="headerlink" title="ç®€å†æŠ•é€’æƒ…å†µ"></a>ç®€å†æŠ•é€’æƒ…å†µ</h1><p>æ®ä¸å®Œå…¨ç»Ÿè®¡:<br>å†…æ¨ <code>YY</code> ä¸åˆé€‚<br>å†…æ¨ <code>æ±‡æ¡”</code> ç›®å‰åªæ‹›5å¹´çš„<br>å†…æ¨ <code>è·¯å®¢</code> é¢è¯• ä¹Ÿæ˜¯ç›®å‰å”¯ä¸€ä¸€ä¸ªæœ‰é¢è¯•æœºä¼šçš„ï¼ï¼ï¼ ä½†æ˜¯è–ªèµ„æ¶¨å¹…ä¸€èˆ¬~<br>æŠ• <code>å¹¿å·é“¶è¡Œä¿¡ç”¨å¡</code> ä¸åˆé€‚ è¦æ±‚æœ¬ç§‘<br>æŠ• <code>ä¸­å…´</code> ä¸åˆé€‚ è¦æ±‚æœ¬ç§‘ = =åæ§½ä¸€å¥ ä¼°è®¡ä¸­å…´ç°åœ¨ä¹Ÿä¸æ•¢æ‹›äººäº†<br>æŠ• <code>è”æ</code> è¢«æŸ¥çœ‹ï¼Œæ²¡æœ‰è”ç³» ä¹Ÿæ˜¯æ²¡æˆäº†<br>Bossç›´è˜<br>æ²Ÿé€š <code>100æ•™è‚²</code> ç›®å‰åªæ‹›5å¹´çš„<br>æ²Ÿé€š <code>æ‹¼å¤šå¤š</code> æƒ¨é­æ— è§† ä¹Ÿæ˜¯è¦æ±‚æœ¬ç§‘</p>
<p>ç°åœ¨bossç›´è˜ï¼Œæ‹‰é’©ç–¯ç‹‚æ²Ÿé€š <code>å°šå¾·æœºæ„</code> å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆå›åº”~ è¦æ±‚ä¹Ÿæ˜¯æœ¬ç§‘ï¼Œè™½ç„¶è¯´æ˜äº†ç›®å‰æ­£åœ¨è‡ªè€ƒæœ¬ç§‘ï¼Œä½†æ˜¯è‡ªè€ƒæ—¶é—´æœ€ç†æƒ³ä¹Ÿè¦ä¸¤å¹´â€¦å“å“</p>
<h1 id="é¢è¯•æƒ…å†µ"><a href="#é¢è¯•æƒ…å†µ" class="headerlink" title="é¢è¯•æƒ…å†µ"></a>é¢è¯•æƒ…å†µ</h1><p>å‰åŒäº‹æ¨çš„ <code>è·¯å®¢</code> æ˜¯å”¯ä¸€çš„é¢è¯•æœºä¼šâ€¦ ä¹‹æ‰€ä»¥æƒ³å»æ˜¯å› ä¸ºï¼Œå½“æ—¶çœ‹äº†ä»–ä»¬çš„app ä½¿ç”¨RNå†™çš„ï¼Œä¸ªäººæ¯”è¾ƒæœ‰å…´è¶£ï¼Œè€Œä¸”ä½“éªŒçš„æ—¶å€™è¿˜è§‰å¾—å¾ˆä¸é”™ã€‚å¾ˆå°‘æœ‰å…¬å¸ä¼šä»é›¶å¼€å§‹ç”¨RNå†™ï¼Œä¸€èˆ¬éƒ½æ˜¯æ¯”è¾ƒè¾¹è§’çš„ è¡¨å•æäº¤å•Š FAQ About ç­‰ç­‰çš„é¡µé¢é‡‡ç”¨åŸç”Ÿå†…åµŒRNå®ç°ã€‚</p>
<p>é¢è¯•æ²¡æœ‰é—®çš„å¾ˆç»†ï¼ŒåŸºæœ¬å°±æ˜¯ç°åœ¨æ¯”è¾ƒå–œæ¬¢çš„é¢è¯•æ–¹å¼</p>
<p>é—®é¡¹ç›®ç»éªŒï¼ŒReactç”Ÿå‘½å‘¨æœŸï¼Œdiffç®—æ³•ï¼Œå¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œå¯¹vueæŒæ¡ç¨‹åº¦ï¼Œæœ‰æ²¡æœ‰åšè¿‡RNé¡¹ç›®ï¼Œç¦»èŒåŸå› ç­‰<br>å…¶ä¸­é—®åˆ°ä¸€ä¸ªæ˜¯ <strong>æœ‰æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ 23ç§è®¾è®¡æ¨¡å¼</strong><br>æˆ‘å½“æ—¶çš„å›ç­”æ˜¯ æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ è¿‡ï¼Œä¸è¿‡å¹³æ—¶å·¥ä½œæœ‰ç”¨åˆ° <code>å·¥å‚æ¨¡å¼</code> <code>å•ä¾‹æ¨¡å¼</code> ç­‰æ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚<br>æƒ³èµ·ä¹‹å‰çœ‹å¼ å®¹é“­çš„ã€ŠJavaScriptè®¾è®¡æ¨¡å¼ã€‹</p>
<h1 id="å­¦ä¹ è®¡åˆ’"><a href="#å­¦ä¹ è®¡åˆ’" class="headerlink" title="å­¦ä¹ è®¡åˆ’"></a>å­¦ä¹ è®¡åˆ’</h1><p>ç°åœ¨å·¥ä½œä¸‰å¹´ï¼Œæ„Ÿè§‰åè€Œæ²¡æœ‰åˆšå¼€å§‹å·¥ä½œé‚£ä¼šåŸºç¡€çŸ¥è¯†ç‰¢å›ºã€‚ä»¥å‰åˆšå…¥è¡Œï¼Œè¿˜ä¸çŸ¥é“<code>jq</code>è¿™ç§ä¸œè¥¿ï¼Œå†™è½®æ’­å›¾ï¼Œå†™æ•ˆæœéƒ½æ˜¯ç”¨åŸç”Ÿjsï¼Œè¿˜å…¼å®¹ie~~~ ä¸èƒ½è¯´ç‰¹åˆ«å¼ï¼Œä½†æ˜¯è‡³å°‘åŸºç¡€å¾ˆç‰¢å›º<br>ç°åœ¨å¥½åƒå„ç±» mv* åº“å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬é™¤äº†ä¸€å¼€å§‹çš„ é¡¹ç›®æ­å»ºï¼Œç»“æ„åˆ’åˆ†ï¼Œè·¯ç”±é…ç½®ç­‰ï¼Œå‰©ä¸‹çš„ä¸»è¦ç²¾åŠ›éƒ½ç”¨æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œæ›´å¤šçš„æ˜¯æƒ³ç€å¦‚ä½•å»è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œè€Œä¸æ˜¯æ­»è®°ç€é‚£äº›ä¸œè¥¿ï¼Œä½†æ˜¯è¿™è¾¹æ‹¿ä¸€å— é‚£è¾¹æ‹¿ä¸€å—ä¼šå¯¼è‡´å¾ˆéš¾å½¢æˆå±äºè‡ªå·±çš„ä¸œè¥¿ã€‚<br>ä¹Ÿæ²¡æœ‰å¾ˆç³»ç»Ÿçš„å­¦ä¹ ä¸€äº›ä¸œè¥¿ï¼Œå¤ªè¿‡æµ®èº</p>
<p>ç›®å‰å­¦ä¹ è®¡åˆ’æ˜¯</p>
<ul>
<li><p>çœ‹ <code>create-react-app</code> æºç ï¼Œäº†è§£æ€ä¹ˆå®ç°ï¼Œæ–­ç‚¹è°ƒè¯•ï¼Œè¾“å‡ºæ–‡ç« </p>
</li>
<li><p>çœ‹ <code>vue</code> æºç ï¼Œç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹<code>vue</code> ç”¨åˆ°é¡¹ç›®ä¸Šï¼Œè€Œä¸æ˜¯åœç•™åˆ° çœ‹è¿‡apiçš„å±‚æ¬¡<br>emmmm æƒ³èµ·vueåˆšå‡ºçš„æ—¶å€™ï¼Œç”¨äº†ä¸€ä¸ªé¥¿äº†ä¹ˆå‡ºçš„ ç§»åŠ¨ç«¯uiåº“ <a href="https://github.com/ElemeFE/mint-ui" target="_blank" rel="noopener">mint-ui</a> è¿˜è´¡çŒ®è¿‡ä¸€ç‚¹ç‚¹bug-request</p>
</li>
<li><p>æœ‰å…³äº node åå°çš„é¡¹ç›®æœºä¼šç§¯æä¸€ç‚¹ï¼Œç¡¬ç€å¤´çš®ä¸Š</p>
</li>
</ul>
<p>ä»¥ä¸Š~ emmmm æœ€åå¤šæŠ•çœ‹çœ‹è¿˜æœ‰ä»€ä¹ˆé¢è¯•æœºä¼šâ€¦ å°šå¾·æ²¡æœ‰å¾—é¢è¯•çœŸæ˜¯æœ‰ç‚¹å¤±è½</p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‹ä»¶é‡å¤ç»‘å®šä¸stopImmediatePropagation</title>
    <url>/2018/04/%E4%BA%8B%E4%BB%B6%E9%87%8D%E5%A4%8D%E7%BB%91%E5%AE%9A%E4%B8%8EstopImmediatePropagation/</url>
    <content><![CDATA[<p>åœ¨æ—§é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç»‘å®šäº‹ä»¶éƒ½æ˜¯ç”¨ <code>$(&#39;selector&#39;).on(&#39;event&#39;, fn)</code> || <code>document.querySelector(&#39;selector&#39;).addEventListener(&#39;event&#39;, fn)</code>;</p>
<p>å¦‚æœå¹³æ—¶ä»£ç è§„èŒƒï¼Œè¿™æ ·å†™å®Œå…¨ojbk ç‚¹å‡»<code>.p</code> ä¹‹åè¾“å‡º <code>test1</code><br><figure class="highlight html"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"p"</span>&gt;</span>test1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">selector, fn</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">		<span class="built_in">document</span>.querySelector(selector).addEventListener(<span class="string">'click'</span>,fn);</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="javascript">	add(<span class="string">'.p'</span>, e=&gt; <span class="built_in">console</span>.log(e.currentTarget.innerHTML));</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯å¹³æ—¶å¦‚æœé¡¹ç›®ä¸è§„èŒƒï¼Œä»£ç åˆå†™çš„æ¯”è¾ƒä¹±â€¦.emmmmï¼Œå¾ˆæœ‰å¯èƒ½å‡ºç°ä¸€äº›é€»è¾‘ä¸Šçš„ä½çº§é”™è¯¯ï¼Œæ¯”å¦‚è¿™ç§ï¼Œåœ¨æŸä¸ªå‡½æ•°è°ƒäº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç»‘å®šäº†ä¸¤æ¬¡â€¦ç‚¹å‡»ä¹‹åä¼šè¾“å‡ºä¸¤æ¬¡çš„ <code>test</code><br><figure class="highlight html"><figcaption><span>demo2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"p"</span>&gt;</span>test1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p1"</span>&gt;</span>test2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">selector, fn</span>) </span>&#123; <span class="built_in">document</span>.querySelector(selector).addEventListener(<span class="string">'click'</span>,fn); &#125;</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123; add(<span class="string">'.p'</span>, e=&gt; <span class="built_in">console</span>.log(e.currentTarget.innerHTML)); &#125;;</span></span><br><span class="line">	fn1();</span><br><span class="line">	fn1();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™ç§æƒ…å†µå¹³æ—¶å·¥ä½œä¸æ³¨æ„çœŸçš„æœ‰å¯èƒ½å‘ç”Ÿï¼Œè€Œä¸”æ’æŸ¥ä¹Ÿåªèƒ½è¯´å¹³æ—¶åœ¨çœ‹æ¥å£æˆ–æ”¹ä»£ç çš„æ—¶å€™ å‘ç°éšæ‰‹æ”¹<br><img src="./repetition.png" alt="é‡å¤è°ƒæ¥å£æƒ…å†µ"></p>
<p>ä¸€èˆ¬ä¸ºäº†é¿å…è¿™ç§å¤±è¯¯é‡å¤è°ƒç”¨çš„æ“ä½œï¼Œæœ‰å‡ ç§æ–¹æ³•ï¼š</p>
<ol>
<li><p>æŠŠäº‹ä»¶å¤„ç†å‡½æ•°æŠ½å‡ºæ¥,è¿™æ ·å°±ç®—é‡å¤ç»‘å®šï¼Œæµè§ˆå™¨æ£€æµ‹åˆ°æ˜¯åŒä¸ªå‡½æ•°å¼•ç”¨ï¼Œä¼šåšç›¸åº”çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥ä¸ä¼šé‡å¤ç»‘å®šåˆ°äº‹ä»¶ä¸Š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">selector, fn</span>) </span>&#123; <span class="built_in">document</span>.querySelector(selector).addEventListener(<span class="string">'click'</span>,fn); &#125;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">const</span> evFn= <span class="function"><span class="params">e</span>=&gt;</span> <span class="built_in">console</span>.log(e.currentTarget.innerHTML);</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123; add(<span class="string">'.p'</span>,  evFn)&#125;;</span></span><br><span class="line">	fn1();</span><br><span class="line">	fn1();</span><br><span class="line">	fn1();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopImmediatePropagation" target="_blank" rel="noopener">event.stopImmediatePropagation</a><br>å®˜æ–¹ç»™å‡ºçš„è¯´æ˜æ˜¯ï¼š<br>å¦‚æœæŸä¸ªå…ƒç´ æœ‰å¤šä¸ªç›¸åŒç±»å‹äº‹ä»¶çš„äº‹ä»¶ç›‘å¬å‡½æ•°,åˆ™å½“è¯¥ç±»å‹çš„äº‹ä»¶è§¦å‘æ—¶,å¤šä¸ªäº‹ä»¶ç›‘å¬å‡½æ•°å°†æŒ‰ç…§é¡ºåºä¾æ¬¡æ‰§è¡Œ.å¦‚æœæŸä¸ªç›‘å¬å‡½æ•°æ‰§è¡Œäº† event.stopImmediatePropagation()æ–¹æ³•,åˆ™é™¤äº†è¯¥äº‹ä»¶çš„å†’æ³¡è¡Œä¸ºè¢«é˜»æ­¢ä¹‹å¤–(event.stopPropagationæ–¹æ³•çš„ä½œç”¨),è¯¥å…ƒç´ ç»‘å®šçš„ååºç›¸åŒç±»å‹äº‹ä»¶çš„ç›‘å¬å‡½æ•°çš„æ‰§è¡Œä¹Ÿå°†è¢«é˜»æ­¢.</p>
</li>
</ol>
<p>ç®€å•æ¥è¯´å°±æ˜¯ï¼Œæ‰§è¡Œäº†<code>event.stopImmediatePropagation()</code> ä¹‹åï¼Œåç»­çš„ç»‘å®šåœ¨è¯¥domä¸Šçš„ç›¸åŒç±»å‹äº‹ä»¶éƒ½ä¸å†è¢«å“åº”ï¼Œä¹Ÿä¸å†’æ³¡ã€‚</p>
<p><code>demo3</code> ä»£ç ï¼Œç‚¹å‡» test1 ä¹‹åï¼Œåªä¼šåœ¨æ§åˆ¶å°è¾“å‡ºä¸€è¡Œ <code>test1</code>ï¼Œå…¶ä»– è¯¥å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼Œ#idç‚¹å‡»äº‹ä»¶éƒ½ä¸ä¼šè¢«å“åº”<br><figure class="highlight html"><figcaption><span>demo3</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"p"</span>&gt;</span>test1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">selector, fn</span>) </span>&#123; <span class="built_in">document</span>.querySelector(selector).addEventListener(<span class="string">'click'</span>,fn); &#125;</span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123; add(<span class="string">'.p'</span>,  e=&gt; <span class="built_in">console</span>.log(e.currentTarget.innerHTML)|| e.stopImmediatePropagation())&#125;;</span></span><br><span class="line"><span class="javascript">	add(<span class="string">'#id'</span>,e=&gt;<span class="built_in">console</span>.log(<span class="number">1</span>));</span></span><br><span class="line">	fn1();</span><br><span class="line">	fn1();</span><br><span class="line">	fn1();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿˜æ˜¯æ¯”è¾ƒå»ºè®®æŠŠäº‹ä»¶å¤„ç†é€»è¾‘æŠ½å‡ºæ¥å½“ä¸€ä¸ªå‡½æ•°ï¼Œæ¯•ç«Ÿåœ¨å¤šäººé¡¹ç›®é‡Œé¢ <code>stopImmediatePropagation</code> æ¯”è¾ƒå®¹æ˜“è¯¯ä¼¤é˜Ÿå‹â€¦</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªåŠ¨åŒ–åŠŸèƒ½æµ‹è¯•æµç¨‹æ–¹æ¡ˆ</title>
    <url>/2018/04/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>å¾—ç›Šäºè°·æ­Œå¼€æºäº† <a href="https://github.com/GoogleChrome/puppeteer" target="_blank" rel="noopener">puppeteer</a> æ— ç•Œé¢ç‰ˆçš„ Chrome nodeJs apiã€‚<br>ç°åœ¨å‰ç«¯å¯å¾ˆæ–¹ä¾¿å¿«æ·çš„å¼€å‘ä¸€äº›è„šæœ¬å»è·‘æµè§ˆå™¨ç«¯çš„æ“ä½œï¼ŒåŒ…æ‹¬è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œçˆ¬è™«æˆ–å…¶ä»–æ¯”è¾ƒæœºæ¢°åŒ–çš„æ“ä½œã€‚<br>å¯ä»¥å‚è§æˆ‘ä¸Šä¸€ç¯‡æ–‡<br><strong><a href="https://jsonz1993.github.io/2018/03/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95puppeteer-%E4%B8%8Eqq%E7%A9%BA%E9%97%B4/">è‡ªåŠ¨åŒ–æµ‹è¯• puppeteer ä¸qqç©ºé—´</a></strong></p>
<p>ps: ğŸ¤¦â€ æ—©çŸ¥é“å½“æ—¶åˆ å¾®åšå°±ç›´æ¥å†™ä¸€ä¸ªè„šæœ¬ï¼Œäººå·¥å»åˆ è¿˜æ¼äº†ä¸€äº›è¢«æ‰¹æ–—äº†ä¸€é¡¿</p>
<p>æ—¢ç„¶ puppeteer å¯ä»¥æ‹¿æ¥åšè¿™ä¹ˆå¤šäº‹æƒ…ï¼Œé‚£å‰ç«¯æ˜¯ä¸æ˜¯å¯ä»¥æ•´åˆå‡ºä¸€å¥—æµç¨‹æµ‹è¯•çš„æ–¹æ¡ˆï¼Ÿ</p>
<h2 id="å¤§æ¦‚çš„æµç¨‹æ˜¯ï¼š"><a href="#å¤§æ¦‚çš„æµç¨‹æ˜¯ï¼š" class="headerlink" title="å¤§æ¦‚çš„æµç¨‹æ˜¯ï¼š"></a>å¤§æ¦‚çš„æµç¨‹æ˜¯ï¼š</h2><ul>
<li>å®šæ—¶è·‘ä¸šåŠ¡æµç¨‹</li>
<li>æˆåŠŸåˆ™å‘é€ä¸€æ¡æ¶ˆæ¯é€šçŸ¥æœåŠ¡å™¨</li>
<li>å¤±è´¥åˆ™ æˆªå›¾å‘é€æˆªå›¾ä¸å…¶ä»–ä¿¡æ¯<ul>
<li>åˆ°è¾¾ä¸€å®šçš„é˜ˆå€¼å°±é€šçŸ¥ç›¸å…³äººå‘˜æ’æŸ¥é—®é¢˜</li>
</ul>
</li>
<li>æä¾›ä¸€ä¸ªå‰ç«¯é¡µé¢å¯ä»¥æŸ¥è¯¢ ä»»åŠ¡æƒ…å†µ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">                                        +-------------------+</span><br><span class="line">        +-----------------------------&gt; |    è®°å½•æ¶ˆæ¯         |</span><br><span class="line">        |          success              |                   |</span><br><span class="line">        |                               +------+------------+</span><br><span class="line">        |                                      |</span><br><span class="line">+-------+------+                               |</span><br><span class="line">|              |                               v</span><br><span class="line">| å®šæ—¶è·‘æµ‹è¯•ä»»åŠ¡  |                         +-----+-----------+</span><br><span class="line">|              |                         |                 |</span><br><span class="line">|              |                         |                 |</span><br><span class="line">+------+-------+                         |    æŸ¥çœ‹ä»»åŠ¡è®°å½•   |</span><br><span class="line">       |                                 |                 |</span><br><span class="line">       |                                 |                 |</span><br><span class="line">       |                                 +-----+-----------+</span><br><span class="line">       |                                       ^</span><br><span class="line">       |                                       |</span><br><span class="line">       |          error                  +-----+----------+</span><br><span class="line">       |                                 |                |</span><br><span class="line">       +-------------------------------&gt; |    è®°å½•æ¶ˆæ¯      |</span><br><span class="line">                                         |                |</span><br><span class="line">                                         |                |</span><br><span class="line">                                         +-------+--------+</span><br><span class="line">                                                 |</span><br><span class="line">                                                 |</span><br><span class="line">                                                 |  é˜ˆå€¼</span><br><span class="line">                                                 |</span><br><span class="line">                                        +--------v---------+</span><br><span class="line">                                        |                  |</span><br><span class="line">                                        |                  |</span><br><span class="line">                                        |      é€šçŸ¥äººå‘˜      |</span><br><span class="line">                                        |                  |</span><br><span class="line">                                        |                  |</span><br><span class="line">                                        +------------------+</span><br></pre></td></tr></table></figure>
<h2 id="ç”¨åˆ°çš„æŠ€æœ¯æ ˆ"><a href="#ç”¨åˆ°çš„æŠ€æœ¯æ ˆ" class="headerlink" title="ç”¨åˆ°çš„æŠ€æœ¯æ ˆ"></a>ç”¨åˆ°çš„æŠ€æœ¯æ ˆ</h2><p>è‡ªåŠ¨åŒ–æµ‹è¯•: puppeteer + axios + node-schedule<br>åå°: egg + mongoose<br>å‰ç«¯ç•Œé¢: antd + dva</p>
<p>å…¶å®ä¸»è¦å°± puppeteer + egg + mongoose å³å¯ï¼Œå‰ç«¯ç•Œé¢åªæ˜¯åˆšå¥½å…¬å¸ä¸€ä¸ªåå°æ˜¯ç”¨ antd-pro å†™çš„ æ‰€ä»¥é¡ºæ‰‹å¸¦ä¸Šå»è€Œå·² = =#</p>
<p>æœ¬åœ°ä¸€äº›ç¯å¢ƒï¼š<code>node 8.9.4</code>, <code>npm 5.6.0</code>, <code>oxs 10.13.3</code>ï¼Œ ç¼–è¾‘å™¨ <code>vscodeeeeee</code></p>
<p>ä»¥ä¸‹æ¶‰åŠåˆ°å…¬å¸é¡¹ç›®ä¸šåŠ¡çš„ éƒ½ä¼šç•¥è¿‡è®²ä¸€ä¸‹è¿‡ç¨‹ ä¸ä¼šå‡ºç°å…·ä½“ä»£ç æˆ–æˆªå›¾ç­‰â€¦</p>
<h1 id="è‡ªåŠ¨åŒ–æµ‹è¯•-auto-test-éƒ¨åˆ†"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•-auto-test-éƒ¨åˆ†" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯•(auto_test)éƒ¨åˆ†"></a>è‡ªåŠ¨åŒ–æµ‹è¯•(auto_test)éƒ¨åˆ†</h1><p>ç›®å½•ç»“æ„:<br><img src="./auto_test_project.png" alt="auto_test_project"></p>
<h2 id="å…¥å£-app-js-ä¸»è¦å¤„ç†ä¸€äº›è·å–è‡ªåŠ¨åŒ–æµ‹è¯•æµè§ˆå™¨çš„å¯¹è±¡ï¼Œ-é¡¹ç›®å¯åŠ¨ï¼Œ-å®šæ—¶ä»»åŠ¡å¯åŠ¨"><a href="#å…¥å£-app-js-ä¸»è¦å¤„ç†ä¸€äº›è·å–è‡ªåŠ¨åŒ–æµ‹è¯•æµè§ˆå™¨çš„å¯¹è±¡ï¼Œ-é¡¹ç›®å¯åŠ¨ï¼Œ-å®šæ—¶ä»»åŠ¡å¯åŠ¨" class="headerlink" title="å…¥å£: app.js ä¸»è¦å¤„ç†ä¸€äº›è·å–è‡ªåŠ¨åŒ–æµ‹è¯•æµè§ˆå™¨çš„å¯¹è±¡ï¼Œ é¡¹ç›®å¯åŠ¨ï¼Œ å®šæ—¶ä»»åŠ¡å¯åŠ¨"></a>å…¥å£: app.js ä¸»è¦å¤„ç†ä¸€äº›è·å–è‡ªåŠ¨åŒ–æµ‹è¯•æµè§ˆå™¨çš„å¯¹è±¡ï¼Œ é¡¹ç›®å¯åŠ¨ï¼Œ å®šæ—¶ä»»åŠ¡å¯åŠ¨</h2><figure class="highlight javascript"><figcaption><span>app.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mMonitor = <span class="built_in">require</span>(<span class="string">'./scripts/m'</span>);  <span class="comment">// mç«¯æµ‹è¯•è„šæœ¬å…¥å£</span></span><br><span class="line"><span class="keyword">const</span> xDate = <span class="built_in">require</span>(<span class="string">'xdate'</span>);</span><br><span class="line"><span class="keyword">const</span> login = <span class="built_in">require</span>(<span class="string">'./scripts/login'</span>); <span class="comment">// ç™»å½•æ“ä½œå¤„ç†</span></span><br><span class="line"><span class="keyword">const</span> &#123; scheduleDelPic &#125; = <span class="built_in">require</span>(<span class="string">'./scripts/schedule'</span>); <span class="comment">// å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é¡¹ç›®å…¥å£</span></span><br><span class="line">;<span class="function">(<span class="params"><span class="keyword">async</span>(</span>)=&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å› ä¸ºå…¬å¸é¡¹ç›®éœ€è¦ä¸€äº›å‰ç½®çš„ æ“ä½œæ‰èƒ½è®¿é—®ï¼Œæ¯”å¦‚ç™»å½•ç®¡ç†åå°ç­‰æ“ä½œï¼Œ</span></span><br><span class="line">  <span class="comment">// æ‰€ä»¥è¿™é‡Œç›´æ¥ç”¨ä¸€ä¸ªæ–‡ä»¶æŠŠè¿™ä¸€å—æŠ½å‡ºæ¥ï¼Œæ–¹ä¾¿åé¢ä¸“å¿ƒå¤„ç†ä¸šåŠ¡ ä¸ç”¨å…³å¿ƒç”¨æˆ·ç™»å½• æƒé™ æµ‹è¯•è´¦å·ç­‰é—®é¢˜</span></span><br><span class="line">  <span class="comment">// å¤„ç†å®Œç›´æ¥è¿”å›ä¸€ä¸ª browser å¯¹è±¡ï¼Œåé¢çš„å…¶ä»–æµ‹è¯•åªéœ€è¦åœ¨å½“å‰çš„ browser æ–°å¼€ä¸€ä¸ªtabå»è·‘å³å¯</span></span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> login();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// mç«¯é¡¹ç›®</span></span><br><span class="line">  mMonitor(browser); <span class="comment">// ä¼ å…¥browser å¯¹è±¡ å¼€å§‹å¤„ç†è‡ªåŠ¨åŒ–æµ‹è¯•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 10åˆ†é’Ÿè·‘ä¸€æ¬¡ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æŠŠé—´éš”æŠ½å‡ºæ¥æ”¾åˆ°configé‡Œ</span></span><br><span class="line">  <span class="comment">// å¤šå˜´è¯´ä¸€å¥ï¼Œç”¨setInterval æœ‰ä¸€ä¸ªå¼Šç«¯å°±æ˜¯ï¼Œå‰é¢æ‰§è¡Œè„šæœ¬å µå¡ï¼Œä¼šé€ æˆ ä¸€ä¸ªä»»åŠ¡è·‘å®Œ ç›´æ¥è·‘ä¸‹ä¸€ä¸ªï¼Œä¸­é—´ä¸æ˜¯é—´éš”10minã€‚ çœ‹å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥ç”¨ setTimeout æˆ–è€…é€’å½’ç­‰å»æ‰§è¡Œ</span></span><br><span class="line">  setInterval(<span class="function"><span class="params">()</span> =&gt;</span> mMonitor(browser), <span class="number">1000</span> * <span class="number">3600</span> * <span class="number">1</span>); </span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¶ä»–çš„ä»»åŠ¡ å®šæ—¶ä»»åŠ¡ç­‰</span></span><br><span class="line">  <span class="comment">// è¿™é‡Œæ˜¯å†™äº†ä¸ªå®šæ—¶æ¸…ç†å›¾ç‰‡</span></span><br><span class="line">  scheduleDelPic();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h2 id="å‰ç½®å¤„ç†-login-js-è¿™é‡Œå¯ä»¥å–å…¶ä»–åå­—"><a href="#å‰ç½®å¤„ç†-login-js-è¿™é‡Œå¯ä»¥å–å…¶ä»–åå­—" class="headerlink" title="å‰ç½®å¤„ç†: login.js (è¿™é‡Œå¯ä»¥å–å…¶ä»–åå­—)"></a>å‰ç½®å¤„ç†: login.js (è¿™é‡Œå¯ä»¥å–å…¶ä»–åå­—)</h2><p>å¯¹äºæˆ‘è¿™ä¸ªé¡¹ç›®æ¥è¯´ åœ¨å¼€å§‹è·‘ä¹‹å‰è¦å¤„ç†æµ‹è¯•è´¦å·ç™»å½•ç­‰é—®é¢˜ï¼Œå› ä¸ºè€ƒè™‘åˆ°åé¢ä¼šæœ‰å¤šä¸ªä»»åŠ¡åœ¨è·‘çš„è¯ï¼Œç›´æ¥åœ¨ <code>browser</code> å¯¹è±¡ create new tab å¯ä»¥åŒæ­¥è·‘ï¼Œè€Œä¸ç”¨æ¯æ¬¡éƒ½å»å¤„ç†ç™»å½•é—®é¢˜ã€‚</p>
<figure class="highlight javascript"><figcaption><span>login.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">'puppeteer'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;</span><br><span class="line">    headless: <span class="literal">false</span>,</span><br><span class="line">    devtools: <span class="literal">true</span>,</span><br><span class="line">    slowMo: <span class="number">100</span>,</span><br><span class="line">    ignoreHTTPSErrors: <span class="literal">true</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†ä¸€äº›å…¶ä»–çš„é€»è¾‘</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="comment">// æŠŠå¤„ç†å®Œçš„ browser è¿”å›å›å»</span></span><br><span class="line">  <span class="keyword">return</span> browser;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="mMonitor-ç§»åŠ¨ç«¯æµ‹è¯•ä»»åŠ¡"><a href="#mMonitor-ç§»åŠ¨ç«¯æµ‹è¯•ä»»åŠ¡" class="headerlink" title="mMonitor ç§»åŠ¨ç«¯æµ‹è¯•ä»»åŠ¡"></a>mMonitor ç§»åŠ¨ç«¯æµ‹è¯•ä»»åŠ¡</h2><p>ä¸»è¦å¤„ç†çš„äº‹æƒ…æœ‰ï¼š</p>
<ul>
<li>è°ƒç”¨å…¶ä»–çš„æµç¨‹æµ‹è¯•ä»»åŠ¡ï¼Œæ¯”å¦‚æˆ‘æ˜¯ï¼š å…¬å¸é¡¹ç›®çš„ä¸»æµç¨‹ä¸‹å•ä»»åŠ¡</li>
<li>å¤„ç†ä¸€äº›éœ€è¦è®°å½•çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä»ä»€ä¹ˆæ—¶å€™è·‘ï¼Œä»€ä¹ˆæ—¶å€™ç»“æŸ</li>
<li>å¤„ç†ä¸æœåŠ¡å™¨çš„äº¤äº’ï¼ŒæˆåŠŸè°ƒæ¥å£</li>
<li>å¤±è´¥æˆªå›¾ä¿å­˜ç”¨æˆ·ä¿¡æ¯ç­‰ ä¼ é€’ç»™æœåŠ¡ç«¯</li>
</ul>
<figure class="highlight javascript"><figcaption><span>m.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">mMonitor</span>(<span class="params">browser</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å»ºç«‹ä¸€ä¸ª page çš„å¼•ç”¨ï¼Œæ–¹ä¾¿åé¢å¯ä»¥è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">let</span> page;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    startTime = <span class="built_in">Date</span>.now();</span><br><span class="line"></span><br><span class="line">    page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠé¡µé¢ä¼ å…¥ä¸»æµç¨‹çš„æµ‹è¯•ä»»åŠ¡</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œé¢å°±æœ‰è¶…çº§æ— æ•Œå¤§é‡çš„ ä¸šåŠ¡ä»£ç ... emmm æ ¹æ®é¡¹ç›®ä¸åŒæ¥å†™ å®Œå…¨æ²¡æœ‰å‚è€ƒæ„ä¹‰å°±ä¸å†™äº†</span></span><br><span class="line">    <span class="keyword">await</span> mainProcess(page);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•ä»»åŠ¡æ‰§è¡ŒæˆåŠŸçš„å¤„ç†</span></span><br><span class="line">    <span class="keyword">const</span> params = &#123; </span><br><span class="line">      <span class="comment">// æµ‹è¯•ç»“æœæ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒæ¥å£å­˜æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> mRequest(params);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¸ŠæŠ¥successæ¥å£æˆåŠŸ'</span>, params);</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    <span class="comment">// è·‘æµ‹è¯•æµç¨‹ä¸­é”™è¯¯çš„å¯¹åº”å¤„ç†</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> params = &#123;</span><br><span class="line">      <span class="comment">// é”™è¯¯ç»“æœçš„æ•°æ®ï¼Œ æ¯”å¦‚ </span></span><br><span class="line">      <span class="comment">// æˆªå›¾åœ°å€url</span></span><br><span class="line">      <span class="comment">// title</span></span><br><span class="line">      <span class="comment">// url</span></span><br><span class="line">      <span class="comment">// serviceCode ç­‰ç­‰</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> mRequest(params);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¸ŠæŠ¥error æ¥å£æˆåŠŸ'</span>, params);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// å…³é—­å½“å‰é¡µé¢</span></span><br><span class="line">    page.close();</span><br><span class="line">    <span class="comment">// å…¶ä»–æ“ä½œ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="schedule-å®šæ—¶ä»»åŠ¡"><a href="#schedule-å®šæ—¶ä»»åŠ¡" class="headerlink" title="schedule å®šæ—¶ä»»åŠ¡"></a>schedule å®šæ—¶ä»»åŠ¡</h2><p>è¿™é‡Œçš„å®šæ—¶ä»»åŠ¡ç”¨çš„æ˜¯ <a href="https://www.npmjs.com/package/node-schedule" target="_blank" rel="noopener">node-schedule</a> éå¸¸å¥½ç”¨ æ”¯æŒ <code>Cron-style</code>ã€‚</p>
<p><code>schedule.scheduleJob(cronStyle)</code></p>
<p>cronStyle å‚æ•° ä¼ å…¥å¯¹åº”çš„æ—¶é—´ï¼Œæ—¢å¯æŒ‰ç…§ä¼ å…¥çš„å‚æ•° å®šæ—¶å»æ‰§è¡Œï¼Œå…·ä½“å¯ä»¥çœ‹ğŸ‘†é“¾æ¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cronStyle: </span><br><span class="line"></span><br><span class="line">*    *    *    *    *    *</span><br><span class="line">â”¬    â”¬    â”¬    â”¬    â”¬    â”¬</span><br><span class="line">â”‚    â”‚    â”‚    â”‚    â”‚    â”‚</span><br><span class="line">â”‚    â”‚    â”‚    â”‚    â”‚    â”” day of week (0 - 7) (0 or 7 is Sun)</span><br><span class="line">â”‚    â”‚    â”‚    â”‚    â””â”€â”€â”€â”€â”€ month (1 - 12)</span><br><span class="line">â”‚    â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of month (1 - 31)</span><br><span class="line">â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ hour (0 - 23)</span><br><span class="line">â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ minute (0 - 59)</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ second (0 - 59, OPTIONAL)</span><br></pre></td></tr></table></figure>
<p>ç›®å‰ <code>auto_test</code> ç”¨åˆ°çš„å®šæ—¶ä»»åŠ¡åªæœ‰ä¸€ä¸ª<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> schedule= <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤æŸä¸ªç›®å½•çš„ä¸€å±‚æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delPathFile</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fs.existsSync(path)) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">const</span> files = fs.readdirSync(path);</span><br><span class="line">  files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> fs.unlinkSync(<span class="string">`<span class="subst">$&#123;path&#125;</span>/<span class="subst">$&#123;file&#125;</span>`</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šæ—¶åˆ é™¤å›¾ç‰‡ï¼Œæ¯å‘¨ä¸€ä¸€æ¬¡</span></span><br><span class="line">exports.scheduleDelPic = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> initPath = path.join(process.cwd(), <span class="string">'/static/init'</span>);</span><br><span class="line">  <span class="keyword">const</span> errorPath = path.join(process.cwd(), <span class="string">'/static/error'</span>);</span><br><span class="line">  <span class="keyword">const</span> successPath = path.join(process.cwd(), <span class="string">'/static/success'</span>);</span><br><span class="line"></span><br><span class="line">  schedule.scheduleJob(<span class="string">'* * * * * 1'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    delPathFile(initPath);</span><br><span class="line">    delPathFile(errorPath);</span><br><span class="line">    delPathFile(successPath);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ€»çš„æ¥è¯´ <code>auto_test</code> åšçš„äº‹æƒ…å¤§æ¦‚å°±æ˜¯</p>
<ul>
<li>å¯åŠ¨ <code>app.js</code>ï¼Œ é¡¹ç›®å°±ä¼š 10åˆ†é’Ÿè‡ªåŠ¨è·‘ä¸€æ¬¡æµ‹è¯•ç¨‹åºã€‚</li>
<li>æˆåŠŸã€å¤±è´¥ååšå‡ºå¯¹åº”çš„æ“ä½œã€‚</li>
<li>æ¯å‘¨æ¸…é™¤ä¸€æ¬¡æœ¬åœ°çš„æˆªå›¾æ•°æ®ã€‚</li>
</ul>
<p>ä½†æ˜¯å‡ ä¸ªå¼Šç«¯</p>
<ol>
<li>puppeteer æ˜¯æ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œæ‰€ä»¥ä½ çš„æ‰€æœ‰è¡Œä¸ºéƒ½æ˜¯æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œï¼šé€‰æ‹©domï¼Œç‚¹å‡»ã€å¡«å†™ã€é€‰æ‹©æ“ä½œã€‚è¿™äº›éƒ½æ˜¯å¾ˆå®¹æ˜“å› ä¸ºé¡µé¢çš„domå˜åŒ–è€Œå¤±æ•ˆï¼Œæ¯”å¦‚æœ¬æ¥æ˜¯é€‰äº†ä¸€ä¸ª <code>#userId</code>çš„æ–‡æœ¬æ¡†ï¼Œåé¢è¿­ä»£æŠŠ <code>#userId</code>æ”¹ä¸º<code>#uuid</code> é‚£ä½ å°±é€‰ä¸åˆ°äº†ã€‚ æ‰€ä»¥ä¸šåŠ¡æµ‹è¯•ä»£ç (<code>__mainProcess__</code>æ¨¡å—) åšå¥½æ¨¡å—æ‹†åˆ†ï¼Œåé¢è·Ÿé¡¹ç›®è¿­ä»£ä¹Ÿæ–¹ä¾¿è°ƒæ•´ã€‚</li>
<li>å› ä¸ºç½‘ç»œæˆ–domæ“ä½œç»å¸¸è§¦å‘å¼‚æ­¥è¡Œä¸ºï¼Œæ‰€ä»¥ä¸šåŠ¡æµ‹è¯•ä»£ç é‡Œé¢å……æ»¡å„ç§ <code>waitFor</code> <code>waitForSelector</code> <code>waitForNative</code> ç­‰â€¦ä¸æ³¨æ„å¯èƒ½å°±ä¼šæ“ä½œåˆ°æ²¡æœ‰å‡ºç°çš„å…ƒç´ ï¼Œè¿™å—è¦åšå¥½æ§åˆ¶ï¼Œæ¯”å¦‚waitFor æ—¶é—´ä¹…ä¸€ç‚¹ï¼Œæˆ–è€…åœ¨<code>page</code>ä¸Šå°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚ <code>page._click</code>:<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> _click(selector) &#123;</span><br><span class="line">  <span class="keyword">await</span> page.waitForSelector(selector, &#123; <span class="attr">visible</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  <span class="keyword">return</span> page.click(selector);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>åœ¨æ¯æ¬¡ç‚¹å‡»ä¹‹å‰ï¼Œå…ˆç­‰å¾…è¯¥å…ƒç´ å‡ºç°å†ç‚¹å‡»ã€‚è¿™æ ·å¯ä»¥é¿å…å¾ˆå¤šè¿è¡Œæ—¶ æ²¡æœ‰æ‰¾åˆ°å…ƒç´ çš„é”™è¯¯</p>
<ol start="3">
<li>æ¨¡ä»¿ç”¨æˆ·è¡Œä¸ºæµ‹è¯•çš„è¯ï¼Œæ„å‘³ç€ä½ è¦åšä¸€äº›å‰ç½®çš„å¤„ç† å¦‚<code>login.js</code>ï¼Œ è¦æŠŠè´¦å·å¯†ç ç­‰å†™åˆ°ä»£ç é‡Œé¢â€¦è™½ç„¶å¯ä»¥åŠ å¯† ä¸è¿‡è¿˜æ˜¯ä¼šå­˜åœ¨éƒ¨åˆ†æ³„éœ²é£é™©â€¦</li>
</ol>
<h1 id="è‡ªåŠ¨åŒ–æµ‹è¯•æœåŠ¡ç«¯-auto-test-backend-éƒ¨åˆ†"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•æœåŠ¡ç«¯-auto-test-backend-éƒ¨åˆ†" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯•æœåŠ¡ç«¯(auto_test_backend)éƒ¨åˆ†"></a>è‡ªåŠ¨åŒ–æµ‹è¯•æœåŠ¡ç«¯(auto_test_backend)éƒ¨åˆ†</h1><p>å¯¹æ¯” <code>auto_test</code> éƒ¨åˆ†ï¼Œ <code>auto_test_backend</code>æ‰æ˜¯æˆ‘æœ€å¤´ç–¼çš„åœ°æ–¹ã€‚<br>æ¯•ç«Ÿä¸æ˜¯ç§‘ç­å‡ºèº«çš„å‰ç«¯ï¼Œå¯¹åç«¯æ€æƒ³ ä»¥åŠæ•°æ®åº“æ“ä½œä¹Ÿæ²¡ç¢°è¿‡= =emmm åšèµ·æ¥çœŸçš„æ˜¯è¶…çº§æ— æ•Œçš„è´¹åŠ²<br>ç‰¹åˆ«æ˜¯ è®¾è®¡æ•°æ®æ ¼å¼çš„æ—¶å€™ï¼Œéƒ½æ˜¯æ‹è„‘è¢‹å†³å®šäº†ã€‚ å’¦ æˆ‘åŠ ä¸ªå­—æ®µï¼Œ å’¦ æˆ‘æ”¹ä¸ªå­—æ®µ åˆä¸æ˜¯å¾ˆæ¸…æ¥šæ€ä¹ˆå¿«æ·æ“ä½œâ€¦. ä¼°è®¡æ˜¯ä¸ç†Ÿ <code>mongoose</code> çš„åŸå› â€¦.</p>
<p>è¿™ä¸ªé¡¹ç›®ç”¨çš„æ˜¯ <a href="eggjs.org/zh-cn/intro/quickstart.html">egg</a> æ¡†æ¶ï¼Œæ‰€ä»¥åŸºæœ¬é¡¹ç›®ç»“æ„éƒ½æ˜¯æŒ‰ç€eggçš„è§„èŒƒæ¥ã€‚</p>
<p>ç›®å½•ç»“æ„:<br><img src="./auto_test_backend_project.png" alt="auto_test_backend_project"></p>
<p>egg å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ï¼Œå¼€å‘çš„æ—¶å€™åªè¦è·‘ä¸€ä¸‹ <code>npm run dev</code>ï¼Œå°±ä¼šå¯åŠ¨ä¸€ä¸ªé»˜è®¤ç«¯å£ä¸º<code>7001</code>çš„æœåŠ¡</p>
<p>å¯¹æˆ‘ä»¬ç°åœ¨æ¥è¯´ï¼ŒåŸºæœ¬åªæ˜¯æä¾› RESTAPIã€‚<br>å‰©ä¸‹çš„å°±ç®€å•å•¦ï¼Œåœ¨<code>app/router.js</code>å†™å¯¹åº”çš„è·¯ç”± å¦‚:<br><code>router.post(&#39;/api/v1/monitor&#39;, app.controller.monitor.create);</code> è¿™æ ·å¦‚æœæœ‰<code>post</code>è¯·æ±‚<code>:7001/api/v1/monitor</code> å°±ä¼šäº¤ç”± <code>monitor.create</code> è¿™ä¸ª <code>controller</code> å¤„ç†ã€‚</p>
<h2 id="è·¯ç”±é…ç½®-app-router-js"><a href="#è·¯ç”±é…ç½®-app-router-js" class="headerlink" title="è·¯ç”±é…ç½® app/router.js"></a>è·¯ç”±é…ç½® app/router.js</h2><p>ç›®å‰è·¯ç”±é…ç½®æ¯”è¾ƒç®€å•ï¼Œå°±é…ç½®äº†ä¸¤ä¸ªï¼Œä¸€ä¸ªç”¨æ¥å¤„ç†æ¥æ”¶ <code>auto_test</code>é¡¹ç›®ä¸­æµ‹è¯•ç»“æœï¼›ä¸€ä¸ªç”¨æ¥è¾“å‡ºæµ‹è¯•åˆ—è¡¨ã€‚</p>
<figure class="highlight javascript"><figcaption><span>app/router.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; router, controller &#125; = app;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// post è¯·æ±‚äº¤ç”±app.controller.monitor.createå¤„ç†</span></span><br><span class="line">  router.post(<span class="string">'/api/v1/monitor'</span>, app.controller.monitor.create);</span><br><span class="line">  <span class="comment">// get è¯·æ±‚äº¤ç”±app.controller.monitor.getå¤„ç†</span></span><br><span class="line">  router.get(<span class="string">'/api/v1/monitor'</span>, app.controller.monitor.get);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="controller-è§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœ"><a href="#controller-è§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœ" class="headerlink" title="controller è§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœ"></a>controller è§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœ</h2><p>eggå¸®æˆ‘ä»¬åšäº†å°è£…ï¼Œç›´æ¥åœ¨controlleræ–‡ä»¶å¤¹ä¸‹èµ·æ–‡ä»¶ï¼Œå†™å¯¹åº”çš„æ•°æ®ï¼Œåé¢å¯ä»¥ä»å…¨å±€å¯¹è±¡<code>app.controller.fileName.mothedName</code>å»è·å–å¯¹åº”çš„æ–¹æ³•ï¼Œæ¯”å¦‚ç°åœ¨æœ‰è¿™ä¸ªæ–‡ä»¶ <code>app/controller/test</code>ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹é€šè¿‡ <code>app.controller.test</code>å»è·å–ã€‚</p>
<p>è¿™é‡Œæ‹¿ <code>app.controller.monitor.get</code> ä¸¾ä¾‹</p>
<p>monitor.get æ–¹æ³•è¦åšçš„äº‹æƒ…æœ‰</p>
<ul>
<li>éªŒè¯ç»“æ„çš„è¯·æ±‚å‚æ•°è§„åˆ™</li>
<li>å¤„ç†æŸ¥è¯¢å‚æ•°</li>
<li>å¤„ç†åˆ†é¡µçš„é—®é¢˜</li>
<li>è°ƒservice è·å–æ•°æ®</li>
<li>å¤„ç†æ•°æ®</li>
<li>è°ƒç”¨restä¸­é—´ä»¶å‘é€æ•°æ®</li>
</ul>
<p>éªŒè¯å‚æ•°ï¼Œè¿™é‡Œç”¨åˆ°çš„æ˜¯ <a href="https://github.com/eggjs/egg-validate" target="_blank" rel="noopener">egg-validate</a>æ’ä»¶ï¼Œç›´æ¥é…ç½®å°±å¯ä»¥ç”¨äº†</p>
<figure class="highlight javascript"><figcaption><span>config/plugin.js</span></figcaption><table><tr><td class="code"><pre><span class="line">exports.validate = &#123;</span><br><span class="line">  enable: <span class="literal">true</span>,</span><br><span class="line">  package: <span class="string">'egg-validate'</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>app/controller/monitor.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Controller = <span class="built_in">require</span>(<span class="string">'egg'</span>).Controller;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="class"><span class="keyword">class</span> <span class="title">MonitorController</span> <span class="keyword">extends</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ctx = <span class="keyword">this</span>.ctx;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡ŒéªŒè¯å¤±è´¥ä¼šæŠ›å‡ºä¸€ä¸ª 422 çš„å¼‚å¸¸</span></span><br><span class="line">  ctx.validate(&#123;</span><br><span class="line">    start: &#123; <span class="attr">type</span>: <span class="string">'number'</span>, <span class="attr">require</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">    <span class="comment">// end, state, paginationç­‰ç­‰å…¶ä»–å‚æ•°éªŒè¯</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ä¼ è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> &#123; start, end, state, <span class="attr">pagination</span>: _pagination&#125; = ctx.query;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®è‡ªèº«ä¸šåŠ¡ å¤„ç†æŸ¥è¯¢å‚æ•°</span></span><br><span class="line">  (<span class="keyword">typeof</span> state !== <span class="string">'undefined'</span>) &amp;&amp; (params.state = state);</span><br><span class="line">  <span class="keyword">if</span> (start &amp;&amp; end) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(params, &#123;</span><br><span class="line">      time: &#123;</span><br><span class="line">        $gte: start,</span><br><span class="line">        $lte: end,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†åˆ†é¡µå‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> paramsPagination = <span class="built_in">Object</span>.assign(&#123; <span class="attr">size</span>: <span class="number">20</span>, <span class="attr">page</span>: <span class="number">1</span> &#125;, <span class="built_in">JSON</span>.parse(_pagination || <span class="string">'&#123;&#125;'</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒ service è·å–æ•°æ®</span></span><br><span class="line">  <span class="comment">// serviceä¹Ÿå’Œ controller ä¸€æ ·ï¼Œeggåšäº†æ–‡ä»¶çš„æ˜ å°„ï¼Œç›´æ¥ ctx.serviceèƒ½å¾ˆæ–¹ä¾¿çš„å»è·å–</span></span><br><span class="line">  <span class="keyword">const</span> &#123; list, pagination &#125; = <span class="keyword">await</span> ctx.service.monitor.find(&#123; params, ...paramsPagination &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†æ•°æ®</span></span><br><span class="line">  list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    item.img_url = <span class="string">`http://localhost:7001<span class="subst">$&#123;item.img_url&#125;</span>`</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒ restä¸­é—´ä»¶ å¤„ç†è¿”å›æ•°æ®</span></span><br><span class="line">  ctx.rest(&#123;</span><br><span class="line">    list,</span><br><span class="line">    pagination,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="service-å¤„ç†ä¸€äº›å’Œæ•°æ®åº“äº¤äº’çš„é€»è¾‘"><a href="#service-å¤„ç†ä¸€äº›å’Œæ•°æ®åº“äº¤äº’çš„é€»è¾‘" class="headerlink" title="service å¤„ç†ä¸€äº›å’Œæ•°æ®åº“äº¤äº’çš„é€»è¾‘"></a>service å¤„ç†ä¸€äº›å’Œæ•°æ®åº“äº¤äº’çš„é€»è¾‘</h2><p>serviceå’Œcontroller ä¸€æ ·ï¼Œeggå¸®æˆ‘ä»¬åšäº†ä¸€äº›æ–‡ä»¶çš„æ˜ å°„ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ç›´æ¥åœ¨<code>app/service/monitor.js</code>å†™å¯¹åº”çš„é€»è¾‘å³å¯</p>
<p>è¿™ä¸€å—åº”è¯¥æ˜¯æœ€éº»çƒ¦çš„ï¼Œ mongoose api ä¸ç†Ÿï¼Œä¹Ÿä¸ç¡®å®šè¿™ä¹ˆå†™ä¼šä¸ä¼šæœ€ä¼˜,åˆä¸åˆç†ç­‰â€¦æœ‰æ—¶é—´æˆ–è€…ä»¥åæœ‰æœºä¼š ä¼šå»çœ‹ã€ŠSQLå¿…çŸ¥å¿…ä¼šã€‹ å­¦å­¦æ•°æ®åº“è¿™ä¸€å—è½¯è‚‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Service = <span class="built_in">require</span>(<span class="string">'egg'</span>).Service;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="class"><span class="keyword">class</span> <span class="title">MoitorService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">  <span class="keyword">async</span> find(&#123;params, size, page&#125;) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æŸ¥å¤åˆæ¡ä»¶çš„é¡µæ•°</span></span><br><span class="line">    <span class="keyword">const</span> count = <span class="keyword">await</span> <span class="keyword">this</span>.app.model.Monitor</span><br><span class="line">      .find(params).count();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†åˆ†é¡µ</span></span><br><span class="line">    <span class="keyword">const</span> monitors = <span class="keyword">await</span> <span class="keyword">this</span>.app.model.Monitor</span><br><span class="line">      .find(params).sort(<span class="string">'time'</span>).select(<span class="string">'-__v'</span>)</span><br><span class="line">      .skip(size * (page<span class="number">-1</span>))</span><br><span class="line">      .limit(size).lean();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†è¦è¿”å›çš„æ ¼å¼</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: monitors,</span><br><span class="line">      pagination: &#123;</span><br><span class="line">        count, size, page,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## middleware ä¸­é—´ä»¶</span></span><br><span class="line"><span class="string">egg å…¶å®åŸºäºkoaå®ç°çš„ï¼Œæ‰€ä»¥å¯¹ä¸­é—´ä»¶å½¢å¼å’Œkoaä¸€æ ·æ˜¯æ´‹è‘±åœˆæ¨¡å‹ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é›†æˆä¸­é—´ä»¶ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨`</span>app/middleware/<span class="string">`ä¸‹å†™å¯¹åº”çš„ä¸­é—´ä»¶ï¼Œå†åœ¨ `</span>config/config.default.js<span class="string">`ä¸‹é…ç½®å³å¯å¯ç”¨ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å†™ä¸­é—´ä»¶</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript app/middleware/error_handler.js</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">errorHandler</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> next();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="comment">// æ‰€æœ‰å¼‚å¸¸éƒ½åœ¨ app ä¸Šè§¦å‘ä¸€ä¸ª error äº‹ä»¶</span></span><br><span class="line">      ctx.app.emit(<span class="string">'error'</span>, err, ctx);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> status = err.status || <span class="number">500</span>;</span><br><span class="line">      <span class="comment">// ç”Ÿäº§ç¯å¢ƒæ—¶ 500 é”™è¯¯çš„è¯¦ç»†é”™è¯¯å†…å®¹ä¸è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯</span></span><br><span class="line">      <span class="keyword">const</span> error = status === <span class="number">500</span> &amp;&amp; ctx.app.config.env === <span class="string">'prod'</span></span><br><span class="line">        ? <span class="string">'Internal Server Error'</span></span><br><span class="line">        : err.message;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä» error å¯¹è±¡ä¸Šè¯»å‡ºå„ä¸ªå±æ€§ è®¾ç½®åˆ°å“åº”ä¸­</span></span><br><span class="line">      ctx.body = &#123; error &#125;;</span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">422</span>) &#123;</span><br><span class="line">        ctx.body.detail = err.errors;</span><br><span class="line">      &#125;</span><br><span class="line">      ctx.status = status;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ é…ç½®<br><figure class="highlight javascript"><figcaption><span>app/config/config.default.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">appInfo</span>=&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="comment">// ä¸­é—´ä»¶é…ç½®</span></span><br><span class="line">    middleware: [<span class="string">'errorHandler'</span>],</span><br><span class="line"></span><br><span class="line">    <span class="comment">// errorHandleré…ç½®ï¼Œåªå¯¹ /api å¼€å¤´çš„è·¯ç”±åšå¤„ç†</span></span><br><span class="line">    errorHandler: &#123;</span><br><span class="line">      match: <span class="string">'/api'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="é˜ˆå€¼å‘é€é‚®ä»¶åŠŸèƒ½"><a href="#é˜ˆå€¼å‘é€é‚®ä»¶åŠŸèƒ½" class="headerlink" title="é˜ˆå€¼å‘é€é‚®ä»¶åŠŸèƒ½"></a>é˜ˆå€¼å‘é€é‚®ä»¶åŠŸèƒ½</h2><p>è¿™ä¸€å—è¦ç»´æŠ¤ä¸¤ä¸ªä¸´æ—¶å˜é‡æ•°ç»„ï¼Œä¸‰ä¸ªé…ç½®å‚æ•°<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> temp = &#123;&#125;;</span><br><span class="line">temp.errorObj = &#123;</span><br><span class="line">  errorArray: [], <span class="comment">// ç”¨æ¥å­˜æ¯æ¬¡é”™è¯¯ä¸ŠæŠ¥çš„æ—¶é—´æˆ³</span></span><br><span class="line">  sendArray: [], <span class="comment">// ç”¨æ¥å­˜æ¯æ¬¡å‘é€çš„æ—¶é—´æˆ³</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> errorConfig = &#123;</span><br><span class="line">  maxCount: <span class="number">5</span>, <span class="comment">// å•ä½æ—¶é—´è¶…è¿‡næ¬¡å°±æŠ¥è­¦</span></span><br><span class="line">  unitTime: <span class="number">30</span>, <span class="comment">// å•ä½æ—¶é—´ä¸ºï¼šnåˆ†é’Ÿ</span></span><br><span class="line">  maxSend: <span class="number">2</span>, <span class="comment">// å•ä½æ—¶é—´æœ€å¤šå‘nå°é‚®ä»¶</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¤§æ¦‚çš„é€»è¾‘æ˜¯ï¼Œ æ¯æ¬¡æŠ¥é”™çš„æ—¶å€™ï¼Œ errorArray å¡å…¥ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œç„¶ååˆ¤æ–­ï¼š</span><br><span class="line"><span class="number">1.</span> åˆ¤æ–­æ˜¯å¦åˆ°è¾¾å‘é€é˜ˆå€¼</span><br><span class="line"><span class="number">2.</span> æ ¹æ®å½“å‰çš„æ—¶é—´æˆ³å’Œé…ç½®æ¥æ¸…ç†è¿‡æœŸçš„æ•°æ®</span><br><span class="line"><span class="number">3.</span> åˆ¤æ–­å•ä½æ—¶é—´å†…æ˜¯å¦è¾¾åˆ°å‘é€é˜ˆå€¼</span><br><span class="line"><span class="number">4.</span> åˆ¤æ–­å•ä½æ—¶é—´å†…æ˜¯å¦è¶…è¿‡å‘é€æ¬¡æ•°</span><br><span class="line"><span class="number">5.</span> æ„å»ºå‘é€å†…å®¹ï¼Œ ğŸš€  å¤„ç†åç»­çš„è®°å½•æ“ä½œ</span><br></pre></td></tr></table></figure></p>
<p>ç”¨åˆ°çš„å‘é‚®ä»¶æ’ä»¶æ˜¯ <a href="https://www.jianshu.com/p/ee200a67853c" target="_blank" rel="noopener">nodemailer</a> ç®€å•ç²—æš´ ç”¨è¿‡éƒ½è¯´å¥½</p>
<h2 id="and"><a href="#and" class="headerlink" title="and"></a>and</h2><p>å…¶å® <code>auto_test_project</code> æœ€éº»çƒ¦çš„æ˜¯åœ¨å®šä¹‰æ•°æ®åº“æ ¼å¼çš„æ—¶å€™ï¼Œç»å¸¸å®šä¹‰å°‘ä¸€äº›å…³é”®çš„å­—æ®µï¼ˆç›®å‰è‚¯å®šä¹Ÿè¿˜å­˜åœ¨è¿™ç§æƒ…å†µçš„ï¼‰ã€‚<br>è¿˜æœ‰å°±æ˜¯æœ¬æ¥ä»¥ä¸ºå’Œ <code>angular</code> ä¸€æ ·ï¼Œ<code>controller</code> ä¼šå¡å¤§é‡çš„ä¸šåŠ¡é€»è¾‘ï¼Œ ç­‰åˆ°åé¢æœ‰ä¸€ä¸ªåœºæ™¯æ˜¯è¦åœ¨æŸä¸ª <code>controller</code>è°ƒç”¨å¦ä¸€ä¸ª<code>controller</code> æ—¶æ‰å‘ç°ï¼ŒåŸæ¥ controller ä¸»è¦çš„èŒè´£æ˜¯è´Ÿè´£å¤„ç†è·¯ç”±å’Œä¸€äº›å‚æ•°éªŒè¯è¾“å‡ºç­‰æ¯”è¾ƒå¯¹å¤–çš„å·¥ä½œï¼Œå¯¹å†…çš„åŸºæœ¬éƒ½å†™æˆäº†<code>service</code>ã€‚</p>
<p>å‰ç«¯çš„å°ä¼™ä¼´å¾ˆå¤šäººæ‡‚node å¯èƒ½ä¹Ÿåªæ˜¯æ‡‚nodeçš„è¯­æ³•å±‚ è¦æƒ³çœŸçš„å†™åå°æˆ–è€…å¾®å…¨æ ˆï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šä¸œè¥¿è¦å­¦çš„ã€‚</p>
<h1 id="åˆ—è¡¨å±•ç¤º-admin-é¡¹ç›®"><a href="#åˆ—è¡¨å±•ç¤º-admin-é¡¹ç›®" class="headerlink" title="åˆ—è¡¨å±•ç¤º(admin)é¡¹ç›®"></a>åˆ—è¡¨å±•ç¤º(admin)é¡¹ç›®</h1><p>åˆ—è¡¨å±•ç¤ºç›¸å¯¹ç®€å•ï¼Œæ²¡ä»€ä¹ˆå¥½è®²çš„ã€‚æƒ³ç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆéƒ½æ¯”è¾ƒéšæ„ï¼Œreact,vueç”šè‡³hbsæˆ–è€…ç›´æ¥åœ¨jsé‡Œé¢å†™htmlå­—ç¬¦ä¸²å¾ªç¯éƒ½okã€‚</p>
<p>è¿™é‡Œæ¨ä¸€ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œä»‹ç»å·¥ä½œä¸­çš„ä¸€ä¸ªé¡¹ç›® <a href="https://jsonz1993.github.io/2018/02/react%E5%85%A8%E5%AE%B6%E6%A1%B6-dva-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%95%B4%E7%90%86%E6%80%BB%E7%BB%93/">reactå…¨å®¶æ¡¶ &amp;&amp; dvaæœ€ä½³å®è·µ</a></p>
<h1 id="end"><a href="#end" class="headerlink" title="end"></a>end</h1><p>è·‘è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬(auto_test)çš„log<br><img src="./log.png" alt="log.png"></p>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•æˆåŠŸåæäº¤æ•°æ®(admin)<br><img src="./success.png" alt="success"></p>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•å¤±è´¥åå°†æ•°æ®ä¸ŠæŠ¥(admin) åŒ…å«äº†æ ‡é¢˜ï¼ŒæŠ¥é”™ä¿¡æ¯ï¼Œé“¾æ¥ï¼Œæˆªå›¾ï¼Œæ ‡è®°ç­‰<br><img src="./admin.png" alt="admin"></p>
<p>æ–‡ç« ä½œä¸ºå­¦ä¹ çš„è®°å½•åˆ°æ­¤ç»“æŸï¼Œè¿™ä¸ªé¡¹ç›®ä¸»è¦å­¦ä¹ äº† egg,mongodb,puppeteer ç­‰ è¿˜æ˜¯æŒºæœ‰æ”¶è·çš„.</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
        <tag>work</tag>
        <tag>puppeteer</tag>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>é¡¹ç›®ä»£ç è§„èŒƒå·¥ä½œæµâ€”â€”editorã€prettierã€eslintã€git-check</title>
    <url>/2018/03/%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%B7%A5%E4%BD%9C%E6%B5%81%E2%80%94%E2%80%94editor%E3%80%81prettier%E3%80%81eslint%E3%80%81git-check/</url>
    <content><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æœ€è¿‘éƒ¨é—¨è¿›äº†æŒºå¤šæ–°å‰ç«¯ï¼Œæœ‰å®ä¹ ç”Ÿ æœ‰åº”å±Šç”Ÿï¼Œäººä¸€å¤š<br>ä»£ç è§„èŒƒå°±ä¸èƒ½å®Œå…¨ä¾èµ– â€œå£å£ç›¸ä¼ â€ å»çº¦æŸäº†ï¼Œ ç‰¹åˆ«æ˜¯çœ‹åˆ°ä¸€å †çš„ æœ‰åˆ†å·ï¼Œæ— åˆ†å·ï¼Œå››ç¼©è¿›ï¼ŒäºŒç¼©è¿›ç­‰é—®é¢˜</p>
<p>å¯¹äºæœ‰å°å°ä»£ç æ´ç™–çš„æˆ‘å®åœ¨æ˜¯å—ä¸äº† äºæ˜¯ç»ˆäºåœ¨é¡¹ç›®ä¸­ é›†æˆå„ç§ç”¨æ¥ è§„èŒƒï¼ˆçº¦æŸï¼‰çš„å·¥å…·ã€‚</p>
<p>ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>editorConfig ç¼–è¾‘å™¨é…ç½®æ–‡ä»¶</li>
<li>Prettier æ‰¹é‡æ ¼å¼åŒ–ä»£ç </li>
<li>Eslint jsã€jsx æ–‡ä»¶ä»£ç æ£€æŸ¥è§„èŒƒ</li>
<li>Flow (æš‚æœªé›†æˆ)</li>
<li>lint-staged æäº¤åˆ°gitä¹‹å‰è·‘ä¸€æ¬¡ä»£ç æ£€æŸ¥</li>
</ul>
<p>æœ¬åœ°ä¸€äº›ç¯å¢ƒï¼š<code>node 8.9.4</code>, <code>npm 5.6.0</code>, <code>oxs 10.13.3</code>ï¼Œ ç¼–è¾‘å™¨ <code>vscodeeeeee</code></p>
<h1 id="EditorConfig"><a href="#EditorConfig" class="headerlink" title="EditorConfig"></a>EditorConfig</h1><p>What is EditorConfig?<br>å®˜ç½‘ç»™å‡ºçš„ç­”æ¡ˆæ˜¯ï¼šeditorconfigå¸®åŠ©å¼€å‘äººå‘˜åœ¨ä¸åŒçš„ç¼–è¾‘å™¨å’Œideä¹‹é—´å®šä¹‰å’Œç»´æŠ¤ä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚<br><strong>ç®€å•æ¥è¯´å°±æ˜¯è·¨ç¼–è¾‘å™¨ä½¿ç”¨åŒä¸€ä»½ä»£ç ç¼©è¿›ç­‰é…ç½®</strong></p>
<p>EditorConfig é›†æˆèµ·æ¥ååˆ†ç®€å•ï¼Œ å¤§æ¦‚å°±æ˜¯åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œå®‰è£…ç›¸åº”çš„ç¼–è¾‘å™¨æ’ä»¶å³å¯ã€‚</p>
<ol>
<li>åˆ›å»º <a href="http://editorconfig.org/#example-file" target="_blank" rel="noopener"><code>.editorconfig</code></a> æ–‡ä»¶</li>
<li><a href="http://editorconfig.org/#download" target="_blank" rel="noopener">å®‰è£…å¯¹åº”ç¼–è¾‘å™¨çš„æ’ä»¶</a></li>
</ol>
<p>æˆ‘ç”¨çš„æ˜¯ vscode ç›´æ¥å®‰è£…è¿™ä¸ª <code>EditorConfig for vs code</code>ï¼Œå®‰è£…å®Œé‡å¯ï¼Œç¼–è¾‘å™¨å°±ä¼šæ ¹æ®é…ç½®æ–‡ä»¶é‡Œé¢çš„é…ç½®æ¥æ§åˆ¶ä»£ç ç¼©è¿›ç­‰è¡Œä¸º</p>
<p>é™„ä¸Šé¡¹ç›®çš„é…ç½®æ–‡ä»¶<br><figure class="highlight"><figcaption><span>.editorconfig</span></figcaption><table><tr><td class="code"><pre><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8</span><br><span class="line">end_of_line = lf # mac linux/unix éƒ½ç”¨lfã€‚ window è®¾ç½® cr åœ¨ *nix æœ‰é—®é¢˜</span><br><span class="line">indent_size = 4</span><br><span class="line">indent_style = space</span><br><span class="line">max_line_length = 120</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line"></span><br><span class="line">[*.jsx]</span><br><span class="line">indent_size= 2</span><br></pre></td></tr></table></figure></p>
<h1 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a>Prettier</h1><p>ç°åœ¨æœ‰äº†ä¸€äº›åŸºæœ¬çš„é…ç½®ï¼Œä»¥åå†™çš„ä»£ç å°±å¯ä»¥æ¯”è¾ƒè§„èŒƒä¸€ç‚¹ç‚¹ç‚¹ï¼Œä½†æ˜¯åŸæ¥çš„æ—§ä»£ç æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>ä¸å¯èƒ½ä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªæ–‡ä»¶å»æ‰“å¼€å§ï¼Œä¸å®Œå…¨ç»Ÿè®¡ é¡¹ç›®æœ‰ä¸Šåƒä¸ªç¼–è¾‘çš„æ–‡ä»¶â€¦.ä¸€ä¸ªä¸€ä¸ªå»æ‰‹åŠ¨æ‰“å¼€ä¸ç¬¦åˆç¨‹åºå‘˜çš„é£æ ¼</p>
<p>soâ€¦ <a href="https://prettier.io/" target="_blank" rel="noopener">Prettier</a>å°±æ˜¯ä¸ºæˆ‘ä»¬åšè¿™äº›äº‹æƒ…çš„</p>
<ol>
<li>å®‰è£…: <code>npm i --save-dev prettier</code></li>
<li>åˆ›å»º <a href="https://prettier.io/docs/en/configuration.html" target="_blank" rel="noopener"><code>.prettierrc</code>é…ç½®æ–‡ä»¶</a><br>è¯¥é…ç½®æ–‡ä»¶ä¼šç»§æ‰¿<code>editorConfig</code>çš„é…ç½®</li>
<li>å‘<code>package.json</code>æ·»åŠ è„šæœ¬: <code>&quot;prettier&quot;: &quot;prettier --write ./*&quot;</code><blockquote>
<p>æˆ‘é¡¹ç›®é‡Œé¢ç”¨çš„æ˜¯ <code>&quot;prettier&quot;: &quot;prettier --write &#39;./src/**/*.js&#39; &#39;./src/**/*.jsx&#39; &#39;./src/**/*.css&#39; &#39;./src/**/*.scss&#39;&quot;,</code></p>
</blockquote>
</li>
<li>åˆ›å»º <code>.prettierignore</code> æ–‡ä»¶ï¼Œç”¨æ¥å¿½ç•¥ä¸€äº›æ–‡ä»¶ &amp;&amp; ç›®å½•</li>
<li>ä¸€åˆ‡å‡†å¤‡å°±ç»ªä¹‹å !!!! <code>npm run prettier</code> å‘¼å‘¼ çœ‹åˆ°æç¤ºä¸€åƒä¸ªæ–‡ä»¶æ›´æ”¹è®°å½• å“ˆå“ˆå“ˆ</li>
</ol>
<p>é™„ä¸Šé…ç½®æ–‡ä»¶:<br><figure class="highlight javascript"><figcaption><span>.prettierrc.js</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// https://prettier.io/docs/en/options.html</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    trailingComma: <span class="string">"es5"</span>, <span class="comment">// æ•°ç»„ å¯¹è±¡å°¾éšé€—å· [arr, ] &#123; obj, &#125;</span></span><br><span class="line">    <span class="comment">// bracketSpacing: true, // å¯¹è±¡ç©ºæ ¼ &#123; foo: bar &#125;, false=&gt; &#123;foo:bar&#125;</span></span><br><span class="line"><span class="comment">// jsxBracketSameLine: false, // jsxé—­æ ‡ç­¾æ˜¯å¦å¦èµ·ä¸€è¡Œ &lt;Test&gt;&lt;/Test&gt;</span></span><br><span class="line"><span class="comment">// arrowParens: 'avoid', // ç®­å¤´å‡½æ•°æ˜¯å¦çœç•¥æ‹¬å· a=&gt; a, (a)=&gt; a</span></span><br><span class="line">    singleQuote: <span class="literal">true</span>, <span class="comment">// å•å¼•å·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><figcaption><span>.prettierignore</span></figcaption><table><tr><td class="code"><pre><span class="line">/node_modules</span><br><span class="line">/dist</span><br><span class="line">/src/lib/</span><br><span class="line">/src/global/fonts</span><br></pre></td></tr></table></figure>
<h1 id="Eslint"><a href="#Eslint" class="headerlink" title="Eslint"></a>Eslint</h1><p>æœ‰äº†ä¸Šé¢ä»‹ç»çš„ <code>editor</code>ã€<code>prettier</code>è¿˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œå› ä¸º jsè¯­æ³• ä¸æ˜¯å¾ˆä¸¥æ ¼ï¼Œæ¯”å¦‚æœ‰æ²¡æœ‰åˆ†å·å•Š ä¹‹ç±»çš„é—®é¢˜è¿˜æ˜¯è¦ç”¨ eslint æ¥çº¦æŸçš„ã€‚</p>
<p>åœ¨å¾ˆå¤šå¹´å‰ï¼Œæˆ‘æ˜¯ç‰¹åˆ«åæ„Ÿ Eslint çš„ï¼Œå› ä¸ºç»å¸¸å†™å¾—ä¸€ç‚¹ä¸è§„èŒƒï¼Œç›´æ¥å°±æŠ¥ error æ•´ä¸ªé¡¹ç›®è·‘ä¸èµ·æ¥ã€‚<br>ä½†æ˜¯ å­˜åœ¨å³åˆç†ï¼Œç°åœ¨è§‰å¾—è¿™ä¸œè¥¿è´¼å¥½ç”¨ã€‚</p>
<ol>
<li>å®‰è£… eslint: <code>npm i --save-dev eslint</code></li>
<li>å¯åŠ¨å¼•å¯¼è„šæœ¬: <code>./node_modules/.bin/eslint --init</code> é…ç½® <code>.eslintrc</code>ã€‚<blockquote>
<p>è¿™é‡Œå¯ä»¥ç›´æ¥é€‰ <code>Use a popular style guide</code> ç„¶åé€‰è¡Œä¸šæ¯”è¾ƒçœ‹å¥½çš„è§„èŒƒ <code>airbnb</code>çš„ï¼ŒåŸå…ˆæ˜¯æ‰“ç®—é€‰è¿™ä¸ªï¼Œä½†æ˜¯åé¢å‘ç°å’Œé¡¹ç›®ç°æœ‰çš„è§„èŒƒå¾ˆä¸ç›¸åŒï¼Œæ‰€ä»¥åé¢å°±èµ°å›ç­”é—®é¢˜é€‰é¡¹ã€‚</p>
</blockquote>
</li>
<li>å‘ <code>package.json</code> æ·»åŠ è„šæœ¬: <code>&quot;eslint&quot;: &quot;eslint --fix ./&quot;</code><blockquote>
<p>æˆ‘å†™çš„æ˜¯ <code>&quot;eslint&quot;: &quot;eslint --fix &#39;./src/**/*.{jsx, js}&#39;&quot;,</code></p>
</blockquote>
</li>
<li>åˆ›å»º <code>.eslintignore</code> æ–‡ä»¶ï¼Œå¹¶å‘å…¶æ·»åŠ éœ€è¦å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚</li>
<li>å®‰è£… <a href="https://eslint.org/docs/user-guide/integrations" target="_blank" rel="noopener">ç¼–è¾‘å™¨ eslint æ’ä»¶</a></li>
<li>é…ç½®ç¼–è¾‘å™¨ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯ vscode<ul>
<li>â€œeslint.autoFixOnSaveâ€: true  <code>å¼€å¯eslint æ£€æŸ¥</code></li>
<li>â€œjavascript.validate.enableâ€: false <code>å…³é—­vscodeè‡ªå¸¦çš„jsæ£€æŸ¥</code></li>
</ul>
</li>
</ol>
<p>eslintæ’ä»¶ä¼šæ™ºèƒ½æ£€æŸ¥ç¼–è¾‘çŠ¶æ€çš„ JS æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨ä¿®å¤ï¼›<code>npm run eslint</code> è„šæœ¬å¯ä»¥æ£€æŸ¥å’Œæ™ºèƒ½ä¿®å¤â€œå¯¹åº”çš„æ–‡ä»¶â€ã€‚ ä¸è¿‡äº²æµ‹ä¿®å¤çš„æ•ˆæœæ¯”è¾ƒä¸€èˆ¬ï¼Œæ›´å¤šçš„æŠ¥é”™éœ€è¦æ‰‹åŠ¨å»å¤„ç†</p>
<p>åœ¨é…ç½®eslintçš„æ—¶å€™ é‡åˆ°äº†å‡ ä¸ªæ¯”è¾ƒéƒé—·çš„åœ°æ–¹</p>
<h2 id="å¯ä»¥å…ˆæŠŠä¸€äº›æŠ¥é”™é¡¹æ”¹ä¸º-è­¦å‘Šé¡¹ï¼Œæ…¢æ…¢è¿­ä»£-å…å¾—ä¸€ä¸Šeslint-è¦åœå‡ å¤©æ¥ä¿®æ”¹åŸæ¥çš„æ–‡ä»¶"><a href="#å¯ä»¥å…ˆæŠŠä¸€äº›æŠ¥é”™é¡¹æ”¹ä¸º-è­¦å‘Šé¡¹ï¼Œæ…¢æ…¢è¿­ä»£-å…å¾—ä¸€ä¸Šeslint-è¦åœå‡ å¤©æ¥ä¿®æ”¹åŸæ¥çš„æ–‡ä»¶" class="headerlink" title="å¯ä»¥å…ˆæŠŠä¸€äº›æŠ¥é”™é¡¹æ”¹ä¸º è­¦å‘Šé¡¹ï¼Œæ…¢æ…¢è¿­ä»£ å…å¾—ä¸€ä¸Šeslint è¦åœå‡ å¤©æ¥ä¿®æ”¹åŸæ¥çš„æ–‡ä»¶"></a>å¯ä»¥å…ˆæŠŠä¸€äº›æŠ¥é”™é¡¹æ”¹ä¸º è­¦å‘Šé¡¹ï¼Œæ…¢æ…¢è¿­ä»£ å…å¾—ä¸€ä¸Šeslint è¦åœå‡ å¤©æ¥ä¿®æ”¹åŸæ¥çš„æ–‡ä»¶</h2><h2 id="ä¸€äº›ç®€å•çš„å¤„ç†å¯ä»¥å†™è„šæœ¬å»åš"><a href="#ä¸€äº›ç®€å•çš„å¤„ç†å¯ä»¥å†™è„šæœ¬å»åš" class="headerlink" title="ä¸€äº›ç®€å•çš„å¤„ç†å¯ä»¥å†™è„šæœ¬å»åš"></a>ä¸€äº›ç®€å•çš„å¤„ç†å¯ä»¥å†™è„šæœ¬å»åš</h2><p>æ¯”å¦‚è¯´ä¹‹å‰é¡¹ç›®å†™çš„æ¯”è¾ƒä¸è§„èŒƒï¼Œå‡ºç°äº†å¾ˆå¤šç±»ä¼¼ï¼š<code>export default from &#39;file-path&#39;</code>çš„è¯­å¥ï¼Œä½†æ˜¯eslintä¸è®¤ï¼Œè§‰å¾—è¿™æ˜¯ä¸ç¬¦åˆè§„èŒƒçš„ï¼Œéœ€è¦æ”¹ä¸º <code>export { default } from &#39;file-path&#39;</code></p>
<p>è¿™ç‚¹æˆ‘ä¹Ÿæ¯”è¾ƒè®¤åŒï¼Œä½†æ˜¯ è¿™ä¹ˆå¤šä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªä¸€ä¸ªæ”¹æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥å†™äº†ä¸ªçŸ­è„šæœ¬å»å¤„ç†</p>
<figure class="highlight javascript"><figcaption><span>fix-export-default</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scan</span>(<span class="params">&#123;dirPath&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> isDirectory = fs.statSync(dirPath).isDirectory();</span><br><span class="line">    <span class="keyword">if</span> (isDirectory) &#123;</span><br><span class="line">        <span class="keyword">const</span> childs = fs.readdirSync(dirPath);</span><br><span class="line">        childs.forEach(<span class="function"><span class="params">child</span>=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> nextPath = path.join(dirPath, child);</span><br><span class="line">            <span class="keyword">const</span> stat = fs.statSync(nextPath);</span><br><span class="line">            <span class="keyword">const</span> isDirectory = stat.isDirectory();</span><br><span class="line">            <span class="keyword">const</span> isFile = stat.isFile();</span><br><span class="line">            <span class="keyword">const</span> extname = isFile &amp;&amp; path.extname(child);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ–‡ä»¶å¤¹ç±»å‹ é€’å½’</span></span><br><span class="line">            <span class="keyword">if</span> (isDirectory) scan(&#123;<span class="attr">dirPath</span>: nextPath&#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ’é™¤ä¸æ˜¯ js jsx çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> (![<span class="string">'.js'</span>, <span class="string">'.jsx'</span>].includes(extname)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¼€å§‹è¯»æ–‡ä»¶</span></span><br><span class="line">            <span class="keyword">let</span> fileStr = fs.readFileSync(nextPath) +<span class="string">''</span>;</span><br><span class="line">            <span class="keyword">const</span> exg = <span class="regexp">/export default from/gi</span>;</span><br><span class="line">            <span class="keyword">if</span> (exg.exec(fileStr))</span><br><span class="line">                fileStr = fileStr.replace(<span class="string">'export default from'</span>, <span class="string">'export &#123;default&#125; from'</span>);</span><br><span class="line">            fs.writeFileSync(nextPath, fileStr, &#123;<span class="attr">encoding</span>: <span class="string">'utf-8'</span>&#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scan(&#123;</span><br><span class="line">    dirPath: path.join(process.cwd(), <span class="string">'/src'</span>),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="webpackåˆ«åå¼•ç”¨-è·¯å¾„æŠ¥é”™é—®é¢˜"><a href="#webpackåˆ«åå¼•ç”¨-è·¯å¾„æŠ¥é”™é—®é¢˜" class="headerlink" title="webpackåˆ«åå¼•ç”¨ è·¯å¾„æŠ¥é”™é—®é¢˜"></a>webpackåˆ«åå¼•ç”¨ è·¯å¾„æŠ¥é”™é—®é¢˜</h2><p>å®‰è£…å¯¹åº”çš„ eslint å¤„ç†æ’ä»¶: <code>npm i --save-dev eslint-import-resolver-webpack eslint-plugin-import</code></p>
<p>åœ¨ <code>.eslint.js</code> é‡Œé¢åŠ è¿™æ®µé…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">"settings"</span>: &#123;</span><br><span class="line">  <span class="string">'import/resolver'</span>: &#123;</span><br><span class="line">      webpack: &#123;</span><br><span class="line">          config: getWebpackConfig, <span class="comment">// è¿™é‡Œæ˜¯webpacké…ç½®è·¯å¾„</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="å…¶ä»–æ³¨æ„é—®é¢˜"><a href="#å…¶ä»–æ³¨æ„é—®é¢˜" class="headerlink" title="å…¶ä»–æ³¨æ„é—®é¢˜"></a>å…¶ä»–æ³¨æ„é—®é¢˜</h2><p>é¡¹ç›®æ˜¯åœ¨ æµè§ˆå™¨è¿è¡Œï¼Œ åˆæ˜¯ es6è¯­æ³•ï¼Œ åˆæœ‰ä¸€äº›nodeè„šæœ¬ï¼Œä¼šæœ‰ä¸€äº›å…¨å±€çš„å˜é‡å¼•ç”¨æç¤ºæŠ¥é”™ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>æ”¹é…ç½®!<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">"env"</span>: &#123;</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    es6: <span class="literal">true</span>,</span><br><span class="line">    node: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>é¡¹ç›®æ˜¯åç«¯æ¨¡ç‰ˆæ¸²æŸ“çš„ï¼Œä¼šæœ‰ä¸€äº›å…¨å±€å˜é‡ï¼ŒeslintæŠ¥é”™æ€ä¹ˆåŠï¼Ÿ<br>æ”¹é…ç½®!<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">"globals"</span>: &#123;</span><br><span class="line">    __DEV__: <span class="literal">true</span>,</span><br><span class="line">    __HTTPS__: <span class="literal">true</span>,</span><br><span class="line">    FB: <span class="literal">true</span>,</span><br><span class="line">    ga: <span class="literal">true</span>,</span><br><span class="line">    $: <span class="literal">true</span>,</span><br><span class="line">    ercjs: <span class="literal">true</span>,</span><br><span class="line">    google: <span class="literal">true</span>,</span><br><span class="line">    IS_APP: <span class="literal">true</span>,</span><br><span class="line">    i18n: <span class="literal">true</span>,</span><br><span class="line">    Zepto: <span class="literal">true</span>,</span><br><span class="line">    AdjustEvent: <span class="literal">true</span>,</span><br><span class="line">    Adjust: <span class="literal">true</span>,</span><br><span class="line">    fbq: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>é¡¹ç›®ç”¨äº†å¾ˆå¤šæ–°è¯­æ³• eslint ä¸è¯†åˆ«, ç”¨äº† react æ€ä¹ˆåŠï¼Ÿ<br>æ”¹é…ç½®â€¦å…·ä½“çš„ è°·æ­Œä¸€ä¸‹ ä¸€å †ç­”æ¡ˆ ä¸å†èµ˜è¿°</p>
<h1 id="Flow"><a href="#Flow" class="headerlink" title="Flow"></a>Flow</h1><p>Flowå¯ä»¥ç†è§£ä¸º å¾ˆè½»é‡å‹ æ— ä¾µå…¥çš„ é™æ€ç±»å‹æ£€æŸ¥<br>é¡¹ç›®æš‚æ—¶æ²¡æœ‰è€ƒè™‘é›†æˆï¼Œæ‰€ä»¥è¿™é‡Œä¸åšè¿‡å¤šä»‹ç»</p>
<h1 id="git-check"><a href="#git-check" class="headerlink" title="git-check"></a>git-check</h1><p>æ—¢ç„¶æˆ‘ä»¬ æœ‰äº†ç¼–è¾‘å™¨çš„é…ç½®ï¼Œ jsç¼–è¾‘å®æ—¶æ£€æŸ¥ï¼Œ ä½†æ˜¯å¦‚æœæœ‰äº›å°ä¼™ä¼´ä¸éµå®ˆè§„åˆ™ æäº‹æƒ…æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨æœ€åä¸€ä¸ªæµç¨‹åŠ ä¸ŠéªŒè¯çš„éƒ¨åˆ†ï¼Œ  åœ¨git æäº¤çš„æ—¶å€™è·‘ä¸€äº›è„šæœ¬å»éªŒè¯ï¼Œå¦‚æœé€šè¿‡å°±ç»™æäº¤ï¼Œä¸é€šè¿‡å°±æç¤ºé”™è¯¯</p>
<p><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener">lint-staged</a> å¯ä»¥å¸®æˆ‘ä»¬åšè¿™äº›äº‹æƒ…</p>
<ol>
<li>å®‰è£… lint-staged husky: <code>npm i --save-dev lint-staged husky</code></li>
<li>å‘ <code>package.json</code> æ·»åŠ è¿è¡Œè„šæœ¬ <code>&quot;precommit&quot;: &quot;lint-staged&quot;</code><blockquote>
<p>è¿™æ—¶å€™åœ¨git commit ä¹‹å‰ä¼šè·‘ lint-stagedçš„ä¸œè¥¿</p>
</blockquote>
</li>
<li>å†å‘ <code>package.json</code> æ·»åŠ å†…å®¹:  æ³¨æ„ï¼Œè¿™æ—¶å€™ä¸æ˜¯åŠ åœ¨ <code>scripts</code>é‡Œé¢ï¼Œè€Œæ˜¯åŠ åœ¨åŒçº§<br><code>&quot;lint-staged&quot;: {
 // ä¸Šé¢æä¾›çš„â€œè‡ªåŠ¨åŒ–è„šæœ¬â€
 &quot;*.js&quot;: [&quot;eslint --fix&quot;, &quot;git add&quot;],
 &quot;*.json&quot;: [&quot;prettier --write&quot;, &quot;git add&quot;],
 &quot;*.css&quot;: [&quot;prettier --write&quot;, &quot;git add&quot;],
 &quot;*.scss&quot;: [&quot;prettier --write&quot;, &quot;git add&quot;],
 &quot;*.md&quot;: [&quot;prettier --write&quot;, &quot;git add&quot;]
}</code><blockquote>
<p>å› ä¸ºé¡¹ç›®æ˜¯æœ¬åœ°æ‰“åŒ…å†æ¨è¿œç¨‹ï¼Œæ‰€ä»¥æˆ‘çš„é…ç½®æ˜¯æŒ‡å®šäº† srcä¸‹çš„<br><code>&quot;src/**/*.js&quot;: [
&quot;eslint --fix&quot;,
&quot;git add&quot;
],
&quot;src/**/*.jsx&quot;: [
&quot;eslint --fix&quot;,
&quot;git add&quot;
],
&quot;src/**/*.css&quot;: [
&quot;prettier --write&quot;,
&quot;git add&quot;
],
&quot;src/**/*.scss&quot;: [
&quot;prettier --write&quot;,
&quot;git add&quot;
]</code></p>
</blockquote>
</li>
</ol>
<p>è¿™æ ·åœ¨æäº¤ä¹‹å‰å°±ä¼šå¯¹ æ–°å¢çš„(git add) .js æ–‡ä»¶æ‰§è¡Œ <code>&quot;eslint --fix&quot;</code> è„šæœ¬ï¼Œ ä»¥æ­¤ç±»æ¨â€¦</p>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>emmmmmmmmmmmmmmmmmmmmmmmmm è™½ç„¶çœ‹èµ·æ¥æŒºç®€å•çš„ï¼Œä½†æ˜¯æ•´å¥—ç»“åˆé¡¹ç›®å»æŠ˜è…¾ä¸‹æ¥ æŒºå¤šå‘çš„ã€‚<br>ç‰¹åˆ«æ˜¯eslintè¿™å—çš„é…ç½®</p>
<p>ç¬¬ä¸€æ¬¡è·‘ <code>airbnb</code> çš„é¡¹ç›®ï¼š <img src="./error1.png" alt="eror1"><br>ç›®å‰é¡¹ç›®é…ç½®å®˜æ–¹æ¨èçš„ esling ä¹‹å: <img src="./error2.png" alt="eror2"><br>æŠŠerroræ”¹ä¸º warnä¿è¯é¡¹ç›®èƒ½è·‘èµ·æ¥: <img src="./error3.png" alt="eror3"><br>gitæäº¤æ£€æŸ¥å¤±è´¥: <img src="./git-check.png" alt="git-check"></p>
<p>æœ€åé™„ä¸Šeslinté…ç½®<br><figure class="highlight javascript"><figcaption><span>.eslint.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getWebpackConfig = <span class="built_in">require</span>(<span class="string">'./config/webpack.dev.config'</span>)(process.cwd());</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="string">"parser"</span>: <span class="string">"babel-eslint"</span>,</span><br><span class="line">    <span class="string">"extends"</span>: [<span class="string">'eslint:recommended'</span>, <span class="string">"plugin:react/recommended"</span>, <span class="string">"prettier"</span>],</span><br><span class="line">    <span class="string">"parserOptions"</span>: &#123;</span><br><span class="line">        <span class="string">"ecmaVersion"</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="string">"sourceType"</span>: <span class="string">"module"</span>,</span><br><span class="line">        <span class="string">"ecmaFeatures"</span>: &#123;</span><br><span class="line">            <span class="string">"jsx"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">"modules"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">"experimentalObjectRestSpread"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"plugins"</span>: [<span class="string">"react"</span>],</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">        <span class="string">'import/resolver'</span>: &#123;</span><br><span class="line">            webpack: &#123;</span><br><span class="line">                config: getWebpackConfig,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"react"</span>: &#123;</span><br><span class="line">            <span class="string">"pragma"</span>: <span class="string">"React"</span>,</span><br><span class="line">            <span class="string">"version"</span>: <span class="string">"16.1.1"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"env"</span>: &#123;</span><br><span class="line">        browser: <span class="literal">true</span>,</span><br><span class="line">        es6: <span class="literal">true</span>,</span><br><span class="line">        node: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">"globals"</span>: &#123;</span><br><span class="line">        __DEV__: <span class="literal">true</span>,</span><br><span class="line">        __HTTPS__: <span class="literal">true</span>,</span><br><span class="line">        FB: <span class="literal">true</span>,</span><br><span class="line">        ga: <span class="literal">true</span>,</span><br><span class="line">        $: <span class="literal">true</span>,</span><br><span class="line">        ercjs: <span class="literal">true</span>,</span><br><span class="line">        google: <span class="literal">true</span>,</span><br><span class="line">        IS_APP: <span class="literal">true</span>,</span><br><span class="line">        i18n: <span class="literal">true</span>,</span><br><span class="line">        Zepto: <span class="literal">true</span>,</span><br><span class="line">        AdjustEvent: <span class="literal">true</span>,</span><br><span class="line">        Adjust: <span class="literal">true</span>,</span><br><span class="line">        fbq: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">"rules"</span>: &#123;</span><br><span class="line">        <span class="string">"sort-imports"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"import/first"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"import/no-named-as-default"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"import/no-named-as-default-member"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"import/extensions"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"prefer-destructuring"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"no-new"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"react/jsx-filename-extension"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"no-plusplus"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"func-names"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"no-console"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"no-useless-escape"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"semi"</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿™äº›è§„åˆ™åé¢ä¼šæ”¹ä¸ºé”™è¯¯ï¼Œæš‚æ—¶å…ˆè­¦å‘Š</span></span><br><span class="line">        <span class="string">"no-unused-vars"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">"react/prop-types"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">"react/no-string-refs"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">"react/jsx-key"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">"react/no-unescaped-entities"</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªåŠ¨åŒ–æµ‹è¯• puppeteer ä¸qqç©ºé—´</title>
    <url>/2018/03/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95puppeteer-%E4%B8%8Eqq%E7%A9%BA%E9%97%B4/</url>
    <content><![CDATA[<h1 id="é¡¹ç›®èƒŒæ™¯"><a href="#é¡¹ç›®èƒŒæ™¯" class="headerlink" title="é¡¹ç›®èƒŒæ™¯"></a>é¡¹ç›®èƒŒæ™¯</h1><p>emmmm å‰å‡ å¤©å¥³æœ‹å‹æƒ³åŠ æˆ‘qqã€‚æ‰æƒ³åˆ° ä¸‡å¹´æ²¡ç”¨çš„qqé‡Œé¢qqZone é—ç•™ç€åƒå¹´å‰çš„ä¸€å †ä¸­äºŒç•™è¨€ &amp;&amp; ä¸­äºŒè¯´è¯´ã€‚ åˆšå¥½æœ€è¿‘æœ‰æ¥è§¦åˆ° è‡ªåŠ¨åŒ–æµ‹è¯• <a href="https://github.com/GoogleChrome/puppeteer" target="_blank" rel="noopener">puppeteer</a> æ¡†æ¶ï¼Œ å°±æƒ³ç€å†™ä¸ªè„šæœ¬å»è‡ªåŠ¨åˆ æ‰ç•™è¨€æ¿å’Œè¯´è¯´ã€‚ æ•´ä¸ªé¡¹ç›®åŸºäº node8 è¿è¡Œ ç”¨çš„ async awaitè¯­æ³•ã€‚</p>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>é¦–å…ˆ puppeteer å¯ä»¥ç†è§£ä¸º æ˜¯è°·æ­Œå‡ºçš„ä¸€ä¸ªæ— UIç‰ˆæœ¬çš„Chromeã€‚</p>
<p><img src="./1.png" alt="1.png"></p>
<p>å…ˆä» puppeteer å®ä¾‹åŒ–å‡ºä¸€ä¸ª <code>Browser</code>ï¼Œ æ ¹æ® <code>Browser</code>å»new ä¸€ä¸ª <code>Page</code>ã€‚<br>è¿™ä¸ªPageå¯ä»¥ç†è§£æˆ æˆ‘ä»¬å¹³æ—¶æµè§ˆå™¨çš„ä¸€ä¸ª tabã€‚ ä¸€èˆ¬æ“ä½œéƒ½æ˜¯åŸºäº Pageå»å®ç°çš„</p>
<p>Page æä¾›äº†å¾ˆå¤šç®€å•æ˜“ç”¨çš„apiç”¨äºæ“ä½œç½‘é¡µå…ƒç´ ï¼Œ åŸºæœ¬éƒ½æ˜¯å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥ç›´æ¥ç”¨ async/await éå¸¸æ–¹ä¾¿å¿«æ·ç®€å•æ˜“æ‡‚ã€‚</p>
<ul>
<li>æ¯”å¦‚è·å–å…ƒç´ : <code>page.$(&#39;#switcher_plogin&#39;)</code> </li>
<li>åœ¨è¾“å…¥æ¡†å¡«å…¥ç‰¹å®šä¿¡æ¯ï¼Œæ¯æ¬¡è¾“å…¥é—´éš”100æ¯«ç§’æ¨¡æ‹Ÿè¾“å…¥: <code>page.type(&#39;#mytextarea&#39;, &#39;World&#39;, {delay: 100});</code></li>
<li>é€‰æ‹©ä¸‹æ‹‰æ¡†: <code>Page.select(&#39;select#colors&#39;, &#39;blue&#39;);</code></li>
</ul>
<h1 id="é¡¹ç›®ç»†èŠ‚"><a href="#é¡¹ç›®ç»†èŠ‚" class="headerlink" title="é¡¹ç›®ç»†èŠ‚"></a>é¡¹ç›®ç»†èŠ‚</h1><h2 id="é¡¹ç›®åˆå§‹åŒ–ä¸ç™»å½•æ­¥éª¤"><a href="#é¡¹ç›®åˆå§‹åŒ–ä¸ç™»å½•æ­¥éª¤" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–ä¸ç™»å½•æ­¥éª¤"></a>é¡¹ç›®åˆå§‹åŒ–ä¸ç™»å½•æ­¥éª¤</h2><p>é¦–å…ˆæˆ‘ä»¬è¦æ‰“å¼€ qqç©ºé—´ çš„é¡µé¢ å¹¶ç™»å½•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¸¸ç”¨æ“ä½œçš„å·¥å…·å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pageTool</span>(<span class="params">page</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> _page = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> _click(selector) &#123;</span><br><span class="line">      <span class="keyword">await</span> page.waitForSelector(selector, &#123; <span class="attr">visible</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span> page.click(selector);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> _waitForNavigation(opts = &#123;&#125;) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> page.waitForNavigation(&#123; <span class="attr">waitUntil</span>: <span class="string">'domcontentloaded'</span>, ...opts &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.assign(page, _page);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;</span><br><span class="line">    headless: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦æ˜¾ç¤ºç•Œé¢</span></span><br><span class="line">    devtools: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦æ˜¾ç¤ºå¼€å‘è€…å·¥å…·</span></span><br><span class="line">    slowMo: <span class="number">100</span>, <span class="comment">// å»¶è¿Ÿæ¯ä¸€æ¬¡æ“ä½œçš„æ¯«ç§’æ•°</span></span><br><span class="line">    ignoreHTTPSErrors: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¿½ç•¥HTTPSé”™è¯¯</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> loginPage = <span class="keyword">await</span> browser.newPage(); <span class="comment">// æ‰“å¼€æ–°tab è·å–å½“å‰tabçš„å®ä¾‹</span></span><br><span class="line">  <span class="keyword">const</span> page = loginPage;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ä»¿çœŸ è®¾ç½®çª—å£å¤§å°ä¸ UA ä¿¡æ¯ã€‚ è¿™é‡Œå¯ä»¥è®¾ç½®ä¸º ç§»åŠ¨ç«¯çš„ã€‚</span></span><br><span class="line">  <span class="comment">// puppeteer å†…ç½®äº†ä¸€äº›è®¾å¤‡å¯ä¾›é€‰æ‹© å¯ä»¥é€šè¿‡ä»¥ä¸‹è·å–ï¼š</span></span><br><span class="line">  <span class="comment">// const devices = require('puppeteer/DeviceDescriptors');</span></span><br><span class="line">  <span class="comment">// const iPhone = devices['iPhone 6'];</span></span><br><span class="line">  loginPage.emulate(&#123; <span class="attr">viewport</span>: &#123; <span class="attr">width</span>: <span class="number">1280</span>, <span class="attr">height</span>: <span class="number">800</span> &#125;, <span class="attr">userAgent</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3347.0 Safari/537.36'</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å¼€ç‰¹å®šé“¾æ¥ï¼Œå¹¶ç­‰å¾…3ç§’é’Ÿ</span></span><br><span class="line">  <span class="comment">// PS: ä¸€èˆ¬æ˜¯ç”¨ page.waitForNavigation å»ç­‰å¾…é¡µé¢åŠ è½½ï¼Œè¿™é‡Œç½‘ç»œé—®é¢˜ç»å¸¸ä¼šå‡ºç°å¡ä½ æ‰€ä»¥ç®€å•è®¾ç½®ä¸ºç­‰3s</span></span><br><span class="line">  <span class="keyword">await</span> loginPage.goto(<span class="string">'https://i.qq.com/?s_url=http%3A%2F%2Fuser.qzone.qq.com%2F847691625%2Finfocenter&amp;rd=1'</span>);</span><br><span class="line">  <span class="keyword">await</span> loginPage.waitFor(<span class="number">3000</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è¿™é‡Œå°è£…äº†ä¸€ç‚¹ç‚¹å¸¸ç”¨çš„æ“ä½œ</span></span><br><span class="line">  pageTool(loginPage);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å¼€æˆåŠŸä¹‹å æˆ‘ä»¬å¼€å§‹èµ°ç™»å½•çš„æ­¥éª¤äº†</span></span><br><span class="line">  (<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// QQç©ºé—´é‡Œé¢æ˜¯ç”¨ä¸€ä¸ª iframe å»è£…ç™»å½•çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥è¿™é‡Œè¦å…ˆè·å– ç™»å½•iframeå¯¹è±¡å†è¿›è¡Œæ“ä½œ</span></span><br><span class="line">    <span class="keyword">const</span> iframeDom = <span class="keyword">await</span> loginPage.frames().filter(<span class="function"><span class="params">iframe</span> =&gt;</span> iframe._name === <span class="string">'login_frame'</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰ç™»å½•qqçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å¿«æ·ç™»å½•æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">const</span> iframeLoginBtn = <span class="keyword">await</span> iframeDom.$(<span class="string">'#img_out_847691625'</span>);</span><br><span class="line">    <span class="keyword">if</span> (iframeLoginBtn) &#123;</span><br><span class="line">      <span class="keyword">await</span> iframeLoginBtn.click();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰ç™»å½•qq ç›´æ¥è¯»é…ç½®é‡Œé¢çš„ä¿¡æ¯å»ç”¨è´¦æˆ·å¯†ç ç™»å½•</span></span><br><span class="line">      <span class="keyword">if</span> (data.qq === <span class="string">'ä½ çš„qqè´¦å·'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å…ˆåœ¨a.js è¾“å…¥qqè´¦å·å’Œå¯†ç '</span>);</span><br><span class="line">      <span class="comment">// å¯†ç æ¨¡å¼</span></span><br><span class="line">      <span class="keyword">const</span> plogin = <span class="keyword">await</span> iframeDom.$(<span class="string">'#switcher_plogin'</span>);</span><br><span class="line">      <span class="keyword">await</span> plogin.click(); <span class="comment">//ç‚¹å‡»è´¦æˆ·å¯†ç ç™»å½•çš„æŒ‰é’®</span></span><br><span class="line">      <span class="keyword">const</span> userName = <span class="keyword">await</span> iframeDom.$(<span class="string">'#u'</span>);</span><br><span class="line">      <span class="keyword">await</span> userName.type(data.qq); <span class="comment">// å¡«å…¥è´¦æˆ·</span></span><br><span class="line">      <span class="keyword">const</span> pw = <span class="keyword">await</span> iframeDom.$(<span class="string">'#p'</span>);</span><br><span class="line">      <span class="keyword">await</span> pw.type(data.pw); <span class="comment">// å¡«å…¥å¯†ç </span></span><br><span class="line">      <span class="keyword">const</span> loginBtn = <span class="keyword">await</span> iframeDom.$(<span class="string">'#login_button'</span>);</span><br><span class="line">      <span class="keyword">await</span> loginBtn.click(); <span class="comment">// ç‚¹å‡»ç™»å½•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•å®Œæˆ'</span>);</span><br><span class="line">    <span class="comment">// åˆ°è¿™é‡Œ ç™»å½•æ­¥éª¤å·²ç»å®Œæˆ å¤§æ¦‚æ¶µç›–äº†æ•´ä¸ªé¡¹ç›®çš„80%æ“ä½œ å…¶ä»–éƒ½æ˜¯ç±»ä¼¼çš„domæ“ä½œ</span></span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** åˆ é™¤ç•™è¨€æ¿æ¨¡å—ä»£ç ï¼Œè§ä¸‹ä¸€ä¸ªæ ç›® **/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/** åˆ é™¤è¯´è¯´æ¨¡å—ä»£ç ï¼Œè§ä¸‹ä¸‹ä¸ªæ ç›® **/</span></span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤ç•™è¨€æ¿çš„åŠŸèƒ½æ¨¡å—"><a href="#åˆ é™¤ç•™è¨€æ¿çš„åŠŸèƒ½æ¨¡å—" class="headerlink" title="åˆ é™¤ç•™è¨€æ¿çš„åŠŸèƒ½æ¨¡å—"></a>åˆ é™¤ç•™è¨€æ¿çš„åŠŸèƒ½æ¨¡å—</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">delCommit</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç­‰å¾…ä¸€ä¸ª .head-nav-menu a[title="ç•™è¨€æ¿"] çš„å…ƒç´  cssé€‰æ‹©å™¨</span></span><br><span class="line">  <span class="keyword">await</span> page.waitForSelector(<span class="string">'.head-nav-menu a[title="ç•™è¨€æ¿"]'</span>);</span><br><span class="line">  <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">await</span> page._click(<span class="string">'.head-nav-menu a[title="ç•™è¨€æ¿"]'</span>);</span><br><span class="line">  <span class="keyword">await</span> page.waitForSelector(<span class="string">'.app_canvas_frame'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'ç•™è¨€æ¿iframeåŠ è½½å®Œæˆ'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡Œé‡æ–°è·å–ä¸€ä¸ª ifrmae ç•™è¨€æ¿ä¹Ÿæ˜¯ç”¨ä¸€ä¸ªiframe åµŒå¥—è¿›æ¥çš„....æ²¡æƒ³åˆ°æ•´ä¸ªqqç©ºé—´æ˜¯ç”±ä¸€å †çš„ifrmaeå †èµ·æ¥</span></span><br><span class="line">  <span class="keyword">const</span> iframeDom = <span class="keyword">await</span> page.frames().filter(<span class="function"><span class="params">iframe</span> =&gt;</span> iframe.url().includes(<span class="string">'qzs.qq.com/qzone/msgboard/msgbcanvas.html'</span>))[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'ç•™è¨€æ¿iframe è·å–å®Œæˆ '</span>, iframeDom);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> btnBatchBottom = <span class="keyword">await</span> iframeDom.$(<span class="string">'#btnBatchBottom'</span>);</span><br><span class="line">  <span class="keyword">await</span> btnBatchBottom.click();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æ‰¹é‡ç‚¹å‡»æˆåŠŸ '</span>, btnBatchBottom);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> delTime = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸€æ¬¡å®Œæ•´çš„åˆ é™¤é€»è¾‘</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">delOnes</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡ åˆ é™¤ å¼€å§‹æ‰§è¡Œ`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> $chkSelectAllBottom = <span class="string">'#chkSelectAllBottom'</span>;</span><br><span class="line">    <span class="keyword">const</span> chkSelectAllBottom = <span class="keyword">await</span> iframeDom.$($chkSelectAllBottom);</span><br><span class="line">    <span class="keyword">await</span> chkSelectAllBottom.click();</span><br><span class="line">    <span class="keyword">if</span> (delTime !== <span class="number">1</span>) <span class="keyword">await</span> chkSelectAllBottom.click();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡ åˆ é™¤ ç‚¹å‡»å…¨é€‰`</span>, chkSelectAllBottom);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> $delAll = <span class="string">'#btnDeleteBatchBottom'</span>;</span><br><span class="line">    <span class="keyword">const</span> delAll = <span class="keyword">await</span> iframeDom.$($delAll);</span><br><span class="line">    <span class="keyword">await</span> delAll.click();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡ åˆ é™¤ ç‚¹å‡»åˆ é™¤`</span>, delAll)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> $sureBtn = <span class="string">'.qz_dialog_layer_btn.qz_dialog_layer_sub span'</span>;</span><br><span class="line">    <span class="keyword">await</span> page._click($sureBtn);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡ åˆ é™¤ ç‚¹å‡»ç¡®å®š`</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡ åˆ é™¤ æ‰§è¡Œç»“æŸ`</span>);</span><br><span class="line">    delTime++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€’å½’</span></span><br><span class="line">    <span class="keyword">const</span> hasCommit = <span class="keyword">await</span> iframeDom.$(<span class="string">'#ulCommentList .bor3'</span>);</span><br><span class="line">    <span class="keyword">if</span> (hasCommit) &#123;</span><br><span class="line">      <span class="keyword">await</span> delOnes();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> delOnes();</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// delCommit();</span></span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤è¯´è¯´æ¨¡å—"><a href="#åˆ é™¤è¯´è¯´æ¨¡å—" class="headerlink" title="åˆ é™¤è¯´è¯´æ¨¡å—"></a>åˆ é™¤è¯´è¯´æ¨¡å—</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">delEmotion</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> page.waitForSelector(<span class="string">'.head-nav-menu a[title="è¯´è¯´"]'</span>);</span><br><span class="line">  <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">await</span> page._click(<span class="string">'.head-nav-menu a[title="è¯´è¯´"]'</span>);</span><br><span class="line">  <span class="keyword">await</span> page.waitForSelector(<span class="string">'.app_canvas_frame'</span>);</span><br><span class="line">  <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'è¯´è¯´iframeåŠ è½½å®Œæˆ'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> iframeDom = <span class="keyword">await</span> page.frames().filter(<span class="function"><span class="params">iframe</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(iframe.url());</span><br><span class="line">    <span class="keyword">return</span> iframe.url().includes(<span class="string">'qzs.qq.com/qzone/app/mood_v6/html/index.html'</span>);</span><br><span class="line">  &#125;)[<span class="number">0</span>];</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'è¯´è¯´iframe è·å–å®Œæˆ '</span>, iframeDom);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> delTime = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">delOnes</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`ç¬¬ <span class="subst">$&#123;delTime&#125;</span>æ¬¡åˆ é™¤ å¼€å§‹æ‰§è¡Œ`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> moreBtn = <span class="keyword">await</span> iframeDom.$(<span class="string">'.dropdown-trigger.c_tx'</span>);</span><br><span class="line">      <span class="keyword">await</span> moreBtn.hover();</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`ç¬¬ <span class="subst">$&#123;delTime&#125;</span>æ¬¡åˆ é™¤ å±•ç¤ºåˆ é™¤æŒ‰é’®`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> delBtn = <span class="keyword">await</span> iframeDom.$(<span class="string">'.del.del_btn.author_display'</span>);</span><br><span class="line">      <span class="keyword">await</span> delBtn.click();</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`ç¬¬ <span class="subst">$&#123;delTime&#125;</span>æ¬¡åˆ é™¤ ç‚¹å‡»åˆ é™¤æŒ‰é’®`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> page.waitForSelector(<span class="string">'.qz_dialog_layer_btn.qz_dialog_layer_sub span'</span>);</span><br><span class="line">      <span class="keyword">const</span> delBtnSure = <span class="keyword">await</span> page.$(<span class="string">'.qz_dialog_layer_btn.qz_dialog_layer_sub span'</span>);</span><br><span class="line">      <span class="keyword">await</span> delBtnSure.click();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`ç¬¬ <span class="subst">$&#123;delTime&#125;</span>æ¬¡åˆ é™¤ ç‚¹å‡»ç¡®å®šæŒ‰é’®`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`ç¬¬ <span class="subst">$&#123;delTime&#125;</span> æ¬¡åˆ é™¤ æ‰§è¡Œç»“æŸ`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (delTime % <span class="number">10</span> === <span class="number">0</span>) <span class="keyword">await</span> nextPage();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>);</span><br><span class="line">      delTime++;</span><br><span class="line">      <span class="keyword">await</span> delOnes();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(e, <span class="string">'æŠ¥é”™äº† å°è¯•æ–¹æ¡ˆ'</span>);</span><br><span class="line">      <span class="keyword">await</span> delOnes();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> delOnes();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡ å‡ºé”™ é‡æ–°try ä¸€é`</span>)</span><br><span class="line">    <span class="keyword">await</span> delOnes();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">nextPage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡æ‰§è¡Œ é‡åˆ°è·³è½¬`</span>);</span><br><span class="line">    <span class="keyword">const</span> nextBtn = <span class="keyword">await</span> iframeDom.$(<span class="string">'a[title="ä¸‹ä¸€é¡µ"]'</span>);</span><br><span class="line">    nextBtn.click();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡æ‰§è¡Œ ç‚¹å‡»è·³è½¬`</span>);</span><br><span class="line">    <span class="keyword">await</span> page.waitFor(<span class="number">5000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç¬¬<span class="subst">$&#123;delTime&#125;</span>æ¬¡æ‰§è¡Œ è·³è½¬ç»“æŸ`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é¡¹ç›®æ€»ç»“"><a href="#é¡¹ç›®æ€»ç»“" class="headerlink" title="é¡¹ç›®æ€»ç»“"></a>é¡¹ç›®æ€»ç»“</h1><p>å¤§æ¦‚ä»£ç éƒ½ä¸¢ğŸ‘†äº† ï¼Œé™„ä¸Š <strong><a href="https://github.com/jsonz1993/wheel/tree/master/qqZone" target="_blank" rel="noopener">æºç åœ°å€</a></strong> åœ¨ <code>a.js</code> å¡«ä¸Šè´¦å·å¯†ç ã€‚<br>å†æ‰“å¼€æºç é‡Œé¢çš„ <code>// await delCommit();</code> æˆ–è€… <code>// await delEmotion();</code> æ¥åˆ é™¤ ç•™è¨€æ¿æˆ–è¯´è¯´ã€‚æ²¡æœ‰åšå¹¶å‘æ“ä½œ æ‰€ä»¥åªèƒ½æ‰§è¡Œä¸€ç§åŠŸèƒ½ã€‚<br>ä¿®æ”¹å®Œä¹‹å<code>npm install &amp;&amp; node app.js</code> å°±å¯ä»¥è·‘äº†ã€‚</p>
<p>é¡¹ç›®ä¸­é‡åˆ°å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><p>page.waitForNavigation(options) ä¸€ç›´ç­‰ä¸åˆ°å®ŒæˆçŠ¶æ€, 30s è¶…æ—¶æŠ¥é”™<br>å¯èƒ½æ˜¯ä¸€ç›´æœ‰ä¸€äº›è„šæœ¬æŒ‚æ‰æˆ–è€…åœ¨loadingã€‚æ‰€ä»¥åé¢æ¢æˆ ç­‰å¾…3ç§’ è™½ç„¶æ¯”è¾ƒ lowã€‚ã€‚ã€‚ä½†æ˜¯å¯è¡Œ</p>
</li>
<li><p>iframe é‡Œé¢çš„domå…ƒç´ ä¸èƒ½ç›´æ¥é€šè¿‡ page.$ è·å–ï¼Œéœ€è¦å…ˆè·å– iframe å†é€šè¿‡è¿™ä¸ª iframeå»è·å–æƒ³è¦çš„domå…ƒç´ </p>
</li>
<li><p>å°±ç®—æ˜¯æµè§ˆå™¨æ‰§è¡Œ æ¨¡æ‹Ÿäººä¸ºåˆ é™¤ï¼Œä½†æ˜¯è¿ç»­åˆ é™¤å¤ªå¤šè¡Œæ•°æ®çš„æ—¶å€™ï¼Œ è¿˜æ˜¯ä¼šè§¦å‘ è…¾è®¯çš„éªŒè¯ç æœºåˆ¶ã€‚<br>åŸæœ¬ç”¨ puppeteer æˆªå›¾api å»è·å–éªŒè¯ç ï¼Œç„¶åç”¨ <a href="https://github.com/tesseract-ocr/tesseract" target="_blank" rel="noopener">Tesseract</a> å»è¯†åˆ«éªŒè¯ç ã€‚ä½†æ˜¯å‘ç°è¯´ è¯†åˆ«çš„æœ‰æ•ˆç‡æä½â€¦ ä¹Ÿæ²¡æœ‰å»æŠ˜è…¾æ•°æ®è®­ç»ƒã€‚ åé¢å°±æ”¾å¼ƒéªŒè¯ç è¿™ä¸€å—çš„æŠ€æœ¯è¯†åˆ«ï¼Œå‡ºäº†éªŒè¯ç å°±å…ˆä¸è·‘ éš”æ–­æ—¶é—´å†è·‘ã€‚</p>
</li>
</ol>
<p>æœ€åç»™å‡ºå®Œæ•´çš„é¡¹ç›®æ¼”ç¤º</p>
<p>åˆ é™¤ç•™è¨€æ¿åŠŸèƒ½æ¼”ç¤º</p>
<video src="./1.mov" width="320" height="240" controls="controls"><br>åˆ é™¤ç•™è¨€æ¿åŠŸèƒ½æ¼”ç¤º<br></video>

<p>åˆ é™¤è¯´è¯´åŠŸèƒ½æ¼”ç¤º</p>
<video src="./2.mov" width="320" height="240" controls="controls"><br>åˆ é™¤è¯´è¯´åŠŸèƒ½æ¼”ç¤º<br></video>

<p>æ—¥å¿—è¾“å‡º<br><img src="./log.png" alt="log"></p>
<h1 id="æºç åœ°å€"><a href="#æºç åœ°å€" class="headerlink" title="æºç åœ°å€"></a><a href="https://github.com/jsonz1993/wheel/tree/master/qqZone" target="_blank" rel="noopener">æºç åœ°å€</a></h1>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>reactå…¨å®¶æ¡¶ + dva å®è·µæ•´ç†æ€»ç»“</title>
    <url>/2018/02/react%E5%85%A8%E5%AE%B6%E6%A1%B6-dva-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%95%B4%E7%90%86%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="é¡¹ç›®èƒŒæ™¯"><a href="#é¡¹ç›®èƒŒæ™¯" class="headerlink" title="é¡¹ç›®èƒŒæ™¯"></a>é¡¹ç›®èƒŒæ™¯</h1><p>æœ€è¿‘æ¥æ‰‹ç»„å†…ä¸€ä¸ªå‰ç«¯å¤§ç‰›çš„é¡¹ç›®ï¼Œå¤§æ¦‚ç†æ¸…äº†é‡Œé¢çš„æ€»ç†é€»è¾‘ä¸æ•°æ®æµå‘ç­‰ï¼Œ å†™ä¸ªæ€»ç»“ æ–¹ä¾¿ä»¥åå¯ä»¥æŸ¥é˜…å‚è€ƒã€‚</p>
<p>åœ¨ä¹‹å‰åšçš„åå°ç®¡ç†å¹³å°é‡Œé¢ï¼Œå°±æœ‰ç”¨åˆ° <code>dva+antd</code>ï¼Œ åˆ°åé¢ç›´æ¥ç”¨ <code>antd-pro</code> é‡æ–°æ•´åˆäº†ä¸€éï¼Œä¸å¾—ä¸è¯´ <code>antd-pro</code> çœŸçš„æ˜¯å¼€ç®±å³ç”¨ ä¼˜é›…ç²—æš´ã€‚</p>
<p>ä½†æ˜¯é‡Œé¢å¯èƒ½å¾ˆå¤šå’Œæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨ä¹ æƒ¯æœ‰æ‰€ä¸åŒï¼Œ æ‰€ä»¥è¿™æ¬¡æ¥è§¦çš„é¡¹ç›®æ˜¯åŸºäº dva è‡ªå·±å†é‡ç»„äº†ä¸€ä¸‹ <code>model</code> <code>router</code> ç›®å½•ç»“æ„ç­‰ã€‚ </p>
<p>ä½¿å¾—é¡µé¢æ›´åŠ çš„æ¨¡å—åŒ–ï¼Œæ—¢ models, routes ä¸æ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶ç›®å½•é‡Œï¼Œè€Œæ˜¯ç›´æ¥æŒ‰ç…§é¡µé¢çº§åˆ«æ¥ç»„åˆã€‚æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ æœ¬æ¥ models,routes è¿™äº›å‡ ä¹å°±æ˜¯ä¸èƒ½å…¬ç”¨çš„ï¼Œé‚£ç›´æ¥æŒ‰ç€é¡µé¢å»åˆ† æ–¹ä¾¿é—®é¢˜å®šä½ä¸ç»´æŠ¤ã€‚</p>
<h1 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ config              # ä¸€äº›å…³äº webpack babel dll ç­‰é¡¹ç›®æ„ä»¶çš„é…ç½®</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ babel-plugin-wrap-source.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ babel-plugin-wrap.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ build.log</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dist.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dll</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ server.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ssr-middleware.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ theme.config.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ webpack.config.common.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ webpack.config.dll.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ webpack.config.prod.js</span><br><span class="line">â”œâ”€â”€ dist               # æ‰“åŒ…å¥½çš„æ–‡ä»¶</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ css</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.html</span><br><span class="line">â”‚Â Â  â””â”€â”€ js</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ assets        # æ”¾ä¸€äº›é™æ€èµ„æºï¼Œå¦‚ å…¨å±€ä¸€äº› less æ–‡ä»¶ç­‰</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ common        # å…¬å…±æ–‡ä»¶ï¼Œ å¦‚ config request utils ç­‰</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ components    # é€šç”¨ç»„ä»¶, å¦‚ editor loading ç­‰ï¼Œç”¨äº† antd ä¹‹åï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹çš„æ–‡ä»¶è¾ƒå°‘</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index-ssr.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.js      # é¡¹ç›®å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mock          # mockæ–‡ä»¶</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ modules       # ä¸šåŠ¡é¡µé¢æ–‡ä»¶å¤¹  ä»£ç çš„ç»å¤§éƒ¨åˆ†æ”¾åœ¨æ­¤å¤„</span><br><span class="line">â”‚       â””â”€â”€ activity  #  ä¸šåŠ¡é¡µé¢ æ¯ä¸ªä¸šåŠ¡é¡µé¢èµ·ä¸€ä¸ªæ–‡ä»¶å¤¹</span><br><span class="line">â”‚        Â Â  â”œâ”€â”€ index.js   # å½“å‰é¡µé¢çš„è·¯ç”±åŠåŠ¨æ€åŠ è½½æ–‡ä»¶çš„é…ç½®æ–‡ä»¶</span><br><span class="line">â”‚       Â  Â  â”œâ”€â”€ model.js   # å½“å‰é¡µé¢çš„ dva model</span><br><span class="line">â”‚       Â  Â  â”œâ”€â”€ businessUtil.js # </span><br><span class="line">â”‚       Â Â   â””â”€â”€ view       # å½“å‰é¡µé¢çš„ view æ–‡ä»¶</span><br><span class="line">â”‚       Â Â       â””â”€â”€ index.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ router.js     # æ€»è·¯ç”±å…¥å£</span><br><span class="line">â”‚Â Â  â””â”€â”€ services      # åå°æ¥å£æœåŠ¡</span><br><span class="line">â””â”€â”€ webpack.config.js # webpack é…ç½®</span><br></pre></td></tr></table></figure>
<h1 id="é¡¹ç›®å‰–æ"><a href="#é¡¹ç›®å‰–æ" class="headerlink" title="é¡¹ç›®å‰–æ"></a>é¡¹ç›®å‰–æ</h1><h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><p>å’Œå…¶ä»–é¡¹ç›®ä¸€æ · <code>index.js</code> å¤„ç†çš„ä¸œè¥¿å¾ˆç®€å•</p>
<ul>
<li>è¿›è¡Œä¸€äº›å…³äº dva çš„é…ç½®åˆå§‹åŒ–</li>
<li>åŠ è½½é…ç½®app model <code>require(modules/app/model)</code></li>
<li>åŠ è½½é…ç½®app router <code>require(&#39;./router&#39;).default</code></li>
<li>&amp;&amp;&amp;&amp;&amp;&amp;&amp; å¯åŠ¨åº”ç”¨</li>
</ul>
<p>è¿™é‡Œå°±å¼•å‡ºä¸¤ä¸ªåˆ†æ”¯ï¼Œ model &amp;&amp; router å‰ç«¯æ¶æ„ä¸­æ¯”è¾ƒå…³å¿ƒçš„ä¸¤ä¸ªã€‚</p>
<h2 id="router-ç®¡ç†"><a href="#router-ç®¡ç†" class="headerlink" title="router ç®¡ç†"></a>router ç®¡ç†</h2><p>åœ¨ <code>router.js</code> é‡Œé¢ å®šä¹‰äº†ä¸» <code>Component</code> ä¸é»˜è®¤ url</p>
<p>router.childRoutes ä¹Ÿæ˜¯ä½¿ç”¨æ¨¡å—çš„æ–¹å¼ï¼Œåªå¼•ç”¨äº†å‡ ä¸ªå¤§æ¨¡å—ï¼Œå¦‚ <code>require(&#39;modules/activity&#39;)(app),</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Routers = <span class="function"><span class="keyword">function</span> (<span class="params">&#123; history, app &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> routes = getRoutes(app);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;history&#125;</span> <span class="attr">routes</span>=<span class="string">&#123;routes&#125;</span> <span class="attr">render</span>=<span class="string">&#123;applyRouterMiddleware(useScroll())&#125;</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">function getRoutes(app) &#123;</span></span><br><span class="line"><span class="xml">  return [</span></span><br><span class="line"><span class="xml">    &#123;</span></span><br><span class="line"><span class="xml">      path: '/',</span></span><br><span class="line"><span class="xml">      component: App,</span></span><br><span class="line"><span class="xml">      childRoutes: [</span></span><br><span class="line"><span class="xml">        require('modules/activity')(app),</span></span><br><span class="line"><span class="xml">      ],</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">  ];</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>modules/activity/index.js</code> å†å»åŠ è½½æ„å»ºä»–çš„å­çº§è·¯ç”±</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> app=&gt;(&#123;</span><br><span class="line">    path: <span class="string">'url'</span>,</span><br><span class="line">    getComponent (nextState, cb) &#123;</span><br><span class="line">        <span class="built_in">require</span>.ensure([], (<span class="built_in">require</span>) =&gt; &#123;</span><br><span class="line">            app.model(<span class="built_in">require</span>(<span class="string">'./model'</span>)); <span class="comment">// åŠ è½½å½“å‰æ¨¡å—çš„model</span></span><br><span class="line">            cb(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'./view'</span>)); <span class="comment">// è®°è½½å½“å‰æ¨¡å—çš„view</span></span><br><span class="line">        &#125;, <span class="string">'æ¨¡å—å'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    childRoutes:[</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'modules/child1'</span>)(app), </span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'modules/child2'</span>)(app)</span><br><span class="line">    ],</span><br><span class="line">    ...å…¶ä»–é…ç½®</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å°±è¿™æ ·ä¸€å±‚ä¸€å±‚çš„æ„å»ºè‡ªå·±çš„è·¯ç”±ï¼Œ æ ¹æ®é¡µé¢å»é…ç½®ä¹Ÿå¯ä»¥æ›´åŠ çš„ç»†è…»å¯æ§ã€‚ä¸ä¼šå†™æˆé•¿é•¿çš„ä¸€å¨ã€‚</p>
<h2 id="model"><a href="#model" class="headerlink" title="model"></a>model</h2><p>modelå±‚ç”¨çš„æ˜¯ <code>dva</code> é‚£å¥—ï¼Œ å¸®æˆ‘ä»¬æ•´åˆäº† <code>redux</code>, <code>redux-sage</code> and <code>react-router</code> ååˆ†è¶…çº§å¥½ç”¨ã€‚</p>
<p>è¿™é‡Œåªæ˜¯æŠŠç›®å½•ç»“æ„ä¹Ÿè°ƒæ•´ä¸º é¡µé¢çº§åˆ«é‡Œé¢ï¼Œä¸é¡µé¢çš„ è·¯ç”±é…ç½®åŒçº§ã€‚ ä¹Ÿæ˜¯å‡ºäºæ›´å¥½çš„å®šä½é—®é¢˜ä¸ç»´æŠ¤ã€‚</p>
<p>ä¸€èˆ¬ä¸<code>model</code> ç›¸å…³çš„æ–‡ä»¶è¿˜æœ‰å„ä¸ªé¡µé¢çº§åˆ«æ–‡ä»¶å¤¹ï¼ˆå³<code>modules/activity</code>)é‡Œé¢çš„ <code>businessUtil.js</code> æ–‡ä»¶ã€‚</p>
<p>è¿™ä¸ªæ–‡ä»¶ä¸»è¦ç”¨æ¥è¾…åŠ©å¤„ç†ä¸€äº›å’Œ model æœ‰å…³çš„äº‹æƒ…ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸‰ä¸ªæ–¹æ³• <code>export { getInitState, convertProps2Params, convertParams2Props }</code>ã€‚ åˆ†åˆ«å¤„ç† <code>åˆå§‹åŒ–state</code>, <code>server</code> ç«¯æ•°æ®ä¸ç»„ä»¶ <code>props</code> ä¹‹é—´çš„å·®å¼‚è½¬æ¢ã€‚</p>
<h2 id="mock-æ•°æ®"><a href="#mock-æ•°æ®" class="headerlink" title="mock æ•°æ®"></a>mock æ•°æ®</h2><p>mock æ•°æ®ï¼Œç”¨äº† dva è‡ªå¸¦çš„é‚£å¥—ã€‚</p>
<p>æˆ‘ä»¬å¹³æ—¶å†™æ¥å£çš„æ—¶å€™ï¼Œä¼šåœ¨ <code>services/</code> ä¸‹é¢èµ·ä¸€ä¸ªæ–‡ä»¶ é‡Œé¢å¸¦æœ‰æŸä¸ªæ¥å£åœ°å€ ç”¨æ¥è¯·æ±‚æ•°æ®æ¥å£çš„<br>ç„¶ååœ¨ <code>mock/</code> ä¸‹é¢ä¹Ÿä¼šèµ·ä¸€ä¸ªæ–‡ä»¶ ç›¸åŒçš„ä¹Ÿä¼šå¸¦æœ‰ä¸€ä¸ªæ¥å£åœ°å€<br>è¿™æ ·æˆ‘ä»¬å¦‚æœè¿™ä¸ªæ¥å£åœ°å€æ”¹å˜ï¼Œå²‚ä¸æ˜¯è¦æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼Ÿ</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨ <code>services/</code> ä¸‹é¢çš„æ–‡ä»¶ï¼Œåªæ˜¯ç®€å•çš„å†™äº†ä¸€äº›åŸå§‹æ•°æ®ï¼Œå¦‚ url, method ç­‰</p>
<figure class="highlight javascript"><figcaption><span>services/feature1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//@wrapFunction: common/request</span></span><br><span class="line"><span class="comment">// @1 ä¸Šé¢é‚£è¡Œæ³¨é‡Šæ˜¯å¹²ä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  url:<span class="string">'api/feature1'</span>,</span><br><span class="line">  method:<span class="string">'POST'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åœ¨ <code>mock/</code> ä¸‹é¢å°±å¯ä»¥ç›´æ¥å¼•å…¥ <code>services/feature1</code> å°±å¯ä»¥æ‹¿åˆ°ç›¸åŒçš„urlï¼Œ æ¥å£åœ°å€æ”¹åŠ¨çš„è¯ä¹Ÿåªéœ€è¦æ”¹åŠ¨ <code>services</code> ä¸‹çš„æ–‡ä»¶ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåªæ˜¯ç®€å•çš„è¿”å›ä¸€äº›åŸå§‹æ•°æ®ï¼Œé‚£å’Œä¸€ä¸ª <code>config</code> æ–‡ä»¶æœ‰ä½•åŒºåˆ«ï¼Œè¿™æ ·å®Œå…¨æ²¡æœ‰æ”¾åœ¨ <code>services</code> ä¸‹é¢çš„å¿…è¦å•Šã€‚ã€‚ã€‚  æ‰€ä»¥æˆ‘ä»¬ç”¨äº†ä¸€è¡Œæ³¨é‡Šæ¥åšä¸€äº›æ“ä½œ</p>
<p>å¤§æ¦‚çš„åŸç†æ˜¯ å†™äº†ä¸€ä¸ª babel æ’ä»¶ï¼Œç”¨æ¥å¤„ç†ä¸€äº›æ“ä½œã€‚<br>å¦‚æœåŒ¹é…åˆ° <code>//@wrapFunction:</code> åˆ™ç”¨åé¢çš„é“¾æ¥ require ä¸€ä¸ªæ–¹æ³•æ¥åŒ…ç€é¡µé¢ä¸Šçš„ä»£ç ã€‚</p>
<p>è¿™æ ·å°±èƒ½èµ·åˆ°ï¼Œå‰ç«¯è·‘ä»£ç çš„æ—¶å€™ <code>feature1</code> æ˜¯ä¸€ä¸ªæ¥å£åŠŸèƒ½çš„æ–‡ä»¶ï¼Œ <code>mock</code> çš„æ—¶å€™æ˜¯ä¸€ä¸ªå•çº¯çš„æ•°æ®è¾“å‡ºæ–‡ä»¶.</p>
<h2 id="babel-æ’ä»¶è‡ªåŠ¨å¤„ç†-services-js"><a href="#babel-æ’ä»¶è‡ªåŠ¨å¤„ç†-services-js" class="headerlink" title="babel æ’ä»¶è‡ªåŠ¨å¤„ç† services/*.js"></a>babel æ’ä»¶è‡ªåŠ¨å¤„ç† <code>services/*.js</code></h2><p>åœ¨ä¸Šé¢ä¸€å°èŠ‚è®²åˆ°æˆ‘ä»¬ç”¨ babelæ’ä»¶æ¥å¤„ç†å·®å¼‚åŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬å…·ä½“è®²ä¸€ä¸‹æ˜¯æ€ä¹ˆå¤„ç†çš„</p>
<p>å› ä¸ºé¡¹ç›®ç”¨çš„æ˜¯ <code>roadhog</code> æ­å»ºçš„ï¼Œ æ‰€ä»¥æˆ‘ä»¬åœ¨ <code>.roadhogrc.js</code> é‡Œé¢é…ç½®ä¸€ä¸‹ babel æ’ä»¶ï¼Œå¼•è¿›è‡ªå·±æ’ä»¶çš„æ–‡ä»¶ã€‚ è¿™é‡Œæˆ‘ä»¬çš„æ’ä»¶æ”¾ç½®åœ¨ <code>/config/babel-plugin-wrap.js</code>;</p>
<ol>
<li>åœ¨ <code>services/*.js</code> é‡Œé¢æ·»åŠ ä¸€è¡Œæ³¨é‡Šä»£ç ç”¨ä½œ babel è¯†åˆ«çš„æ ‡è¯†</li>
<li>åˆ¤æ–­é¡µé¢ä¸Šæœ‰æ— å¯¹åº”æ³¨é‡Š</li>
<li>è·å–æ³¨é‡Šä¸ç›®æ ‡è·¯å¾„ï¼Œ æŠŠexport default çš„è¾“å‡ºç”¨å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼æ›¿æ¢æ‰</li>
</ol>
<p>å…·ä½“çš„ babelæ’ä»¶ç¼–å†™æ–¹å¼å¯ä»¥çœ‹å®˜ç½‘ <a href="https://babeljs.cn/docs/plugins/" target="_blank" rel="noopener">https://babeljs.cn/docs/plugins/</a></p>
<p>äº†è§£ç¼–è¯‘å™¨åŸç†å¯ä»¥å‚è€ƒ ä¸Šä¸€ç¯‡æ–‡<a href="https://jsonz1993.github.io/2018/01/%E4%B8%80%E6%AD%A5%E6%AD%A5%E5%AE%9E%E7%8E%B0%E6%9E%81%E7%AE%80%E7%BC%96%E8%AF%91%E5%99%A8-%E2%80%94%E2%80%94-%E4%BA%86%E8%A7%A3%E7%BC%96%E8%AF%91%E5%99%A8%E5%8E%9F%E7%90%86/">ä¸€æ­¥æ­¥å®ç°æç®€ç¼–è¯‘å™¨ â€”â€” äº†è§£ç¼–è¯‘å™¨åŸç†</a></p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>å‰©ä¸‹çš„ dll æ‰“åŒ…ï¼Œ ssr ä»¥åæœ‰ç”¨åˆ°å†å»äº†è§£ã€‚<br>emmm æœ€è¿‘é˜¿é‡Œåˆšå‡ºäº†ä¸€ä¸ª <a href="https://umijs.org/" target="_blank" rel="noopener">umiJs</a> æƒ³èµ·çŸ¥ä¹ä¸Šä¸€ä¸ªè¯„ä»· ç”¨è¿™ä¸€æ—¶çˆ½ æ”¹èµ·æ¥ç«è‘¬åœºã€‚<br>åœ¨ç”¨ <code>antd-pro</code> çš„æ—¶å€™å°±æ·±æœ‰ä½“ä¼šäº†ã€‚ æ‰€ä»¥å»ºè®®å¦‚æœä¸æ˜¯æ¯”è¾ƒå°çš„é¡¹ç›®æˆ–è€…çµæ´»æ€§è¦æ±‚é«˜çš„é¡¹ç›®ï¼Œ è¿˜æ˜¯ä¸è¦ä¸Š <code>antd-pro</code>çš„å¥½ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ’æ°´</title>
    <url>/2018/02/%E5%88%92%E6%B0%B4/</url>
    <content><![CDATA[<h6 id="2-21-ã€Šæ•°å­¦ä¹‹ç¾ã€‹"><a href="#2-21-ã€Šæ•°å­¦ä¹‹ç¾ã€‹" class="headerlink" title="2.21 ã€Šæ•°å­¦ä¹‹ç¾ã€‹"></a>2.21 ã€Šæ•°å­¦ä¹‹ç¾ã€‹</h6><h6 id="2-10-ã€Šæ°´å½¢ç‰©è¯­ã€‹"><a href="#2-10-ã€Šæ°´å½¢ç‰©è¯­ã€‹" class="headerlink" title="2.10 ã€Šæ°´å½¢ç‰©è¯­ã€‹"></a>2.10 ã€Šæ°´å½¢ç‰©è¯­ã€‹</h6><h6 id="2-11-ã€Šè‡³æš—æ—¶åˆ»ã€‹"><a href="#2-11-ã€Šè‡³æš—æ—¶åˆ»ã€‹" class="headerlink" title="2.11 ã€Šè‡³æš—æ—¶åˆ»ã€‹"></a>2.11 ã€Šè‡³æš—æ—¶åˆ»ã€‹</h6><h6 id="5-19-ã€Šcssä¸–ç•Œã€‹"><a href="#5-19-ã€Šcssä¸–ç•Œã€‹" class="headerlink" title="5.19 ã€Šcssä¸–ç•Œã€‹"></a>5.19 ã€Šcssä¸–ç•Œã€‹</h6><h6 id="5-21-ã€Šç™½é‡‘æ•°æ®ã€‹"><a href="#5-21-ã€Šç™½é‡‘æ•°æ®ã€‹" class="headerlink" title="5.21 ã€Šç™½é‡‘æ•°æ®ã€‹"></a>5.21 ã€Šç™½é‡‘æ•°æ®ã€‹</h6><h6 id="5-22-ã€Šhttpå°ä¹¦ã€‹"><a href="#5-22-ã€Šhttpå°ä¹¦ã€‹" class="headerlink" title="5.22 ã€Šhttpå°ä¹¦ã€‹"></a>5.22 ã€Šhttpå°ä¹¦ã€‹</h6>]]></content>
      <categories>
        <category>live</category>
      </categories>
      <tags>
        <tag>book</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€æ­¥æ­¥å®ç°æç®€ç¼–è¯‘å™¨ â€”â€” äº†è§£ç¼–è¯‘å™¨åŸç†</title>
    <url>/2018/01/%E4%B8%80%E6%AD%A5%E6%AD%A5%E5%AE%9E%E7%8E%B0%E6%9E%81%E7%AE%80%E7%BC%96%E8%AF%91%E5%99%A8-%E2%80%94%E2%80%94-%E4%BA%86%E8%A7%A3%E7%BC%96%E8%AF%91%E5%99%A8%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h2 id="welcome"><a href="#welcome" class="headerlink" title="welcome"></a>welcome</h2><p>ä»Šå¤©åœ¨çœ‹ babel çš„æ—¶å€™ï¼Œæ— æ„ä¸­è¢«å¼•åˆ°ä¸€ä¸ªå¤–é“¾</p>
<blockquote>
<p>å…³äºç¼–è¯‘å™¨çš„ä¼˜ç§€/ç®€å•çš„æ•™ç¨‹ï¼Œè¯·æŸ¥çœ‹ <a href="https://babeljs.cn/docs/plugins/" target="_blank" rel="noopener">the-super-tiny-compiler</a> ï¼ŒåŒæ—¶å®ƒä¹Ÿä»å®è§‚è§’åº¦ä¸Šè§£é‡Šäº† Babel æœ¬èº«æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
</blockquote>
<p>è§‰å¾—æŒºæ„Ÿå…´è¶£çš„ï¼ŒåŠ ä¸Šä»£ç ä¹Ÿä¸å¤šï¼Œå°±è·Ÿç€æ€è·¯è‡ªå·±ç†è§£æ•²äº†ä¸€éã€‚</p>
<p>æœ¬æ–‡ä¸»è¦æ˜¯å¸®åŠ©ç†è§£ç¼–è¯‘å™¨çš„åŸç† ä¸åšè¿‡å¤šçš„å…¶ä»–æ‰©å±•</p>
<h2 id="ç¼–è¯‘å™¨çš„åŸºæœ¬ç»„æˆ"><a href="#ç¼–è¯‘å™¨çš„åŸºæœ¬ç»„æˆ" class="headerlink" title="ç¼–è¯‘å™¨çš„åŸºæœ¬ç»„æˆ"></a>ç¼–è¯‘å™¨çš„åŸºæœ¬ç»„æˆ</h2><p>ä¸€èˆ¬ç®€å•çš„ç¼–è¯‘å™¨å¯ä»¥ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆ:</p>
<ul>
<li>tokenizer è¯æ³•åˆ†æå™¨ æŠŠä»£ç æˆ–æ–‡æœ¬æŒ‰ç±»å‹åˆ†å¼€ï¼Œè¿”å›: <code>tokens</code></li>
<li>parser è¯­æ³•å‰–æå™¨ å¯¹åˆ†æåçš„æ–‡æœ¬æŒ‰ç…§è¯­æ³•åˆ†æè½¬æ¢æˆ æŠ½è±¡è¯­æ³•æ ‘ è¿”å›ï¼šast</li>
<li>transformer è¯­æ³•è½¬æ¢å™¨ æŠŠè¯­æ³•å‰–æåçš„æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢æˆæˆ‘ä»¬æƒ³è¦çš„: newAst</li>
<li>codeGenerator ä»£ç ç”Ÿæˆå™¨ æŠŠAST è½¬æ¢ä¸º ç›®æ ‡ä»£ç </li>
</ul>
<blockquote>
<p>babel åˆå§‹é˜¶æ®µå¹¶æ²¡æœ‰åšä»»ä½•äº‹ï¼ŒåŸºæœ¬ä¸Šç­‰äº <code>const babel = code=&gt; code</code>;<br>å…ˆ tokenizerï¼Œ parser è§£æä»£ç ï¼Œå† transformer çš„æ—¶å€™ï¼Œå®Œå…¨ä¸æ”¹åŠ¨åŸæ¥çš„ ast</p>
</blockquote>
<p>æ¥ä¸‹æ¥ä»¥æœ€ç®€å•çš„ç¼–è¯‘å™¨ç»„æˆ ä¸€ä¸ªç¯èŠ‚ä¸€ä¸ªç¯èŠ‚èµ°ä¸‹å»</p>
<h2 id="tokenizer-è¯æ³•åˆ†æå™¨"><a href="#tokenizer-è¯æ³•åˆ†æå™¨" class="headerlink" title="tokenizer è¯æ³•åˆ†æå™¨"></a>tokenizer è¯æ³•åˆ†æå™¨</h2><p>è¯æ³•åˆ†æå™¨å…¶å®å¯ä»¥ç†è§£ä¸ºç®€å•çš„å°†æ–‡æœ¬åˆ‡å‰²ï¼Œç„¶åå°†æœ‰ä»·å€¼çš„æŒ‰ç…§ç›¸é‚»åŒç­‰ç±»å‹çš„ æ–‡æœ¬ç»„åˆä¸€èµ·è¾“å‡ºã€‚<br><em><small>ps:æ— ä»·å€¼æŒ‡å¯¹ä»£ç ç”Ÿæˆæ²¡æœ‰å½±å“çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚jsé‡Œé¢éæ–‡æœ¬ ä¸€ä¸ªç©ºæ ¼å’Œä¸€ç™¾ä¸ªç©ºæ ¼å¯¹ç¼–è¯‘å™¨æ¥è¯´æ˜¯æ²¡æœ‰åŒºåˆ«çš„</small></em></p>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>æœ‰ä¸€ä¸ªå€¼å­˜ç€å½“å‰çš„å…‰æ ‡ <code>current</code></li>
<li>æœ‰ä¸€ä¸ªæ•°ç»„ç”¨æ¥å­˜æ”¾æŒ‰ç±»å‹åˆ†å‡ºæ¥çš„å€¼ <code>tokens</code></li>
<li>å¯¹æ–‡æœ¬è¿›è¡Œå¾ªç¯ï¼Œ å– <code>current</code> çš„å€¼åš åˆ†ç±»å‹å¤„ç†<ol>
<li><code>(</code></li>
<li><code>)</code></li>
<li>ç©ºæ ¼</li>
<li>æ•°å­—</li>
<li>å­—ç¬¦ä¸²</li>
<li>æ–¹æ³•å</li>
</ol>
</li>
<li>å°†å¤„ç†åçš„å€¼å­˜è¿›æ•°ç»„ <code>token</code> å¹¶è¿”å›</li>
</ol>
<figure class="highlight javascript"><figcaption><span>tokenizer</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tokenizer</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> current = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> tokens = [];</span><br><span class="line">  <span class="keyword">while</span> (current &lt; input.length) &#123;</span><br><span class="line">    <span class="keyword">let</span> char = input[current];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (char === <span class="string">"("</span> || char === <span class="string">")"</span>) &#123;</span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: <span class="string">'paren'</span>,</span><br><span class="line">        value: char</span><br><span class="line">      &#125;);</span><br><span class="line">      current++;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> WHITESPACE = <span class="regexp">/\s/</span>;</span><br><span class="line">    <span class="keyword">if</span> (WHITESPACE.test(char)) &#123;</span><br><span class="line">      current++;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> LETTERS = <span class="regexp">/[a-z]/i</span>;</span><br><span class="line">    <span class="keyword">if</span> (LETTERS.test(char)) &#123;</span><br><span class="line">      <span class="keyword">let</span> name = <span class="string">""</span>;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">while</span> (LETTERS.test(char)) &#123;</span><br><span class="line">        name += char;</span><br><span class="line">        current++;</span><br><span class="line">        char = input[current];</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: <span class="string">'name'</span>,</span><br><span class="line">        value: name</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> NUMBERS = <span class="regexp">/[0-9]/</span>;</span><br><span class="line">    <span class="keyword">if</span> (NUMBERS.test(char)) &#123;</span><br><span class="line">      <span class="keyword">let</span> numbers = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span>(NUMBERS.test(char)) &#123;</span><br><span class="line">        numbers += char;</span><br><span class="line">        current++;</span><br><span class="line">        char = input[current];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: <span class="string">'number'</span>,</span><br><span class="line">        value: numbers</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (char === <span class="string">'"'</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> string = <span class="string">''</span>;</span><br><span class="line">      current++;</span><br><span class="line">      char = input[current];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span>(char !== <span class="string">'"'</span>) &#123;</span><br><span class="line">        string += char;</span><br><span class="line">        current++;</span><br><span class="line">        char = input[current];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: <span class="string">'string'</span>,</span><br><span class="line">        value: string</span><br><span class="line">      &#125;);</span><br><span class="line">      current++;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'ä¸çŸ¥é“ä½ è¾“å…¥çš„æ˜¯ä»€ä¹ˆé¬¼ä¸œè¥¿ '</span> + char);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tokens;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> input = <span class="string">'(add 2 (subtract 4 2 "djwaqp"))'</span>;</span><br><span class="line">tokenizer(input);</span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[&#123; type: 'paren', value: '(' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'name', value: 'add' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'number', value: '2' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'paren', value: '(' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'name', value: 'subtract' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'number', value: '4' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'number', value: '2' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'string', value: 'djwaqp' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'paren', value: ')' &#125;,</span></span><br><span class="line"><span class="comment">&#123; type: 'paren', value: ')' &#125;];</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="parser"><a href="#parser" class="headerlink" title="parser"></a>parser</h2><p>è¯­æ³•å‰–æå™¨å°±æ˜¯æŠŠ <code>tokens</code> è§£æï¼Œè½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘(AST)ğŸŒ²ğŸŒ²ğŸŒ²ï¼Œæ–¹ä¾¿åç»­çš„å¤„ç†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[&#123; <span class="attr">type</span>: <span class="string">'paren'</span>, <span class="attr">value</span>: <span class="string">'('</span> &#125;, ...]   =&gt;   &#123; <span class="attr">type</span>: <span class="string">'Program'</span>, <span class="attr">body</span>: [...] &#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>é¦–å…ˆä¹Ÿè¦æœ‰ä¸€ä¸ª <code>current</code> å¯¹ <code>tokens</code> è¿›è¡Œéå†ï¼Œæ¯ä¸€é¡¹ <code>token</code> è¿›è¡Œåˆ†æå¤„ç†</li>
<li>æœ‰ä¸€æ£µæ ‘ï¼Œé¡¶çº§ç»“æ„ä¸º <code>{type: &#39;Program&#39; , body: [...]}</code></li>
<li>æ ¹æ® <code>token.type</code> è¿›è¡Œç›¸åº”çš„å½’ç±»å¤„ç†:<ol>
<li><code>number</code>ï¼š ç›´æ¥è¿”å›  <code>{type: &#39;NumberLiteral&#39;, value, }</code></li>
<li><code>string</code>ï¼š ç›´æ¥è¿”å› <code>{type: &#39;StringLiteral&#39;, value, }</code></li>
<li><code>paren (</code> ï¼š å¯¹ä¸‹ä¸€ä¸ªè¿›è¡Œé€’å½’ï¼Œç›´åˆ°å‡ºç° <code>paren )</code></li>
</ol>
</li>
<li>å°†å¤„ç†åçš„ ast è¿”å›</li>
</ol>
<figure class="highlight javascript"><figcaption><span>parser</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parser</span>(<span class="params">tokens</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> current = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> ast = &#123; </span><br><span class="line">    type: <span class="string">'Program'</span>, </span><br><span class="line">    body: []</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">walk</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> token = tokens[current];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (token.type === <span class="string">'number'</span>) &#123;</span><br><span class="line">      current ++;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'NumberLiteral'</span>,</span><br><span class="line">        value: token.value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (token.type === <span class="string">'string'</span>) &#123;</span><br><span class="line">      current ++;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'StringLiteral'</span>,</span><br><span class="line">        value: token.value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (token.type === <span class="string">'paren'</span> &amp;&amp; token.value === <span class="string">'('</span>) &#123;</span><br><span class="line">      token = tokens[++current];</span><br><span class="line">      <span class="keyword">let</span> node = &#123;</span><br><span class="line">        type: <span class="string">"CallExpression"</span>,</span><br><span class="line">        name: token.value,</span><br><span class="line">        params: []</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      token = tokens[++current];</span><br><span class="line">      <span class="keyword">while</span> ((token.type !== <span class="string">'paren'</span>) || (token.type === <span class="string">'paren'</span> &amp;&amp; token.value !== <span class="string">')'</span>)) &#123;</span><br><span class="line">        node.params.push(walk());</span><br><span class="line">        token = tokens[current];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      current++;</span><br><span class="line">      <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(token.type);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(current &lt; tokens.length) &#123;</span><br><span class="line">    ast.body.push(walk());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ast;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">input:</span><br><span class="line">[&#123; <span class="attr">type</span>: <span class="string">'paren'</span>, <span class="attr">value</span>: <span class="string">'('</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'name'</span>, <span class="attr">value</span>: <span class="string">'add'</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'number'</span>, <span class="attr">value</span>: <span class="string">'2'</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'paren'</span>, <span class="attr">value</span>: <span class="string">'('</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'name'</span>, <span class="attr">value</span>: <span class="string">'subtract'</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'number'</span>, <span class="attr">value</span>: <span class="string">'4'</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'number'</span>, <span class="attr">value</span>: <span class="string">'2'</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'string'</span>, <span class="attr">value</span>: <span class="string">'djwaqp'</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'paren'</span>, <span class="attr">value</span>: <span class="string">')'</span> &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">'paren'</span>, <span class="attr">value</span>: <span class="string">')'</span> &#125;]</span><br><span class="line">=&gt;</span><br><span class="line">output:</span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"type"</span>: <span class="string">"Program"</span>,</span><br><span class="line">	<span class="string">"body"</span>: [&#123;</span><br><span class="line">		<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">		<span class="string">"name"</span>: <span class="string">"ADD"</span>,</span><br><span class="line">		<span class="string">"params"</span>: [&#123;</span><br><span class="line">			<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">			<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">		&#125;, &#123;</span><br><span class="line">			<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">			<span class="string">"name"</span>: <span class="string">"subtract"</span>,</span><br><span class="line">			<span class="string">"params"</span>: [&#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"4"</span></span><br><span class="line">			&#125;, &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">			&#125;, &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"StringLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"djwaqp"</span></span><br><span class="line">			&#125;]</span><br><span class="line">		&#125;]</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="transformer"><a href="#transformer" class="headerlink" title="transformer"></a>transformer</h2><p>transformer é¡¾åæ€ä¹‰ï¼Œä¸ºè½¬æ¢éƒ¨åˆ†ï¼Œæœ€å¤æ‚ ä¹Ÿæœ€å¸¸ç”¨ã€‚<br><code>.babelrc</code> æ·»åŠ çš„æ’ä»¶ï¼Œä¹Ÿåªæ˜¯åœ¨è¿™ä¸ªç¯èŠ‚è¿›è¡Œæ“ä½œï¼Œå°†åŸæœ¬çš„ ast( es6 ) è½¬æ¢ä¸ºç›®æ ‡çš„ newAst (es5)ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ast &#123; <span class="attr">type</span>: <span class="string">'Program'</span>, <span class="attr">body</span>: [...] &#125;   =&gt;   newAst &#123; <span class="attr">type</span>: <span class="string">'Program'</span>, <span class="attr">body</span>: [...] &#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œè¦æœ‰ä¸€é¢—æ ‘ï¼Œå’Œ ast ä¸€æ ·ã€‚ é¡¶çº§ç»“æ„ä¸º <code>{ type: &#39;Program&#39;, body: [...] }</code></li>
<li>åœ¨ <code>ast</code> ä¸Šå»ºä¸€ä¸ªå¼•ç”¨<code>_context</code>åˆ° <code>newAst.body</code>;</li>
<li>å¯¹ ast æ ‘è¿›è¡Œå¤„ç†, ç›´æ¥å¤„ç† <code>_context</code></li>
<li>å¯¹ ast ä¸Š æ¯ä¸ªç±»å‹éƒ½åš enter å¤„ç†ä¸ exitå¤„ç†çš„é’©å­<ol>
<li>Number æˆ– String ç›´æ¥å¤„ç†å¹¶æ·»åŠ åˆ°æ ‘èŠ‚ç‚¹ä¸Šå³å¯</li>
<li>CallExpression åˆ™è¦åˆ›å»ºä¸€ä¸ªæ•°ç»„å»å­˜å‚æ•°</li>
</ol>
</li>
<li>å¯¹ç±»å‹ä¸ºï¼š<code>Program</code> æˆ– <code>CallExpression</code> å¯¹å­çº§è¿›è¡Œ é€’å½’ <code>4</code> å¤„ç†</li>
<li>å°†å¤„ç†åçš„ newAst è¿”å›</li>
</ol>
<figure class="highlight javascript"><figcaption><span>transformer éƒ¨åˆ†</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traverser</span>(<span class="params">node, visitor</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">traverseArray</span>(<span class="params">nodeArr, parent</span>) </span>&#123;</span><br><span class="line">    nodeArr.forEach(<span class="function"><span class="params">child</span> =&gt;</span> traverseNode(child, parent));</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">traverseNode</span>(<span class="params">node, parent</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> methods = visitor[node.type];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (methods &amp;&amp; methods.enter) &#123;</span><br><span class="line">      methods.enter(node, parent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (node.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'Program'</span>:</span><br><span class="line">        traverseArray(node.body, node);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'CallExpression'</span>:</span><br><span class="line">        traverseArray(node.params, node);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'NumberLiteral'</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'StringLiteral'</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    </span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(node.type);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (methods &amp;&amp; methods.exit) &#123;</span><br><span class="line">      methods.exit(node, parent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  traverseNode(node, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transformer</span>(<span class="params">ast</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> newAst = &#123;</span><br><span class="line">    type: <span class="string">'Program'</span>,</span><br><span class="line">    body: []</span><br><span class="line">  &#125;;</span><br><span class="line">  ast._context = newAst.body;</span><br><span class="line"></span><br><span class="line">  traverser(ast, &#123;</span><br><span class="line"></span><br><span class="line">    NumberLiteral: &#123;</span><br><span class="line">      enter(node, parent) &#123;</span><br><span class="line">        parent._context.push(&#123;</span><br><span class="line">          type: <span class="string">'NumberLiteral'</span>,</span><br><span class="line">          value: node.value</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    StringLiteral: &#123;</span><br><span class="line">      enter(node, parent) &#123;</span><br><span class="line">        parent._context.push(&#123;</span><br><span class="line">          type: <span class="string">'StringLiteral'</span>,</span><br><span class="line">          value: node.value,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    CallExpression: &#123;</span><br><span class="line">      enter(node, parent) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> expression = &#123;</span><br><span class="line">          type: <span class="string">'CallExpression'</span>,</span><br><span class="line">          callee: &#123;</span><br><span class="line">            type: <span class="string">'Identifier'</span>,</span><br><span class="line">            name: node.name</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="built_in">arguments</span>: []</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        node._context = expression.arguments;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (parent.type !== <span class="string">'CallExpression'</span>) &#123;</span><br><span class="line">          expression = &#123;</span><br><span class="line">            type: <span class="string">'ExpressionStatement'</span>,</span><br><span class="line">            expression: expression</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        parent._context.push(expression);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newAst;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">input:</span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"type"</span>: <span class="string">"Program"</span>,</span><br><span class="line">	<span class="string">"body"</span>: [&#123;</span><br><span class="line">		<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">		<span class="string">"name"</span>: <span class="string">"ADD"</span>,</span><br><span class="line">		<span class="string">"params"</span>: [&#123;</span><br><span class="line">			<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">			<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">		&#125;, &#123;</span><br><span class="line">			<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">			<span class="string">"name"</span>: <span class="string">"subtract"</span>,</span><br><span class="line">			<span class="string">"params"</span>: [&#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"4"</span></span><br><span class="line">			&#125;, &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">			&#125;, &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"StringLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"djwaqp"</span></span><br><span class="line">			&#125;]</span><br><span class="line">		&#125;]</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;</span><br><span class="line">=&gt;</span><br><span class="line">output:</span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"type"</span>: <span class="string">"Program"</span>,</span><br><span class="line">	<span class="string">"body"</span>: [&#123;</span><br><span class="line">		<span class="string">"type"</span>: <span class="string">"ExpressionStatement"</span>,</span><br><span class="line">		<span class="string">"expression"</span>: &#123;</span><br><span class="line">			<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">			<span class="string">"callee"</span>: &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"Identifier"</span>,</span><br><span class="line">				<span class="string">"name"</span>: <span class="string">"ADD"</span></span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="string">"arguments"</span>: [&#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">			&#125;, &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">				<span class="string">"callee"</span>: &#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"Identifier"</span>,</span><br><span class="line">					<span class="string">"name"</span>: <span class="string">"subtract"</span></span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="string">"arguments"</span>: [&#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">					<span class="string">"value"</span>: <span class="string">"4"</span></span><br><span class="line">				&#125;, &#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">					<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">				&#125;, &#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"StringLiteral"</span>,</span><br><span class="line">					<span class="string">"value"</span>: <span class="string">"djwaqp"</span></span><br><span class="line">				&#125;]</span><br><span class="line">			&#125;]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="codeGenerator"><a href="#codeGenerator" class="headerlink" title="codeGenerator"></a>codeGenerator</h2><p>æœ€åä¸€æ­¥å°±æ˜¯ <code>codeGenerator</code>ï¼Œ ç”¨ <code>newAst</code> é€’å½’è°ƒç”¨ï¼Œæ ¹æ® <code>node</code> ä¸ä¸€ç³»åˆ—è§„åˆ™å»ç”Ÿæˆä¸€ä¸ª stringã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">newAst &#123; <span class="attr">type</span>: <span class="string">'Program'</span>, <span class="attr">body</span>: [...] &#125; =&gt; call(argumentsA, ...argumentsN);</span><br></pre></td></tr></table></figure>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>æ ¹æ® node.type åšå¯¹åº”é€»è¾‘ï¼š</li>
<li><code>Program</code> =&gt; å¯¹ node.body è¿›è¡Œé€’å½’</li>
<li><code>ExpressionStatement</code>=&gt; å¯¹ node.expression è¿›è¡Œå¤„ç†</li>
<li><code>CallExpression</code> =&gt; å¯¹ node.callee ä¸ node.arguments è¿›è¡Œå¤„ç†</li>
<li><code>Identifier</code> &amp;&amp; <code>NumberLiteral</code> &amp;&amp; <code>StringLiteral</code> ç›´æ¥è¿”å›å¯¹åº”çš„å­—æ®µ</li>
</ol>
<figure class="highlight javascript"><figcaption><span>codeGenerator</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">codeGenerator</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (node.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'Program'</span>:</span><br><span class="line">      <span class="keyword">return</span> node.body.map(codeGenerator).join(<span class="string">'\n'</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">case</span> <span class="string">'ExpressionStatement'</span>:</span><br><span class="line">      <span class="keyword">return</span> codeGenerator(node.expression) + <span class="string">';'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'CallExpression'</span>:</span><br><span class="line">      <span class="keyword">return</span> (codeGenerator(node.callee) +<span class="string">'('</span> + node.arguments.map(codeGenerator).join(<span class="string">', '</span>) + <span class="string">')'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'Identifier'</span>:</span><br><span class="line">      <span class="keyword">return</span> node.name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="string">'NumberLiteral'</span>:</span><br><span class="line">      <span class="keyword">return</span> node.value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'StringLiteral'</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'"'</span> + node.value + <span class="string">'"'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(node.type);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">input:</span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"type"</span>: <span class="string">"Program"</span>,</span><br><span class="line">	<span class="string">"body"</span>: [&#123;</span><br><span class="line">		<span class="string">"type"</span>: <span class="string">"ExpressionStatement"</span>,</span><br><span class="line">		<span class="string">"expression"</span>: &#123;</span><br><span class="line">			<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">			<span class="string">"callee"</span>: &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"Identifier"</span>,</span><br><span class="line">				<span class="string">"name"</span>: <span class="string">"ADD"</span></span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="string">"arguments"</span>: [&#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">				<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">			&#125;, &#123;</span><br><span class="line">				<span class="string">"type"</span>: <span class="string">"CallExpression"</span>,</span><br><span class="line">				<span class="string">"callee"</span>: &#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"Identifier"</span>,</span><br><span class="line">					<span class="string">"name"</span>: <span class="string">"subtract"</span></span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="string">"arguments"</span>: [&#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">					<span class="string">"value"</span>: <span class="string">"4"</span></span><br><span class="line">				&#125;, &#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"NumberLiteral"</span>,</span><br><span class="line">					<span class="string">"value"</span>: <span class="string">"2"</span></span><br><span class="line">				&#125;, &#123;</span><br><span class="line">					<span class="string">"type"</span>: <span class="string">"StringLiteral"</span>,</span><br><span class="line">					<span class="string">"value"</span>: <span class="string">"djwaqp"</span></span><br><span class="line">				&#125;]</span><br><span class="line">			&#125;]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;</span><br><span class="line">=&gt; </span><br><span class="line">output:</span><br><span class="line">add(<span class="number">2</span>, subtract(<span class="number">4</span>, <span class="number">2</span>, <span class="string">"djwaqp"</span>));</span><br></pre></td></tr></table></figure>
<h2 id="compiler"><a href="#compiler" class="headerlink" title="compiler"></a>compiler</h2><p>è‡³æ­¤ï¼Œç¼–è¯‘å™¨æ‰€éœ€çš„å‡ ä¸ªæ­¥éª¤ï¼š è¯æ³•åˆ†æï¼Œè§£æï¼Œè½¬æ¢ï¼Œç”Ÿæˆéƒ½å·²ç»å®Œæˆã€‚</p>
<figure class="highlight javascript"><figcaption><span>compiler</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compiler</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> tokens = tokenizer(input);</span><br><span class="line">  <span class="keyword">const</span> ast = parser(tokens);</span><br><span class="line">  <span class="keyword">const</span> newAst = transformer(ast);</span><br><span class="line">  <span class="keyword">const</span> output = codeGenerator(newAst);</span><br><span class="line">  <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> input = <span class="string">'(add 2 (subtract 4 2 "djwaqp"))'</span>;</span><br><span class="line"><span class="keyword">const</span> output = compilter(input); <span class="comment">// 'add(2, subtract(4, 2, "djwaqp"));'</span></span><br></pre></td></tr></table></figure>
<h2 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h2><p>babel çš„å·¥ä½œåŸç†å¯ä»¥ç†è§£æˆå°±æ˜¯ä¸€ä¸ªç®€å•çš„ç¼–è¯‘å™¨ï¼š<code>åˆ†æ</code> =&gt; <code>è½¬æ¢</code> =&gt; <code>ç”Ÿæˆä»£ç </code></p>
<p>bable çš„ç¯‡å¹…å¤ªå¤šï¼Œä¸‹é¢ç›´æ¥ç»™å‡º <a href="https://github.com/jsonz1993/learn/tree/master/finish/babel-plugin-jsonz_test" target="_blank" rel="noopener">demoæºç </a>ã€‚<br>å…·ä½“å¯ä»¥çœ‹ <a href="https://github.com/thejameskyle/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-writing-your-first-babel-plugin" target="_blank" rel="noopener">å®˜æ–¹æ’ä»¶æ‰‹å†Œ babel-handbook</a></p>
<p>æˆ‘ä»¬å†™çš„babel æ’ä»¶ï¼Œéƒ½æ˜¯åœ¨è½¬æ¢çš„éƒ¨åˆ†è¿è¡Œ<br><figure class="highlight javascript"><figcaption><span>è‡ªå®šä¹‰æ’ä»¶ babel-plugin-jsonz</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> t = <span class="built_in">require</span>(<span class="string">'babel-types'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports=  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// plugin contents</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    visitor: &#123;</span><br><span class="line">      <span class="comment">// visitor contents</span></span><br><span class="line">      BinaryExpression(path, state) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ“ä½œç¬¦ä¸æ˜¯ === åˆ™è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (path.node.operator !== <span class="string">'==='</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ“ä½œç¬¦çš„å·¦è¾¹æ›¿æ¢ä¸º sebmck, å³è¾¹æ›¿æ¢ä¸º dork</span></span><br><span class="line">        path.node.left = t.identifier(<span class="string">'"sebmck"'</span>);</span><br><span class="line">        path.node.right = t.identifier(<span class="string">'"dork"'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><figcaption><span>ç›®æ ‡ä»£ç ./src/test1.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span>===<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®‰è£…ç›¸å…³ä¾èµ–:<code>npm i babel-cli babel-types --save-dev</code></p>
<p>è¿è¡Œè„šæœ¬: <code>babel src/ -d build/</code></p>
<figure class="highlight javascript"><figcaption><span>ç”Ÿæˆåçš„ä»£ç  ./build/test2.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"sebmck"</span> === <span class="string">"dork"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åå†æ¨ä¸€æ³¢å…³äºå­¦ä¹ ä¸­çœ‹åˆ°çš„å¥½ç½‘ç«™</p>
<p><a href="https://github.com/jsonz1993/wheel/blob/master/min-compiler/min-compiler.js" target="_blank" rel="noopener">æºç </a><br><a href="http://esprima.org/demo/parse.html#" target="_blank" rel="noopener">esprima è§£æè¯­æ³•æ ‘ğŸŒ²</a><br><a href="http://astexplorer.net/" target="_blank" rel="noopener">AST Explorer</a><br><a href="https://zh.wikipedia.org/zh-cn/%E6%8A%BD%E8%B1%A1%E8%AA%9E%E6%B3%95%E6%A8%B9" target="_blank" rel="noopener">aståè¯è§£é‡Š</a><br><a href="https://github.com/thejameskyle/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md" target="_blank" rel="noopener">babel-plugin-handbook</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…æPromise (ä¸€)</title>
    <url>/2017/12/%E6%B5%85%E6%9E%90Promise/</url>
    <content><![CDATA[<p><strong><a href="https://ppt.baomitu.com/d/5624aeb7" target="_blank" rel="noopener">pptåœ¨æ­¤</a></strong><br><strong><a href="https://github.com/jsonz1993/wheel/blob/master/Promise/app.js" target="_blank" rel="noopener">æºç </a> å‚ç…§ lie</strong></p>
<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨ES6æµè¡Œä¹‹å‰ï¼Œæˆ‘ä»¬å¤„ç†å¼‚æ­¥çš„æ–¹æ³•ä¸€èˆ¬æœ‰ äº‹ä»¶æ¨¡å¼ï¼Œ å›è°ƒæ¨¡å¼ç­‰ã€‚</p>
<h2 id="äº‹ä»¶æ¨¡å¼"><a href="#äº‹ä»¶æ¨¡å¼" class="headerlink" title="äº‹ä»¶æ¨¡å¼"></a>äº‹ä»¶æ¨¡å¼</h2><p>ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æˆ–æŒ‰ä¸‹é”®ç›˜ä¸Šçš„æŒ‰é’®ä¼šè§¦å‘ç±»ä¼¼ onClickè¿™æ ·çš„äº‹ä»¶ï¼Œä»–ä¼šå‘ä»»åŠ¡é˜Ÿåˆ—æ·»åŠ ä¸€ä¸ªæ–°ä»»åŠ¡æ¥å“åº”ç”¨æˆ·çš„æ“ä½œã€‚<br>ç›´åˆ°äº‹ä»¶è§¦å‘æ—¶æ‰æ‰§è¡Œäº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¸”æ­£å¸¸æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡ä¸å®šä¹‰æ—¶ç›¸åŒ<br><figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn1'</span>);</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><figcaption><span>demo2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> iEvent <span class="keyword">from</span> <span class="string">'event'</span>;</span><br><span class="line">iEvent.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line">iEvent.emit(<span class="string">'click'</span>);</span><br></pre></td></tr></table></figure>
<p>äº‹ä»¶æ¨¡å‹é€‚ç”¨äºå¤„ç†ç®€å•çš„äº¤äº’ï¼Œå¦‚æœå¤šä¸ªç‹¬ç«‹çš„å¼‚æ­¥è°ƒç”¨è¿æ¥åœ¨ä¸€èµ·ä¼šä½¿åº”ç”¨å˜å¾—æ›´åŠ å¤æ‚ã€‚<br>è€Œä¸”è¦è¿½è¸ªæ¯ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›®æ ‡ï¼Œæ¯”å¦‚ æˆ‘å…ˆç‚¹å‡» btn1 å†ç»™ btn1ç»‘å®šäº‹ä»¶ï¼Œæˆ–è€…å…ˆ emit å† on éƒ½ä¼šä¸èµ·ä½œç”¨ã€‚</p>
<h2 id="å›è°ƒæ¨¡å¼"><a href="#å›è°ƒæ¨¡å¼" class="headerlink" title="å›è°ƒæ¨¡å¼"></a>å›è°ƒæ¨¡å¼</h2><p>ä¸ºJavaæ‰“Call<br>ä¸ºPHPæ‰“Call<br>ä¸ºjavascriptæ‰“CallBack ä¸ºGoæ‰“Callâ€¦</p>
<figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line">method1(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">	method2(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">		method3(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)) </span>&#123;</span><br><span class="line">			method4(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)) </span>&#123;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">'é‡‘å­—å¡”'</span>);</span><br><span class="line">			&#125;	</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å›è°ƒæ¨¡å¼è™½ç„¶æ˜¯jsçš„ä¸€å¤§ç²¾é«“ï¼Œä½†æ˜¯å†™ç€å†™ç€å¯èƒ½ä¼šå› ä¸ºåµŒå¥—å¤ªå¤šçš„å›è°ƒå‡½æ•°ï¼Œé™·å…¥å›è°ƒåœ°ç‹± â€”â€” è¶…çº§é‡‘å­—å¡”</p>
<p>è€Œä¸”å¦‚æœè¦å¤„ç†ç±»ä¼¼ ä¸¤ä¸ªæ“ä½œéƒ½æ‰§è¡Œå®Œé€šçŸ¥ä½  æˆ–è€…æœ‰ä¸€ä¸ªæ“ä½œæ‰§è¡Œå®Œå°±é€šçŸ¥ä½  é‚£ä¹ˆæƒ…å†µå¯èƒ½ä¼šå˜å¾—æ¯”è¾ƒéº»çƒ¦</p>
<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h2><figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>)=&gt;</span> &#123;</span><br><span class="line">	setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">const</span> random = <span class="built_in">Math</span>.random()</span><br><span class="line">		<span class="keyword">if</span> ( random&gt; <span class="number">.5</span>) res(random)</span><br><span class="line">		<span class="keyword">else</span> rej(random)</span><br><span class="line">	&#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="params">val</span>=&gt;</span> (<span class="built_in">console</span>.log(val), ++val))</span><br><span class="line">	.then(<span class="function"><span class="params">val</span>=&gt;</span> <span class="built_in">console</span>.log(val))</span><br><span class="line">	.catch(<span class="function"><span class="params">error</span>=&gt;</span> <span class="built_in">console</span>.warn(error))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º random &amp;&amp; random+1 or warn(random)</span></span><br></pre></td></tr></table></figure>
<p><code>Promise</code> è§„èŒƒ</p>
<p>Promise è§„èŒƒæœ‰å¾ˆå¤šï¼Œå¦‚ Promise/Aï¼ŒPromise/Bï¼Œå’ŒPromise/Aå‡çº§ç‰ˆ =&gt; <a href="http://www.ituring.com.cn/article/66566" target="_blank" rel="noopener">Promise/A+</a><br>åœ¨è¿™é‡Œç»Ÿä¸€ä¸€ä¸‹ ä»¥ä¸‹æ‰€æœ‰ <code>resolved</code> éƒ½æŒ‡fulfilledã€‚</p>
<ol>
<li>Promise æœ¬è´¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚æ¯ä¸ª promise åªèƒ½æ˜¯ 3 ç§çŠ¶æ€ä¸­çš„ä¸€ç§ï¼špendingã€resolved æˆ– rejectedã€‚çŠ¶æ€è½¬å˜åªèƒ½æ˜¯ pending -&gt; resolved æˆ–è€… pending -&gt; rejectedã€‚çŠ¶æ€è½¬å˜ä¸å¯é€†ã€‚</li>
<li>then æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡ã€‚</li>
<li>then æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ª æ–° promiseã€‚</li>
</ol>
<h2 id="ä¸‰ä¸ªçŠ¶æ€ï¼ŒçŠ¶æ€æ˜¯ä¸å¯é€†çš„"><a href="#ä¸‰ä¸ªçŠ¶æ€ï¼ŒçŠ¶æ€æ˜¯ä¸å¯é€†çš„" class="headerlink" title="ä¸‰ä¸ªçŠ¶æ€ï¼ŒçŠ¶æ€æ˜¯ä¸å¯é€†çš„"></a>ä¸‰ä¸ªçŠ¶æ€ï¼ŒçŠ¶æ€æ˜¯ä¸å¯é€†çš„</h2><p>å¯ä»¥åœ¨ <code>chrome</code> æ§åˆ¶å°çœ‹åˆ°å†…éƒ¨å±æ€§ [[PromiseStatus]] çŠ¶æ€å€¼</p>
<ul>
<li>pendingï¼š Promiseçš„åˆå§‹çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æœªè¢«fulfilledæˆ–è€…rejectedçš„çŠ¶æ€ã€‚</li>
<li>resolvedï¼š æ„å‘³ç€promiseä»£æŒ‡çš„æ“ä½œå·²ç»æˆåŠŸå®Œæˆã€‚</li>
<li>rejectedï¼šæ„å‘³ç€promiseä»£æŒ‡çš„æ“ä½œç”±äºæŸäº›åŸå› å¤±è´¥ã€‚<br><img src="./promise1.png" alt="promise1"></li>
</ul>
<h2 id="then"><a href="#then" class="headerlink" title="then"></a>then</h2><p>æ‰€æœ‰çš„ Promise éƒ½æœ‰ then(onResolve, onReject) æ–¹æ³•ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œ<br>ç¬¬ä¸€ä¸ªæ˜¯å½“Promise çŠ¶æ€å˜ä¸º resolved æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œä¸å¼‚æ­¥æ“ä½œç›¸å…³çš„å€¼ä¼šä¼ é€’ç»™è¯¥å‡½æ•°<br>ç¬¬äºŒä¸ªæ˜¯å½“Promise çŠ¶æ€å˜ä¸º rejected æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œä¸å¤±è´¥çŠ¶æ€ç›¸å…³ï¼ˆæŠ¥é”™ï¼‰ä¼šä¼ é€’ç»™è¯¥å‡½æ•°</p>
<figure class="highlight javascript"><figcaption><span>thenæ–¹æ³•å¯ä»¥è¢«åŒä¸ªpromiseè°ƒç”¨å¤šæ¬¡</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> Promose(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">1</span>))</span><br><span class="line">promise.then(<span class="function"><span class="params">val</span>=&gt;</span> <span class="built_in">console</span>.log(++val))</span><br><span class="line">promise.then(<span class="function"><span class="params">val</span>=&gt;</span> <span class="built_in">console</span>.log(++val))</span><br><span class="line">promise.then(<span class="function"><span class="params">val</span>=&gt;</span> <span class="built_in">console</span>.log(++val))</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>thenæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„promise</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">1</span>))</span><br><span class="line"><span class="keyword">const</span> promiseA = promise.then(<span class="function"><span class="params">val</span>=&gt;</span> ++val)</span><br><span class="line"><span class="keyword">const</span> promiseB = promiseA.then(<span class="function"><span class="params">val</span>=&gt;</span> ++val)</span><br><span class="line"><span class="keyword">const</span> promiseC = promise.then(<span class="function"><span class="params">val</span>=&gt;</span> ++val)</span><br><span class="line"><span class="built_in">console</span>.log( promiseA == promiseB, promiseC == promiseA, promiseB == promiseC);</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºpromiseæ¯æ¬¡éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„promise æ‰€ä»¥æ”¯æŒé“¾å¼å†™æ³•ï¼Œä¸Šä¸€ä¸ª then çš„è¿”å›å€¼ä¼šå½“æˆ ä¸‹ä¸€ä¸ªthençš„å‚æ•°<br><figure class="highlight javascript"><figcaption><span>thené“¾å¼</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Promose(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">1</span>)).then(<span class="function"><span class="params">val</span>=&gt;</span> ++val).then(<span class="function"><span class="params">val</span>=&gt;</span> ++val).then(<span class="function"><span class="params">val</span>=&gt;</span> ++val)</span><br></pre></td></tr></table></figure></p>
<h2 id="é”™è¯¯æƒ…å†µ"><a href="#é”™è¯¯æƒ…å†µ" class="headerlink" title="é”™è¯¯æƒ…å†µ"></a>é”™è¯¯æƒ…å†µ</h2><ol>
<li>åœ¨ <code>Promise(fn)</code> fnæ‰§è¡Œé”™è¯¯</li>
</ol>
<p>æ¯ä¸ªæ‰§è¡Œå™¨å†…éƒ¨éƒ½éšå«ä¸€ä¸ª <code>try...catch...</code>å—<br><figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">res, rej</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å–µå–µå–µ'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">promise.catch(<span class="function"><span class="params">err</span>=&gt;</span> <span class="built_in">console</span>.warn(err))</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä»£ç ç­‰åŒäº<br><figure class="highlight javascript"><figcaption><span>demo2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">res, rej</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å–µå–µå–µ'</span>)</span><br><span class="line">	&#125; <span class="keyword">catch</span>(ex) &#123;</span><br><span class="line">		rej(ex)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line">promise.then(<span class="literal">null</span>, err=&gt; <span class="built_in">console</span>.warn(err))</span><br></pre></td></tr></table></figure></p>
<p>æ­¤å¤„å¯ä»¥çœ‹å‡º <strong>promise.catch</strong> å…¶å®æ˜¯ <strong>promise.then(null, catchFn)</strong> çš„ä¸€ä¸ªè¯­æ³•ç³–</p>
<ol start="2">
<li>then å‡½æ•°å†…éƒ¨é”™è¯¯ </li>
</ol>
<figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">1</span>))</span><br><span class="line">promise.then(<span class="function"><span class="params">val</span>=&gt;</span> val+val1)</span><br><span class="line">	.catch(<span class="function"><span class="params">err</span>=&gt;</span> <span class="built_in">console</span>.warn(err))</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥ç®€å•çš„ç†è§£ä¸º then å†…éƒ¨ä¼šç”Ÿæˆä¸€ä¸ª Promise ç¤ºä¾‹ï¼ŒæŠŠå‡½æ•°ä½“ä¸¢åˆ°Promise é‡Œå»æ‰§è¡Œï¼Œæ‰§è¡Œå®Œç»“æœå½“æˆ <code>res</code> æ–¹æ³•çš„å‚æ•°ï¼Œå‡ºé”™åˆ™è°ƒç”¨ <code>rej</code></p>
<figure class="highlight javascript"><figcaption><span>ä¼ªä»£ç </span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">1</span>))</span><br><span class="line">promise.then(<span class="function"><span class="params">val</span>=&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>)=&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			res(val + val1)</span><br><span class="line">		&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">			rej(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">)</span><br><span class="line">.catch(<span class="function"><span class="params">err</span>=&gt;</span> <span class="built_in">console</span>.warn(err))</span><br></pre></td></tr></table></figure>
<p>.catch &amp;&amp; then(null, catchFn) ä¸èƒ½å¯¹åç»­çš„æŠ¥é”™è¿›è¡Œæ•è·</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">1</span>))</span><br><span class="line">promise.then(<span class="function"><span class="params">val</span> =&gt;</span> ++val)</span><br><span class="line">.catch(<span class="function"><span class="params">e</span>=&gt;</span> <span class="built_in">console</span>.warn(e))</span><br><span class="line">.then(<span class="function"><span class="params">val</span>=&gt;</span> <span class="built_in">console</span>.log(val+val1))</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„ä¼šæŠ›é”™ï¼Œå› ä¸ºåœ¨æŠ›å‡ºé”™è¯¯ä¹‹å æ²¡æœ‰ä¸€ä¸ª catchæ¥å¤„ç†è¿™ä¸ªé”™è¯¯</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ä¸€èˆ¬ä¼šåœ¨ Promise çš„æœ€æœ«ç«¯æ·»åŠ ä¸€ä¸ª catch å¯¹å‰é¢å¯èƒ½å‡ºç°çš„é—®é¢˜è¿›è¡Œå¤„ç†<br><img src="promise2.png" alt="promise2"></p>
<h2 id="thenable"><a href="#thenable" class="headerlink" title="thenable"></a>thenable</h2><p>ä¸Šé¢è¯´äº†é‚£ä¹ˆå¤šå…³äº <code>then</code> çš„ä½¿ç”¨ï¼Œå…¶å®åªè¦å®ç°äº†ä¸Šè¿° <code>then</code> åŠŸèƒ½çš„å¯¹è±¡éƒ½å¯ä»¥å« <code>thenable</code>ã€‚<br>æ‰€æœ‰çš„ Promise éƒ½æ˜¯ thenable ä½†æ˜¯ä¸ä¸€å®šæ‰€æœ‰æœ‰then æ–¹æ³•çš„å¯¹è±¡éƒ½å« thenableã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var thenable = &#123;</span><br><span class="line">  then: function(res, rej) &#123;</span><br><span class="line">    res(1)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è‡³äº thenable æœ‰ä»€ä¹ˆç”¨ è¯·å¾€ä¸‹çœ‹</p>
<h3 id="resolve"><a href="#resolve" class="headerlink" title="resolve"></a>resolve</h3><p>ä¸Šè¿°è¯´åˆ°çš„ Promise ç”¨æ³•ï¼Œéƒ½æ˜¯ åˆ›å»ºä¸€ä¸ªæœªå®ŒæˆçŠ¶æ€ï¼Œæ‰§è¡Œä¸€äº›æ“ä½œä¹‹åæ‰ä» pending è½¬å˜ä¸º resolved æˆ– rejected<br>é‚£ä¹ˆå¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªå®ŒæˆçŠ¶æ€çš„ Promise å—ï¼Ÿ  è¿™é‡Œå°±è¦ç”¨åˆ° é™æ€æ–¹æ³•ä¸Šé¢çš„ <code>resolve</code>ã€‚</p>
<ul>
<li>Promise.resolve(promise);</li>
<li>Promise.resolve(thenable);</li>
<li>Promise.resolve(object);</li>
</ul>
<h3 id="å‚æ•°ä¸º-promise-æ—¶ï¼Œè¿”å›çš„ä¹Ÿæ˜¯è¯¥promise"><a href="#å‚æ•°ä¸º-promise-æ—¶ï¼Œè¿”å›çš„ä¹Ÿæ˜¯è¯¥promise" class="headerlink" title="å‚æ•°ä¸º promise æ—¶ï¼Œè¿”å›çš„ä¹Ÿæ˜¯è¯¥promise"></a>å‚æ•°ä¸º promise æ—¶ï¼Œè¿”å›çš„ä¹Ÿæ˜¯è¯¥promise</h3><figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">()</span>=&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="keyword">const</span> promiseA = <span class="built_in">Promise</span>.resolve(promise)</span><br><span class="line">promise === promiseA</span><br></pre></td></tr></table></figure>
<h3 id="å‚æ•°ä¸ºthenable-æ—¶ï¼Œè¿”å›æ ‡å‡†çš„promiseå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰thenæ–¹æ³•"><a href="#å‚æ•°ä¸ºthenable-æ—¶ï¼Œè¿”å›æ ‡å‡†çš„promiseå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰thenæ–¹æ³•" class="headerlink" title="å‚æ•°ä¸ºthenable æ—¶ï¼Œè¿”å›æ ‡å‡†çš„promiseå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰thenæ–¹æ³•"></a>å‚æ•°ä¸ºthenable æ—¶ï¼Œè¿”å›æ ‡å‡†çš„promiseå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰thenæ–¹æ³•</h3><p>è¿™é‡Œæ˜¯ resolve æ–¹æ³•ç”¨çš„æœ€å¤šçš„åœ°æ–¹äº†<br>å¹³æ—¶å·¥ä½œç”¨åˆ°æœ€å¤šçš„ thenable ææ€•å°±æ˜¯ jQ æˆ– zepto çš„ ajax<br>é‚£ä¹ˆæˆ‘ä»¬å¦‚æœè¦æŠŠä»–è½¬ä¸ºæ ‡å‡†çš„ promise æ€ä¹ˆåŠå‘¢ï¼Ÿ æ¯”å¦‚ zepto çš„ ajax è¿”å›çš„å°±æ²¡æœ‰ .catche æ–¹æ³•ï¼Œè€Œæ˜¯ .fail</p>
<p>è¿™é‡Œå¦‚æœæœ‰å¿…è¦ æˆ‘ä»¬å¯ä»¥åšä¸€å±‚å°è£…ï¼ŒæŠŠä»–è½¬å˜ä¸ºæ ‡å‡†çš„æ ¼å¼ æ‹¥æŠ±æœªæ¥ï¼ï¼ï¼<br><figure class="highlight javascript"><figcaption><span>demo2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ajax = $.ajax(&#123; url, data &#125;)</span><br><span class="line"><span class="built_in">Promise</span>.resolve(ajax)</span><br><span class="line">	.then(<span class="function"><span class="params">response</span>=&gt;</span> &#123;&#125;)</span><br><span class="line">	.catch(<span class="function"><span class="params">err</span>=&gt;</span> <span class="built_in">console</span>.warn(err))</span><br></pre></td></tr></table></figure></p>
<h3 id="å‚æ•°æ˜¯å…¶ä»–å€¼çš„æƒ…å†µï¼Œä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ä¸º-resolved-çš„-promiseã€‚ç»ˆå€¼ä¸ºä¼ å…¥çš„å€¼"><a href="#å‚æ•°æ˜¯å…¶ä»–å€¼çš„æƒ…å†µï¼Œä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ä¸º-resolved-çš„-promiseã€‚ç»ˆå€¼ä¸ºä¼ å…¥çš„å€¼" class="headerlink" title="å‚æ•°æ˜¯å…¶ä»–å€¼çš„æƒ…å†µï¼Œä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ä¸º resolved çš„ promiseã€‚ç»ˆå€¼ä¸ºä¼ å…¥çš„å€¼"></a>å‚æ•°æ˜¯å…¶ä»–å€¼çš„æƒ…å†µï¼Œä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ä¸º resolved çš„ promiseã€‚ç»ˆå€¼ä¸ºä¼ å…¥çš„å€¼</h3><figure class="highlight javascript"><figcaption><span>demo3</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(&#123;<span class="attr">name</span>: <span class="string">"Jsonz"</span>&#125;)</span><br><span class="line">	.then(<span class="function"><span class="params">val</span>=&gt;</span> <span class="built_in">console</span>.log(<span class="string">"å¸…å“¥æ˜¯ "</span> + val))</span><br></pre></td></tr></table></figure>
<h2 id="reject"><a href="#reject" class="headerlink" title="reject"></a>reject</h2><p>Promise.reject ç”¨æ³•ä¸ Promise.resolve ç±»ä¼¼ è¿™é‡Œä¸å†èµ˜è¿°</p>
<h2 id="å¤šä¸ªæƒ…å†µå¤„ç†"><a href="#å¤šä¸ªæƒ…å†µå¤„ç†" class="headerlink" title="å¤šä¸ªæƒ…å†µå¤„ç†"></a>å¤šä¸ªæƒ…å†µå¤„ç†</h2><p>å¼€å¤´çš„æ—¶å€™è¯´äº†ï¼Œå¦‚æœè¦å¤„ç†ä¸¤ä¸ªåŠä»¥ä¸Šçš„å¼‚æ­¥æ“ä½œï¼š</p>
<ol>
<li>å¤šä¸ªéƒ½å®Œæˆæ—¶é€šçŸ¥ä½ </li>
<li>æœ‰ä¸€ä¸ªå®Œæˆæ—¶é€šçŸ¥ä½ <br>é‚£ä¹ˆå›è°ƒå°±æ˜¾å¾—å¾ˆå°´å°¬ï¼Œè¿™é‡Œ Promise æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥æ»¡è¶³ä½ è¿™ç§å°éœ€æ±‚</li>
</ol>
<h2 id="all"><a href="#all" class="headerlink" title="all"></a>all</h2><p>ä¸šåŠ¡ä¸Šç»å¸¸ä¼šæœ‰æƒ…å†µæ˜¯ è¦ç­‰aæ¥å£ä¸bæ¥å£çš„æ•°æ®ä¸€èµ·å›æ¥æ‰åšæ“ä½œ é‚£ä¹ˆå¯ä»¥ç”¨åˆ°é™æ€æ–¹æ³• <code>Promise.all</code></p>
<p>Promise.all ä¼šæ¥å—ä¸€ä¸ª Array ç±»ä¼¼çš„å‚æ•°ï¼Œé‡Œé¢æ˜¯Promise ç±»å‹ï¼Œ è¿”å›ä¸€ä¸ªæ–°çš„Promise è¿™é‡Œå–å <code>PromiseAll</code><br>å½“æ‰€æœ‰çš„Promise éƒ½å˜æˆ resolved æ—¶ï¼Œä¼šå°† PromiseAll çš„çŠ¶æ€æ”¹ä¸º resolved å‚æ•°ä¸ºæ¯ä¸ª promise çš„ç»ˆå€¼<br>å¦‚æœæœ‰ä¸€ä¸ªPromise ä¸º rejectedï¼Œ é‚£ä¹ˆ PromiseAll ä¼šç›´æ¥å˜ä¸º rejected çŠ¶æ€ å‚æ•°ä¸º é¦–ä¸ªå˜ä¸º rejected çŠ¶æ€çš„é”™è¯¯ä¿¡æ¯</p>
<figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">1</span>))</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span> res(<span class="number">2</span>))</span><br><span class="line"><span class="keyword">const</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>)=&gt;</span> rej(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p4 = <span class="built_in">Promise</span>.all([p1, p2]);</span><br><span class="line">p4.then(<span class="function"><span class="params">val</span>=&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(val))</span><br><span class="line">	val.forEach(<span class="function"><span class="params">item</span>=&gt;</span> <span class="built_in">console</span>.log(item))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p5 = <span class="built_in">Promise</span>.all([p1, p3])</span><br><span class="line">p5.then(<span class="function"><span class="params">v</span>=&gt;</span> <span class="built_in">console</span>.log(v), err=&gt; <span class="built_in">console</span>.log(err))</span><br></pre></td></tr></table></figure>
<h2 id="race"><a href="#race" class="headerlink" title="race"></a>race</h2><p>Promise.race å¯¹åº”çš„æ˜¯ <em>æœ‰ä¸€ä¸ªå®Œæˆæ—¶é€šçŸ¥ä½ </em> è¿™ç§çŠ¶æ€ï¼Œç”¨æ³•ä¸å‚æ•°ä¸ all ç±»ä¼¼<br>ä½†æ˜¯ <code>Promise.race</code> çš„å‚æ•°ä¸ºç¬¬ä¸€ä¸ªè½¬ä¸º resolved çŠ¶æ€çš„ç»ˆå€¼</p>
<h2 id="ç»§æ‰¿Promiseæ”¹é€ "><a href="#ç»§æ‰¿Promiseæ”¹é€ " class="headerlink" title="ç»§æ‰¿Promiseæ”¹é€ "></a>ç»§æ‰¿Promiseæ”¹é€ </h2><p>å¦‚æœæˆ‘ä»¬è¦å¯¹åŸç”Ÿçš„ Promise è¿›è¡Œæ”¹é€ ï¼Œæ¯”å¦‚æ·»åŠ  success() æˆ– failure() æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥ç»§æ‰¿ä»–åˆ›å»ºä¸€ä¸ªæ–°çš„ JsonzPromise<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JsonzPromise</span> <span class="keyword">extends</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">	success(resolve, reject) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.then(resolve, reject)</span><br><span class="line">	&#125;</span><br><span class="line">	failure(reject) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.catch(reject)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> JsonzPromise(<span class="function">(<span class="params">res, rej</span>)=&gt;</span> res(<span class="number">1</span>))</span><br><span class="line">	.success(<span class="function"><span class="params">val</span>=&gt;</span> <span class="built_in">console</span>.log(val));</span><br></pre></td></tr></table></figure></p>
<h2 id="å…¨å±€çš„rejectedçŠ¶æ€å¤„ç†"><a href="#å…¨å±€çš„rejectedçŠ¶æ€å¤„ç†" class="headerlink" title="å…¨å±€çš„rejectedçŠ¶æ€å¤„ç†"></a><a href="#å…¨å±€çš„rejectedçŠ¶æ€å¤„ç†">å…¨å±€çš„rejectedçŠ¶æ€å¤„ç†</a></h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onunhandledrejection = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(e)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onrejectionhandled = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>node</code> åˆ™æ˜¯åœ¨ <code>process</code> ç»‘å®šç›‘å¬<br>æ°®ç´ ï¼ï¼ï¼ï¼ ä¸çŸ¥é“ä¸ºä½•è¿˜æ²¡è·‘è¿‡æˆåŠŸçš„demoâ€¦.</p>
<h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>emmmmmm è´´å‡ºä¸€äº›æ¯”è¾ƒå¥½çš„æ•™ç¨‹å§</p>
<ul>
<li><a href="https://www.amazon.cn/dp/B071GW3JDP/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1514389776&amp;sr=1-1&amp;keywords=%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3es6" target="_blank" rel="noopener">æ·±å…¥ç†è§£ES6 Promise ç¯‡ç« </a></li>
<li><a href="http://liubin.org/promises-book/#Promise.resolve" target="_blank" rel="noopener">javascript -  Promise è¿·ä½ ä¹¦</a></li>
<li><a href="http://www.ituring.com.cn/article/66566" target="_blank" rel="noopener">Promise/A+ è§„èŒƒä¸­æ–‡</a></li>
<li>ç¬¬äºŒæœŸå®ç°è‡ªå·±çš„ Promise <a href="https://zhuanlan.zhihu.com/p/25178630" target="_blank" rel="noopener">å‚è€ƒ1</a> <a href="https://github.com/Jocs/jocs.github.io/issues/7" target="_blank" rel="noopener">å‚è€ƒ2</a> <a href="http://coderlt.coding.me/2016/12/03/promise-in-depth-an-introduction-1/" target="_blank" rel="noopener">å‚è€ƒ3</a> <a href="https://github.com/calvinmetcalf/lie" target="_blank" rel="noopener">å‚è€ƒ4</a></li>
</ul>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>httpä¸httpsæ‚è°ˆ</title>
    <url>/2017/12/http%E4%B8%8Ehttps%E6%9D%82%E8%B0%88/</url>
    <content><![CDATA[<p>http &amp;&amp; https</p>
<p><a href="https://www.zhihu.com/question/19577317" target="_blank" rel="noopener">https://www.zhihu.com/question/19577317</a></p>
<p><a href="http://www.alloyteam.com/2016/07/httphttp2-0spdyhttps-reading-this-is-enough/" target="_blank" rel="noopener">http://www.alloyteam.com/2016/07/httphttp2-0spdyhttps-reading-this-is-enough/</a></p>
<p><a href="https://juejin.im/entry/58d7635e5c497d0057fae036" target="_blank" rel="noopener">https://juejin.im/entry/58d7635e5c497d0057fae036</a></p>
<p><a href="http://www.jianshu.com/p/37654eb66b58" target="_blank" rel="noopener">http://www.jianshu.com/p/37654eb66b58</a></p>
<p><a href="http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html" target="_blank" rel="noopener">http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html</a></p>
<p>httpsä¼˜ç‚¹<br><a href="http://www.codeceo.com/article/why-http-better-than-https.html" target="_blank" rel="noopener">http://www.codeceo.com/article/why-http-better-than-https.html</a></p>
<p>SSL/TSL åè®®è¿è¡Œæœºåˆ¶<br><a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html</a></p>
<p>https ä»ç¬¬ä¸€så‘ç”Ÿçš„äº‹æƒ…<br><a href="http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html" target="_blank" rel="noopener">http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html</a></p>
<p>å½­å½­çš„æ–‡ç« ï¼Œåè¯è§£é‡Šå™¨<br><a href="http://172.16.30.58:8000/index.php/2017/11/22/http-https-tcp-dns/" target="_blank" rel="noopener">http://172.16.30.58:8000/index.php/2017/11/22/http-https-tcp-dns/</a></p>
<p>è¯´çš„æ˜¯é¡¹ç›®çš„ä¸œè¥¿ ä¸å¤§æ²¾è¾¹<br><a href="http://172.16.30.58:8000/index.php/2017/12/02/local-https-principle/" target="_blank" rel="noopener">http://172.16.30.58:8000/index.php/2017/12/02/local-https-principle/</a></p>
<p>è¯´çš„æ˜¯ä»£ç†<br><a href="http://172.16.30.58:8000/index.php/2017/11/29/local-https-proxy/" target="_blank" rel="noopener">http://172.16.30.58:8000/index.php/2017/11/29/local-https-proxy/</a></p>
<p>`<br>http ä¸ https</p>
<ul>
<li>é¡µé¢èµ„æºäº’ç›¸è®¿é—®</li>
<li>httpsè¯ä¹¦è·å–çš„æ–¹æ³•ï¼Œè‡ªç­¾ï¼Œæœºæ„è®¤è¯ä¹‹ç±»çš„</li>
</ul>
<h1 id="HTTP-ç›¸å…³"><a href="#HTTP-ç›¸å…³" class="headerlink" title="HTTP ç›¸å…³"></a>HTTP ç›¸å…³</h1><h2 id="å¸¸è§åè®®å¤´çš„åˆ†æ-æ¯”å¦‚ä¸‹é¢çš„å¤´å¯¹-GET-POST-çš„å½±å“ã€å¯¹ä¼ é€’å‚æ•°çš„å½±å“"><a href="#å¸¸è§åè®®å¤´çš„åˆ†æ-æ¯”å¦‚ä¸‹é¢çš„å¤´å¯¹-GET-POST-çš„å½±å“ã€å¯¹ä¼ é€’å‚æ•°çš„å½±å“" class="headerlink" title="å¸¸è§åè®®å¤´çš„åˆ†æ, æ¯”å¦‚ä¸‹é¢çš„å¤´å¯¹ GET POST çš„å½±å“ã€å¯¹ä¼ é€’å‚æ•°çš„å½±å“"></a>å¸¸è§åè®®å¤´çš„åˆ†æ, æ¯”å¦‚ä¸‹é¢çš„å¤´å¯¹ GET POST çš„å½±å“ã€å¯¹ä¼ é€’å‚æ•°çš„å½±å“</h2><ul>
<li>â€œcontent-typeâ€: â€œapplication/x-www-form-urlencodedâ€</li>
<li>â€œcontent-typeâ€: â€œmultipart/form-dataâ€</li>
</ul>
<h2 id="HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰çš„åˆ†æ"><a href="#HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰çš„åˆ†æ" class="headerlink" title="HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰çš„åˆ†æ"></a>HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰çš„åˆ†æ</h2><ul>
<li>è·¨åŸŸæ˜¯ä»€ä¹ˆ</li>
<li>ä¸ºä»€ä¹ˆæœ‰è·¨åŸŸ</li>
<li>å¦‚ä½•è§£å†³</li>
</ul>
<h2 id="GET-å’Œ-POST-çš„çœŸæ­£åŒºåˆ«"><a href="#GET-å’Œ-POST-çš„çœŸæ­£åŒºåˆ«" class="headerlink" title="GET å’Œ POST çš„çœŸæ­£åŒºåˆ«"></a>GET å’Œ POST çš„çœŸæ­£åŒºåˆ«</h2><h2 id="session-æœºåˆ¶"><a href="#session-æœºåˆ¶" class="headerlink" title="session æœºåˆ¶"></a>session æœºåˆ¶</h2><h2 id="ç¼“å­˜æœºåˆ¶ï¼ˆè·Ÿç¼“å­˜ç›¸å…³çš„åè®®å¤´ï¼‰"><a href="#ç¼“å­˜æœºåˆ¶ï¼ˆè·Ÿç¼“å­˜ç›¸å…³çš„åè®®å¤´ï¼‰" class="headerlink" title="ç¼“å­˜æœºåˆ¶ï¼ˆè·Ÿç¼“å­˜ç›¸å…³çš„åè®®å¤´ï¼‰"></a>ç¼“å­˜æœºåˆ¶ï¼ˆè·Ÿç¼“å­˜ç›¸å…³çš„åè®®å¤´ï¼‰</h2><p>æƒ³å±Œç‚¹çš„å°±åŠ ä¸€ä¸ªç®€å•çš„å®ä¾‹åˆ†ææ¼”ç¤ºï¼›æŠ“åŒ…æ¼”ç¤ºç­‰</p>
<p>æ„Ÿè§‰ä¸Šé¢å»ºè®®è¿™äº›ç‚¹ï¼Œæ¯”å•çº¯çš„ç½—åˆ— HTTP çš„ç†è®ºä¼šæ›´æœ‰æ„ä¹‰<br>`</p>
<p>ç†è®ºç¯‡<br>https = http + ssl/tls</p>
<p>ssl =&gt; å®‰å…¨å¥—æ¥å±‚<br>tls =&gt; ä¼ è¾“å±‚å®‰å…¨æ€§åè®®</p>
<h1 id="https-ä½œç”¨"><a href="#https-ä½œç”¨" class="headerlink" title="https ä½œç”¨"></a>https ä½œç”¨</h1><p>http</p>
<ol>
<li>çªƒå¬é£é™©ï¼šç¬¬ä¸‰æ–¹è·å–é€šä¿¡å†…å®¹</li>
<li>ç¯¡æ”¹é£é™©ï¼šç¬¬ä¸‰æ–¹å¯ä»¥ä¿®æ”¹é€šä¿¡å†…å®¹</li>
<li>å†’å……é£é™©ï¼šç¬¬ä¸‰æ–¹å¯ä»¥å†’å……ä»–äººèº«ä»½å‚ä¸é€šä¿¡</li>
</ol>
<p>SSL/TLS </p>
<ol>
<li>æ‰€æœ‰ä¿¡æ¯åŠ å¯†ä¼ è¾“ æ— æ³•çªƒå¬</li>
<li>æ ¡éªŒæœºåˆ¶ ç¯¡æ”¹ä¼šè¢«å‘ç°</li>
<li>é…è¯ä¹¦ é˜²æ­¢è¢«å†’å……</li>
</ol>
<p>SSL/TLSåè®®çš„åŸºæœ¬æ€è·¯æ˜¯é‡‡ç”¨å…¬é’¥åŠ å¯†æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å…ˆå‘æœåŠ¡å™¨ç«¯ç´¢è¦å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥åŠ å¯†ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚</p>
<p>å¦‚ä½•ä¿è¯å…¬é’¥ä¸è¢«ç¯¡æ”¹ï¼š<br>å°†å…¬é’¥æ”¾åœ¨æ•°å­—è¯ä¹¦ä¸­ï¼Œè¯ä¹¦å¯ä¿¡ä½ çš„å…¬é’¥å°±æ˜¯å¯ä¿¡</p>
<p>å…¬é’¥åŠ å¯†è®¡ç®—é‡å¤ªå¤§ï¼Œå¦‚ä½•å‡å°‘è€—ç”¨çš„æ—¶é—´ï¼Ÿ<br>æ¯ä¸€æ¬¡å¯¹è¯ï¼ˆsessionï¼‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ç”Ÿæˆä¸€ä¸ªâ€å¯¹è¯å¯†é’¥â€ï¼ˆsession keyï¼‰ï¼Œç”¨å®ƒæ¥åŠ å¯†ä¿¡æ¯ã€‚ç”±äºâ€å¯¹è¯å¯†é’¥â€æ˜¯å¯¹ç§°åŠ å¯†ï¼Œæ‰€ä»¥è¿ç®—é€Ÿåº¦éå¸¸å¿«ï¼Œè€ŒæœåŠ¡å™¨å…¬é’¥åªç”¨äºåŠ å¯†â€å¯¹è¯å¯†é’¥â€æœ¬èº«ï¼Œè¿™æ ·å°±å‡å°‘äº†åŠ å¯†è¿ç®—çš„æ¶ˆè€—æ—¶é—´ã€‚</p>
<p>ï¼ˆ1ï¼‰ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ç´¢è¦å¹¶éªŒè¯å…¬é’¥ã€‚<br>ï¼ˆ2ï¼‰ åŒæ–¹åå•†ç”Ÿæˆâ€å¯¹è¯å¯†é’¥â€ã€‚<br>ï¼ˆ3ï¼‰ åŒæ–¹é‡‡ç”¨â€å¯¹è¯å¯†é’¥â€è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>flex:1åœ¨iOS10.2å¯¼è‡´flex-wrap ä¸èµ·ä½œç”¨</title>
    <url>/2017/08/flex-1%E5%9C%A8iOS10-2%E5%AF%BC%E8%87%B4flex-wrap%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8bug/</url>
    <content><![CDATA[<p>å®é™…ä¸Šæ˜¯ <code>flex-basis</code> çš„é»˜è®¤å€¼åœ¨ <code>iOS10.2</code>åŠä»¥ä¸‹ä¸º <code>0</code> è€Œä¸æ˜¯ <code>auto</code> å¯¼è‡´çš„ã€‚</p>
<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>é¡¹ç›®ä¸Šæœ‰ä¸€ä¸ªåˆ—è¡¨è¦æœ‰è¿™ç§æ•ˆæœï¼š </p>
<ol>
<li>åªæœ‰ä¸€ä¸ªçš„æƒ…å†µæ˜¯ä¸€ä¸ªå ä¸€æ’</li>
<li>æœ‰ä¸¤ä¸ªçš„æƒ…å†µæ˜¯ å„å 50%</li>
<li>æœ‰ä¸‰ä¸ªæˆ–ä»¥ä¸Šçš„æƒ…å†µæ˜¯ æ¯ä¸ªå  1/3<br>æ‰€ä»¥è¿™æ—¶å€™ç”¨flexæ˜¯æœ€å®¹æ˜“çš„ã€‚<br>å¤§äºä¸‰ä¸ªçš„ç›´æ¥è¡¥å…¨è‡³3çš„å€æ•°å³å¯<br>ä»£ç å¤§è‡´æ€è·¯ï¼š<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.demo</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="./demo1.jpg" alt="demo"></p>
<p>æœ¬æ¥æ˜¯å®Œç¾æ— ç¼ºçš„ï¼Œä½†æ˜¯åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå‘ç°è¯´ <code>iOS 10.2</code> åŠä»¥ä¸‹ç‰ˆæœ¬ä¼šå‡ºç° <code>flex-wrap</code>æ²¡æœ‰æ­£ç¡®æ¢è¡Œçš„æƒ…å†µï¼Œå°±ç®—å¤§äºä¸‰ä¸ªçš„æƒ…å†µ å…¨éƒ¨ä¹Ÿéƒ½ä¼šæŒ¤åœ¨åŒä¸€è¡Œã€‚ è¯¥bugåœ¨ <code>10.3</code>ä¸ä¼šé‡ç°ã€‚</p>
<p><img src="./bug.png" alt="iOS10.2ä¸‹bug"></p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æœ¬æ¥æœ‰è€ƒè™‘ä¸ç”¨ <code>flex</code> è€Œæ˜¯ç”¨ <code>inline-block</code> æˆ– <code>float</code> æ¥è§£å†³ï¼Œä½†æ˜¯è¿˜æ˜¯è§‰å¾— <code>flex</code> è§£å†³æ¯”è¾ƒä¼˜é›…ä¸€ç‚¹ã€‚<br>æ‰€ä»¥å¤šç•ªå°è¯•åå‘ç°è¯´ï¼Œä¸å†™ <code>flex:1</code> è€Œæ˜¯å†™æˆ <code>flex:1 1 auto</code>å°±æ²¡é—®é¢˜ã€‚</p>
<p>åœ¨safariè°ƒè¯•äº†ä¸€ä¸‹ï¼Œå‘ç° iOS10.2åŠä»¥ä¸‹ <code>flex-basis</code> å±æ€§çš„é»˜è®¤å€¼ä¸º <code>0</code> è€Œä¸æ˜¯ <code>auto</code>.<br>æ‰€ä»¥æ‰€æœ‰çš„é¡¹éƒ½å˜æˆæŒ¤åœ¨ä¸€èµ·ã€‚</p>
<p>æ‰€ä»¥åœ¨åŸæ¥ä»£ç ä¸ŠåŠ å¤šä¸€è¡Œ <code>flex-basis: auto;</code> é‡ç½®æ‰ <code>flex-basis: 0;</code> å¸¦æ¥çš„é—®é¢˜å³å¯ã€‚</p>
<p><img src="./bugfix.png" alt="bugfix"></p>
<p><a href="https://jsonz1993.github.io/demo/flex-ios-10.2/index.html">åœ¨çº¿demo</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>work</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>æµè§ˆå™¨cssæ»šåŠ¨å›å¼¹æ•ˆæœ overflow-scrolling</title>
    <url>/2017/08/%E6%B5%8F%E8%A7%88%E5%99%A8css%E6%BB%9A%E5%8A%A8%E5%9B%9E%E5%BC%B9%E6%95%88%E6%9E%9C-overflow-scrolling/</url>
    <content><![CDATA[<p>å‰å‡ å¤©åšå…¨å±fixedå¸ƒå±€å¼¹çª—çš„æ—¶å€™ï¼Œå»å‚è€ƒäº†ä¸€ä¸‹æ·˜å®çš„å¸ƒå±€ã€‚</p>
<p>æ— æ„ä¸­å‘ç°é‡Œé¢ç”¨åˆ°ä¸€ä¸ªæ²¡è§è¿‡çš„csså±æ€§ <code>-webkit-overflow-scrolling</code></p>
<p>è¯¥å±æ€§æ§åˆ¶å…ƒç´ åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¯å¦ä½¿ç”¨æ»šåŠ¨å›å¼¹æ•ˆæœ,ä¼šæœ‰ç§æ‹ŸåŸç”Ÿçš„æ•ˆæœ æ˜¯å±äº<code>Safari</code>è‡ªå·±å®ç°çš„csså±æ€§ å…¼å®¹æ€§æ”¯æŒ <code>iOS 5.0</code> ä»¥ä¸Šã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">-webkit-overflow-scrolling</span>: <span class="selector-tag">touch</span>; <span class="comment">/* å½“æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸Šç§»å¼€ï¼Œä¼šä¿æŒä¸€æ®µæ—¶é—´çš„æ»šåŠ¨ */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">-webkit-overflow-scrolling</span>: <span class="selector-tag">auto</span>; <span class="comment">/* å½“æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸Šç§»å¼€ï¼Œæ»šåŠ¨ä¼šç«‹å³åœæ­¢ */</span></span><br></pre></td></tr></table></figure>
<p><a href="https://jsonz1993.github.io/demo/overflow-scrolling/index.html">åœ¨çº¿demo</a></p>
<figure class="highlight html"><figcaption><span>ç¤ºä¾‹demo åªåœ¨iosæ‰‹æœºä¸Šæœ‰æ•ˆ æµè§ˆå™¨çœ‹ä¸å‡ºæ•ˆæœ</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        div &#123;</span><br><span class="line">            height: 200px;</span><br><span class="line">            overflow: auto;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.scrolling1</span> &#123;</span></span><br><span class="line">            background-color: red;</span><br><span class="line">            -webkit-overflow-scrolling: auto;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.scrolling2</span> &#123;</span></span><br><span class="line">            background-color: yellow;</span><br><span class="line">            -webkit-overflow-scrolling: touch;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>-webkit-overflow-scrolling: auto;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"scrolling1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>-webkit-overflow-scrolling: touch;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"scrolling2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> divList = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(<span class="string">'div'</span>))</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> str = <span class="string">''</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>;i&lt; <span class="number">100</span>; i++) &#123;</span></span><br><span class="line"><span class="javascript">            str += <span class="string">`&lt;p&gt;<span class="subst">$&#123;i&#125;</span>&lt;/p&gt;`</span></span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        divList.forEach(<span class="function"><span class="params">item</span>=&gt;</span> &#123;</span></span><br><span class="line">            item.innerHTML = str</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å‚è€ƒèµ„æ–™</p>
<ul>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/-webkit-overflow-scrolling" target="_blank" rel="noopener">MDN</a></p>
</li>
<li><p><a href="https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-overflow-scrolling" target="_blank" rel="noopener">Safari CSS</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>8æœˆä¼Šå§‹ç‰¢éªš</title>
    <url>/2017/08/8%E6%9C%88%E7%AC%AC%E4%B8%80%E5%91%A8%E7%9A%84%E7%89%A2%E9%AA%9A/</url>
    <content><![CDATA[<p>çœ‹äº†ä¸€ä¸‹ ä¸Šä¸€æ¬¡ commit çš„æ—¶é—´ã€‚<br>jun 25, 2017<br>ä»å»å…°å¡å¨ç©ä¹‹å‰å°±å¼€å§‹æ²¡å†™åšå®¢äº†ã€‚<br>å›æ¥ä¹‹ååˆä¸€ç›´å¾ˆæ‡’æ•£ åŠ ä¸Šå·¥ä½œå®åœ¨é¥±å’Œ å·®ç‚¹ä¸¢äº†è¿™ä¸ªä¹ æƒ¯ ä¸å¥½ ä¸å¥½</p>
<p>7æœˆçš„åŠ ç­æ—¶é•¿ï¼Œå¹³å‡æ—¶é•¿æ˜¯ 11.30 å°æ—¶ æ’å…¬å¸æŠ€æœ¯ç¬¬äº”</p>
<p>ä¸ƒæœˆå°¾å…«æœˆåˆæœ‰ä¸ªå°æœºä¼š å¯ä»¥ç”¨ä¸Šreactå…¨å®¶æ¡¶åšä¸€ä¸ªå‰ç«¯çš„åå°ç®¡ç†ç³»ç»Ÿ [å‰ç«¯æ€§èƒ½æ£€æµ‹åå° sp]</p>
<p>ä»åªè‡ªå·±æ£é¼“è¿‡ <code>react-native</code> çš„å°èœé¸Ÿ ä¸€ä¸‹å­è¦ä¸Šæ‰‹å…¨å®¶æ¡¶ çœŸçš„å¾ˆè›‹ç–¼ï¼Œå¥½å‡ å¤©éƒ½åœ¨çœ‹ æ–‡æ¡£api demo</p>
<p>å¹¸äº<code>å…¶æ¯…å¤§å“¥</code> æ­¤å¤„åº”è¯¥æœ‰æŒå£° æ•´å¤©åšæˆ‘çš„å° Google GoGoGo</p>
<p>react/redux/redux-sage/react-router/react-redux-router/antd/dva</p>
<p>æœŸé—´åšçƒ­åŠ›å›¾çš„å†…åµŒ ç¬¬ä¸€æ¬¡ç”¨äº† <code>postMessage</code>ã€‚ ç„¶åæ„å¤–å‘ç° ä¸çŸ¥é“æ˜¯ <code>redux-tool</code>è¿˜æ˜¯<code>redux</code> ç”¨äº† <code>web-worker</code> æ¥åšè®¡ç®—çº¿ç¨‹ã€‚ è·Ÿå‘ç°æ–°å¤§é™†ä¸€æ ·</p>
<p>è¿™å‘¨äº”æ’åˆ°æˆ‘åˆ†äº«ï¼Œæ‰“ç®—æŠŠ <code>postMessage</code> ç®€å•è¯´ä¸€ä¸‹ï¼Œä¸‹æ¬¡æœ‰æœºä¼šçš„æ—¶å€™ è¯´ä¸€ä¸‹ <code>sp</code>åå°å’Œ <code>dva</code>çš„å¤§æ¦‚æ€è·¯</p>
<p>8.26å·ç¬¬ä¸€æ¬¡å‚åŠ  <code>FEDAY</code> æŒºå¼€å¿ƒçš„ å¯ä»¥å»åŒ—äº¬ã€‚ åŠ æ²¹ Jsonz åŠ æ²¹P3</p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>postMessage æ¶ˆæ¯ä¼ é€’</title>
    <url>/2017/08/postMessage-%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ€è¿‘æ£é¼“ä¸€ä¸ªå°é¡¹ç›®ï¼Œ åšäº†ä¸€ä¸ªåå°ç®¡ç†å¹³å° é‡Œé¢è¦å¯¹çº¿ä¸Šé¡¹ç›®åšä¸€ä¸ªæ“ä½œ æ˜¾ç¤ºçƒ­åŠ›å›¾ã€‚<br>æ‰€ä»¥åªèƒ½é‡‡ç”¨ <code>iframe</code> å»åµŒå¥—ï¼Œå†åšå…¶ä»–æ“ä½œã€‚<br>åŒ…æ‹¬ åŠ è½½ç›¸å¯¹çš„jsè„šæœ¬ï¼ˆçƒ­åŠ›å›¾è„šæœ¬ ç§°heatmap.js)ï¼Œ åœ¨åå°ç­›é€‰æ—¥æœŸ åœ°ç‚¹æ—¶ <code>heatmap.js</code> è¦åšå¯¹åº”çš„æ“ä½œ<br>å› ä¸ºåå°çš„åŸŸå’Œå‰ç«¯ä¸ä¸€è‡´ æ‰€ä»¥è·¨åŸŸæ“ä½œ é¦–é€‰ç”¨ <code>postMessage</code></p>
<h2 id="postMessage-api"><a href="#postMessage-api" class="headerlink" title="postMessage api"></a>postMessage api</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">otherWindow.postMessage(message, targetOrigin, [transfer] )</span><br><span class="line"></span><br><span class="line">otherWindow: å…¶ä»–çª—å£çš„ä¸€ä¸ªå¼•ç”¨ï¼Œæ¯”å¦‚iframeçš„contentWindowå±æ€§ã€æ‰§è¡Œ<span class="built_in">window</span>.openè¿”å›çš„çª—å£å¯¹è±¡ã€æˆ–è€…æ˜¯å‘½åè¿‡æˆ–æ•°å€¼ç´¢å¼•çš„<span class="built_in">window</span>.framesã€‚</span><br><span class="line"></span><br><span class="line">message: å°†è¦å‘é€åˆ°å…¶ä»– <span class="built_in">window</span>çš„æ•°æ®ã€‚å®ƒå°†ä¼šè¢«ç»“æ„åŒ–å…‹éš†ç®—æ³•åºåˆ—åŒ–ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä¸å—ä»€ä¹ˆé™åˆ¶çš„å°†æ•°æ®å¯¹è±¡å®‰å…¨çš„ä¼ é€ç»™ç›®æ ‡çª—å£è€Œæ— éœ€è‡ªå·±åºåˆ—åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">targetOrigin: é€šè¿‡çª—å£çš„originå±æ€§æ¥æŒ‡å®šå“ªäº›çª—å£èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶ï¼Œå…¶å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²<span class="string">"*"</span>ï¼ˆè¡¨ç¤ºæ— é™åˆ¶ï¼‰æˆ–è€…ä¸€ä¸ªURIã€‚åœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå¦‚æœç›®æ ‡çª—å£çš„åè®®ã€ä¸»æœºåœ°å€æˆ–ç«¯å£è¿™ä¸‰è€…çš„ä»»æ„ä¸€é¡¹ä¸åŒ¹é…targetOriginæä¾›çš„å€¼ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¸ä¼šè¢«å‘é€ï¼›åªæœ‰ä¸‰è€…å®Œå…¨åŒ¹é…ï¼Œæ¶ˆæ¯æ‰ä¼šè¢«å‘é€ã€‚è¿™ä¸ªæœºåˆ¶ç”¨æ¥æ§åˆ¶æ¶ˆæ¯å¯ä»¥å‘é€åˆ°å“ªäº›çª—å£ï¼›ä¾‹å¦‚ï¼Œå½“ç”¨postMessageä¼ é€å¯†ç æ—¶ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œå¿…é¡»ä¿è¯å®ƒçš„å€¼ä¸è¿™æ¡åŒ…å«å¯†ç çš„ä¿¡æ¯çš„é¢„æœŸæ¥å—è€…çš„orignå±æ€§å®Œå…¨ä¸€è‡´ï¼Œæ¥é˜²æ­¢å¯†ç è¢«æ¶æ„çš„ç¬¬ä¸‰æ–¹æˆªè·ã€‚å¦‚æœä½ æ˜ç¡®çš„çŸ¥é“æ¶ˆæ¯åº”è¯¥å‘é€åˆ°å“ªä¸ªçª—å£ï¼Œé‚£ä¹ˆè¯·å§‹ç»ˆæä¾›ä¸€ä¸ªæœ‰ç¡®åˆ‡å€¼çš„targetOriginï¼Œè€Œä¸æ˜¯*ã€‚ä¸æä¾›ç¡®åˆ‡çš„ç›®æ ‡å°†å¯¼è‡´æ•°æ®æ³„éœ²åˆ°ä»»ä½•å¯¹æ•°æ®æ„Ÿå…´è¶£çš„æ¶æ„ç«™ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">transfer å¯é€‰</span><br><span class="line">æ˜¯ä¸€ä¸²å’Œmessage åŒæ—¶ä¼ é€’çš„ Transferable å¯¹è±¡. è¿™äº›å¯¹è±¡çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»ç»™æ¶ˆæ¯çš„æ¥æ”¶æ–¹ï¼Œè€Œå‘é€ä¸€æ–¹å°†ä¸å†ä¿æœ‰æ‰€æœ‰æƒã€‚</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯</p>
<p>message ä¸å¯ä»¥åŒ…å« domå¯¹è±¡, å¯ä»¥æŠŠéªŒè¯æˆ–æ ¡å¯¹ä¿¡æ¯æ”¾ç½®åœ¨ message ä¸€å¹¶å‘é€å‡ºå»</p>
<h2 id="å°demo"><a href="#å°demo" class="headerlink" title="å°demo"></a>å°demo</h2><figure class="highlight html"><figcaption><span>a.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"./demo1.html"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">name</span>=<span class="string">"iframe1"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> iframeWindow = <span class="built_in">document</span>.iframe1</span></span><br><span class="line"><span class="javascript">        iframeWindow.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">            iframeWindow.postMessage(&#123;</span><br><span class="line"><span class="javascript">                type: <span class="string">'script'</span>,</span></span><br><span class="line"><span class="javascript">                evalFn: <span class="string">'alert(1)'</span></span></span><br><span class="line"><span class="javascript">            &#125;, <span class="string">'*'</span>)</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, ()=&gt; &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'parent message '</span>)</span></span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>b.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, event=&gt; &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(event)</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> &#123; evalFn, type &#125; = event.data</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> &#123; source &#125; = event</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(type, evalFn)</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (type === <span class="string">'script'</span>) <span class="built_in">eval</span>(evalFn)</span></span><br><span class="line"><span class="javascript">            source.postMessage(<span class="string">'bilibili'</span>, <span class="string">'*'</span>)</span></span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="./post_message_data.png" alt="event è¾“å‡ºæ ¼å¼"></p>
<h2 id="å®é™…åº”ç”¨å°ä¾‹å­"><a href="#å®é™…åº”ç”¨å°ä¾‹å­" class="headerlink" title="å®é™…åº”ç”¨å°ä¾‹å­"></a>å®é™…åº”ç”¨å°ä¾‹å­</h2><figure class="highlight javascript"><figcaption><span>admin-iframe/index.js</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> iframeWindow = iframe.contentWindow</span><br><span class="line"><span class="keyword">this</span>.initMessenger = <span class="keyword">new</span> postMessage(iframeWindow, <span class="string">'initPostMessage'</span>)</span><br><span class="line"><span class="keyword">this</span>.initMessenger.send(&#123;<span class="attr">type</span>: <span class="string">'asyncLoadScript'</span>, <span class="attr">data</span>: &#123;<span class="attr">src</span>: config.heatmapJs&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// heatmapMessage å¤„ç†ä¸heatmap-showç›¸å…³çš„äº‹ä»¶</span></span><br><span class="line"><span class="keyword">this</span>.heatmapMessenger = <span class="keyword">new</span> postMessage(iframeWindow, <span class="string">'heatmap'</span>)</span><br><span class="line"><span class="comment">// æ¯æ¬¡è·³è½¬é¡µé¢æˆ–load éƒ½é‡æ–°åœ¨state æ›´æ–°äº‹ä»¶åˆ°heatmap-show</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.targetMessenger.listen(<span class="string">'loadSuccess'</span>, ()=&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; startTime, endTime, site, continent, isHeatmap &#125; = <span class="keyword">this</span>.props.heatmap</span><br><span class="line">  <span class="keyword">this</span>.heatmapMessenger.send(&#123;<span class="attr">type</span>: <span class="string">'initFilter'</span>, <span class="attr">data</span>: &#123;</span><br><span class="line">    date: [startTime, endTime],</span><br><span class="line">    site,</span><br><span class="line">    isHeatmap</span><br><span class="line">  &#125;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>postMessage.js</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Messenger</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(target, prefix) &#123;</span><br><span class="line">    <span class="keyword">this</span>.target = target</span><br><span class="line">    <span class="keyword">this</span>.prefix = prefix</span><br><span class="line">    <span class="keyword">this</span>.listenFunc = []</span><br><span class="line">    <span class="keyword">this</span>.initListen()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  send(msg) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!msg.type) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'postMessage send æ²¡æœ‰ä¼ type'</span>)</span><br><span class="line">    msg.type = <span class="keyword">this</span>.prefix + <span class="string">'__'</span> + msg.type</span><br><span class="line">    <span class="keyword">this</span>.target.postMessage(msg, <span class="string">'*'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  listen(type, cb) &#123;</span><br><span class="line">    <span class="keyword">const</span> len = <span class="keyword">this</span>.listenFunc.length</span><br><span class="line">    type = <span class="keyword">this</span>.prefix + <span class="string">'__'</span> + type</span><br><span class="line">    <span class="keyword">let</span> cbIsExist = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.listenFunc[i].type === type) &#123;</span><br><span class="line">        cbIsExist = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!cbIsExist) <span class="keyword">this</span>.listenFunc.push(&#123; cb, type &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  initListen() &#123;</span><br><span class="line">    <span class="keyword">const</span> cb= <span class="function"><span class="params">event</span>=&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> messageObj</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> event === <span class="string">'object'</span> &amp;&amp; event.data) messageObj = event.data</span><br><span class="line">      <span class="keyword">if</span> (!messageObj.type || !messageObj.type.includes(<span class="string">'__'</span>)) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; <span class="keyword">this</span>.listenFunc.length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> itemFn = <span class="keyword">this</span>.listenFunc[i]</span><br><span class="line">        <span class="keyword">if</span> (itemFn.type === messageObj.type) itemFn.cb(messageObj.data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, cb, <span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// modules.export = Messenger</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Messenger</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><h3 id="github"><a href="#github" class="headerlink" title="github"></a><a href="https://github.com/jsonz1993/wheel/tree/master/postMessage" target="_blank" rel="noopener">github</a></h3><h3 id="postMessage-MDN-æ–‡æ¡£"><a href="#postMessage-MDN-æ–‡æ¡£" class="headerlink" title="postMessage MDN æ–‡æ¡£"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" target="_blank" rel="noopener">postMessage MDN æ–‡æ¡£</a></h3><h3 id="caniuse"><a href="#caniuse" class="headerlink" title="caniuse "></a>caniuse <iframe height="498" width="100%" src="http://caniuse.com/#search=postmessage" frameborder="0" allowfullscreen></iframe></h3><h3 id="arale-messenger-index-js"><a href="#arale-messenger-index-js" class="headerlink" title="arale/messenger/index.js"></a>arale/messenger/index.js</h3>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>learn</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>å…¼å®¹å¤šç§æ¨¡å¼è§„èŒƒ</title>
    <url>/2017/07/%E5%85%BC%E5%AE%B9%E5%A4%9A%E7%A7%8D%E6%A8%A1%E5%BC%8F%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">name, definition</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// æ£€æµ‹ä¸Šä¸‹æ–‡ç¯å¢ƒæ˜¯å¦ä¸º ADM æˆ– CMD</span></span><br><span class="line">	<span class="keyword">var</span> hasDefine = <span class="keyword">typeof</span> define === <span class="string">'function'</span>;</span><br><span class="line">	<span class="comment">// æ£€æŸ¥ä¸Šä¸‹æ–‡æ˜¯å¦ä¸º node </span></span><br><span class="line">	<span class="keyword">var</span> hasExports = <span class="keyword">typeof</span> <span class="built_in">module</span> !== <span class="string">'undefined'</span> &amp;&amp; <span class="built_in">module</span>.exports;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (hasDefine) &#123;</span><br><span class="line">		<span class="comment">// AMDç¯å¢ƒ æˆ– CMDç¯å¢ƒ</span></span><br><span class="line">		define(definition);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (hasExports) &#123;</span><br><span class="line">		<span class="comment">// å®šä¹‰ä¸ºæ™®é€šNodeæ¨¡å—</span></span><br><span class="line">		<span class="built_in">module</span>.exports = definition();</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// å°†æ¨¡å—çš„æ‰§è¡Œç»“æœæŒ‚åœ¨windowå˜é‡ä¸­ï¼Œ åœ¨æµè§ˆå™¨ä¸­ this æŒ‡å‘ window å¯¹è±¡</span></span><br><span class="line">		<span class="keyword">this</span>[name] = definition();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)(<span class="string">'hello'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> hello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">	<span class="keyword">return</span> hello;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>nodeJs å­¦ä¹ å¯¼èˆª</title>
    <url>/2017/06/nodeJs-%E5%AD%A6%E4%B9%A0%E5%AF%BC%E8%88%AA/</url>
    <content><![CDATA[<h1 id="å»–é›ªå³°nodeæ•™ç¨‹"><a href="#å»–é›ªå³°nodeæ•™ç¨‹" class="headerlink" title="å»–é›ªå³°nodeæ•™ç¨‹"></a>å»–é›ªå³°nodeæ•™ç¨‹</h1><h2 id="å†…ç½®æ¨¡å—"><a href="#å†…ç½®æ¨¡å—" class="headerlink" title="å†…ç½®æ¨¡å—"></a>å†…ç½®æ¨¡å—</h2><h3 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯»å–æ–‡ä»¶</span></span><br><span class="line">fs.readFile(<span class="string">'demo1.html'</span>, <span class="string">'utf-8'</span>, (err, data)=&gt; &#123;</span><br><span class="line">	<span class="comment">// console.log(err? err: data)</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥è¯»å–æ–‡ä»¶</span></span><br><span class="line">fs.readFile(<span class="string">'about-us.png'</span>, (err, data)=&gt; &#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(err)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// console.log(data)</span></span><br><span class="line">		<span class="comment">// console.log(data.length + ' bytes')</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">let</span> text = data.toString(<span class="string">'utf-8'</span>)</span><br><span class="line">		<span class="comment">// console.log(text)</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">let</span> buf = <span class="keyword">new</span> Buffer(text, <span class="string">'utf-8'</span>)</span><br><span class="line">		<span class="comment">// console.log(buf)</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥è¯»å–æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> data = fs.readFileSync(<span class="string">'demo2.html'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">	<span class="built_in">console</span>.log(data)</span><br><span class="line">&#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> writeData = <span class="string">'Hello Jsonz'</span></span><br><span class="line">fs.writeFile(<span class="string">'output.txt'</span>, writeData, err=&gt; &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(err || <span class="string">'ok.'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">fs.stat(<span class="string">'output.txt'</span>, (err, stat)=&gt; &#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(err)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'isFile: '</span> + stat.isFile())</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'isDirectory: '</span> + stat.isDirectory())</span><br><span class="line">		<span class="keyword">if</span> (stat.isFile()) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'size: '</span> + stat.size)</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'birth time: '</span> + stat.birthtime)</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'modified time: '</span> + stat.mtime)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="stream"><a href="#stream" class="headerlink" title="stream"></a>stream</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> rs = fs.createReadStream(<span class="string">'output.txt'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ç»“æŸ</span></span><br><span class="line">	rs.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'END'</span>)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é”™è¯¯æ•è·</span></span><br><span class="line">	rs.on(<span class="string">'error'</span>, err=&gt; &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'ERROR: '</span> + err)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è¯»å–</span></span><br><span class="line">	rs.on(<span class="string">'data'</span>, chunk=&gt; &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'DATA: '</span>, chunk)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å†™å…¥æ–‡æœ¬æ•°æ®</span></span><br><span class="line">	<span class="keyword">const</span> ws1 = fs.createWriteStream(<span class="string">'output1.txt'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">	ws1.write(<span class="string">'ä½¿ç”¨Streamå†™å…¥æ–‡æœ¬æ•°æ®...\n'</span>)</span><br><span class="line">	ws1.write(<span class="string">'END.'</span>)</span><br><span class="line">	ws1.end()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å†™å…¥äºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line">	<span class="keyword">const</span> rs2 = fs.createWriteStream(<span class="string">'output2.txt'</span>)</span><br><span class="line">	rs2.write(<span class="keyword">new</span> Buffer(<span class="string">'ä½¿ç”¨Streamå†™å…¥æ–‡æœ¬æ•°æ®... \n'</span>, <span class="string">'utf-8'</span>))</span><br><span class="line">	rs2.write(<span class="keyword">new</span> Buffer(<span class="string">'END.'</span>, <span class="string">'utf-8'</span>))</span><br><span class="line">	rs2.end()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// pipe æµ</span></span><br><span class="line">	<span class="keyword">const</span> ws2 = fs.createWriteStream(<span class="string">'copied.txt'</span>)</span><br><span class="line">	rs.pipe(ws2, &#123; <span class="attr">end</span>: <span class="literal">false</span> &#125;) <span class="comment">// rs Readableæµå’Œ ws2 Writableæµç”¨ pipeä¸²èµ·æ¥ã€‚ é»˜è®¤Readableæµæ•°æ®è¯»å–å®Œæ¯•åå…³é—­ Writeableæµã€‚å¯ä»¥ä¼ å‚ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432011939547478fd5482deb47b08716557cc99764e0000" target="_blank" rel="noopener">ç®€å•çš„åè®®å…¥é—¨ä»‹ç»</a></p>
<figure class="highlight javascript"><figcaption><span>ç®€å•çš„httpæœåŠ¡å™¨</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">request, response</span>)=&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(request.method + <span class="string">': '</span> + request.url)</span><br><span class="line">	response.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html'</span>&#125;)</span><br><span class="line">	response.end(<span class="string">'&lt;h1&gt; Hello World! &lt;/h1&gt;'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'server is running at http://127.0.0.1:8080'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>æ–‡ä»¶æœåŠ¡å™¨</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = path.resolve(process.argv[<span class="number">2</span>] || <span class="string">'.'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Static root dir: '</span> + root)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">request, response</span>)=&gt;</span> &#123;</span><br><span class="line">	<span class="comment">// è·å–URL çš„ path, ç±»ä¼¼ /css/bootstrap.css</span></span><br><span class="line">	<span class="keyword">const</span> pathname = url.parse(request.url).pathname</span><br><span class="line">	<span class="comment">// è·å–å¯¹åº”çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œ è•¾è¥¿ /srv/www/css/bootstrap.css</span></span><br><span class="line">	<span class="keyword">const</span> filepath = path.join(root, pathname)</span><br><span class="line">	<span class="comment">// è·å–æ–‡ä»¶çŠ¶æ€</span></span><br><span class="line">	fs.stat(filepath, (err, stats)=&gt; &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!err &amp;&amp; stats.isFile) &#123;</span><br><span class="line">			<span class="comment">// æ²¡æœ‰å‡ºé”™ä¸”æ–‡ä»¶å­˜åœ¨</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'200 '</span> + request.url)</span><br><span class="line">			<span class="comment">// å‘é€200å“åº”</span></span><br><span class="line">			response.writeHead(<span class="number">200</span>)</span><br><span class="line">			<span class="comment">// å°†æ–‡ä»¶æµå¯¼å‘response</span></span><br><span class="line">			fs.createReadStream(filepath).pipe(response)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// å‡ºé”™äº†æˆ–è€…æ–‡ä»¶ä¸å­˜åœ¨</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'404 '</span> + request.url)</span><br><span class="line">			<span class="comment">// å‘é€404 å“åº”</span></span><br><span class="line">			response.writeHead(<span class="number">404</span>)</span><br><span class="line">			response.end(<span class="string">'404 Not Found'</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'server is running at http://127.0.0.1:8080'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="crypto-é€šç”¨çš„åŠ å¯†ç®—æ³•å’Œå“ˆå¸Œç®—æ³•"><a href="#crypto-é€šç”¨çš„åŠ å¯†ç®—æ³•å’Œå“ˆå¸Œç®—æ³•" class="headerlink" title="crypto é€šç”¨çš„åŠ å¯†ç®—æ³•å’Œå“ˆå¸Œç®—æ³•"></a>crypto é€šç”¨çš„åŠ å¯†ç®—æ³•å’Œå“ˆå¸Œç®—æ³•</h3><figure class="highlight javascript"><figcaption><span>cryptoå®ç°åŠ å¯†è§£å¯†</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šç”¨çš„åŠ å¯†å’Œå“ˆå¸Œç®—æ³•</span></span><br><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">'crypto'</span>)</span><br><span class="line"><span class="keyword">const</span> hash = crypto.createHash(<span class="string">'md5'</span>)</span><br><span class="line"><span class="comment">// å¯ä»¥ç›´æ¥æŠŠ md5v æ”¹ä¸º sha1 æˆ–æ›´å®‰å…¨çš„ sha256 sha512</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ä»»æ„å¤šæ¬¡è°ƒç”¨update é»˜è®¤å­—ç¬¦ä¸²ç¼–ç ä¸º UTF-8</span></span><br><span class="line">hash.update(<span class="string">'hello world'</span>)</span><br><span class="line">hash.update(<span class="string">'hello nodejs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(hash.digest(<span class="string">'hex'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// AES å¯¹ç§°åŠ å¯†ç®—æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aesEncrypt</span>(<span class="params">data, key</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> cipher = crypto.createCipher(<span class="string">'aes192'</span>, key)</span><br><span class="line">	<span class="keyword">let</span> crypted = cipher.update(data, <span class="string">'utf8'</span>, <span class="string">'hex'</span>)</span><br><span class="line">	crypted += cipher.final(<span class="string">'hex'</span>)</span><br><span class="line">	<span class="keyword">return</span> crypted</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aesDecrypt</span>(<span class="params">encrypted, key</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> decipher = crypto.createDecipher(<span class="string">'aes192'</span>, key)</span><br><span class="line">	<span class="keyword">let</span> decrypted = decipher.update(encrypted, <span class="string">'hex'</span>, <span class="string">'utf8'</span>)</span><br><span class="line">	decrypted += decipher.final(<span class="string">'utf8'</span>)</span><br><span class="line">	<span class="keyword">return</span> decrypted</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data = <span class="string">'Hello, this is a secret message!'</span></span><br><span class="line"><span class="keyword">const</span> key = <span class="string">'Jsonz-password'</span></span><br><span class="line"><span class="keyword">const</span> encrypted = aesEncrypt(data, key)</span><br><span class="line"><span class="keyword">const</span> decrypted = aesDecrypt(encrypted, key)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Plain text: '</span> + data)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Encrypted text: '</span> + encrypted)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Decrypted text: '</span> + decrypted)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>NodeJs</tag>
      </tags>
  </entry>
  <entry>
    <title>react-native å­¦ä¹ æ€»ç»“</title>
    <url>/2017/06/react-native-%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>è¿›å…¬å¸çš„æ—¶å€™ åŸéƒ¨é—¨è€å¤§è®©æˆ‘å»çœ‹rn demo åé¢é¡¹ç›®ä¼šç”¨åˆ°ï¼Œäºæ˜¯æœ‰äº†è¿™ä¸ªé¡¹ç›®çš„å¼€å§‹ã€‚</p>
<p>ä½†æ˜¯ä¸€ä¸ªæ˜ŸæœŸåï¼Œæˆ‘è¢«è°ƒå»å¦ä¸€ä¸ªéƒ¨é—¨ï¼Œç°éƒ¨é—¨è¿›æ¥ä¹‹åå°±ä¸€ç›´å¿™ç€ä¸šåŠ¡ä»£ç  äº§å“è¿­ä»£ã€‚ ä»github æäº¤åº”è¯¥ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œ ç‰¹åˆ«ä» 6.8åˆ°6.24 ä¸€æ¬¡commitéƒ½æ²¡æœ‰ã€‚</p>
<p>æ…•è¯¾ç½‘ç‹—ç‹—è¯´appçš„å¼€å‘æ•™ç¨‹å­¦ä¹ ï¼Œè¿™æ¬¡çš„å­¦ä¹ å¯ä»¥ç®—æ˜¯åŠæˆå“ï¼Œå¤§æ¦‚äº†è§£äº†rn ä¹Ÿå†™äº†ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„demoï¼Œ<br>åé¢å¦‚æœæœ‰ä¸€äº›ç®€å•çš„rné¡¹ç›®æˆ–è€…appå†…åµŒ ä¸Šæ‰‹æˆæœ¬åº”è¯¥ä½äº†å¾ˆå¤šã€‚<br>åŒ…æ‹¬:<br>RN é¡¹ç›®ç¯å¢ƒé…ç½® æŠ˜è…¾äº†å¾ˆä¹… çœŸçš„å¾ˆå¤šå‘<br>ç©¿æ’ç€å­¦äº†ä¸€ç‚¹ç‚¹O-C è¯­æ³•<br>xCode èµ„æºåº“å¼•ç”¨ä»¥åŠå¸¸è§é—®é¢˜æˆ–å¸¸è§åŠŸèƒ½ä½¿ç”¨<br>RN é¡¹ç›®å¯åŠ¨ link watchman ç­‰ç­‰<br>RN å…·ä½“ä»£ç  api ç»„ä»¶ å­¦ä¹ <br>Koa ä¸ mongoDB çš„ç®€å•ä½¿ç”¨<br>ä¸ƒç‰›äº‘ä½¿ç”¨<br>èºä¸å¸½å‘é€éªŒè¯ç ä½¿ç”¨<br>å„ç§ç±»åº“ å›¾ç‰‡æ’ä»¶ å€’è®¡æ—¶æ’ä»¶ å½•éŸ³ å½•åƒ ç­‰<br>æ¥ä¸‹æ¥å¦‚æœä¸æ˜¯é¡¹ç›®æœ‰ä½¿ç”¨åˆ°çš„è¯ åº”è¯¥ä¸ä¼šå†æ·±å…¥æ¥è§¦rnã€‚</p>
<p>æ¯•ç«Ÿç°åœ¨çš„ç›®æ ‡æ˜¯è¿›å†›P3 &amp;&amp; ä¼˜ç§€å‘˜å·¥ã€‚</p>
<p>appéƒ¨åˆ†æˆªå›¾:</p>
<p><img src="./list.png" alt="åˆ—è¡¨é¡µ"><br><img src="./detail.png" alt="è§†é¢‘è¯¦æƒ…"><br><img src="./comment.png" alt="è¯„è®ºéƒ¨åˆ†"><br><img src="./account.png" alt="è´¦æˆ·é¡µ"><br><img src="./edit.png" alt="ç¼–è¾‘é¡µ"></p>
<p><a href="https://github.com/jsonz1993/wheel/tree/master/react-native-dogs" target="_blank" rel="noopener">æœ€åé™„ä¸Šæºç  RN å¾ˆçœ‹ ç¯å¢ƒå’Œç‰ˆæœ¬ï¼Œæ‰€ä»¥è·‘å¾—èµ·æ¥æ‰æ˜¯ä¸æ­£å¸¸çš„</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>learn</tag>
        <tag>imooc</tag>
        <tag>react-native</tag>
      </tags>
  </entry>
  <entry>
    <title>[ç½®é¡¶]æ£é¼“ç›®å½•</title>
    <url>/2017/06/%E6%8D%A3%E9%BC%93%E7%9B%AE%E5%BD%95/</url>
    <content><![CDATA[<p>è®°å½•å¹³æ—¶å·¥ä½œå­¦ä¹ çš„ç›®å½•æ¡ç›®ï¼Œ ç±»ä¼¼ <a href="https://github.com/jsonz1993/learn" target="_blank" rel="noopener">Jsonz-learn</a>ã€ <a href="https://github.com/jsonz1993/wheel" target="_blank" rel="noopener">Jsonz-wheel</a> çš„ç›®å½•ã€‚<br>éƒ¨åˆ†æ¯”è¾ƒå¤§çš„è½®å­å¯èƒ½ä¼šç‹¬ç«‹æˆä¸€ä¸ªgité¡¹ç›®</p>
<h1 id="Doing"><a href="#Doing" class="headerlink" title="Doing"></a>Doing</h1><h1 id="NEXT"><a href="#NEXT" class="headerlink" title="NEXT"></a>NEXT</h1><h1 id="ç›®å½•-æ’åæŒ‰æ—¶é—´é¡ºåº"><a href="#ç›®å½•-æ’åæŒ‰æ—¶é—´é¡ºåº" class="headerlink" title="ç›®å½• æ’åæŒ‰æ—¶é—´é¡ºåº"></a>ç›®å½• æ’åæŒ‰æ—¶é—´é¡ºåº</h1><h2 id="React-Hooks-é£Ÿç”¨æŒ‡å—"><a href="#React-Hooks-é£Ÿç”¨æŒ‡å—" class="headerlink" title="React Hooks é£Ÿç”¨æŒ‡å—"></a><a href="https://github.com/jsonz1993/react-hooks" target="_blank" rel="noopener">React Hooks é£Ÿç”¨æŒ‡å—</a></h2><h2 id="é¡¹ç›®æ¥å…¥quicklinkï¼Œå°è¯•çœ‹æ•ˆæœå¦‚ä½•"><a href="#é¡¹ç›®æ¥å…¥quicklinkï¼Œå°è¯•çœ‹æ•ˆæœå¦‚ä½•" class="headerlink" title="é¡¹ç›®æ¥å…¥quicklinkï¼Œå°è¯•çœ‹æ•ˆæœå¦‚ä½•"></a><a href="https://jsonz1993.github.io/2019/02/quicklink/">é¡¹ç›®æ¥å…¥quicklinkï¼Œå°è¯•çœ‹æ•ˆæœå¦‚ä½•</a></h2><h2 id="åˆ©ç”¨ASTè§£å†³webpack-aliasæ³›æ»¥çš„é—®é¢˜"><a href="#åˆ©ç”¨ASTè§£å†³webpack-aliasæ³›æ»¥çš„é—®é¢˜" class="headerlink" title="åˆ©ç”¨ASTè§£å†³webpack aliasæ³›æ»¥çš„é—®é¢˜"></a><a href="https://jsonz1993.github.io/2019/01/AST-practice/">åˆ©ç”¨ASTè§£å†³webpack aliasæ³›æ»¥çš„é—®é¢˜</a></h2><h2 id="reactæºç å­¦ä¹ -ContextAPI"><a href="#reactæºç å­¦ä¹ -ContextAPI" class="headerlink" title="reactæºç å­¦ä¹  ContextAPI"></a><a href="https://github.com/jsonz1993/react-source-learn/issues/5" target="_blank" rel="noopener">reactæºç å­¦ä¹  ContextAPI</a></h2><h2 id="æ­£åˆ™å…¨å±€æ ‡å¿—æ³¨æ„äº‹é¡¹"><a href="#æ­£åˆ™å…¨å±€æ ‡å¿—æ³¨æ„äº‹é¡¹" class="headerlink" title="æ­£åˆ™å…¨å±€æ ‡å¿—æ³¨æ„äº‹é¡¹"></a><a href="https://jsonz1993.github.io/2018/11/regexp-global/">æ­£åˆ™å…¨å±€æ ‡å¿—æ³¨æ„äº‹é¡¹</a></h2><h2 id="reactæºç å­¦ä¹ ç³»åˆ—"><a href="#reactæºç å­¦ä¹ ç³»åˆ—" class="headerlink" title="reactæºç å­¦ä¹ ç³»åˆ—"></a><a href="https://github.com/jsonz1993/react-source-learn" target="_blank" rel="noopener">reactæºç å­¦ä¹ ç³»åˆ—</a></h2><h2 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a><a href="https://jsonz1993.github.io/2018/08/fp/">å‡½æ•°å¼ç¼–ç¨‹</a></h2><h2 id="ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ-â€”â€”-å¯¹è±¡å¼•ç”¨é—®é¢˜"><a href="#ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ-â€”â€”-å¯¹è±¡å¼•ç”¨é—®é¢˜" class="headerlink" title="ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ â€”â€” å¯¹è±¡å¼•ç”¨é—®é¢˜"></a><a href="https://jsonz1993.github.io/2018/07/circular-reference/">ä¸€é“èµ‹å€¼é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ â€”â€” å¯¹è±¡å¼•ç”¨é—®é¢˜</a></h2><h2 id="è§†é¢‘è½¬å­—ç¬¦ç”»"><a href="#è§†é¢‘è½¬å­—ç¬¦ç”»" class="headerlink" title="è§†é¢‘è½¬å­—ç¬¦ç”»"></a><a href="https://jsonz1993.github.io/2018/07/video-to-chat/">è§†é¢‘è½¬å­—ç¬¦ç”»</a></h2><h2 id="window-print-æµè§ˆå™¨æ‰“å°æ‰«ç›²"><a href="#window-print-æµè§ˆå™¨æ‰“å°æ‰«ç›²" class="headerlink" title="window.print æµè§ˆå™¨æ‰“å°æ‰«ç›²"></a><a href="https://jsonz1993.github.io/2018/06/window-print%E2%80%94%E2%80%94%E5%85%B3%E4%BA%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%8D%B0/">window.print æµè§ˆå™¨æ‰“å°æ‰«ç›²</a></h2><h2 id="ã€Šhttpå°ä¹¦ã€‹httpçŸ¥è¯†æ‰«ç›²"><a href="#ã€Šhttpå°ä¹¦ã€‹httpçŸ¥è¯†æ‰«ç›²" class="headerlink" title="ã€Šhttpå°ä¹¦ã€‹httpçŸ¥è¯†æ‰«ç›²"></a><a href="https://jsonz1993.github.io/2018/05/http-mini-book/">ã€Šhttpå°ä¹¦ã€‹httpçŸ¥è¯†æ‰«ç›²</a></h2><h2 id="ã€Šcssä¸–ç•Œã€‹å¸¸ç”¨æŠ€å·§-â€”â€”-è¯»ä¹¦ç¬”è®°"><a href="#ã€Šcssä¸–ç•Œã€‹å¸¸ç”¨æŠ€å·§-â€”â€”-è¯»ä¹¦ç¬”è®°" class="headerlink" title="ã€Šcssä¸–ç•Œã€‹å¸¸ç”¨æŠ€å·§ â€”â€” è¯»ä¹¦ç¬”è®°"></a><a href="https://jsonz1993.github.io/2018/05/css-world/">ã€Šcssä¸–ç•Œã€‹å¸¸ç”¨æŠ€å·§ â€”â€” è¯»ä¹¦ç¬”è®°</a></h2><h2 id="æµè§ˆå™¨æ¢å¤æ»šåŠ¨è¡Œä¸º-â€”â€”-history-scrollRestoration"><a href="#æµè§ˆå™¨æ¢å¤æ»šåŠ¨è¡Œä¸º-â€”â€”-history-scrollRestoration" class="headerlink" title="æµè§ˆå™¨æ¢å¤æ»šåŠ¨è¡Œä¸º â€”â€” history.scrollRestoration"></a><a href="https://jsonz1993.github.io/2018/05/history-scroll-restoration/">æµè§ˆå™¨æ¢å¤æ»šåŠ¨è¡Œä¸º â€”â€” history.scrollRestoration</a></h2><h2 id="create-react-app-æºç è§£æ-ä¸€"><a href="#create-react-app-æºç è§£æ-ä¸€" class="headerlink" title="create-react-app æºç è§£æ(ä¸€)"></a><a href="https://jsonz1993.github.io/2018/05/create-react-app-o/">create-react-app æºç è§£æ(ä¸€)</a></h2><h2 id="create-react-app-æºç è§£æ-äºŒ"><a href="#create-react-app-æºç è§£æ-äºŒ" class="headerlink" title="create-react-app æºç è§£æ(äºŒ)"></a><a href="https://jsonz1993.github.io/2018/05/create-react-app-t/">create-react-app æºç è§£æ(äºŒ)</a></h2><h2 id="gitæŸ¥æ¼è¡¥ç¼º-éå¸¸å¤§å¥½å…¨çš„æ–‡ç« -æ…¢æ…¢é€‚ç”¨ä¸€ä¸‹æ§åˆ¶å°æäº¤ï¼Œç†Ÿæ‚‰ä¹‹åå†åˆ‡å®¢æˆ·ç«¯"><a href="#gitæŸ¥æ¼è¡¥ç¼º-éå¸¸å¤§å¥½å…¨çš„æ–‡ç« -æ…¢æ…¢é€‚ç”¨ä¸€ä¸‹æ§åˆ¶å°æäº¤ï¼Œç†Ÿæ‚‰ä¹‹åå†åˆ‡å®¢æˆ·ç«¯" class="headerlink" title="gitæŸ¥æ¼è¡¥ç¼º éå¸¸å¤§å¥½å…¨çš„æ–‡ç«  æ…¢æ…¢é€‚ç”¨ä¸€ä¸‹æ§åˆ¶å°æäº¤ï¼Œç†Ÿæ‚‰ä¹‹åå†åˆ‡å®¢æˆ·ç«¯"></a><a href="https://mubu.com/doc/21wNPB_ZJp" target="_blank" rel="noopener">gitæŸ¥æ¼è¡¥ç¼º éå¸¸å¤§å¥½å…¨çš„æ–‡ç« </a> æ…¢æ…¢é€‚ç”¨ä¸€ä¸‹æ§åˆ¶å°æäº¤ï¼Œç†Ÿæ‚‰ä¹‹åå†åˆ‡å®¢æˆ·ç«¯</h2><h2 id="è‡ªåŠ¨åŒ–åŠŸèƒ½æµ‹è¯•æµç¨‹æ–¹æ¡ˆ"><a href="#è‡ªåŠ¨åŒ–åŠŸèƒ½æµ‹è¯•æµç¨‹æ–¹æ¡ˆ" class="headerlink" title="è‡ªåŠ¨åŒ–åŠŸèƒ½æµ‹è¯•æµç¨‹æ–¹æ¡ˆ"></a><a href="http://l.easyrentcars.com:4000/2018/04/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E6%96%B9%E6%A1%88/" target="_blank" rel="noopener">è‡ªåŠ¨åŒ–åŠŸèƒ½æµ‹è¯•æµç¨‹æ–¹æ¡ˆ</a></h2><h2 id="é¡¹ç›®ä»£ç è§„èŒƒå·¥ä½œæµâ€”â€”editorã€prettierã€eslintã€git-check"><a href="#é¡¹ç›®ä»£ç è§„èŒƒå·¥ä½œæµâ€”â€”editorã€prettierã€eslintã€git-check" class="headerlink" title="é¡¹ç›®ä»£ç è§„èŒƒå·¥ä½œæµâ€”â€”editorã€prettierã€eslintã€git-check"></a><a href="http://l.easyrentcars.com:4000/2018/03/%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%B7%A5%E4%BD%9C%E6%B5%81%E2%80%94%E2%80%94editor%E3%80%81prettier%E3%80%81eslint%E3%80%81git-check/" target="_blank" rel="noopener">é¡¹ç›®ä»£ç è§„èŒƒå·¥ä½œæµâ€”â€”editorã€prettierã€eslintã€git-check</a></h2><h2 id="è‡ªåŠ¨åŒ–æµ‹è¯•-puppeteer-ä¸qqç©ºé—´"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•-puppeteer-ä¸qqç©ºé—´" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯• puppeteer ä¸qqç©ºé—´"></a><a href="http://l.easyrentcars.com:4000/2018/03/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95puppeteer-%E4%B8%8Eqq%E7%A9%BA%E9%97%B4/" target="_blank" rel="noopener">è‡ªåŠ¨åŒ–æµ‹è¯• puppeteer ä¸qqç©ºé—´</a></h2><ul>
<li><a href="https://github.com/jsonz1993/wheel/tree/master/qqZone" target="_blank" rel="noopener">æºç </a></li>
</ul>
<h2 id="reactå…¨å®¶æ¡¶-dva-å®è·µæ•´ç†æ€»ç»“"><a href="#reactå…¨å®¶æ¡¶-dva-å®è·µæ•´ç†æ€»ç»“" class="headerlink" title="reactå…¨å®¶æ¡¶ + dva å®è·µæ•´ç†æ€»ç»“"></a><a href="http://l.easyrentcars.com:4000/2018/02/react%E5%85%A8%E5%AE%B6%E6%A1%B6-dva-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%95%B4%E7%90%86%E6%80%BB%E7%BB%93/" target="_blank" rel="noopener">reactå…¨å®¶æ¡¶ + dva å®è·µæ•´ç†æ€»ç»“</a></h2><h2 id="äº†è§£-babel-å†™ä¸ªbabel-æ’ä»¶-â€”â€”-äº†è§£ç¼–è¯‘å™¨åŸç†"><a href="#äº†è§£-babel-å†™ä¸ªbabel-æ’ä»¶-â€”â€”-äº†è§£ç¼–è¯‘å™¨åŸç†" class="headerlink" title="äº†è§£ babel å†™ä¸ªbabel æ’ä»¶ â€”â€” äº†è§£ç¼–è¯‘å™¨åŸç†"></a>äº†è§£ babel å†™ä¸ªbabel æ’ä»¶ â€”â€” äº†è§£ç¼–è¯‘å™¨åŸç†</h2><ul>
<li>å®ç°äº†ä¸€ä¸ª <a href="https://jsonz1993.github.io/2018/01/%E4%B8%80%E6%AD%A5%E6%AD%A5%E5%AE%9E%E7%8E%B0%E6%9E%81%E7%AE%80%E7%BC%96%E8%AF%91%E5%99%A8-%E2%80%94%E2%80%94-%E4%BA%86%E8%A7%A3%E7%BC%96%E8%AF%91%E5%99%A8%E5%8E%9F%E7%90%86/">æç®€çš„ç¼–è¯‘å™¨</a></li>
</ul>
<h2 id="react-dva-antd-antd-pro-roadhog-å…¨å®¶æ¡¶-é¡¹ç›®ç”¨ing"><a href="#react-dva-antd-antd-pro-roadhog-å…¨å®¶æ¡¶-é¡¹ç›®ç”¨ing" class="headerlink" title="react/dva/antd/antd-pro/roadhog å…¨å®¶æ¡¶ é¡¹ç›®ç”¨ing"></a>react/dva/antd/antd-pro/roadhog å…¨å®¶æ¡¶ é¡¹ç›®ç”¨ing</h2><h2 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a><a href="https://github.com/jsonz1993/wheel/tree/master/postMessage" target="_blank" rel="noopener">postMessage</a></h2><ul>
<li>ç®€å•çš„å¯¹ç³»ç»Ÿè‡ªå¸¦çš„postMessageè¿›è¡Œå°è£…</li>
<li>æ”¯æŒäº‹ä»¶ç±»å‹ç›‘å¬</li>
<li>æ›´å¤šå®ç°å‚è€ƒ arale/messenger/index.js</li>
</ul>
<h2 id="react-native-dogs"><a href="#react-native-dogs" class="headerlink" title="react-native-dogs"></a><a href="https://github.com/jsonz1993/wheel/tree/master/react-native-dogs" target="_blank" rel="noopener">react-native-dogs</a></h2><ul>
<li>å­¦ä¹ react-native æ¯”è¾ƒå…¨é¢çš„ä¸€ä¸ªè·¯å¾„</li>
<li>è™½ç„¶ä¸å®Œæ•´ï¼Œä½†åŒ…å«äº†rn å¸¸ç”¨çš„api åº“ ç­‰</li>
<li>ä¹Ÿæ¶‰åŠåˆ° node koa ä¸ƒç‰›äº‘ç­‰</li>
</ul>
<h2 id="react-native-countdown-ReactNativeçš„å€’è®¡æ—¶ç»„ä»¶"><a href="#react-native-countdown-ReactNativeçš„å€’è®¡æ—¶ç»„ä»¶" class="headerlink" title="react-native-countdown ReactNativeçš„å€’è®¡æ—¶ç»„ä»¶"></a><a href="https://github.com/jsonz1993/wheel/tree/master/react-native-countdown" target="_blank" rel="noopener">react-native-countdown ReactNativeçš„å€’è®¡æ—¶ç»„ä»¶</a></h2><ul>
<li>é€ è¿™ä¸ªè½®å­çš„åŸå› æ˜¯å­¦ä¹ rnçš„æ—¶å€™ï¼Œè§†é¢‘æ¨èé¢ä¸€ä¸ªç»„ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªç»„ä»¶å·²ç»åœæ­¢ç»´æŠ¤ æ‰€ä»¥åªèƒ½è‡ªå·±é€ ä¸€ä¸ª</li>
<li>æ”¯æŒæ—¥æœŸä¸ç§’æ•°çš„å€’è®¡æ—¶</li>
<li>ç®€å•ç²—æš´</li>
</ul>
<h2 id="fixedTop-å¸é¡¶æ•ˆæœ"><a href="#fixedTop-å¸é¡¶æ•ˆæœ" class="headerlink" title="fixedTop å¸é¡¶æ•ˆæœ"></a><a href="https://github.com/jsonz1993/wheel/tree/master/fixedTop" target="_blank" rel="noopener">fixedTop å¸é¡¶æ•ˆæœ</a></h2><ul>
<li>ä¸€ä¸ªå¾ˆå°çš„å¸¸ç”¨æ•ˆæœ</li>
<li>ä¸»è¦ç»†èŠ‚ åœ¨äºæ”¹å˜domä¸º fixedå¸ƒå±€ååœ¨è¯¥domåé¢ç”Ÿæˆä¸€ä¸ªå ä½çš„ï¼Œé˜²æ­¢å…„å¼ŸèŠ‚ç‚¹çš„æŠ–åŠ¨</li>
</ul>
<h2 id="copyText-å¤åˆ¶é»è´´æ¿æ’ä»¶"><a href="#copyText-å¤åˆ¶é»è´´æ¿æ’ä»¶" class="headerlink" title="copyText å¤åˆ¶é»è´´æ¿æ’ä»¶"></a><a href="https://github.com/jsonz1993/wheel/tree/master/copyText" target="_blank" rel="noopener">copyText å¤åˆ¶é»è´´æ¿æ’ä»¶</a></h2><ul>
<li>æ”¯æŒh5ï¼ŒPC</li>
<li><code>success</code>, <code>error</code>å›è°ƒ</li>
<li>åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯¥äº‹ä»¶æ¥å£</li>
</ul>
<h2 id="heatmap-çƒ­åŠ›å›¾"><a href="#heatmap-çƒ­åŠ›å›¾" class="headerlink" title="heatmap çƒ­åŠ›å›¾"></a><a href="https://github.com/jsonz1993/wheel/tree/master/heatmap" target="_blank" rel="noopener">heatmap çƒ­åŠ›å›¾</a></h2><ul>
<li>è€å¤§æçš„å°éœ€æ±‚ ä¸€ä¸¤ä¸ªå°æ—¶å®Œæˆ</li>
<li>ç‚¹å‡»é¡µé¢ä¼šé—´éš”(10s)å­˜åˆ°<code>sessionLocation</code>ã€‚ åˆ·æ–°åä¼šæŠŠå­˜åœ¨<code>sessionLocation</code> ç»˜åˆ¶æˆçƒ­åŠ›å›¾å±•ç¤ºåœ¨é¡µé¢ä¸Š</li>
</ul>
<h2 id="validator-å°å‹è¡¨å•éªŒè¯æ’ä»¶"><a href="#validator-å°å‹è¡¨å•éªŒè¯æ’ä»¶" class="headerlink" title="validator å°å‹è¡¨å•éªŒè¯æ’ä»¶"></a><a href="https://github.com/jsonz1993/wheel/tree/master/validator" target="_blank" rel="noopener">validator å°å‹è¡¨å•éªŒè¯æ’ä»¶</a></h2><ul>
<li>ç§»åŠ¨ç«¯ç®€å•çš„éªŒè¯æ’ä»¶</li>
<li>æ”¯æŒè‡ªå·±é…ç½®éªŒè¯é¡¹ æ”¯æŒå¤šé‡éªŒè¯</li>
</ul>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/cookie" target="_blank" rel="noopener">cookie</a></h2><ul>
<li>å°è£…äº†ä¸€äº›cookieå¸¸ç”¨çš„api</li>
<li><code>get</code> <code>set</code> <code>remove</code> <code>clear</code> <code>getAll</code></li>
</ul>
<h2 id="ObjectiveC"><a href="#ObjectiveC" class="headerlink" title="ObjectiveC"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/Objective-c" target="_blank" rel="noopener">ObjectiveC</a></h2><ul>
<li>ObjectiveC åŸºç¡€</li>
<li>ä¸ºäº†å­¦ ReactNative åšä¸€ç‚¹iosåŸºç¡€é“ºå«</li>
</ul>
<h2 id="setTimeout-amp-amp-setInterval"><a href="#setTimeout-amp-amp-setInterval" class="headerlink" title="setTimeout &amp;&amp; setInterval"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/setTimeout-setInterval" target="_blank" rel="noopener">setTimeout &amp;&amp; setInterval</a></h2><h2 id="Event"><a href="#Event" class="headerlink" title="Event"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/Event" target="_blank" rel="noopener">Event</a></h2><ul>
<li>æœ€ç®€å•çš„äº‹ä»¶ç³»ç»Ÿ</li>
</ul>
<h2 id="handlebars"><a href="#handlebars" class="headerlink" title="handlebars"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/handlebars" target="_blank" rel="noopener">handlebars</a></h2><ul>
<li>ç®€å•çš„æ¨¡æ¿å¼•æ“<a href="http://handlebarsjs.com" target="_blank" rel="noopener">http://handlebarsjs.com</a></li>
</ul>
<h2 id="quickskin"><a href="#quickskin" class="headerlink" title="quickskin"></a>quickskin</h2><ul>
<li>ç®€å•çš„PHPæ¨¡æ¿ï¼Œ æ–‡æ¡£å¾ˆä¸å…¨ {value}</li>
<li><!-- IF login_id --><!-- ENDIF login_id -->  <code>if</code></li>
<li><!-- BEGIN question_tags_list --><!-- END question_tags_list --> <code>for</code></li>
</ul>
<h2 id="sass"><a href="#sass" class="headerlink" title="sass"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/sass" target="_blank" rel="noopener">sass</a></h2><ul>
<li>ç®€å•çš„å…¥é—¨è¯­æ³•ï¼Œå› ä¸ºç”¨è¿‡less æ‰€ä»¥åŸºæœ¬æ— éšœç¢</li>
</ul>
<h2 id="chrome-extension"><a href="#chrome-extension" class="headerlink" title="chrome-extension"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/chrome-extension" target="_blank" rel="noopener">chrome-extension</a></h2><ul>
<li>å­¦ä¹ chromeæ’ä»¶å¼€å‘å…¥é—¨</li>
<li>æš‚å­˜finishï¼Œåé¢ä¼šé‡æ–°å­¦ä¹  æ¯”è¾ƒæ„Ÿå…´è¶£</li>
<li>ç›®å‰æƒ³æ³•æ˜¯åšä¸€ä¸ªå¯ä»¥åœ¨é¡µé¢æ¯”è¾ƒæ–¹ä¾¿åŠ è½½jsçš„æ’ä»¶</li>
<li>TODO</li>
</ul>
<h2 id="animate-text"><a href="#animate-text" class="headerlink" title="animate-text"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/animate-text" target="_blank" rel="noopener">animate-text</a></h2><ul>
<li>ä¸€ä¸ªç®€å•çš„æ–‡å­— &amp;&amp; æ•°å­— åŠ¨ç”»å°æ’ä»¶ã€‚</li>
<li><a href="https://jsonz1993.github.io/demo/animate-text/index.html">demo</a></li>
<li><a href="https://jsonz1993.github.io/2017/04/animate-text/">æ–‡æ¡£</a></li>
</ul>
<h2 id="backbone"><a href="#backbone" class="headerlink" title="backbone"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/backbone" target="_blank" rel="noopener">backbone</a></h2><ul>
<li>å†å²æ‚ ä¹…çš„MVCæ¡†æ¶</li>
<li><a href="https://github.com/jashkenas/backbone" target="_blank" rel="noopener">https://github.com/jashkenas/backbone</a></li>
</ul>
<h2 id="DesignPattern"><a href="#DesignPattern" class="headerlink" title="DesignPattern"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/DesignPattern" target="_blank" rel="noopener">DesignPattern</a></h2><ul>
<li>åé¢ä¼šç»§ç»­å­¦ä¹ </li>
<li>ã€ŠJavaScriptè®¾è®¡æ¨¡å¼ã€‹å¼ å®¹é“­</li>
<li><a href="https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B013HO6DNS/ref=sr_1_1?ie=UTF8&amp;qid=1490937378&amp;sr=8-1&amp;keywords=javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">äºšé©¬é€Šè´­ä¹°</a></li>
</ul>
<h2 id="ECMAScript-6-Primer"><a href="#ECMAScript-6-Primer" class="headerlink" title="ECMAScript_6_Primer"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/ECMAScript_6_Primer" target="_blank" rel="noopener">ECMAScript_6_Primer</a></h2><ul>
<li>ES6å…¥é—¨</li>
<li><a href="http://es6.ruanyifeng.com/#README" target="_blank" rel="noopener">é˜®ä¸€å³°</a></li>
<li><a href="https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B01A18WWAG/ref=sr_1_1?ie=UTF8&amp;qid=1490937483&amp;sr=8-1&amp;keywords=Es6" target="_blank" rel="noopener">äºšé©¬é€Šè´­ä¹°</a></li>
</ul>
<h2 id="gulp"><a href="#gulp" class="headerlink" title="gulp"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/gulp" target="_blank" rel="noopener">gulp</a></h2><ul>
<li><a href="http://www.gulpjs.com.cn/" target="_blank" rel="noopener">gulpä¸­æ–‡</a></li>
<li><a href="https://github.com/gulpjs/gulp" target="_blank" rel="noopener">https://github.com/gulpjs/gulp</a></li>
</ul>
<h2 id="imooc"><a href="#imooc" class="headerlink" title="imooc"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/imooc" target="_blank" rel="noopener">imooc</a></h2><ul>
<li>æ…•è¯¾ç½‘ä¸Šçš„ç›¸å…³å­¦ä¹ </li>
<li><a href="imooc.com">imooc.com</a></li>
<li>å­¦ä¹ å å¹…è¶Šæ¥è¶Šä½ï¼Œçœ‹è§†é¢‘çš„æ•ˆç‡æ²¡æœ‰çœ‹ä¹¦å’Œåšå®¢æ¥çš„å¿«</li>
</ul>
<h2 id="markdown"><a href="#markdown" class="headerlink" title="markdown"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/markdown" target="_blank" rel="noopener">markdown</a></h2><ul>
<li>markdownè¯­æ³•å­¦ä¹ </li>
<li><a href="https://guides.github.com/features/mastering-markdown/" target="_blank" rel="noopener">github markdown</a></li>
</ul>
<h2 id="require"><a href="#require" class="headerlink" title="require"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/require" target="_blank" rel="noopener">require</a></h2><ul>
<li>JSæ¨¡å—åŒ–åŠ è½½è§„èŒƒ AMDäº§ç‰©</li>
<li><a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="noopener">AMD</a></li>
</ul>
<h2 id="require-backbone"><a href="#require-backbone" class="headerlink" title="require+backbone"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/require%2Bbackbone" target="_blank" rel="noopener">require+backbone</a></h2><ul>
<li>backbone+require ç»ƒä¹ </li>
</ul>
<h2 id="RiotJs"><a href="#RiotJs" class="headerlink" title="RiotJs"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/RiotJs" target="_blank" rel="noopener">RiotJs</a></h2><ul>
<li>å¾®å‹ç±»Reactæ¡†æ¶</li>
<li><a href="http://riotjs.com/" target="_blank" rel="noopener">http://riotjs.com/</a></li>
<li>å…¬å¸åœ¨ç”¨ï¼Œæœ‰å®æˆ˜ç»éªŒ</li>
<li><p>v2å…¼å®¹ie8</p>
</li>
<li><p>edit_config</p>
</li>
<li><p>å¸¸ç”¨çš„ç¼–è¾‘å™¨é…ç½®</p>
</li>
<li><p><strong>Uncle Tom</strong></p>
</li>
<li>æ±¤å§†å¤§å”çš„åšå®¢Jsæ•™ç¨‹</li>
<li>å¼ºçƒˆæ¨è!!!!</li>
<li>æ·±å…¥æµ…å‡º è®²äº†å¾ˆå¤šåŸç†æ€§çš„ä¸œè¥¿</li>
<li>å…¥é—¨ä¸è¿›é˜¶å¿…å¤‡</li>
<li><a href="http://www.cnblogs.com/TomXu/archive/2011/12/15/2288411.html" target="_blank" rel="noopener">http://www.cnblogs.com/TomXu/archive/2011/12/15/2288411.html</a></li>
</ul>
<h2 id="vue"><a href="#vue" class="headerlink" title="vue"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/vue" target="_blank" rel="noopener">vue</a></h2><ul>
<li>vueJså…¥é—¨éƒ¨åˆ†demo</li>
</ul>
<h2 id="vue-webpack"><a href="#vue-webpack" class="headerlink" title="vue+webpack"></a><a href="https://github.com/jsonz1993/learn/tree/master/finish/vue%2Bwebpack" target="_blank" rel="noopener">vue+webpack</a></h2><ul>
<li><p>vue+webpack demo</p>
</li>
<li><p>jsonz_old</p>
</li>
<li><p>åˆšå…¥é—¨çš„æ—¶å€™å†™çš„ä¸€ä¸ªåœ¨çº¿ç®€å† åœæ­¢æ›´æ–°</p>
</li>
<li><p>zhangxinxu</p>
</li>
<li>è…¾è®¯ä¸€ä¸ªå¤§ä½¬ï¼Œä¸»è¦é‡æ„æ–¹é¢ã€‚</li>
<li>cssä¸htmlå¾ˆå¤šç–‘éš¾æ‚ç—‡ åŸºç¡€çŸ¥è¯†ç­‰éƒ½å¯ä»¥åœ¨é‡Œé¢æ‰¾åˆ°</li>
<li><a href="http://www.zhangxinxu.com/" target="_blank" rel="noopener">http://www.zhangxinxu.com/</a></li>
</ul>
<h1 id="Done-log-å†å²æ—¥å¿—ï¼Œå®šæ—¶æŠŠdoingæ›´æ–°ä¸‹æ¥ï¼Œæ‰€ä»¥ä¼šè¶Šæ¥è¶Šé•¿â€¦å› ä¸ºä¸æƒ³æ¯æ¬¡éƒ½å¿˜äº†ä¹‹å‰å®šçš„æ˜¯ä»€ä¹ˆï¼Œåˆæ‡’å¾—å»æ‰¾gitè®°å½•"><a href="#Done-log-å†å²æ—¥å¿—ï¼Œå®šæ—¶æŠŠdoingæ›´æ–°ä¸‹æ¥ï¼Œæ‰€ä»¥ä¼šè¶Šæ¥è¶Šé•¿â€¦å› ä¸ºä¸æƒ³æ¯æ¬¡éƒ½å¿˜äº†ä¹‹å‰å®šçš„æ˜¯ä»€ä¹ˆï¼Œåˆæ‡’å¾—å»æ‰¾gitè®°å½•" class="headerlink" title="Done log: å†å²æ—¥å¿—ï¼Œå®šæ—¶æŠŠdoingæ›´æ–°ä¸‹æ¥ï¼Œæ‰€ä»¥ä¼šè¶Šæ¥è¶Šé•¿â€¦å› ä¸ºä¸æƒ³æ¯æ¬¡éƒ½å¿˜äº†ä¹‹å‰å®šçš„æ˜¯ä»€ä¹ˆï¼Œåˆæ‡’å¾—å»æ‰¾gitè®°å½•"></a>Done log: å†å²æ—¥å¿—ï¼Œå®šæ—¶æŠŠdoingæ›´æ–°ä¸‹æ¥ï¼Œæ‰€ä»¥ä¼šè¶Šæ¥è¶Šé•¿â€¦å› ä¸ºä¸æƒ³æ¯æ¬¡éƒ½å¿˜äº†ä¹‹å‰å®šçš„æ˜¯ä»€ä¹ˆï¼Œåˆæ‡’å¾—å»æ‰¾gitè®°å½•</h1><ul>
<li>å·¥ä½œé¡¹ç›®é‡æ–°ä¸ŠéªŒè¯ç­‰ âˆš</li>
<li>å·¥ä½œé¡¹ç›®å»é™¤æ—¥æœŸ âˆš</li>
<li><del>cssè‡ªå®šä¹‰å±æ€§</del> Ã—</li>
<li>å¯¹è±¡èµ‹å€¼å¾ªç¯å¼•ç”¨æ¢è®¨ âˆš</li>
<li>è§†é¢‘è½¬å­—ç¬¦ç”» âˆš åé¢æœ‰æ—¶é—´æ•´ç†å‡ºæ¥</li>
<li>å†™ä¸ªwebpackæ’ä»¶ï¼Œå¤„ç†cookieç”Ÿæˆmarkdown âˆš å†™å®Œå‘ç°è¿™äº›è¦åœ¨è¿è¡Œæ—¶æŠ“å–æ‰å‡†ç¡®å°±æ²¡ç»§ç»­åšä¸‹å»</li>
<li><em>create-react-app</em> âˆš ç¬¬ä¸€æ¬¡å°è¯•å¼€å¿ƒ</li>
<li><em>vueå…¨å®¶æ¡¶</em> âˆš è¿‡äº†ä¸€éï¼Œç­‰æœ‰å°é¡¹ç›®å¯ä»¥ç»ƒæ‰‹<br>_ ã€ŠCSSä¸–ç•Œã€‹_ âˆš å¥½ä¹¦<br>â€” ã€Šhttpå°ä¹¦ã€‹_âˆš å‡†èƒ½å¸®ä½ çœä¸‹ä¸å°‘æ—¶é—´</li>
<li>äº†è§£å‡½æ•°å¼ç¼–ç¨‹ âˆš</li>
<li>Reactæºç  âˆš</li>
<li>å‡çº§blogç‰ˆæœ¬ âˆš</li>
<li>React Context âˆš</li>
<li>pcé¡¹ç›®çš„è§„èŒƒä¸eslint âˆš</li>
<li>ã€Šæ•°æ®ç»“æ„ã€‹  âˆš</li>
<li>DartåŸºç¡€è¯­æ³• âˆš</li>
<li>React Hookså­¦ä¹  âˆš</li>
<li>ã€ŠReacté£Ÿç”¨æŒ‡å—ã€‹âˆš</li>
</ul>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>learn</tag>
        <tag>web</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>react-native-countdown RNçš„å€’è®¡æ—¶ç»„ä»¶</title>
    <url>/2017/06/react-native-countdown-RN%E7%9A%84%E5%80%92%E8%AE%A1%E6%97%B6%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä¹‹æ‰€ä»¥ä¼šå†™è¿™ä¸ªå°ç»„ä»¶æ˜¯å› ä¸ºå­¦ä¹ RNçš„æ—¶å€™ï¼Œè·Ÿç€è§†é¢‘æ•²ä»£ç ã€‚ è§†é¢‘æ¨èäº†ä¸€æ¬¾<a href="https://github.com/shigebeyond/react-native-sk-countdown" target="_blank" rel="noopener">å€’è®¡æ—¶ç»„ä»¶</a> å› ä¸ºé•¿æœŸæ²¡æœ‰ç»´æŠ¤ï¼ˆæœ€åä¸€æ¬¡æ›´æ–°æ˜¯ä¸€å¹´å‰ï¼‰ï¼Œ åœ¨æˆ‘çš„RNç¯å¢ƒä¸‹æŠ¥é”™ã€‚</p>
<p>æŠ¥é”™çš„åŸå› å¤§æ¦‚æ˜¯ React æŠŠä¸€ä¸ªåŠŸèƒ½ç‹¬ç«‹å‡ºå»ï¼Œè¦é‡æ–°å¼•è¿›å°±å¯ä»¥äº†ã€‚ ä¸è¿‡æƒ³ç€æ—¢ç„¶æˆ‘å·²ç»çœ‹äº†æºç æ‰¾åˆ°é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä½•ä¸è‡ªå·±é€ ä¸€ä¸ªå°è½®å­å‘¢~</p>
<p><a href="https://github.com/jsonz1993/wheel/tree/master/react-native-countdown" target="_blank" rel="noopener">é¡¹ç›®github</a></p>
<h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><p>éœ€è¦æ‰‹åŠ¨å¼•å…¥ï¼Œæ²¡æœ‰ä¼ åˆ°npm æ‡’å¾—å†ç»´æŠ¤</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;CountDownText&#125; <span class="keyword">from</span> <span class="string">'react-native-sk-countdown'</span>;</span><br><span class="line"></span><br><span class="line">&lt;CountDownText</span><br><span class="line">    style=&#123;styles.cd&#125;</span><br><span class="line">    countType=<span class="string">'seconds'</span> <span class="comment">// è®¡æ—¶ç±»å‹ï¼šseconds / date</span></span><br><span class="line">    auto=&#123;<span class="literal">true</span>&#125; <span class="comment">// è‡ªåŠ¨å¼€å§‹</span></span><br><span class="line">    afterEnd=&#123;() =&gt; &#123;&#125;&#125; <span class="comment">// ç»“æŸå›è°ƒ</span></span><br><span class="line">    timeLeft=&#123;<span class="number">10</span>&#125; <span class="comment">// æ­£å‘è®¡æ—¶ æ—¶é—´èµ·ç‚¹ä¸º0ç§’</span></span><br><span class="line">    step=&#123;<span class="number">-1</span>&#125; <span class="comment">// è®¡æ—¶æ­¥é•¿ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œæ­£æ•°åˆ™ä¸ºæ­£è®¡æ—¶ï¼Œè´Ÿæ•°ä¸ºå€’è®¡æ—¶</span></span><br><span class="line">    startText=<span class="string">'è·å–éªŒè¯ç '</span> <span class="comment">// å¼€å§‹çš„æ–‡æœ¬</span></span><br><span class="line">    endText=<span class="string">'è·å–éªŒè¯ç '</span> <span class="comment">// ç»“æŸçš„æ–‡æœ¬</span></span><br><span class="line">    intervalText=&#123;(sec) =&gt; sec + <span class="string">'ç§’é‡æ–°è·å–'</span>&#125; <span class="comment">// å®šæ—¶çš„æ–‡æœ¬å›è°ƒ</span></span><br><span class="line">  /&gt;</span><br><span class="line"></span><br><span class="line">&lt;CountDownText <span class="comment">// å€’è®¡æ—¶</span></span><br><span class="line">    style=&#123;styles.cd&#125;</span><br><span class="line">    countType=<span class="string">'date'</span> <span class="comment">// è®¡æ—¶ç±»å‹ï¼šseconds / date</span></span><br><span class="line">    auto=&#123;<span class="literal">true</span>&#125; <span class="comment">// è‡ªåŠ¨å¼€å§‹</span></span><br><span class="line">    afterEnd=&#123;() =&gt; &#123;&#125;&#125; <span class="comment">// ç»“æŸå›è°ƒ</span></span><br><span class="line">    timeLeft=&#123;<span class="number">10</span>&#125; <span class="comment">// æ­£å‘è®¡æ—¶ æ—¶é—´èµ·ç‚¹ä¸º0ç§’</span></span><br><span class="line">    step=&#123;<span class="number">-1</span>&#125; <span class="comment">// è®¡æ—¶æ­¥é•¿ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œæ­£æ•°åˆ™ä¸ºæ­£è®¡æ—¶ï¼Œè´Ÿæ•°ä¸ºå€’è®¡æ—¶</span></span><br><span class="line">    startText=<span class="string">''</span> <span class="comment">// å¼€å§‹çš„æ–‡æœ¬</span></span><br><span class="line">    endText=<span class="string">''</span> <span class="comment">// ç»“æŸçš„æ–‡æœ¬</span></span><br><span class="line">    intervalText=&#123;(date, hour, min, sec) =&gt; date + <span class="string">'å¤©'</span> + hour + <span class="string">'æ—¶'</span> + min + <span class="string">'åˆ†'</span> + sec&#125; <span class="comment">// å®šæ—¶çš„æ–‡æœ¬å›è°ƒ</span></span><br><span class="line">  /&gt;</span><br></pre></td></tr></table></figure>
<p><img src="./demo.gif" alt="demo.gif"></p>
<h2 id="Prop"><a href="#Prop" class="headerlink" title="Prop"></a>Prop</h2><table>
<thead>
<tr>
<th>Prop</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>countType</code></strong></td>
<td>Countdown type, one of â€˜secondsâ€™ and â€˜dateâ€™.</td>
<td><em>None</em></td>
</tr>
<tr>
<td><strong><code>auto</code></strong></td>
<td>Whether to start countdown right now.</td>
<td><em>false</em></td>
</tr>
<tr>
<td><strong><code>timeLeft</code></strong></td>
<td>Seconds lefted to countdown.</td>
<td><em>None</em></td>
</tr>
<tr>
<td><strong><code>step</code></strong></td>
<td>Number to increment in each step.</td>
<td><em>-1</em></td>
</tr>
<tr>
<td><strong><code>startText</code></strong></td>
<td>Text before countdown.</td>
<td><em>None</em></td>
</tr>
<tr>
<td><strong><code>endText</code></strong></td>
<td>Text after countdown.</td>
<td><em>None</em></td>
</tr>
<tr>
<td><strong><code>intervalText</code></strong></td>
<td>A function to reture a text during countdown.</td>
<td><em>None</em></td>
</tr>
<tr>
<td><strong><code>afterEnd</code></strong></td>
<td>A callback function after countdown.</td>
<td><em>None</em></td>
</tr>
</tbody>
</table>
<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Params</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>start</code></strong></td>
<td>start countdown.</td>
<td><em>None</em></td>
</tr>
<tr>
<td><strong><code>end</code></strong></td>
<td>finish countdown.</td>
<td><em>None</em></td>
</tr>
</tbody>
</table>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>ä¸»è¦æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯å€’è®¡æ—¶çš„é€»è¾‘ï¼Œå¦ä¸€ä¸ªæ˜¯å¤¹æ‚äº†RNçš„é€»è¾‘ã€‚<br><figure class="highlight javascript"><figcaption><span>CountDown.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CountDown</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setData(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–æœ‰å¤šå°‘ç§’</span></span><br><span class="line">  <span class="keyword">static</span> getSeconds(time) &#123;</span><br><span class="line">    <span class="keyword">let</span> type = <span class="keyword">typeof</span> time;</span><br><span class="line">    <span class="keyword">return</span> (type === <span class="string">'number'</span> || type === <span class="string">'string'</span> &amp;&amp; <span class="regexp">/^\d+$/</span>.test(time))</span><br><span class="line">      ? time</span><br><span class="line">      : <span class="keyword">new</span> <span class="built_in">Date</span>(time).getTime() / <span class="number">1000</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½æ•°è¡¥å…¨</span></span><br><span class="line">  <span class="keyword">static</span> ten(t) &#123;</span><br><span class="line">    <span class="keyword">return</span> t &lt; <span class="number">10</span>? <span class="string">'0'</span> + t: t;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®æ•°æ®</span></span><br><span class="line">  setData(props) &#123;</span><br><span class="line">    <span class="keyword">this</span>.countType = props.countType; <span class="comment">// æ”¯æŒä¸¤ç§è®¡æ—¶æ–¹å¼ï¼Œä¸¤ä¸ªæ—¥æœŸä¹‹é—´ &amp;&amp; ç§’æ•°çš„å€’è®¡æ—¶</span></span><br><span class="line">    <span class="keyword">this</span>.timerId = <span class="literal">null</span>; <span class="comment">// è®¡æ—¶å™¨</span></span><br><span class="line">    <span class="keyword">this</span>.endTime = props.endTime; <span class="comment">// è®¡æ—¶å™¨ç»“æŸæ—¶é—´</span></span><br><span class="line">    <span class="keyword">this</span>.startTime = props.startTime; <span class="comment">// è®¡æ—¶å™¨å¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="keyword">this</span>.timeLeft = props.timeLeft; <span class="comment">// è®¡æ—¶å™¨å‰©ä½™ç§’æ•°ï¼Œ åŒºåˆ«äºä¸Šé¢æ—¶é—´æ®µçš„è®¡æ—¶æ–¹å¼</span></span><br><span class="line">    <span class="keyword">this</span>.timePassed = <span class="number">0</span>; <span class="comment">// æ­£å‘ä¸ºç´¯è®¡æ—¶é—´ï¼Œåå‘ä¸ºå‰©ä½™æ—¶é—´</span></span><br><span class="line">    <span class="keyword">this</span>.onInterval = props.onInterval; <span class="comment">// å®šæ—¶çš„å›è°ƒ</span></span><br><span class="line">    <span class="keyword">this</span>.onEnd = props.onEnd; <span class="comment">// ç»“æŸçš„å›è°ƒ</span></span><br><span class="line">    <span class="keyword">this</span>.step = props.step; <span class="comment">// è®¡æ—¶æ­¥é•¿ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œæ­£æ•°ä¸ºæ­£è®¡æ—¶ï¼Œè´Ÿæ•°ä¸ºå€’è®¡æ—¶</span></span><br><span class="line">    <span class="keyword">this</span>.counter = <span class="number">0</span>; <span class="comment">// ç´¯åŠ å™¨ TODO ç–‘é—®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®æ ¡éªŒ</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.countType) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å¿…é¡»ä¼ å…¥ä¸€ä¸ª countType: seconds || date'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      (<span class="keyword">this</span>.timeLeft &amp;&amp; (<span class="keyword">this</span>.endTime || <span class="keyword">this</span>.startTime)) ||</span><br><span class="line">      (!<span class="keyword">this</span>.timeLeft &amp;&amp; !(<span class="keyword">this</span>.endTime || <span class="keyword">this</span>.startTime))</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å¿…é¡»ä¼ å…¥ä¸€ä¸ªæ—¶é—´æ®µ [timeLeft] [startTime] [endTime]'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.timeLeft &amp;&amp; <span class="keyword">typeof</span> <span class="keyword">this</span>.startTime === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.startTime = <span class="built_in">Date</span>.now()/ <span class="number">1000</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.timeLeft) &#123;</span><br><span class="line">      <span class="keyword">this</span>.timeLeft = <span class="built_in">Math</span>.floor(CountDown.getSeconds(<span class="keyword">this</span>.endTime) - CountDown.getSeconds(<span class="keyword">this</span>.startTime));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.refreshTime(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘¨æœŸå¯åŠ¨æ›´æ–°æ—¶é—´</span></span><br><span class="line">  auto() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.timerId = setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å€’è®¡æ—¶åˆ°0åœæ­¢è®¡æ—¶</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.timePassed &lt;= <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.step &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">this</span>.end();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.refreshTime(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    &#125;, <span class="number">1000</span> * <span class="built_in">Math</span>.abs(<span class="keyword">this</span>.step)); <span class="comment">// æ—¶é—´é—´éš”ä¸ºæ•´æ•°ï¼Œ å¯¹stepæ±‚ç»å¯¹å€¼</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  refreshTime(isStart) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.timePassed  = (<span class="keyword">this</span>.timeLeft * <span class="number">1000</span> + <span class="keyword">this</span>.step * <span class="number">1000</span> * <span class="keyword">this</span>.counter++) / <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.countType === <span class="string">'date'</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> _timePassed = <span class="keyword">this</span>.timePassed,</span><br><span class="line">        second = CountDown.ten(_timePassed % <span class="number">60</span>);</span><br><span class="line">      _timePassed = <span class="built_in">parseInt</span>(_timePassed / <span class="number">60</span>);</span><br><span class="line">      <span class="keyword">let</span> minute = CountDown.ten(_timePassed % <span class="number">60</span>);</span><br><span class="line">      _timePassed = <span class="built_in">parseInt</span>(_timePassed / <span class="number">60</span>);</span><br><span class="line">      <span class="keyword">let</span> hour = CountDown.ten(_timePassed % <span class="number">24</span>);</span><br><span class="line">      _timePassed = CountDown.ten(<span class="built_in">parseInt</span>(_timePassed / <span class="number">24</span>));</span><br><span class="line">      <span class="keyword">this</span>.onInterval(_timePassed,hour,minute, second);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.countType === <span class="string">'seconds'</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.onInterval(<span class="keyword">this</span>.timePassed);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    isStart &amp;&amp; <span class="keyword">this</span>.auto(); <span class="comment">// æ˜¯å¦å¼€å§‹è®¡æ—¶</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼€å§‹è®¡æ—¶</span></span><br><span class="line">  start() &#123;</span><br><span class="line">    clearTimeout(<span class="keyword">this</span>.timerId);</span><br><span class="line">    <span class="keyword">this</span>.refreshTime(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»“æŸï¼š æ²¡æœ‰æ¸…ç©ºè®¡æ•° + åœæ­¢è®¡æ—¶</span></span><br><span class="line">  end() &#123;</span><br><span class="line">    clearTimeout(<span class="keyword">this</span>.timerId);</span><br><span class="line">    <span class="keyword">this</span>.onEnd(<span class="keyword">this</span>.timeLeft);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  reset() &#123;</span><br><span class="line">    <span class="keyword">this</span>.counter = <span class="number">0</span>;</span><br><span class="line">    clearTimeout(<span class="keyword">this</span>.timerId);</span><br><span class="line">    <span class="keyword">this</span>.refreshTime(<span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><figcaption><span>CountDownText.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  Text</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">import</span> CountDown <span class="keyword">from</span> <span class="string">'./CountDown'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountDownText</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      text: <span class="keyword">this</span>.props.startText,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  counter= <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> isTimeEquals(t1, t2) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.abs(t1 - t2) &lt; <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillReceiveProps(nextProps) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> updating = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å€’è®¡æ—¶çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.step === nextProps.step &amp;&amp; <span class="keyword">this</span>.props.step &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.props.endTime) &#123;</span><br><span class="line">        <span class="comment">// 1. æŒ‰èµ·å§‹æ—¥æœŸæ¥è®¡æ—¶</span></span><br><span class="line">        updating = !CountDownText.isTimeEquals(<span class="keyword">this</span>.props.endTime, nextProps.endTime);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 2. æŒ‰é—´éš”ç§’æ•°æ¥è®¡æ—¶</span></span><br><span class="line">        updating = !CountDownText.isTimeEquals(nextProps.timeLeft, <span class="keyword">this</span>.counter.timePassed);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (updating) &#123;</span><br><span class="line">      <span class="comment">// é‡ç½®ï¼š æ¸…ç©ºè®¡æ•° + åœæ­¢è®¡æ—¶</span></span><br><span class="line">      <span class="keyword">this</span>.counter.reset();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.counter.setData(<span class="built_in">Object</span>.assign(&#123;&#125;, nextProps, &#123;</span><br><span class="line">        onInterval: <span class="keyword">this</span>.onInterval.bind(<span class="keyword">this</span>),</span><br><span class="line">        onEnd: <span class="keyword">this</span>.onEnd.bind(<span class="keyword">this</span>),</span><br><span class="line">      &#125;));</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (nextProps.auto) &#123;</span><br><span class="line">        <span class="keyword">this</span>.start();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.counter =  <span class="keyword">new</span> CountDown(<span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.props, &#123;</span><br><span class="line">      onInterval: <span class="keyword">this</span>.onInterval.bind(<span class="keyword">this</span>),</span><br><span class="line">      onEnd: <span class="keyword">this</span>.onEnd.bind(<span class="keyword">this</span>),</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.counter.timeLeft &lt;= <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.counter.step &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.end();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.auto) <span class="keyword">this</span>.start();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.reset();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  start() &#123;</span><br><span class="line">    <span class="keyword">this</span>.counter.start();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  end() &#123;</span><br><span class="line">    <span class="keyword">this</span>.counter.end();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  reset() &#123;</span><br><span class="line">    <span class="keyword">this</span>.counter.reset();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Text style=&#123;<span class="keyword">this</span>.props.style&#125;&gt; &#123;<span class="keyword">this</span>.state.text&#125; &lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  getTimePassed() &#123;</span></span><br><span class="line"><span class="regexp">    return this.counter.timePassed;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  onInterval(...args) &#123;</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;text: this.props.intervalText.apply(null, args)&#125;)</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  onEnd(timePassed) &#123;</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;</span></span><br><span class="line"><span class="regexp">      text: this.props.endText,</span></span><br><span class="line"><span class="regexp">    &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    this.props.afterEnd(timePassed);</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">CountDownText.defaultProps = &#123;</span></span><br><span class="line"><span class="regexp">  countType: 'seconds',</span></span><br><span class="line"><span class="regexp">  onEnd: null,</span></span><br><span class="line"><span class="regexp">  timeLeft: 0,</span></span><br><span class="line"><span class="regexp">  step: -1,</span></span><br><span class="line"><span class="regexp">  startText: null,</span></span><br><span class="line"><span class="regexp">  intervalText: null,</span></span><br><span class="line"><span class="regexp">  endText: null,</span></span><br><span class="line"><span class="regexp">  auto: false,</span></span><br><span class="line"><span class="regexp">  afterEnd: ()=&gt; &#123;&#125;,</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default CountDownText;</span></span><br></pre></td></tr></table></figure>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>å¤§é‡å€Ÿé‰´ <a href="https://github.com/shigebeyond/react-native-sk-countdown" target="_blank" rel="noopener">https://github.com/shigebeyond/react-native-sk-countdown</a> é¡¹ç›®</p>
<p>å…¶å®è¯´ç™½äº†åªæ˜¯åœ¨åŸæ¥ä»£ç ä¸Šä¼˜åŒ–æ”¹è¿›ï¼Œä¸»è¦å…¼å®¹æ–°ç‰ˆçš„<code>React-Native</code>ã€<code>React</code> å’Œç”¨ <code>ES6</code>è¯­æ³•æ”¹å†™ã€‚</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>work</tag>
        <tag>React-Native</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»åŠ¨ç«¯æµè§ˆå™¨é»˜è®¤è¯·æ±‚ apple-touch-icon.png é—®é¢˜</title>
    <url>/2017/06/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%B5%8F%E8%A7%88%E5%99%A8%E9%BB%98%E8%AE%A4%E8%AF%B7%E6%B1%82-apple-touch-icon-png-%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>é¡¹ç›®æœ‰åšåŸ‹ç‚¹ä¸è¯·æ±‚çš„è®°å½•ï¼Œ æ—©ä¸Šå‘ç°æœ‰ç”¨æˆ·è€æ˜¯ä¼šè¯·æ±‚ä¸€ä¸ª<code>location.origin + &quot;/apple-touch-icon.png&quot;</code> æˆ– <code>location.origin + &quot;/apple-touch-icon-76x76.png&quot;</code>çš„é—®é¢˜ã€‚</p>
<p>è¿™å°±å¾ˆçº³é—·äº†ï¼Œ é¦–å…ˆï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ä»£ç é£æ ¼æ˜¯ä¸ä¼šå‡ºç° æ ¹ç›®å½•æŒ‡å‘çš„å›¾ç‰‡ è€Œä¸”åå°ä¹Ÿä¸ä¼šè¾“å‡ºè¿™ä¹ˆç³»ç»ŸåŒ–çš„å›¾ç‰‡åã€‚</p>
<p>ä¸€çœ‹å°±çŸ¥é“æ˜¯ <code>apple</code> æçš„é¬¼ã€‚</p>
<p>äºæ˜¯ä¹ <code>google</code> äº†ä¸€ä¸‹ å¤§æ¦‚å°±æ˜¯ios8åŠä»¥ä¸Š<code>safari</code>æµè§ˆå™¨çš„ä¿å­˜æ¡Œé¢æ“ä½œè¯·æ±‚çš„ä¸€å¼ å›¾ï¼Œç”¨äºåšiconã€‚</p>
<h2 id="åœºæ™¯ï¼š"><a href="#åœºæ™¯ï¼š" class="headerlink" title="åœºæ™¯ï¼š"></a>åœºæ™¯ï¼š</h2><p><img src="./1.jpeg" alt="1.jpeg"><br><img src="./2.jpeg" alt="2.jpeg"><br><img src="./3.jpeg" alt="3.jpeg"></p>
<h2 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h2><p>å¯ä»¥åœ¨headåŠ ä¸Šè¿™æ®µ<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon"</span> <span class="attr">href</span>=<span class="string">"/custom_icon.png"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœè¦æ›´åŠ ç²¾å‡†ä¸€ç‚¹ï¼Œæ ¹æ®è®¾å¤‡æ¥ç”¨ä¸åŒçš„iconï¼Œåˆ™å¯ä»¥è¿™æ ·<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon"</span> <span class="attr">href</span>=<span class="string">"touch-icon-iphone.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon"</span> <span class="attr">sizes</span>=<span class="string">"152x152"</span> <span class="attr">href</span>=<span class="string">"touch-icon-ipad.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon"</span> <span class="attr">sizes</span>=<span class="string">"180x180"</span> <span class="attr">href</span>=<span class="string">"touch-icon-iphone-retina.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon"</span> <span class="attr">sizes</span>=<span class="string">"167x167"</span> <span class="attr">href</span>=<span class="string">"touch-icon-ipad-retina.png"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆè®¾å¤‡çš„å°ºå¯¸ï¼Œé‚£ä¹ˆä¼šä¼˜å…ˆé€‰ç”¨æ¯”é¢„æœŸå°ºå¯¸å¤§çš„æœ€å°å›¾æ ‡ã€‚<br>æ¯”å¦‚è®¾å¤‡çš„é€‚å½“å›¾æ ‡å¤§å°ä¸º58 x 58ï¼Œç³»ç»Ÿä¼šæŒ‰ç…§ä¸‹é¢å¯»æ‰¾</p>
<ul>
<li>apple-touch-icon-80x80.png</li>
<li>apple-touch-icon.png</li>
</ul>
<p>é»˜è®¤æ˜¯å»æ›´ç›®å½•å¯»æ‰¾ï¼Œä¸è¿‡ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªè·¯å¾„ã€‚</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p><a href="https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html" target="_blank" rel="noopener">æ›´å¤šèµ„æ–™</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>web</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>å·¥ä½œæ—¥å¸¸ å¸é¡¶æ•ˆæœ</title>
    <url>/2017/05/%E5%B7%A5%E4%BD%9C%E6%97%A5%E5%B8%B8-%E5%90%B8%E9%A1%B6%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>å¸é¡¶ æœ€å¸¸è§çš„å°±æ˜¯æˆ‘ä»¬å¹³æ—¶ç½‘ç«™æµè§ˆçš„æ—¶å€™ï¼Œä¸‹æ»‘åˆ°æŸä¸ªç¨‹åº¦ä¹‹å å¯¼èˆªæ å°±å›ºå®šåˆ°é¡¶éƒ¨è€Œä¸éšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ï¼ˆç®€å•è€Œè¨€å°±æ˜¯ fixed å¸ƒå±€ ).<br>æœ€å¸¸è§çš„å®ç°æ–¹å¼æ€è·¯å°±æ˜¯ åˆ¤æ–­é¡µé¢æ»šåŠ¨é«˜åº¦ï¼Œåˆ°æŸä¸ªé«˜åº¦çš„æ—¶å€™å°±è®©è¿™ä¸ªdivæ”¹å˜å®šä½æ–¹å¼</p>
<h1 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h1><p>å¼•å…¥ jq ï¼Œå¹¶åŠ ä¸€åˆ¤æ–­ï¼Œå¦‚æœjq(zepto) æ²¡æœ‰ outerHeight/outerWidth æ‰‹åŠ¨å®ç°ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'./jquery-2.1.1'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰ outerWidth æˆ– outerHeight æ‰‹åŠ¨å®ç°outerWidth &amp;&amp; outerHeight</span></span><br><span class="line">(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> $.outerHeight === <span class="string">'function'</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  [<span class="string">'height'</span>, <span class="string">'width'</span>].forEach(<span class="function"><span class="params">dimension</span>=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> Dimension = dimension.replace(<span class="regexp">/./</span>, m=&gt; m[<span class="number">0</span>].toUpperCase());</span><br><span class="line"></span><br><span class="line">    $.fn[<span class="string">'outer'</span> + Dimension] = <span class="function"><span class="keyword">function</span>(<span class="params">margin</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> size = <span class="keyword">this</span>[dimension](),</span><br><span class="line">          sides = &#123;</span><br><span class="line">            <span class="string">'width'</span>: [<span class="string">'left'</span>, <span class="string">'right'</span>],</span><br><span class="line">            <span class="string">'height'</span>: [<span class="string">'top'</span>, <span class="string">'bottom'</span>],</span><br><span class="line">          &#125;;</span><br><span class="line"></span><br><span class="line">        sides[dimension].forEach(<span class="function"><span class="params">side</span>=&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (margin) size += <span class="built_in">parseInt</span>(<span class="keyword">this</span>.css(<span class="string">'margin-'</span> + side), <span class="number">10</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>å®ç°ä»£ç <br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fixedTop = &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param </span>el å…·ä½“è¦ fixed çš„ dom çš„å­—ç¬¦ä¸²æˆ–jqueryDom æˆ–dom</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param </span>opts å…¶ä»–é…ç½®ï¼Œç›®å‰åªæœ‰ hold æ˜¯å¦è¦ç”Ÿæˆä¸€ä¸ªå ä½divé˜²æ­¢div è„±ç¦»æ–‡æ¡£æµåå…„å¼ŸèŠ‚ç‚¹æŠ–åŠ¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  init(el, opts=&#123; <span class="attr">hold</span>: <span class="literal">true</span>&#125;) &#123;</span><br><span class="line">  	<span class="comment">// åˆå§‹åŒ–éœ€è¦çš„el</span></span><br><span class="line">    <span class="keyword">this</span>.$el = el <span class="keyword">instanceof</span> $? el: $(el);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è·å–åé¢è¦æ”¹å˜æ ·å¼çš„å…·ä½“å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> offset = <span class="keyword">this</span>.$el.offset();</span><br><span class="line">    <span class="keyword">this</span>.offsetTop = offset.top;</span><br><span class="line">    <span class="keyword">this</span>.defaultHeight = <span class="keyword">this</span>.$el.outerHeight(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.defaultState = &#123;</span><br><span class="line">      position: <span class="keyword">this</span>.$el.css(<span class="string">'position'</span>),</span><br><span class="line">      width: <span class="keyword">this</span>.$el.css(<span class="string">'width'</span>) || <span class="string">'auto'</span>,</span><br><span class="line">      top: <span class="keyword">this</span>.$el.css(<span class="string">'top'</span>) || <span class="string">'auto'</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.changeState = &#123;</span><br><span class="line">      position: <span class="string">'fixed'</span>,</span><br><span class="line">      width: <span class="keyword">this</span>.$el.outerWidth(),</span><br><span class="line">      top: <span class="string">'0'</span>,</span><br><span class="line">      left: offset.left,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰ hodl å‚æ•°ï¼Œ é…ç½®å¥½è¦ç”Ÿæˆçš„ å ä½dom</span></span><br><span class="line">    <span class="keyword">this</span>.holdEl = opts.hold? <span class="string">`&lt;div class="J-fixedTop-pad" style="height:<span class="subst">$&#123;<span class="keyword">this</span>.defaultHeight&#125;</span>px; visibility: hidden;"&gt;&lt;/div&gt;`</span>: <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">    <span class="keyword">this</span>.bindEvent();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bindEvent() &#123;</span><br><span class="line">    <span class="keyword">let</span> $win = $(<span class="built_in">window</span>);</span><br><span class="line">    $win.scroll(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> isTop = ($win.scrollTop() - <span class="keyword">this</span>.offsetTop) &gt;= <span class="number">0</span>,</span><br><span class="line">        isFixed = <span class="keyword">this</span>.$el.data(<span class="string">'fixed'</span>);</span><br><span class="line"></span><br><span class="line">	  <span class="comment">// åˆ¤æ–­ å¦‚æœå¤§äºtop å¹¶ä¸”å½“å‰çš„domå…ƒç´ æ²¡æœ‰è¢«æ”¹å˜æ ·å¼ï¼Œåˆ™æ‰§è¡Œé€»è¾‘</span></span><br><span class="line">      <span class="keyword">if</span> (isTop &amp;&amp; !isFixed) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.$el.data(<span class="string">'fixed'</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.$el.next().hasClass(<span class="string">'J-fixedTop-pad'</span>)) &#123;</span><br><span class="line">          <span class="keyword">this</span>.$el.after(<span class="keyword">this</span>.holdEl);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.addCss();</span><br><span class="line"></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isTop &amp;&amp; isFixed)&#123;</span><br><span class="line"></span><br><span class="line">      	<span class="comment">// åä¹‹ è¿˜åŸdomæ ·å¼</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.$el.data(<span class="string">'fixed'</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">this</span>.removeCss();</span><br><span class="line">        <span class="keyword">this</span>.holdEl &amp;&amp; <span class="keyword">this</span>.$el.next().remove();</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  addCss() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$el.css(<span class="keyword">this</span>.changeState);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  removeCss() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$el.css(<span class="keyword">this</span>.defaultState);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>è°ƒç”¨<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fixedTop.init(<span class="string">'#div'</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>å¾ˆç®€å•çš„å°éœ€æ±‚ï¼Œ æ˜¯åœ¨å·¥ä½œä¸­çœ‹åˆ°å°ä¼™ä¼´çš„è„šæœ¬åæ”¹è¿›çš„ã€‚ ä¸»è¦æ˜¯ä¹‹å‰æ²¡æœ‰æƒ³åˆ°è¦ç”Ÿæˆä¸€ä¸ªå ä½domæ¥é˜²æ­¢åé¢çš„æŠ–åŠ¨<br><a href="https://github.com/jsonz1993/wheel/tree/master/fixedTop" target="_blank" rel="noopener">é¡¹ç›®æºç é“¾æ¥</a></p>
<p>ç›®å‰åªæ”¯æŒå¸é¡¶ï¼Œ åé¢å¯ä»¥å¯¹ä»£ç æ”¹é€ ï¼Œæ”¹æˆå¯ä»¥æ”¯æŒå·¦å³ä¸Šä¸‹çš„</p>
<p>ç„¶åæœ‰ä¸€ä¸ªcssæ ·å¼å¯ä»¥ç›´æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œä½†æ˜¯å…¼å®¹æ€§ä¸ä¹è§‚ï¼Œ å¯¹å¸ƒå±€ä¹Ÿæœ‰æ‰€è¦æ±‚ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»äº†è§£ä¸€ä¸‹.<br><a href="https://mdn.mozillademos.org/en-US/docs/Web/CSS/position$samples/Sticky_positioning?revision=1248065" target="_blank" rel="noopener">sticky demo</a>ã€‚<br><a href="http://caniuse.com/#search=sticky" target="_blank" rel="noopener">sticky caniuse</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>work</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>ios bodyäº‹ä»¶å§”æ‰˜çš„å‘</title>
    <url>/2017/05/ios-body%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98%E7%9A%84%E5%9D%91/</url>
    <content><![CDATA[<p>éƒ¨é—¨è€å¤§: è¿™ä¸ªå¥—é¤æ€ä¹ˆè¶…å‡ºä¸€å±ä¹‹åç‚¹å‡»æ²¡ååº”çš„â€¦</p>
<h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>æœ‰ä¸€ä¸ª<code>å¥—é¤åˆ—è¡¨</code>æ˜¯é æ¥å£å¼‚æ­¥æ¸²æŸ“çš„ï¼Œæ‰€ä»¥äº‹ä»¶æˆ‘ç›´æ¥ç»‘å®šåœ¨<code>body</code>ä¸Šï¼Œé€šè¿‡äº‹ä»¶å§”æ‰˜å»è§¦å‘ã€‚<br>è¿™åŸæœ¬æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œ è¦å‘½çš„æ˜¯ <strong>reset.css</strong> ä¸­æŠŠ <code>body, html</code> é«˜åº¦è®¾ç½®ä¸º 100%ã€‚ è¿™å°±å¯èƒ½å‡ºç°ä¸‹é¢çš„æƒ…å†µ</p>
<p><img src="./body_100.png" alt="body_100"><br><img src="./body_bug.PNG" alt="body_bug.PNG"></p>
<p>é¡µé¢è¿‡é•¿ï¼Œæ‹‰ä¸Šå»çš„æ—¶å€™ <code>body</code> åªæœ‰ <code>100%</code> é«˜åº¦ï¼Œæ²¡æœ‰è¦†ç›–åˆ°ä¸‹é¢ï¼Œ æ‰€ä»¥è¿™æ—¶å€™ç‚¹å‡»ä¸‹é¢çš„å¥—é¤ï¼Œä¸ç®—æ˜¯ç‚¹å‡»åˆ°bodyä¸Š å§”æ‰˜ä¹Ÿå°±æ— ä»ä¸‹æ‰‹ã€‚</p>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>è§£å†³æ–¹æ³•å¾ˆç®€å•â€¦. åªéœ€è¦åœ¨é¡µé¢é‡ç½®æ‰é‚£ä¸ªæ ·å¼å³å¯ å¦‚ <code>body=&gt; height: auto</code>ã€‚</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>ios9 ä¸‹ domArray forEach æŠ¥é”™</title>
    <url>/2017/05/ios9-%E4%B8%8B-domArray-forEach-%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>èµ·å› æ˜¯è¿™æ ·çš„ï¼Œäº§å“éœ€æ±‚éœ€è¦è¾“å…¥æ¡†è¾“å…¥åï¼Œè¦æ ¹æ®å†…å®¹é«˜åº¦è‡ªé€‚åº”ï¼Œæœ€é«˜ä¸èƒ½è¶…è¿‡3è¡Œï¼Œ äºæ˜¯å†™äº†ä¸€ä¸ªå°å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> textareaAutoHeight = <span class="function">(<span class="params">className, &#123;multiple=<span class="number">3</span>&#125;=&#123;&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> domList = <span class="built_in">document</span>.querySelectorAll(className);</span><br><span class="line">    </span><br><span class="line">    domList.forEach(<span class="function"><span class="params">item</span>=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> _height = item.offsetHeight;</span><br><span class="line">        <span class="comment">// item.offsetHeight ç”¨zepto çš„ heightä¿é™©ä¸€ç‚¹</span></span><br><span class="line">        item.addEventListener(<span class="string">'keyup'</span>, (e)=&gt; updateHeight(e, _height*multiple));</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">updateHeight</span>(<span class="params">e, _height</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> o = e.target;</span><br><span class="line">        o.style.height = <span class="string">'1px'</span>;</span><br><span class="line">        o.style.height = <span class="built_in">Math</span>.min(o.scrollHeight, _height) + <span class="string">'px'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¼ å…¥domæ ‡è¯†åŠ ä¸Šè¡Œæ•°ï¼Œç”¨çš„å¾ˆå¼€å¿ƒã€‚æ²¡æ¯›ç—… æ²¡é—®é¢˜ã€‚</p>
<p>é¡¹ç›®ä¸Šçº¿åï¼Œå‘ç°è¯´åœ¨æŸäº›æœºå‹ä¸‹ä¼šæŠ¥é”™ï¼Œåé¢æ’æŸ¥åˆ°æ˜¯è¿™ä¸ªå‡½æ•°çš„é”™ã€‚<br>åŸå› æ˜¯ ios9 ä¸€ä¸‹ã€‚ domList ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p>
<p>æ‰€ä»¥æ”¹åŠ¨äº†ä¸€ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> textareaAutoHeight = <span class="function">(<span class="params">className, &#123;multiple=<span class="number">3</span>&#125;=&#123;&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> domList = [...document.querySelectorAll(className)];</span><br><span class="line">    </span><br><span class="line">        domList.forEach(<span class="function"><span class="params">item</span>=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> _height = item.offsetHeight;</span><br><span class="line">            <span class="comment">// item.offsetHeight ç”¨zepto çš„ heightä¿é™©ä¸€ç‚¹</span></span><br><span class="line">            item.addEventListener(<span class="string">'keyup'</span>, (e)=&gt; updateHeight(e, _height*multiple));</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">updateHeight</span>(<span class="params">e, _height</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> o = e.target;</span><br><span class="line">            o.style.height = <span class="string">'1px'</span>;</span><br><span class="line">            o.style.height = <span class="built_in">Math</span>.min(o.scrollHeight, _height) + <span class="string">'px'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123; <span class="built_in">console</span>.warn(<span class="string">'JSONZ textareaAutoHeight'</span>, e)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŠ äº†ä¸€ä¸ª <code>try...catch...</code> å¹¶ä¸”æŠŠ domList ç”¨es6è½¬ä¸ºæ•°ç»„ç±»å‹.</p>
<p>ä»¥åå†™å·¥å…·ç±»æ–¹æ³•ï¼Œå°½é‡åŠ å¤šä¸€ä¸ª <code>try..catch...</code> è‡³å°‘ä¿è¯ä¸å½±å“ä¸»æµç¨‹</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack ä»£ç åˆ†å‰²(å¼‚æ­¥åŠ è½½åŠ å¿«é¦–å±é€Ÿåº¦)</title>
    <url>/2017/05/webpack-%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2-%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E5%8A%A0%E5%BF%AB%E9%A6%96%E5%B1%8F%E9%80%9F%E5%BA%A6/</url>
    <content><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>å¯¹äºå•é¡µåº”ç”¨ï¼Œå°†æ‰€æœ‰ä»£ç æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚ï¼Œå¹¶ä¸”åé¢é¡µé¢ä¸éœ€è¦å†å»åŠ è½½js å¯ä»¥å‡å°‘ç™½é¡µæ—¶é—´ã€‚ ä½†æ˜¯å¯¹äºé¦–é¡µéœ€è¦å¿«é€ŸåŠ è½½çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦é‡æ–°è€ƒè™‘ä¸€ä¸‹ï¼Œ æ˜¯å¦å¯ä»¥æŠŠä¸€äº›ä¸éœ€è¦ç¬¬ä¸€æ—¶é—´æ‰§è¡Œçš„ä»£ç å¼‚æ­¥åŠ è½½è¿›æ¥ã€‚</p>
<p>Webpackæœ‰ä¸€ä¸ªåŠŸèƒ½å¯ä»¥å°†æ‚¨çš„ä»£ç åº“åˆ†è§£æˆæŒ‰éœ€åŠ è½½çš„â€œå—â€ï¼Œè¿™ä¸ªåŠŸèƒ½å« <code>ä»£ç åˆ†å‰²</code>ã€‚</p>
<p>Webpackçš„å¯¹äº<code>å—</code>çš„æ‰§è¡Œæ˜¯ï¼Œ å¼‚æ­¥åˆ›å»º<code>&lt;script&gt;</code>æ ‡ç­¾ï¼ŒæŠŠéœ€è¦åŠ è½½çš„è„šæœ¬åŠ è½½è¿›æ¥å†æ‰§è¡Œã€‚</p>
<p>å…·ä½“æœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•:</p>
<ul>
<li><code>CommonJs: require.ensure</code></li>
<li><code>AMD: require</code><br><code>ES6 Modules</code> æš‚ä¸æ”¯æŒ</li>
</ul>
<h1 id="AMD-require"><a href="#AMD-require" class="headerlink" title="AMD: require"></a>AMD: require</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(dependencies, callback)</span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>([<span class="string">"module-a"</span>, <span class="string">"module-b"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>dependencies: æ¨¡å—ä¾èµ–æ•°ç»„</li>
<li>callback: å›è°ƒå‡½æ•°</li>
</ul>
<h1 id="CommonJs-require-ensure"><a href="#CommonJs-require-ensure" class="headerlink" title="CommonJs: require.ensure"></a>CommonJs: require.ensure</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>.ensure(dependencies, callback, chunkName);</span><br><span class="line"><span class="built_in">require</span>.ensure([<span class="string">"module-a"</span>, <span class="string">"module-b"</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"module-a"</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>dependencies: ä¾èµ–çš„æ¨¡å—æ•°ç»„</li>
<li>callback: å›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°è°ƒç”¨æ—¶ä¼šä¼ ä¸€ä¸ªrequireå‚æ•°</li>
<li>chunkName: æ¨¡å—åï¼Œç”¨äºæ„å»ºæ—¶ç”Ÿæˆæ–‡ä»¶æ—¶å‘½åä½¿ç”¨</li>
</ul>
<p>å¯¹äº <code>CommonJs</code> æ–¹æ³•ï¼Œ ä¸ªäººåœ¨é¡¹ç›®ä¸­éƒ½æ˜¯è¿™ä¹ˆç”¨çš„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>.ensure([],<span class="built_in">require</span>=&gt;&#123;</span><br><span class="line">	<span class="keyword">const</span> menuBar = <span class="built_in">require</span>(<span class="string">'./menuBar'</span>);</span><br><span class="line">	<span class="keyword">const</span> upcomingTrips = <span class="built_in">require</span>(<span class="string">'./upcomingTrips'</span>);</span><br><span class="line">	<span class="built_in">require</span>(<span class="string">'./c'</span>);</span><br><span class="line"></span><br><span class="line">	menuBar.init();</span><br><span class="line">	upcomingTrips.init();</span><br><span class="line">&#125;,<span class="string">'index_later'</span>);</span><br></pre></td></tr></table></figure>
<p>ä¾èµ–ä¸å†™<code>dependencies</code> è€Œæ˜¯ç›´æ¥å†™åœ¨ å›è°ƒé‡Œé¢ã€‚ å› ä¸º<code>webpack</code>ä¼šå»é€’å½’æ‹¿ä¾èµ–æ¨¡å—ï¼Œæ‰€ä»¥å°±ç®—æˆ‘ <code>menuBar</code>é‡Œé¢ä¾èµ–åˆ°å…¶ä»–æ¨¡å—ï¼Œä¹Ÿä¼šè¢«ä¸‹è½½ä¸‹æ¥ æ‰€ä»¥é—®é¢˜ä¸å¤§ã€‚ ä½†æ˜¯å¦‚æœå¯¹äºå¤šæ¨¡å—äº’ç›¸ä¾èµ–çš„æƒ…å†µï¼Œå»ºè®®æŒ‰ç…§å®˜æ–¹demoå†™æ³• é˜²æ­¢é‡å¤åµŒå¥—æ‰“åŒ…ã€‚</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>cookie.js ç®€å•çš„cookieæ“ä½œæ’ä»¶</title>
    <url>/2017/05/cookie-js-%E7%AE%80%E5%8D%95%E7%9A%84cookie%E6%93%8D%E4%BD%9C%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<p>å¯¹æ“ä½œcookieåšä¸€äº›æ¥å£, åŒ…æ‹¬ <code>set</code>, <code>get</code>, <code>remove</code>, <code>clear</code>, <code>getAll</code> ç­‰ï¼Œ éƒ½æ”¯æŒæ‰¹é‡å¤„ç†ã€‚</p>
<h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–</span></span><br><span class="line">Cookie.get(<span class="string">'name'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®</span></span><br><span class="line">Cookie.set(&#123;<span class="attr">key</span>: val, <span class="attr">key1</span>: val1&#125;, opts);</span><br><span class="line">Cookie.set(<span class="string">'key'</span>, <span class="string">'val'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤æŸä¸ªå€¼</span></span><br><span class="line">Cookie.remove(name);</span><br><span class="line">Cookie.remove([name1, name2]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤Cookie</span></span><br><span class="line">Cookie.clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ‰€æœ‰cookie</span></span><br><span class="line">Cookie.getAll(); <span class="comment">// &#123;key: val&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h2><h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>è®¾ç½®cookie, å¦‚æœä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡cookie.set å¯ä»¥å‚è€ƒæ–‡æ¡£ <a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/cookies/set" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/cookies/set</a></p>
<p>æ·»åŠ cookieæ¯”è¾ƒç‰¹æ®Šï¼Œç›´æ¥ç”¨ <code>document.cookie = ä½ è¦è®¾ç½®çš„cookie</code> å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span>(name, value, opts) &#123;</span><br><span class="line">	<span class="keyword">if</span> (isObject(name)) &#123;</span><br><span class="line">	  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> name) &#123;</span><br><span class="line">	    <span class="keyword">if</span> (name.hasOwnProperty(key)) <span class="keyword">this</span>.set(key, name[key], value);</span><br><span class="line">	  &#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	  <span class="keyword">let</span> opt = isObject(opts)? opts: &#123; <span class="attr">expires</span>: opts&#125;,</span><br><span class="line">	    expires = <span class="keyword">typeof</span> opt.expires === <span class="string">'undefined'</span>? <span class="string">''</span>: opt.expires,</span><br><span class="line">	    expiresType = <span class="keyword">typeof</span> expires,</span><br><span class="line">	    path = <span class="keyword">typeof</span> opt.path === <span class="string">'undefined'</span>? <span class="string">';path=/'</span>: <span class="string">`;path=<span class="subst">$&#123;opt.path&#125;</span>`</span>,</span><br><span class="line">	    domain = opt.domain? <span class="string">`;domain=<span class="subst">$&#123;opt.domain&#125;</span>`</span>: <span class="string">''</span>,</span><br><span class="line">	    secure = opt.secure? <span class="string">';secure'</span>: <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">	  <span class="keyword">if</span> (expiresType === <span class="string">'string'</span> &amp;&amp; expires) expires = <span class="keyword">new</span> <span class="built_in">Date</span>(expires);</span><br><span class="line">	  <span class="keyword">else</span> <span class="keyword">if</span> (expiresType === <span class="string">'number'</span>) expires = <span class="keyword">new</span> <span class="built_in">Date</span>(+<span class="keyword">new</span> <span class="built_in">Date</span> + <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * expires);</span><br><span class="line">	  <span class="keyword">if</span> (expires !== <span class="string">''</span> &amp;&amp; <span class="string">'toGMTString'</span> <span class="keyword">in</span> expires) expires = <span class="string">';expires='</span> + expires.toGMTString();</span><br><span class="line"></span><br><span class="line">	  <span class="built_in">document</span>.cookie = [name, <span class="string">'='</span>, <span class="built_in">encodeURI</span>(value), expires, path, domain, secure].join(<span class="string">''</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><p>è·å–cookie å…¶å®å°±æ˜¯éå† <code>document.cookie</code> ç„¶åæ ¹æ® <code>name</code> å»åŒ¹é…</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">get</span>(name) &#123;</span><br><span class="line">	<span class="keyword">let</span> cookieName = name + <span class="string">'='</span>,</span><br><span class="line">	  ca = <span class="built_in">document</span>.cookie.split(<span class="string">';'</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ca.length; i++) &#123;</span><br><span class="line">	  <span class="keyword">let</span> cItem = (ca[i][<span class="number">0</span>] === <span class="string">' '</span>)? ca[i].slice(<span class="number">1</span>): ca[i];</span><br><span class="line">	  <span class="keyword">if</span> (cItem.indexOf(cookieName) === <span class="number">0</span>) <span class="keyword">return</span> <span class="built_in">decodeURI</span>(cItem.substr(cookieName.length+<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><p>ç§»é™¤cookieå…¶å®å°±æ˜¯æŠŠè¿™ä¸ªcookie è®¾ç½®ä¸ºè¿‡æœŸã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">remove(name) &#123;</span><br><span class="line">   <span class="keyword">let</span> names = <span class="built_in">Array</span>.isArray(name)? name: [name];</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; names.length; i++) &#123;</span><br><span class="line">     <span class="keyword">this</span>.set(names[i], <span class="string">''</span>, <span class="number">-1</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> names;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><p>éå†<code>document.cookie</code> æŠŠæ‰€æœ‰çš„cookie è°ƒç”¨ä¸€æ¬¡<code>remove</code>.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">clear(name) &#123;</span><br><span class="line">   <span class="keyword">return</span> name? <span class="keyword">this</span>.remove(name): <span class="keyword">this</span>.remove(<span class="built_in">Object</span>.keys(<span class="keyword">this</span>.getAll()));</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="getAll"><a href="#getAll" class="headerlink" title="getAll"></a>getAll</h3><p>è·å–æœ¬åœ°æ‰€æœ‰çš„cookieï¼Œ è¿”å› <code>{key: value}</code> å½¢å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">getAll() &#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">document</span>.cookie === <span class="string">''</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">   <span class="keyword">let</span> cookies = <span class="built_in">document</span>.cookie.split(<span class="string">'; '</span>), result = &#123;&#125;;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; cookies.length; i++) &#123;</span><br><span class="line">     <span class="keyword">let</span> item = cookies[i].split(<span class="string">'='</span>);</span><br><span class="line">     result[<span class="built_in">decodeURI</span>(item[<span class="number">0</span>])] = <span class="built_in">decodeURI</span>(item[<span class="number">1</span>]);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p><a href="https://github.com/jsonz1993/wheel/tree/master/cookie" target="_blank" rel="noopener">Jsonz-github</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> isObject = <span class="function"><span class="params">obj</span>=&gt;</span> !!value &amp;&amp; <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Object]'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Cookie = &#123;</span><br><span class="line">  <span class="keyword">get</span>(name) &#123;</span><br><span class="line">    <span class="keyword">let</span> cookieName = name + <span class="string">'='</span>,</span><br><span class="line">      ca = <span class="built_in">document</span>.cookie.split(<span class="string">';'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ca.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> cItem = (ca[i][<span class="number">0</span>] === <span class="string">' '</span>)? ca[i].slice(<span class="number">1</span>): ca[i];</span><br><span class="line">      <span class="keyword">if</span> (cItem.indexOf(cookieName) === <span class="number">0</span>) <span class="keyword">return</span> <span class="built_in">decodeURI</span>(cItem.substr(cookieName.length+<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span>(name, value, opts) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isObject(name)) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> name) &#123;</span><br><span class="line">        <span class="keyword">if</span> (name.hasOwnProperty(key)) <span class="keyword">this</span>.set(key, name[key], value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> opt = isObject(opts)? opts: &#123; <span class="attr">expires</span>: opts&#125;,</span><br><span class="line">        expires = <span class="keyword">typeof</span> opt.expires === <span class="string">'undefined'</span>? <span class="string">''</span>: opt.expires,</span><br><span class="line">        expiresType = <span class="keyword">typeof</span> expires,</span><br><span class="line">        path = <span class="keyword">typeof</span> opt.path === <span class="string">'undefined'</span>? <span class="string">';path=/'</span>: <span class="string">`;path=<span class="subst">$&#123;opt.path&#125;</span>`</span>,</span><br><span class="line">        domain = opt.domain? <span class="string">`;domain=<span class="subst">$&#123;opt.domain&#125;</span>`</span>: <span class="string">''</span>,</span><br><span class="line">        secure = opt.secure? <span class="string">';secure'</span>: <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (expiresType === <span class="string">'string'</span> &amp;&amp; expires) expires = <span class="keyword">new</span> <span class="built_in">Date</span>(expires);</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (expiresType === <span class="string">'number'</span>) expires = <span class="keyword">new</span> <span class="built_in">Date</span>(+<span class="keyword">new</span> <span class="built_in">Date</span> + <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * expires);</span><br><span class="line">      <span class="keyword">if</span> (expires !== <span class="string">''</span> &amp;&amp; <span class="string">'toGMTString'</span> <span class="keyword">in</span> expires) expires = <span class="string">';expires='</span> + expires.toGMTString();</span><br><span class="line"></span><br><span class="line">      <span class="built_in">document</span>.cookie = [name, <span class="string">'='</span>, <span class="built_in">encodeURI</span>(value), expires, path, domain, secure].join(<span class="string">''</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  remove(name) &#123;</span><br><span class="line">    <span class="keyword">let</span> names = <span class="built_in">Array</span>.isArray(name)? name: [name];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; names.length; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.set(names[i], <span class="string">''</span>, <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> names;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  clear(name) &#123;</span><br><span class="line">    <span class="keyword">return</span> name? <span class="keyword">this</span>.remove(name): <span class="keyword">this</span>.remove(<span class="built_in">Object</span>.keys(<span class="keyword">this</span>.getAll()));</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  getAll() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.cookie === <span class="string">''</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    <span class="keyword">let</span> cookies = <span class="built_in">document</span>.cookie.split(<span class="string">'; '</span>), result = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i= <span class="number">0</span>; i&lt; cookies.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> item = cookies[i].split(<span class="string">'='</span>);</span><br><span class="line">      result[<span class="built_in">decodeURI</span>(item[<span class="number">0</span>])] = <span class="built_in">decodeURI</span>(item[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://github.com/jaywcjlove/cookie.js" target="_blank" rel="noopener">https://github.com/jaywcjlove/cookie.js</a><br><a href="https://developer.mozilla.org/en-US/search?q=cookie" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/search?q=cookie</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>CORS è·¨åŸŸèµ„æºå…±äº«</title>
    <url>/2017/05/CORS-%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB/</url>
    <content><![CDATA[<p>CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†ï¼Œå…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰</p>
<blockquote>
<p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæµè§ˆå™¨ä¼šé™åˆ¶æŸäº›è·¨åŸŸè¯·æ±‚ã€‚</p>
</blockquote>
<p>è€Œ cors å…è®¸æµè§ˆå™¨æƒ³è·¨æºæœåŠ¡å™¨å‘èµ· <code>XMLHttpRequest</code> å’Œ <code>Fetch</code> æ¥å£è¯·æ±‚ã€‚</p>
<h3 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h3><p>åŒæºç­–ç•¥é™åˆ¶ä»ä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„å…³é”®çš„å®‰å…¨æœºåˆ¶ã€‚</p>
<p>é‚£ä¹ˆæµè§ˆå™¨æ˜¯æ ¹æ®ä»€ä¹ˆè§„åˆ™æ¥åˆ¤å®šæ˜¯å¦ä¸ºåŒæºå‘¢</p>
<p><code>http://www.zuzuche.com:80</code></p>
<ul>
<li>åè®®: http</li>
<li>ç«¯å£: 80 (é»˜è®¤ä¸º80 å¦‚æœæ²¡å†™ æµè§ˆå™¨ä¼šå¸®æˆ‘ä»¬åšè¿™äº›å·¥ä½œ)</li>
<li>åŸŸå <a href="http://www.zuzuche.com" target="_blank" rel="noopener">www.zuzuche.com</a></li>
</ul>
<p>å¦‚æœåè®®ï¼Œ ç«¯å£ï¼Œ åŸŸåä¸€è‡´ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šè®¤å®šæˆ‘ä»¬æ˜¯åœ¨åŒä¸ªæºä¸‹é¢ã€‚å¦åˆ™å°±ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener">å…·ä½“æ–‡æ¡£ç­‰å¯è§</a></p>
<h3 id="ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚</h3><p>ç®€å•è¯·æ±‚æŒ‡çš„æ˜¯</p>
<ul>
<li>è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€<ul>
<li>GET</li>
<li>POST</li>
<li>HEAD</li>
</ul>
</li>
<li>ä¸è‡ªå®šä¹‰æŸäº›å¤´éƒ¨å­—æ®µ<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Content-Type ï¼ˆéœ€è¦æ³¨æ„é¢å¤–çš„é™åˆ¶ï¼‰</li>
<li>DPR</li>
<li>Downlink</li>
<li>Save-Data</li>
<li>Viewport-Width</li>
<li>Width</li>
</ul>
</li>
<li>Content-Type ä¸ºä»¥ä¸‹å€¼ä¹‹ä¸€<ul>
<li>application/x-www-form-urlencoded</li>
<li>multipart/form-data</li>
<li>text/plain</li>
</ul>
</li>
</ul>
<p>éç®€å•è¯·æ±‚(é¢„æ£€è¯·æ±‚)æŒ‡çš„æ˜¯</p>
<ul>
<li>ä½¿ç”¨äº†ä¸‹é¢ä»»ä¸€HTTPæ–¹æ³•ï¼š<ul>
<li>PUT</li>
<li>DELETE</li>
<li>CONNECT</li>
<li>OPTIONS</li>
<li>TRACE</li>
<li>PATCH</li>
</ul>
</li>
<li>äººä¸ºè®¾ç½®æŸäº›å¤´éƒ¨å­—æ®µ<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Content-Type (but note the additional requirements below)</li>
<li>DPR</li>
<li>Downlink</li>
<li>Save-Data</li>
<li>Viewport-Width</li>
<li>Width</li>
</ul>
</li>
<li>Content-Typeçš„å€¼ä¸å±äºä¸‹åˆ—ä¹‹ä¸€<ul>
<li>application/x-www-form-urlencoded</li>
<li>multipart/form-data</li>
<li>text/plain</li>
</ul>
</li>
</ul>
<h4 id="å‘èµ·ä¸€ä¸ªç®€å•çš„è¯·æ±‚"><a href="#å‘èµ·ä¸€ä¸ªç®€å•çš„è¯·æ±‚" class="headerlink" title="å‘èµ·ä¸€ä¸ªç®€å•çš„è¯·æ±‚"></a>å‘èµ·ä¸€ä¸ªç®€å•çš„è¯·æ±‚</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fetch(<span class="string">''</span>);</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ä¼šå‘èµ·ä¸€ä¸ªç®€å•è¯·æ±‚ï¼Œå’Œæˆ‘ä»¬å¹³æ—¶å†™çš„<code>ajax</code>æ²¡å¤šå¤§åŒºåˆ«</p>
<h4 id="å‘èµ·ä¸€ä¸ªéç®€å•è¯·æ±‚"><a href="#å‘èµ·ä¸€ä¸ªéç®€å•è¯·æ±‚" class="headerlink" title="å‘èµ·ä¸€ä¸ªéç®€å•è¯·æ±‚"></a>å‘èµ·ä¸€ä¸ªéç®€å•è¯·æ±‚</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var invocation = new XMLHttpRequest();</span><br><span class="line">var url = &apos;http://bar.other/resources/post-here/&apos;;</span><br><span class="line">var body = &apos;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;person&gt;&lt;name&gt;Arun&lt;/name&gt;&lt;/person&gt;&apos;;</span><br><span class="line">    </span><br><span class="line">function callOtherDomain()&#123;</span><br><span class="line">  if(invocation)</span><br><span class="line">    &#123;</span><br><span class="line">      invocation.open(&apos;POST&apos;, url, true);</span><br><span class="line">      invocation.setRequestHeader(&apos;X-PINGOTHER&apos;, &apos;pingpong&apos;);</span><br><span class="line">      invocation.setRequestHeader(&apos;Content-Type&apos;, &apos;application/xml&apos;);</span><br><span class="line">      invocation.onreadystatechange = function()&#123;&#125;;</span><br><span class="line">      invocation.send(body); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">callOtherDomain();</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å‘èµ·çš„æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šå…ˆå‘ä¸€ä¸ª<code>options</code>è¯·æ±‚æœåŠ¡å™¨ï¼Œä»¥è·çŸ¥æµè§ˆå™¨æ˜¯å¦å…è®¸å®é™…è¯·æ±‚ï¼Œå¦‚æœå…è®¸å†ä¼šå‘å¤šä¸€ä¸ªçœŸå®è¯·æ±‚ã€‚<br><img src="./optionsè¯·æ±‚.png" alt="options"></p>
<h4 id="cors"><a href="#cors" class="headerlink" title="cors"></a>cors</h4><p>æˆ‘ä»¬è¦è·¨åŸŸè·å–èµ„æºï¼Œä¸»è¦è¦åå°äººå‘˜é…åˆã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬åªéœ€è¦æŠŠæŠ¥é”™ä¿¡æ¯ç»™åå°äººå‘˜çœ‹å°±çŸ¥é“æ€ä¹ˆåšäº†ï¼Œæ¯”å¦‚æˆ‘ç›´æ¥è°ƒç”¨ æŠ¥äº†ä¸€ä¸ªè·¨åŸŸé—®é¢˜</p>
<blockquote>
<p>Fetch API cannot load <a href="https://www.baidu.com/" target="_blank" rel="noopener">https://www.baidu.com/</a>. No â€˜Access-Control-Allow-Originâ€™ header is present on the requested resource. Origin â€˜<a href="https://developer.mozilla.org&#39;" target="_blank" rel="noopener">https://developer.mozilla.org&#39;</a> is therefore not allowed access. If an opaque response serves your needs, set the requestâ€™s mode to â€˜no-corsâ€™ to fetch the resource with CORS disabled.</p>
</blockquote>
<p>ç›´æ¥æŠŠé”™è¯¯ä¸¢ç»™åå°äººå‘˜ï¼Œä»–ä»¬å°±çŸ¥é“è®¾ç½®ä¸€ä¸ªå±æ€§ <code>Access-Control-Allow-Origi</code> ä¸€èˆ¬è®¾ç½®ä¸º <code>*</code> è°éƒ½å¯ä»¥è®¿é—® ä¹Ÿå¯ä»¥æ ¹æ®æƒ…æ™¯è®¾å®šç‰¹å®šçš„åŸŸåã€‚</p>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a></p>
</blockquote>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>web</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>è·å–æ»šåŠ¨æ¡å®½åº¦</title>
    <url>/2017/05/%E8%8E%B7%E5%8F%96%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%AE%BD%E5%BA%A6/</url>
    <content><![CDATA[<p>å¹³æ—¶å·¥ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦å…¨å±€ <code>loading åŠ  é®ç½©å±‚</code> çš„åŠŸèƒ½ã€‚è¿™æ—¶å€™ä¸€èˆ¬ä¼šè®¾ç½® <code>body { overflow: hidden }</code> é˜²æ­¢é¡µé¢æ»šåŠ¨ã€‚</p>
<p>ä½†æ˜¯åœ¨ pc ç«¯ å¦‚æœä¸€ä¸ªé¡µé¢æœ‰æ»šåŠ¨æ¡ï¼Œçªç„¶ç»™è®¾ç½®ä¸ºæ²¡æœ‰çš„è¯ï¼Œ å¯èƒ½ä¼šå‡ºç°æŠ–åŠ¨çš„ç°è±¡ã€‚ æ‰€ä»¥æˆ‘ä»¬çš„è§£å†³æ€è·¯æ˜¯ åœ¨è®¾ç½®æ ·å¼ä¹‹åï¼Œç»™body(ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–) åŠ å¤šä¸€ä¸ª <code>padding-right</code>æ¥å¡«å……åŸæœ¬æ»šåŠ¨æ¡çš„å®½åº¦ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollBarWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>),</span><br><span class="line">    styles = &#123;</span><br><span class="line">      width: <span class="string">'100px'</span>,</span><br><span class="line">      height: <span class="string">'10px'</span>,</span><br><span class="line">      overflow: <span class="string">'scroll'</span></span><br><span class="line">    &#125;, scrollWidth = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> styles) &#123;</span><br><span class="line">    div.style[key] = styles[key];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">  scrollWidth = div.offsetWidth - div.clientWidth;</span><br><span class="line">  div.remove();</span><br><span class="line">  <span class="keyword">return</span> scrollWidth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ªä»£ç æ€è·¯</span></span><br><span class="line">&#123;</span><br><span class="line">  body.overflow = hidden;</span><br><span class="line">  body.paddingRight += getScrollBarWidth();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>work</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»åŠ¨ç«¯é•¿æŒ‰å¼¹å‡ºå¤åˆ¶ç­‰é€‰é¡¹è®¾ç½®</title>
    <url>/2017/05/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%95%BF%E6%8C%89%E5%BC%B9%E5%87%BA%E5%A4%8D%E5%88%B6%E7%AD%89%E9%80%89%E9%A1%B9%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<p>ä»Šå„¿äº§å“å¤§ä½¬åæ§½ä¸€å¥:</p>
<blockquote>
<p>åœ¨æ‰‹æœºç«¯<code>chrome</code> æµè§ˆå™¨ä¸‹ ç‚¹ä¸€ä¸ªæ–‡å­—è€æ˜¯è¦å¼¹å‡ºä¸€ä¸ªè®©æˆ‘åˆ’è¯ å¥½çƒ¦ã€‚èƒ½ä¸èƒ½è®©ä»–ä¸è¦å¼¹å‡ºé‚£äº›ä¸œè¥¿æ¥</p>
</blockquote>
<p>å…¶å®ç°åœ¨å¾ˆå¤šçš„ app å†…åµŒ h5 é¡µé¢éƒ½æ˜¯å–œæ¬¢æŠŠæ‰‹æœºé»˜è®¤çš„é•¿æŒ‰å¼¹å‡ºèœå•[é€‰æ‹©ï¼Œ å¤åˆ¶ï¼Œ å‰ªåˆ‡] ç­‰ç¦æ‰ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// ç»™æ‰€æœ‰æ ·å¼éƒ½åŠ ä¸Šè¿›åˆ¶å¼¹å‡ºé•¿æŒ‰èœå•å±æ€§ã€‚</span><br><span class="line">* &#123;</span><br><span class="line">	<span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">	<span class="attribute">user-select</span>: none;	</span><br><span class="line">&#125;</span><br><span class="line">// è®°å¾—è¦ç»™è¡¨å•æ’é™¤ï¼Œä¸€èˆ¬è¡¨å•éƒ½æœ‰å¤åˆ¶é»è´´çš„éœ€æ±‚</span><br><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">textarea</span> &#123;<span class="attribute">-webkit-user-select</span>: text;<span class="attribute">user-select</span>: text;&#125;</span><br></pre></td></tr></table></figure>
<p>å…¼å®¹é—®é¢˜ ç§»åŠ¨ç«¯åŸºæœ¬å…¼å®¹</p>
<iframe height="498" width="100%" src="http://caniuse.com/#search=user-select" frameborder="0" allowfullscreen></iframe>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>work</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>React-Native é”™è¯¯æ€»ç»“</title>
    <url>/2017/05/React-Native-%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h2 id="No-bundle-URL-present"><a href="#No-bundle-URL-present" class="headerlink" title="No bundle URL present."></a>No bundle URL present.</h2><p><img src="./no_bundle_url_present.png" alt="no_bundle_url_present"><br><a href="https://github.com/facebook/react-native/issues/12754" target="_blank" rel="noopener">github issues</a></p>
<p>é¡¹ç›®åˆ›å»ºå¤§æ¦‚ä¸€ä¸ªæœˆäº†ï¼Œæœ€è¿‘çªç„¶æƒ³å†æ¡èµ·<code>react-native</code>å­¦ä¹ ï¼Œ ç›´æ¥è·‘<code>react-native run-ios</code>å°±æŠ¥çº¢å± <strong>No bundle URL present.</strong><br>github ä¸Šçš„ issues ç»™å‡ºäº†å‡ ç§è§£å†³æ–¹æ³•ã€‚</p>
<h3 id="é‡æ–°å®‰è£…ä¾èµ–"><a href="#é‡æ–°å®‰è£…ä¾èµ–" class="headerlink" title="é‡æ–°å®‰è£…ä¾èµ–"></a>é‡æ–°å®‰è£…ä¾èµ–</h3><ul>
<li>Run â€œreact-native run-iosâ€</li>
<li>When the error appears, run â€œnpm installâ€</li>
<li>Then run â€œreact-native run-iosâ€ again.</li>
</ul>
<h3 id="adding-NSAllowsLocalNetworking-to-Info-plist"><a href="#adding-NSAllowsLocalNetworking-to-Info-plist" class="headerlink" title="adding NSAllowsLocalNetworking to Info.plist"></a>adding NSAllowsLocalNetworking to Info.plist</h3><p>è¿™ä¸ªè§£å†³æ–¹æ³•æ…é‡ï¼Œå¦‚æœä¿®æ”¹äº†æ²¡æœ‰è§£å†³ è¯·è¿˜åŸè¯¥ä»£ç <br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;</span><br><span class="line">	&lt;dict&gt;</span><br><span class="line">		&lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;</span><br><span class="line">		&lt;true/&gt;</span><br><span class="line">		&lt;key&gt;NSAllowsArbitraryLoadsInWebContent&lt;/key&gt;</span><br><span class="line">		&lt;true/&gt;</span><br><span class="line">		&lt;key&gt;NSAllowsLocalNetworking&lt;/key&gt;</span><br><span class="line">		&lt;true/&gt;</span><br><span class="line">	&lt;/dict&gt;</span><br><span class="line">&lt;/key&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="8081ç«¯å£è¢«å ç”¨"><a href="#8081ç«¯å£è¢«å ç”¨" class="headerlink" title="8081ç«¯å£è¢«å ç”¨"></a>8081ç«¯å£è¢«å ç”¨</h3><p>macä¸‹kill è¯¥æ¥å£ï¼Œå†é‡æ–°è·‘ <code>run-ios</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo lsof -i :8071</span><br><span class="line">kill -9 &lt;PID&gt;</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨-xCode-ä¸­å¯åŠ¨é¡¹ç›®"><a href="#åœ¨-xCode-ä¸­å¯åŠ¨é¡¹ç›®" class="headerlink" title="åœ¨ xCode ä¸­å¯åŠ¨é¡¹ç›®"></a>åœ¨ xCode ä¸­å¯åŠ¨é¡¹ç›®</h3><h3 id="åˆ é™¤æœ¬åœ°é¡¹ç›®ä¸­çš„-ios-build-é‡æ–°è·‘-run-ios-buildé¡¹ç›®"><a href="#åˆ é™¤æœ¬åœ°é¡¹ç›®ä¸­çš„-ios-build-é‡æ–°è·‘-run-ios-buildé¡¹ç›®" class="headerlink" title="åˆ é™¤æœ¬åœ°é¡¹ç›®ä¸­çš„ ios/build é‡æ–°è·‘ run-ios buildé¡¹ç›®"></a>åˆ é™¤æœ¬åœ°é¡¹ç›®ä¸­çš„ <code>ios/build</code> é‡æ–°è·‘ <code>run-ios</code> buildé¡¹ç›®</h3><h3 id="å…³é—­æœ¬åœ°ä»£ç†ï¼Œæˆ–è€…è®¾ç½®ä¸å»ä»£ç†-127-0-0-1"><a href="#å…³é—­æœ¬åœ°ä»£ç†ï¼Œæˆ–è€…è®¾ç½®ä¸å»ä»£ç†-127-0-0-1" class="headerlink" title="å…³é—­æœ¬åœ°ä»£ç†ï¼Œæˆ–è€…è®¾ç½®ä¸å»ä»£ç† 127.0.0.1"></a>å…³é—­æœ¬åœ°ä»£ç†ï¼Œæˆ–è€…è®¾ç½®ä¸å»ä»£ç† <code>127.0.0.1</code></h3><h3 id="æ‰‹åŠ¨æŸ¥æ‰¾è§£å†³é—®é¢˜"><a href="#æ‰‹åŠ¨æŸ¥æ‰¾è§£å†³é—®é¢˜" class="headerlink" title="æ‰‹åŠ¨æŸ¥æ‰¾è§£å†³é—®é¢˜"></a>æ‰‹åŠ¨æŸ¥æ‰¾è§£å†³é—®é¢˜</h3><p>åœ¨ç»ˆç«¯è·‘ <code>react-native bundle --platform ios --dev false --entry-file index.ios.js --bundle-output ./ios/release/main.jsbundle --assets-dest ./ios/release/main.jsbundle</code> å¯ä»¥æ‰¾åˆ°æŠ¥é”™åŸå› ï¼Œ æ¯”å¦‚æˆ‘æ˜¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bundle: start</span><br><span class="line">bundle: finish</span><br><span class="line">bundle: Writing bundle output to: ./ios/release/main.jsbundle</span><br><span class="line"></span><br><span class="line">ENOENT: no such file or directory, open &apos;./ios/release/main.jsbundle&apos;</span><br><span class="line"></span><br><span class="line">å°‘äº† PureRenderMixin ç»„ä»¶</span><br><span class="line">npm i --save react@16.0.0-alpha.6</span><br></pre></td></tr></table></figure>
<h3 id="é‡æ–°è®¾ç½®-æœ¬åœ°loaclhost"><a href="#é‡æ–°è®¾ç½®-æœ¬åœ°loaclhost" class="headerlink" title="é‡æ–°è®¾ç½® æœ¬åœ°loaclhost"></a>é‡æ–°è®¾ç½® æœ¬åœ°loaclhost</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ sudo vi /private/etc/hosts</span><br><span class="line"></span><br><span class="line"># Add this line</span><br><span class="line">127.0.0.1       localhost</span><br></pre></td></tr></table></figure>
<h3 id="è®©-xcode-è·å–æƒé™å†é‡è¯•"><a href="#è®©-xcode-è·å–æƒé™å†é‡è¯•" class="headerlink" title="è®© xcode è·å–æƒé™å†é‡è¯•"></a>è®© xcode è·å–æƒé™å†é‡è¯•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo xcodebuild -license</span><br><span class="line"></span><br><span class="line">react-native run-ios</span><br></pre></td></tr></table></figure>
<h3 id="å¼€ä¸¤ä¸ªç»ˆç«¯"><a href="#å¼€ä¸¤ä¸ªç»ˆç«¯" class="headerlink" title="å¼€ä¸¤ä¸ªç»ˆç«¯"></a>å¼€ä¸¤ä¸ªç»ˆç«¯</h3><p>ç¬¬ä¸€ä¸ªç»ˆç«¯è·‘ <code>npm start</code><br>ç¬¬äºŒä¸ªç»ˆç«¯å†è·‘ <code>react-native</code></p>
<h3 id="æ¸…é™¤é¡¹ç›®-é‡è£…"><a href="#æ¸…é™¤é¡¹ç›®-é‡è£…" class="headerlink" title="æ¸…é™¤é¡¹ç›® é‡è£…"></a>æ¸…é™¤é¡¹ç›® é‡è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew unlink watchman</span><br><span class="line">brew install watchman</span><br><span class="line"></span><br><span class="line">rm -rf ios/build; rm -rf ios/build; rm -rf android/build; rm -rf android/app/build; rm -rf $TMPDIR/react* ; rm -f ios/main.jsbundle; rm -rf node_modules; rm yarn.lock || true; npm cache clean; yarn cache clean</span><br><span class="line"></span><br><span class="line">yarn install or npm install</span><br></pre></td></tr></table></figure>
<h3 id="æˆ‘è‡ªå·±çš„è§£å†³æ–¹æ³•"><a href="#æˆ‘è‡ªå·±çš„è§£å†³æ–¹æ³•" class="headerlink" title="æˆ‘è‡ªå·±çš„è§£å†³æ–¹æ³•"></a>æˆ‘è‡ªå·±çš„è§£å†³æ–¹æ³•</h3><p>æŠŠè‡ªå·±çš„é¡¹ç›®ä»£ç æ‹·è´å‡ºæ¥åï¼Œæ•´ä¸ªé¡¹ç›®åˆ äº†é‡æ–°å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Sample React Native App</span><br><span class="line"> * https://github.com/facebook/react-native</span><br><span class="line"> * @flow</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &#123;</span><br><span class="line">  AppRegistry,</span><br><span class="line">  StyleSheet,</span><br><span class="line">  Text,</span><br><span class="line">  View</span><br><span class="line">&#125; from &apos;react-native&apos;;</span><br><span class="line"></span><br><span class="line">class Parent extends Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      hit: false</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // æ¬¡æ•°æ¸…é›¶</span><br><span class="line">  timeReset() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  willHit() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillMount() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  shouldComponentUpdate() &#123;</span><br><span class="line">    return true;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUpdate() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View style=&#123;srtles.container&#125;&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          this.state.hit</span><br><span class="line">          ? &lt;Child /&gt;</span><br><span class="line">          : null</span><br><span class="line">        &#125;</span><br><span class="line">        &lt;Text style=&#123;styles.welcome&#125; onPress=&#123;this.timeReset.bind(this)&#125;&gt;</span><br><span class="line">          è€å­å¿ƒæƒ…å¥½ï¼Œä¸æä½ äº†</span><br><span class="line">        &lt;/Text&gt;</span><br><span class="line">        &lt;Text style=&#123;styles.instructions&#125; onPress=&#123;this.willHit.bind(this)&#125;&gt;</span><br><span class="line">          è€å­æä½ ä¸€æ¬¡</span><br><span class="line">        &lt;/Text&gt;</span><br><span class="line">        &lt;Text style=&#123;styles.instructions&#125; onPress=&#123;this.willHitT.bind(this)&#125;&gt;</span><br><span class="line">          è€å­è¦æä½ ä¸‰æ¬¡</span><br><span class="line">        &lt;/Text&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Child extends Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      times: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  timesPlus() &#123;</span><br><span class="line">    let time = this.state.times;</span><br><span class="line">    times++;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      times</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">        &lt;Text style=&#123;styles.welcome&#125; onPress=&#123;this.timesPlus.bind(this)&#125;&gt;</span><br><span class="line">          å„¿å­ä¸æœ</span><br><span class="line">        &lt;/Text&gt;</span><br><span class="line">        &lt;Text style=&#123;styles.instructions&#125;&gt;</span><br><span class="line">          ä½ æ‰“äº†æˆ‘ &#123;this.state.times&#125; æ¬¡</span><br><span class="line">        &lt;/Text&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const styles = StyleSheet.create(&#123;</span><br><span class="line">  container: &#123;</span><br><span class="line">    flex: 1,</span><br><span class="line">    justifyContent: &apos;center&apos;,</span><br><span class="line">    alignItems: &apos;center&apos;,</span><br><span class="line">    backgroundColor: &apos;#F5FCFF&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  welcome: &#123;</span><br><span class="line">    fontSize: 20,</span><br><span class="line">    textAlign: &apos;center&apos;,</span><br><span class="line">    margin: 10,</span><br><span class="line">  &#125;,</span><br><span class="line">  instructions: &#123;</span><br><span class="line">    textAlign: &apos;center&apos;,</span><br><span class="line">    color: &apos;#333333&apos;,</span><br><span class="line">    marginBottom: 5,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">AppRegistry.registerComponent(&apos;imooc&apos;, () =&gt; Parent);</span><br></pre></td></tr></table></figure>
<h2 id="Cannot-Find-entry-file-index-ios-js-in-any-of-the-project-roots"><a href="#Cannot-Find-entry-file-index-ios-js-in-any-of-the-project-roots" class="headerlink" title="Cannot Find entry file index.ios.js in any of the project roots"></a>Cannot Find entry file index.ios.js in any of the project roots</h2><p>çº¢å± æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°å…¥å£æ–‡ä»¶ã€‚</p>
<h3 id="æ£€æŸ¥è‡ªå·±çš„-index-ios-js-é‡Œé¢æœ‰æ²¡æœ‰è°ƒç”¨åˆå§‹åŒ–çš„å‡½æ•°å¦‚-AppRegistry-registerComponent-39-Your-project-name-39-gt-indexComponents"><a href="#æ£€æŸ¥è‡ªå·±çš„-index-ios-js-é‡Œé¢æœ‰æ²¡æœ‰è°ƒç”¨åˆå§‹åŒ–çš„å‡½æ•°å¦‚-AppRegistry-registerComponent-39-Your-project-name-39-gt-indexComponents" class="headerlink" title="æ£€æŸ¥è‡ªå·±çš„ index.ios.js é‡Œé¢æœ‰æ²¡æœ‰è°ƒç”¨åˆå§‹åŒ–çš„å‡½æ•°å¦‚ AppRegistry.registerComponent(&#39;Your project name&#39;, () =&gt; indexComponents);"></a>æ£€æŸ¥è‡ªå·±çš„ index.ios.js é‡Œé¢æœ‰æ²¡æœ‰è°ƒç”¨åˆå§‹åŒ–çš„å‡½æ•°å¦‚ <code>AppRegistry.registerComponent(&#39;Your project name&#39;, () =&gt; indexComponents);</code></h3><h3 id="https-github-com-facebook-react-native-issues-4968"><a href="#https-github-com-facebook-react-native-issues-4968" class="headerlink" title="https://github.com/facebook/react-native/issues/4968"></a><a href="https://github.com/facebook/react-native/issues/4968" target="_blank" rel="noopener">https://github.com/facebook/react-native/issues/4968</a></h3><p>github é‡Œé¢åˆ—ä¸¾äº†æˆªæ­¢ç¼–å†™ 300+ æ¡è¯„è®ºã€‚<br>å¯ä»¥æœï¼Œ ä¸è¿‡åŸå› åº”è¯¥æ˜¯æŸä¸ª<code>node_module</code> å‡çº§ä¾èµ–é€ æˆçš„ï¼Œ æ‰€ä»¥æ²¡äº‹ä¸è¦ä¹±å‡çº§å•Šã€‚</p>
<h2 id="TypeError-Network-request-failed"><a href="#TypeError-Network-request-failed" class="headerlink" title="TypeError: Network request failed"></a>TypeError: Network request failed</h2><p>ios ä¸‹è¯·æ±‚è€æ˜¯å¤±è´¥ï¼Œè«åå…¶å¦™çš„å¤±è´¥ã€‚</p>
<p>åé¢å‘ç°è¯´æ˜¯å› ä¸ºä¹‹å‰ clean projectã€‚ æ²¡æœ‰é‡æ–°è®¾ç½® ios çš„è¯·æ±‚ http æƒé™ã€‚</p>
<ol>
<li>æ‰“å¼€<code>xCode</code></li>
<li>æ‰¾åˆ° <code>Info.plist</code></li>
<li>åœ¨ <code>Information Property List</code> ä¸‹æ–°å¢ <code>NSAppTransportSecurity</code> è¿™æ—¶å€™ä¼šæç¤ºä½ å·²ç»æœ‰äº† <code>NSAppTransportSecurity</code> æ˜¯å¦è¦ä¿®æ”¹ï¼Œ ç‚¹å‡»æ˜¯</li>
<li>æ­¤æ—¶ä½ ä¼šå‘ç° <code>NSAppTransportSecurity</code> å·²ç»æ”¹åä¸º <code>App Transport Security Settings</code>ã€‚ æœ¬æœºxCode ç‰ˆæœ¬ä¸º <code>8.3.2</code>;</li>
<li>ç‚¹å‡» <code>App Transport Security Settings</code> å³è¾¹çš„åŠ å· æ·»åŠ <code>NSAllowsArbitraryLoads</code>(8.3.2ç‰ˆæœ¬ä¸º <code>Allow Arbitrary Loads</code>) åé¢çš„å€¼æ”¹ä¸º <code>YES</code>ã€‚</li>
<li>é‡å¯é¡¹ç›®å³å¯</li>
</ol>
<p>å…·ä½“å¯è§<a href="https://stackoverflow.com/questions/31254725/transport-security-has-blocked-a-cleartext-http" target="_blank" rel="noopener">https://stackoverflow.com/questions/31254725/transport-security-has-blocked-a-cleartext-http</a></p>
<h2 id="react-native-image-picker-é—®é¢˜"><a href="#react-native-image-picker-é—®é¢˜" class="headerlink" title="react-native-image-picker é—®é¢˜"></a><code>react-native-image-picker</code> é—®é¢˜</h2><h3 id="é€‰æ‹©å›¾ç‰‡æ—¶å¥”æºƒé”™è¯¯"><a href="#é€‰æ‹©å›¾ç‰‡æ—¶å¥”æºƒé”™è¯¯" class="headerlink" title="é€‰æ‹©å›¾ç‰‡æ—¶å¥”æºƒé”™è¯¯"></a>é€‰æ‹©å›¾ç‰‡æ—¶å¥”æºƒé”™è¯¯</h3><p>å…¶å®æ˜¯å› ä¸ºå®‰è£… <code>react-native-image-picker</code> ä¸å¤Ÿç»†å¿ƒï¼Œåªçœ‹åˆ°è‡ªåŠ¨å®‰è£…çš„æ—¶å€™å†™ç€</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">react-native link</span><br></pre></td></tr></table></figure>
<p>æ²¡çœ‹åˆ°è¿˜è¦æ‰‹åŠ¨åœ¨ <code>Info.plist</code> ä¸Šæ·»åŠ ä¸€äº›ä¿¡æ¯ï¼Œç”¨äºå¤‡æ³¨éœ€è¦ è®¿é—®ç…§ç‰‡æƒé™ï¼Œéº¦å…‹é£æƒé™ï¼ˆå½•åƒéœ€è¦ï¼‰ï¼Œ ç›¸æœºæƒé™ç­‰ã€‚</p>
<p>æ‰€ä»¥ç¨‹åºä¼šæŠ¥ä¸€ä¸ª <strong>SIGABRT</strong> çš„é”™è¯¯.</p>
<p><img src="./SIGABRT_ERROR.png" alt="./SIGABRT_ERROR.png"></p>
<h3 id="Cannot-read-property-â€˜showImagePickerâ€™-of-undefinde"><a href="#Cannot-read-property-â€˜showImagePickerâ€™-of-undefinde" class="headerlink" title="Cannot read property â€˜showImagePickerâ€™ of undefinde"></a>Cannot read property â€˜showImagePickerâ€™ of undefinde</h3><p>å¦‚æœé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºä½ å®‰è£…è¯¥ç»„ä»¶åæ²¡æœ‰é‡ç°ç¼–è¯‘iosä»£ç ï¼Œé‡æ–°ç¼–è¯‘ä¸€æ¬¡å³å¯ã€‚</p>
<p>å¦‚æœè¿˜ä¸èµ·ä½œç”¨å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…æ­£ç¡®ï¼Œå†è·‘å‘½ä»¤ <code>rm -rf ios/build &amp;&amp; react-native run-ios</code></p>
<h1 id="React-Native-å‘çœŸçš„æ˜¯é‡è¿‡æœ€å¤šçš„ä¸€ä¸ª"><a href="#React-Native-å‘çœŸçš„æ˜¯é‡è¿‡æœ€å¤šçš„ä¸€ä¸ª" class="headerlink" title="React-Native å‘çœŸçš„æ˜¯é‡è¿‡æœ€å¤šçš„ä¸€ä¸ª"></a>React-Native å‘çœŸçš„æ˜¯é‡è¿‡æœ€å¤šçš„ä¸€ä¸ª</h1>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>imooc React-Native æ–‡å­—å°æ¸¸æˆ</title>
    <url>/2017/05/imooc-React-Native-%E6%96%87%E5%AD%97%E5%B0%8F%E6%B8%B8%E6%88%8F/</url>
    <content><![CDATA[<p>æ–‡å­—å°æ¸¸æˆéœ€æ±‚ï¼š</p>
<p>è€å­ &amp;&amp; å„¿å­</p>
<p>-è€å­æ‰“å„¿å­ï¼š</p>
<pre><code>- å¯ä»¥æ‰“ä¸€æ¬¡ è®°ä»‡æ¬¡æ•°+1
- å¯ä»¥æ‰“ä¸‰æ¬¡ è®°ä»‡æ¬¡æ•°+3
- å¯ä»¥ç»™ä¸ªç³– è®°ä»‡æ¬¡æ•°æ¸…é›¶
</code></pre><ul>
<li>å„¿å­åé©³è€å­ï¼š<ul>
<li>å„¿å­ä¸æœ è€å­æ‰“ä¸€æ¬¡</li>
<li>å„¿å­éª‚è€å­ è€å­æ‰“ä¸‰æ¬¡</li>
<li>å„¿å­ä¹°å•¤é…’ç»™è€å­ è®°ä»‡æ¬¡æ•°æ¸…é›¶</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>learn</tag>
        <tag>imooc</tag>
        <tag>React-Native</tag>
      </tags>
  </entry>
  <entry>
    <title>setTimeout &amp;&amp; setInterval å­¦ä¹ </title>
    <url>/2017/05/setTimeout-setInterval-%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p>å®šæ—¶å™¨å¤§å®¶å¹³æ—¶åšjså¼€å‘éƒ½ä¸é™Œç”Ÿäº† æœ€å¸¸è§çš„åº”ç”¨åº”è¯¥å°±æ˜¯éªŒè¯ç çš„å€’è®¡æ—¶ æˆ– æŸæ®µå‡½æ•°çš„å¼‚æ­¥æ‰§è¡Œäº†ã€‚</p>
<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>jsçš„å®šæ—¶å™¨ä¸»è¦æœ‰ <code>setTimeout</code> å’Œ <code>setInterval</code>.</p>
<p>è¿™ä¸¤ä¸ªå‡½æ•°æ‰§è¡Œåï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå®šæ—¶å™¨çš„ç¼–å·ï¼Œåé¢å¯ä»¥é€šè¿‡<code>clearTimeout</code> æˆ– <code>clearInterval</code>æ¥æ¸…é™¤è¯¥å®šæ—¶å™¨ã€‚</p>
<p><code>setTimeout</code>å’Œ<code>setInterval</code>çš„è¿è¡Œæœºåˆ¶éƒ½æ˜¯ å°†ä»£ç ç§»é™¤æœ¬æ¬¡æ‰§è¡Œï¼Œç­‰å¾…ä¸‹ä¸€è½®çš„ Event Loopå†æ£€æŸ¥æ˜¯å¦åˆ°æ‰§è¡Œçš„æ—¶é—´ã€‚<br>æ‰€ä»¥å¯ä»¥ç”¨ <code>setTimeout(()=&gt; {}, 0)</code> æ¥æ¨¡æ‹Ÿæ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚</p>
<h2 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout"></a>setTimeout</h2><h3 id="æ‰§è¡Œå‡½æ•°"><a href="#æ‰§è¡Œå‡½æ•°" class="headerlink" title="æ‰§è¡Œå‡½æ•°"></a>æ‰§è¡Œå‡½æ•°</h3><p>setTimeout æ˜¯ç”¨æ¥åˆ¶å®šæŸæ®µå‡½æ•°æˆ–ä»£ç ï¼Œåœ¨å¤šå°‘æ¯«ç§’å»¶è¿Ÿåæ‰§è¡Œã€‚<br>å¦‚æœä¼ å…¥çš„æ˜¯ä¸€æ®µä»£ç ï¼Œå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ã€‚è¿™æ—¶å€™jsä¼šè°ƒç”¨<code>eval</code>æ¥æ‰§è¡Œè¯¥ä»£ç ï¼Œ å‡ºäºå®‰å…¨ä¸æ€§èƒ½è€ƒè™‘ å»ºè®®ç›´æ¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°çš„å½¢å¼æ¥æ‰§è¡Œã€‚<br>delay ä¸ºå»¶è¿Ÿçš„æ—¶é—´ï¼Œå•ä½æ˜¯<code>ms</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> timerId = setTimeout(func|code, delay);</span><br></pre></td></tr></table></figure></p>
<h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><p>setTimeoutå¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å¼€å§‹ä¸ºä¼ å…¥è¿è¡Œæ–¹æ³•çš„å‚æ•°ã€‚<br>å¾ˆç»å…¸çš„é—­åŒ…é¢è¯•é¢˜å°±å¯ä»¥ç”¨setTimeoutä¼ å‚æ¥è§£å†³<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++) &#123; setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(i)&#125; ,<span class="number">0</span>) &#125; <span class="comment">// è¿è¡Œç»“æœæ˜¯è¾“å‡º10ä¸ª10</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++) &#123; setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123; <span class="built_in">console</span>.log(i)&#125; ,<span class="number">0</span>, i) &#125; <span class="comment">// è¿è¡Œç»“æœæ˜¯è¾“å‡º0-9</span></span><br></pre></td></tr></table></figure></p>
<h3 id="è¿è¡Œç¯å¢ƒ"><a href="#è¿è¡Œç¯å¢ƒ" class="headerlink" title="è¿è¡Œç¯å¢ƒ"></a>è¿è¡Œç¯å¢ƒ</h3><p>setTimeoutçš„è¿è¡Œç¯å¢ƒæ˜¯å…¨å±€(eval)ã€‚<br><figure class="highlight javascript"><figcaption><span>demo1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">	x: <span class="number">2</span>,</span><br><span class="line">	y: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setTimeout(o.y, <span class="number">0</span>); <span class="comment">// æ­¤æ—¶è¾“å‡ºçš„æ˜¯1ï¼Œå› ä¸ºå…¨å±€(window)ä¸Šçš„xå±æ€§æ˜¯1</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><figcaption><span>demo2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">login</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.login = login;</span><br><span class="line">	<span class="keyword">this</span>.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.login);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> User(<span class="string">'John'</span>);</span><br><span class="line">setTimeout(user.sayHi, <span class="number">0</span>); <span class="comment">// undefined å› ä¸ºæ‰§è¡Œçš„æ—¶å€™ å…¨å±€å¯¹è±¡æ²¡æœ‰ loginè¿™ä¸ªå±æ€§</span></span><br></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ³•ä¸€ï¼š æ”¾åˆ°ä¸€ä¸ªåŒ¿åå‡½æ•°é‡Œé¢æ‰§è¡Œ<br><figure class="highlight javascript"><figcaption><span>æ–¹æ³•1</span></figcaption><table><tr><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	user.sayHi();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>è§£å†³æ–¹æ³•äºŒï¼š ç¼“å­˜å½“å‰çš„thiså˜é‡<br><figure class="highlight javascript"><figcaption><span>æ–¹æ³•2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">	setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		_this.value = <span class="string">'ok'</span>;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure></p>
<p>è§£å†³æ–¹æ³•ä¸‰ï¼š ç›®å‰é¡¹ç›®ä¸­æœ€å¸¸ç”¨ï¼Œ ç”¨<code>es6</code>çš„<code>ç®­å¤´å‡½æ•°</code><br><figure class="highlight javascript"><figcaption><span>æ–¹æ³•3</span></figcaption><table><tr><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> user.sayHi(), <span class="number">0</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h2><p><code>setInterval</code>çš„ä½¿ç”¨æ–¹æ³•ä¸å‚æ•°å’Œ<code>setTimeout</code>ä¸€è‡´ã€‚ ä¸è¿‡<code>setInterval</code>æ˜¯é—´éš” Xms æ‰§è¡Œä¸€æ¬¡è¯¥å‡½æ•°ã€‚<br>ä½†å®é™…ä¸Š å‡½æ•°æ‰§è¡Œéœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥ä¸¤æ¬¡æ‰§è¡Œå‡½æ•°ä¹‹é—´çš„é—´éš”ä¼šå°äº <code>setInterval</code>æŒ‡å®šçš„æ—¶é—´.</p>
<h3 id="setInterval-æ‰§è¡Œæ—¶é—´"><a href="#setInterval-æ‰§è¡Œæ—¶é—´" class="headerlink" title="setInterval æ‰§è¡Œæ—¶é—´"></a>setInterval æ‰§è¡Œæ—¶é—´</h3><p>å‡å®š<code>setInterval</code>æŒ‡å®šæ¯100msæ‰§è¡Œä¸€æ¬¡ï¼Œæ¯æ¬¡æ‰§è¡Œçš„å‡½æ•°è€—æ—¶ä¸º 5ms, é‚£ä¹ˆç¬¬ä¸€æ¬¡æ‰§è¡Œç»“æŸåçš„ 95ms åä¼šæ‰§è¡Œç¬¬äºŒæ®µå‡½æ•°ã€‚<br>å¦‚æœæŸæ¬¡æ‰§è¡Œç‰¹åˆ«è€—æ—¶ å¦‚ 105ms, é‚£ä¹ˆ å½“å®ƒç»“æŸåï¼Œä¼šç«‹å³æ‰§è¡Œä¸‹ä¸€æ¬¡çš„å‡½æ•°ã€‚ <strong>æ­¤æ®µä¸ºæŸåšå®¢çœ‹åˆ°çš„ï¼Œä¸ªäººå®è·µå¾—å‡ºæ‰§è¡Œæ—¶é—´æœ‰å¿«ä¸æ…¢çš„åå·®æ²¡æœ‰ç»å¯¹æå‰æ‰§è¡Œ</strong></p>
<p>ä¸‹é¢çœ‹ä»£ç ä¾‹å­<br><figure class="highlight javascript"><figcaption><span>demo3</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// è€—æ—¶ 5ms çš„æŸä¸ªæ“ä½œ</span></span><br><span class="line">	handleMouseClick();</span><br><span class="line">	<span class="comment">// è€—æ—¶ 5ms çš„æŸä¸ªæ“ä½œ</span></span><br><span class="line">	setInterval(timerTask, <span class="number">10</span>);</span><br><span class="line">	<span class="comment">// è€—æ—¶ 5ms çš„æŸä¸ªæ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleMouseClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// è€—æ—¶ 8ms çš„æŸä¸ªæ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timerTask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// è€—æ—¶ 2ms çš„æŸä¸ªæ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">init();</span><br></pre></td></tr></table></figure></p>
<p>ç½‘ä¸Šåšå®¢è¯´æ³•ï¼ˆæ­¤å¤„ä¿ç•™æ„è§ï¼‰ï¼š<br>0-15ms: è¿è¡Œinit<br>15-23ms: è¿è¡ŒhandleMouseClickå‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯åœ¨5msæ—¶è§¦å‘çš„ï¼Œåº”è¯¥åœ¨é‚£ä¸ªæ—¶å€™å°±ç«‹å³è¿è¡Œï¼Œä½†æ˜¯ç”±äºå•çº¿ç¨‹çš„å…³ç³»ï¼Œå¿…é¡»ç­‰åˆ°initå‡½æ•°å®Œæˆä¹‹åå†è¿è¡Œã€‚<br>23-25ms: è¿è¡ŒtimerTaskå‡½æ•°ã€‚ è§„å®šæ¯10msè¿è¡Œä¸€æ¬¡ï¼Œæ—¢åœ¨20msï¼Œ 30msï¼Œ 40msä¼šè¿è¡Œã€‚ä½†æ˜¯ç”±äºå½“å‰è¿˜æœ‰ä»»åŠ¡åœ¨è¿è¡Œï¼Œå› æ­¤å¿…é¡»å»¶è¿Ÿåˆ°å‰é¢ä»»åŠ¡å®Œæˆåå†è¿è¡Œ<br>30-32ms: è¿è¡ŒtimerTask<br>40-42ms: è¿è¡ŒtimerTask</p>
<p>ç”±äºå¹³æ—¶debugè°ƒè¯•æ—¶ï¼Œåœ¨<code>handleMouseClick</code>åº”è¯¥ä¸ä¼šç­‰åˆ°<code>init</code>è¿è¡Œåå†æ‰§è¡Œã€‚äºæ˜¯æŠ±ç€å­¦ä¹ çš„æ€åº¦è‡ªå·±å†™äº†ä¸€æ®µä»£ç <br><figure class="highlight javascript"><figcaption><span>demo4</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_init</span>(<span class="params"></span>) </span>&#123; demo(<span class="number">10</span>);<span class="built_in">console</span>.log(<span class="number">1</span>); demo(<span class="number">10</span>); handle(); demo(<span class="number">10</span>);<span class="built_in">console</span>.log(<span class="number">2</span>); setInterval(<span class="function"><span class="params">()</span>=&gt;</span> <span class="built_in">console</span>.log(<span class="string">'setInterval'</span>), <span class="number">1000</span>); <span class="built_in">console</span>.log(<span class="number">3</span>) &#125;; <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>) </span>&#123;demo(<span class="number">15</span>); <span class="built_in">console</span>.log(<span class="string">'handle'</span>)&#125;;<span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">i</span>) </span>&#123;<span class="keyword">var</span> sum = <span class="number">0</span>; <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; i * <span class="number">1000000</span>; j++) &#123;sum += j;&#125;&#125;;</span><br><span class="line">_init();</span><br></pre></td></tr></table></figure></p>
<p>åˆ©ç”¨forå¾ªç¯æ¥é€ æˆè¿è¡Œå®è·µçš„å»¶é•¿<br>è¿è¡Œ <code>_init()</code> ç»“æœæ˜¯ï¼š<br>â‘  è¾“å‡º<code>1</code> éš”26mså è¾“å‡º<code>handle</code> éš”10mså è¾“å‡º<code>2</code> åŒä¸€æ—¶é—´è¾“å‡º<code>3</code>(æ­¤å¤„å¯ä»¥ç†è§£æˆæ‰§è¡Œçš„æ—¶é—´å°äº1ms)ã€‚æ­¤æ—¶ _init()æ‰§è¡Œç»“æŸ ç”±äºæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥ä¼šé»˜è®¤è¿”å› <code>undefined</code><br>â‘¡ <code>_init()</code>æ‰§è¡Œç»“æŸä¹‹å å†å»è·‘ <code>setIntervalå®šæ—¶å™¨</code> æ‰€ä»¥ éš” 1000ms(å®é™…æ˜¯1005ms) åè¾“å‡ºç¬¬ä¸€ä¸ª<code>setInterval</code>ã€‚é—´éš” 999msåè¾“å‡ºç¬¬äºŒä¸ª<code>setInterval</code> é—´éš” 997msåè¾“å‡ºç¬¬ä¸‰ä¸ª <code>setInterval</code><br>æ‰€ä»¥è§‰å¾—è¯´<code>setInterval</code>æ˜¯å½“å‰æ‰€æœ‰å‡½æ•°è¿è¡Œåæ‰å¼€å¯å®šæ—¶çš„ï¼Œè€Œä¸æ˜¯æ‰§è¡Œåˆ°<code>setInterval</code>çš„æ—¶å€™å¼€å§‹è®¡æ—¶ã€‚<br>è€Œä¸”è¿è¡Œçš„é—´éš”ä¸æ˜¯å›ºå®šåå¤šæˆ–åå°‘</p>
<p>æœ€åå†ç»™å‡ºä¸€ä¸ªä¾‹å­ç†è§£<code>setTimeout</code>çš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶<br><figure class="highlight javascript"><figcaption><span>demo5</span></figcaption><table><tr><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Timeout"</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">x</span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a() å¼€å§‹è¿è¡Œ"</span>);</span><br><span class="line">    b(x);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a() ç»“æŸè¿è¡Œ"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params">y</span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b() å¼€å§‹è¿è¡Œ"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ä¼ å…¥çš„å€¼ä¸º"</span> + y);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b() ç»“æŸè¿è¡Œ"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"å½“å‰ä»»åŠ¡å¼€å§‹"</span>);</span><br><span class="line">a(<span class="number">42</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"å½“å‰ä»»åŠ¡ç»“æŸ"</span>);</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœä¸º<br>å½“å‰ä»»åŠ¡å¼€å§‹<br>a() å¼€å§‹è¿è¡Œ<br>b() å¼€å§‹è¿è¡Œ<br>ä¼ å…¥çš„å€¼æ˜¯ 42<br>b() è¿è¡Œç»“æŸ<br>a() è¿è¡Œç»“æŸ<br>å½“å‰ä»»åŠ¡ç»“æŸ<br>timeout</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æ— ã€‚</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>webstorm å¿«æ·é”®æ•´ç†</title>
    <url>/2017/05/webstorm/</url>
    <content><![CDATA[<p><code>alt</code> =&gt; <code>option</code><br><code>command</code> =&gt; <code>å¼€å§‹</code><br><code>control</code> =&gt; <code>ctrl</code><br><code>button 1 click</code> é¼ æ ‡å·¦é”®<br><code>button 2 click</code> é¼ æ ‡å³é”®<br><em>æ–œä½“</em> ä¸ºä¸å¸¸ç”¨<br><strong>ç²—ä½“</strong> ä¸ºå¸¸ç”¨</p>
<h3 id="Editor-Actions"><a href="#Editor-Actions" class="headerlink" title="Editor Actions"></a>Editor Actions</h3><ul>
<li><strong>Add or Remove Caret  =&gt;  ç±»ä¼¼sublimeçš„å¤šè¡Œç¼–è¾‘åŠŸèƒ½ =&gt; <code>alt + button1 Click</code></strong></li>
<li><em>Add Rectangular selection on mouse drag =&gt;  é¼ æ ‡çŸ©å½¢é€‰æ‹© =&gt; <code>remove keyMap</code> æ²¡å•¥åµç”¨</em></li>
<li>Backspace =&gt; é€€æ ¼ï¼ˆæ—¢åˆ é™¤ï¼‰=&gt; <code>Backspace</code> é”®ç›˜ä¸Šçš„é€€æ ¼é”®ï¼Œæ²¡ä»€ä¹ˆå¯è¯´çš„</li>
<li><em>Move Caret Backward  a Paragraph  =&gt; ç§»åŠ¨å…‰æ ‡åˆ°ä¸Šä¸€ä¸ªæ®µè½ï¼ˆæ—¢ä¸Šä¸€ä¸ªç©ºè¡Œå¤„ï¼‰ =&gt; é»˜è®¤<code>æ— </code></em></li>
<li>Choose lookup item =&gt; <code>Enter</code> =&gt; æ—¢é€‰æ‹©å½“å‰æ™ºèƒ½æç¤ºçš„é¡¹</li>
<li><em>Choose Lookup Item and Invoke Complete Statement =&gt; ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</em></li>
<li><em>Choose Lookup Item and Insert Dot =&gt; é€‰æ‹©å½“å‰é¡¹å¹¶å†æœ€ååŠ å…¥<code>.</code> æ—¢è‡ªåŠ¨å®Œæˆ<code>Enter + .</code></em></li>
<li><em>Choose Lookup Item Replace =&gt;  ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</em></li>
<li><em>Clone Caret Above =&gt; åœ¨å½“å‰è¡Œä¸Šåˆ›å»ºå¤šä¸€ä¸ªå…‰æ ‡ï¼Œä¸å¸¸ç”¨</em></li>
<li><em>Clone Caret Below =&gt; åœ¨å½“å‰è¡Œä¸‹åˆ›å»ºå¤šä¸€ä¸ªå…‰æ ‡ï¼Œä¸å¸¸ç”¨</em></li>
<li><em>Move Caret to Code Block End =&gt; å°†å…‰æ ‡ç§»è‡³å—ä»£ç ç»“æŸ =&gt; <code>command + ]</code> || <code>alt + ]</code></em></li>
<li><em>Move Caret to Code Block Start =&gt; å°†å…‰æ ‡ç§»è‡³å—ä»£ç å¼€å§‹ =&gt; <code>command + [</code> || <code>atl + [</code></em></li>
<li><em>Move Caret to Code Block End with Selection =&gt; å°†å…‰æ ‡ç§»è‡³å—ä»£ç ç»“æŸå¹¶é€‰æ‹©, ä¸å¸¸ç”¨</em></li>
<li><em>Move Caret to Code Block Start with Selection =&gt; å°†å…‰æ ‡ç§»è‡³å—ä»£ç å¼€å§‹å¹¶é€‰æ‹©, ä¸å¸¸ç”¨</em></li>
<li><em>Complete Current Statement =&gt; å®Œæˆå½“å‰å£°æ˜ï¼ˆè¯­å¥ï¼‰ï¼Œæ—¢å¦‚æœè¯¥è¡Œç»“æŸåˆ™åŠ <code>;</code> å¦‚æœæ˜¯ <code>if (a = 10)</code> åˆ™å¼€ä¸€ä¸ª<code>{}</code> å¹¶å°†å…‰æ ‡ç§»è‡³èŠ±æ‹¬å·å†… =&gt; é»˜è®¤ <code>ctrl + shift + enter</code> ä¸å¸¸ç”¨</em></li>
<li><em>Create Rectangular Selection =&gt; åˆ›å»ºçŸ©å½¢é€‰æ‹© =&gt; <code>alt+shift+button2 click</code></em></li>
<li><em>Cut Line Backward =&gt; ä»å½“å‰å…‰æ ‡å‘å‰é€‰æ‹©å¹¶å‰ªåˆ‡</em></li>
<li><em>Cut up to Line End =&gt; ä»å½“å‰å…‰æ ‡å‘åé€‰æ‹©å¹¶å‰ªåˆ‡</em></li>
<li><em>Decrease Font Size =&gt; ç¼©å°å­—ä½“</em></li>
<li>Delete =&gt; åˆ é™¤ (å’ŒBackspaceç”¨èµ·æ¥æ•ˆæœä¸€è‡´) =&gt; é€€æ ¼é”®</li>
<li><em>Delete Line =&gt; åˆ é™¤æ•´è¡Œ ä¸€èˆ¬æˆ‘éƒ½ä¼šç”¨ <code>command + x</code> || <code>ctrl + x</code> ä»£æ›¿ï¼Œæ—¢ç›´æ¥å‰ªåˆ‡æ•´è¡Œ</em></li>
<li><em>Delete to Line End =&gt; å½“å‰å…‰æ ‡åˆ é™¤åˆ°è¡Œå°¾ï¼Œä¸€èˆ¬æˆ‘ç”¨<code>command + ç®­å¤´ + shift</code>é€‰ä¸­åå†åˆ é™¤</em></li>
<li><em>Delete to Line Start åŒä¸Š</em></li>
<li><em>Delete to word end &amp;&amp; Delete to word start ç­‰åŒç†ä¸èµ˜è¿°</em></li>
<li>Down with Selection å‘ä¸‹å¹¶é€‰æ‹© <code>Shift + å‘ä¸‹ç®­å¤´</code></li>
<li><em>Duplicate Line or Selection å¤åˆ¶è¯¥è¡Œ =&gt; é»˜è®¤ä¸º<code>ctrl + d</code>ï¼Œ ä½†æˆ‘ç§»é™¤äº†</em></li>
<li><em>Move caret forward a Paragraph åŒä¸Š</em></li>
<li><em>Hungry Backspace ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</em></li>
<li><em>Increase Font Size æ”¾å¤§å­—ä½“</em></li>
<li><strong>Join Lines =&gt; æŠŠä¸‹ä¸€è¡Œæ·»åŠ åˆ°æœ¬è¡Œï¼Œæ—¢åˆ é™¤æ¢è¡Œç¬¦ä¸ç©ºæ ¼ =&gt; <code>ctrl + shift + j</code></strong></li>
<li><em>Kill selected regionï¼ŒSave to Kill Ring ï¼Œkill the word end, kill the word start ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</em></li>
<li><strong>Move Caret to Line End =&gt; å°†å…‰æ ‡ç§»è‡³è¡Œå°¾ï¼Œç±»ä¼¼winä¸Šçš„end =&gt; <code>command + â†’</code></strong> TODO: window ä¸Šä¿®æ”¹æˆä¸€è‡´</li>
<li><strong>Move Caret to Line End with Selection ç§»åŠ¨å…‰æ ‡è‡³è¡Œå°¾å¹¶é€‰ä¸­ =&gt; <code>command + shift + â†’</code></strong> TODO: windowä¸Šä¿®æ”¹ä¸€è‡´</li>
<li><strong>Move Caret to Matching Brace å°†å…‰æ ‡ç§»è‡³å½“å‰åŒ¹é…çš„æ‹¬å· =&gt; <code>control + m</code></strong> TODO: window ä¸Šçš„ç¡®å®š</li>
<li><strong>Move Caret to Page Bottom å°†å…‰æ ‡ç§»è‡³é¡µé¢åº•éƒ¨ =&gt; <code>command + ä¸‹ç®­å¤´</code></strong></li>
<li><em>Move Caret to Page Top with Selection å°†å…‰æ ‡ç§»è‡³é¡µé¦–å¹¶é€‰ä¸­</em></li>
<li><strong>Move Caret to Next Word ç§»åŠ¨å…‰æ ‡åˆ°ä¸‹ä¸€ä¸ªå•è¯ =&gt; <code>alt + â†’</code> </strong> TODO: windowç¡®å®š</li>
<li><strong>Move Caret to Prev Word ç­‰åŒç†</strong></li>
<li><strong>Move Cartet to Next Word with Selection ç§»åŠ¨å…‰æ ‡åˆ°ä¸‹ä¸ªå•è¯å¹¶é€‰ä¸­ =&gt; <code>alt + shift + â†’</code></strong>  </li>
<li><strong>Page Down é¡µé¢å‘ä¸‹æ»šåŠ¨ä¸€å± <code>fn + ä¸‹ç®­å¤´</code></strong> TODO: window</li>
<li><strong>Page Down with Selection é¡µé¢å‘ä¸‹æ»šåŠ¨ä¸€å±å¹¶é€‰ä¸­è¯¥å± =&gt; <code>fn + shift + ä¸‹ç®­å¤´</code> </strong> TODO: window</li>
<li><strong>Page Up &amp;&amp; Page Up with Selection åŒç†</strong></li>
<li><em>Paste from X clipboard ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</em></li>
<li><em>Paste Simple ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</em></li>
<li><em>Reset Font Size</em> é‡ç½®å­—ä½“å¤§å°</li>
<li>Right Left Down Up ç­‰â€¦.</li>
<li>Scroll To Bottom, Scroll Down â€¦ç­‰ç­‰ éƒ½æ˜¯æ»šåŠ¨æ–¹å‘</li>
<li><em>Duplicate Line or Selection å¤åˆ¶æ•´è¡Œæˆ–é€‰ä¸­çš„åŒºåŸŸ ä¸€èˆ¬éƒ½ä¼šæ‰‹åŠ¨é€‰æ‹©æ•´è¡Œå»å¤åˆ¶</em></li>
<li><em>Duplicate Entire Lines </em></li>
<li><em>Extend Selection æ‰©å±•é€‰æ‹© <code>alt + ä¸Šç®­å¤´</code></em>  è§£é™¤</li>
<li>Split Line å…‰æ ‡ä¸‹æ·»åŠ å¤šä¸€è¡Œ =&gt; <code>command + enter</code> TODO: window</li>
<li>Start New Line å¼€å¯æ–°çš„ä¸€è¡Œ ç›¸å½“äºå…‰æ ‡ç§»è‡³è¡Œå°¾ï¼Œå›è½¦ =&gt; <code>shift + enter</code> TODO: window</li>
<li>Start New Line Before Current åœ¨å½“å‰è¡Œçš„ä¸Šä¸€è¡Œæ–°å»ºä¸€è¡Œå¹¶å°†å…‰æ ‡ç§»è‡³æ­¤å¤„ ç›¸å½“äºå…‰æ ‡ç§»åˆ°ä¸Šè¡Œå°¾å†å›è½¦</li>
<li><em>Swap selection boundaries äº¤æ¢é€‰æ‹©è¾¹ç•Œ</em></li>
<li><strong>Tab <code>tab</code></strong></li>
<li><em>Move Caret to Text End, Move Caret To Text Start ç­‰</em></li>
<li><em>Toggle Case å…‰æ ‡åœ¨å¤§å°å†™åˆ‡æ¢</em></li>
<li><em>Toggle Insert/Overwrite =&gt; åˆ‡æ¢æ’å…¥/æ›¿æ¢ window ä¸Šçš„ <code>insert</code> åŠŸèƒ½</em></li>
<li><em>shrink Selection ç¼©å°é€‰æ‹© =&gt; <code>shift + ä¸‹ç®­å¤´</code>  ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</em> </li>
<li>â€‹<em>Emacs tab, Fill Paragraph, Expand Live Template / Emmet Abbreviation, Next Paramete, Prev Paramete ä¸çŸ¥é“ä»€ä¹ˆç”¨</em></li>
</ul>
<h3 id="Main-menu"><a href="#Main-menu" class="headerlink" title="Main menu"></a>Main menu</h3><p>åˆ—ä¸¾å¹³æ—¥ç”¨å¾—åˆ°çš„</p>
<p>##### </p>
<ul>
<li><strong>new =&gt; æ–°å»ºæ–‡ä»¶ =&gt; <code>command + N</code></strong></li>
<li><strong>new Scratch File æ–°å»ºä¸´æ—¶æ–‡ä»¶ï¼Œæ¯”å¦‚å¯ä»¥æ–°å»ºä¸€ä¸ªes6è¯­æ³•çš„ä¸´æ—¶æ–‡ä»¶ï¼Œé‡Œé¢å†™å®Œå†å¤åˆ¶åˆ°æŸäº›åœ°æ–¹ æä¾›è¯­æ³•æ”¯æŒ =&gt; <code>shift + command + n</code></strong></li>
<li><strong>Preferences æ‰“å¼€è®¾ç½® =&gt; <code>command + ,</code> window: <code>alt + ctrl + s</code></strong></li>
<li><strong>Synchronize é‡æ–°åŠ è½½ç£ç›˜æ–‡ä»¶å¹¶åŒæ­¥ =&gt; <code>alt + command + y</code></strong></li>
<li><strong>Navigate Fileâ€¦ =&gt; æŒ‰æ–‡ä»¶åæŸ¥æ‰¾æ–‡ä»¶ =&gt; <code>command + shift + O</code> æ”¹ <code>command + p</code> å’Œsublime Textä¿æŒä¸€è‡´</strong></li>
</ul>
<h3 id="Edit"><a href="#Edit" class="headerlink" title="Edit"></a>Edit</h3><ul>
<li><strong>Undo =&gt; æ’¤é”€ =&gt; <code>command + z</code></strong></li>
<li><strong>Redo =&gt; æ’¤é”€çš„åæ–¹å‘ =&gt; <code>shift + command + z</code></strong></li>
<li><strong>Cut =&gt; å‰ªåˆ‡ =&gt; <code>command + x</code></strong></li>
<li><strong>Copy =&gt; å¤åˆ¶ =&gt; <code>command + c</code></strong></li>
<li><strong>Copy Paths =&gt; å¤åˆ¶è·¯å¾„ =&gt; <code>command + c + shift</code></strong></li>
<li><strong>Paste =&gt; é»è´´ =&gt; <code>command + v</code></strong><br>â€” <strong>Paste from History =&gt; æ‰“å¼€é»è´´æ¿å†å² =&gt; <code>command + shift + v</code></strong></li>
<li><strong>Findâ€¦ =&gt; æŸ¥æ‰¾ =&gt; <code>command + f</code></strong></li>
<li><strong>Replaceâ€¦ =&gt; æ›¿æ¢ =&gt; <code>Command + r</code></strong></li>
<li><strong>Add Selection for Next Occurrence =&gt; é€‰ä¸­ç›¸åŒçš„è¯ =&gt; é»˜è®¤ <code>ctrl + g</code> æ”¹ <code>ctrl + d</code></strong></li>
<li><strong>Select All =&gt; é€‰æ‹©æ‰€æœ‰ =&gt; <code>command + A</code></strong></li>
</ul>
<h3 id="è‡ªå·±ä¿®æ”¹çš„æ¯”è¾ƒå¸¸è§çš„"><a href="#è‡ªå·±ä¿®æ”¹çš„æ¯”è¾ƒå¸¸è§çš„" class="headerlink" title="è‡ªå·±ä¿®æ”¹çš„æ¯”è¾ƒå¸¸è§çš„"></a>è‡ªå·±ä¿®æ”¹çš„æ¯”è¾ƒå¸¸è§çš„</h3><ul>
<li><strong>Select Inâ€¦ =&gt; <code>alt 1 then 1</code> å®šä½åˆ°å½“å‰æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶ï¼Œè¿™ä¸ªåŠŸèƒ½vscode è‡ªåŠ¨å®Œæˆçš„ è¿˜æ˜¯æ¯”è¾ƒå¸¸ç”¨</strong></li>
</ul>
<p>ä»¥å‰å¾ˆå–œæ¬¢ç”¨<code>webstorm</code>, åé¢åœ¨macä¸Šé¢ä¸ä¹ æƒ¯å¿«æ·é”®å°±æ”¾å¼ƒè½¬æˆ˜å…¶ä»– <code>atom</code>ç­‰ã€‚ è¿™æ¬¡ç‰¹åœ°ä¸‹æ¥å›æ¥ï¼Œè®¾ç½®äº†å¿«æ·é”®ä½†æœ€å è¿˜æ˜¯ç”¨å›äº†<code>vs code</code>ã€‚<br>æœ€åé™„ä¸Šé…ç½®<a href="./webstorm_settings.jar" download="./settings">Mac</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>editor</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€å•çš„ç½‘é¡µç‚¹å‡»çƒ­åŠ›å›¾</title>
    <url>/2017/05/%E7%AE%80%E5%8D%95%E7%9A%84%E7%BD%91%E9%A1%B5%E7%82%B9%E5%87%BB%E7%83%AD%E5%8A%9B%E5%9B%BE/</url>
    <content><![CDATA[<p>å‰ä¸¤å¤©è€å¤§çªç„¶å–Šæˆ‘å’Œä¸€å°ä¼™å­å‡ºå»å¼€ä¼šï¼Œè¯´æœ‰ä¸ªå¥½ç©çš„ä¸œè¥¿ç»™ä½ ä»¬ç©ã€‚ æƒ³ç»™ç½‘ç«™åšä¸ªç®€å•çš„çƒ­åŠ›å›¾ï¼Œ è®°å½•ç”¨æˆ·ç‚¹å‡»äº†ä»€ä¹ˆä½ç½®ã€‚<br>è¦æ±‚æ˜¯ï¼Œæ€ä¹ˆç®€å•æ€ä¹ˆå®ç° å…ˆåšä¸€ç‰ˆå‡ºæ¥ åé¢å†æ…¢æ…¢è¿­ä»£ä¼˜åŒ–ï¼Œ å®šçš„å·¥ä½œé‡å¤§æ¦‚æ˜¯ä¸¤äººä¸€å¤©ã€‚ã€‚ã€‚ã€‚</p>
<p>ä¹‹å‰æ²¡æ¥è§¦è¿‡å›¾è¡¨ï¼Œè™½ç„¶æœ‰æ¥è§¦è¿‡åŸ‹ç‚¹ç»Ÿè®¡/talkingData ä¸è¿‡å¯¹äºè¿™ç§éƒ½æ˜¯ä¸€çŸ¥åŠè§£ã€‚<br>å…·ä½“æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼Œä¸€ä¸ªæ˜¯æ•°æ®çš„è®°å½•ï¼ˆå…¥åº“ï¼‰ï¼Œä¸€ä¸ªæ˜¯å±•ç¤ºæ¨¡å¼ï¼ˆè¯»å–ï¼‰ã€‚</p>
<p>äºæ˜¯ä¸‹ç­å›åˆ°å®¶åæ²¡äº‹å°±å…ˆæŸ¥äº†èµ„æ–™ï¼Œæƒ³å¤§æ¦‚å†™ä¸ªèƒ½å®šä½ç½®çš„å‡ºæ¥çœ‹ç€å…ˆã€‚</p>
<h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><ol>
<li>éœ€è¦ä¼ é€’ç»™åå°ä¿å­˜çš„æ•°æ®<ol>
<li>url å½“å‰é¡µé¢url(åŒ…ä¸åŒ…æ‹¬search, hash ç­‰)</li>
<li>screenHeight å±å¹•é«˜åº¦</li>
<li>screenWidth å±å¹•é«˜åº¦</li>
<li>list å…·ä½“åæ ‡çš„æ•°ç»„ {x: é¼ æ ‡ç›¸å¯¹äºå±å¹•xè½´åæ ‡, y: é¼ æ ‡ç›¸å¯¹äºå±å¹•yè½´åæ ‡, pageX: é¼ æ ‡ç›¸å¯¹äºdomæ–‡æ¡£çš„xè½´åæ ‡, pageY: é¼ æ ‡ç›¸å¯¹äºdomæ–‡æ¡£çš„yè½´åæ ‡}</li>
<li>ä»£è¡¨ç”¨æˆ·çš„ä¸€ä¸ªcode</li>
</ol>
</li>
<li>ä¸èƒ½æ¯æ¬¡ç‚¹å‡»éƒ½å‘é€ï¼Œé—´éš”10ç§’å‘é€ä¸€æ¬¡</li>
<li>åå°è¿˜æ²¡åšå…ˆåœ¨æœ¬åœ°sessionLocationåšæ¨¡æ‹Ÿæµ‹è¯•</li>
</ol>
<h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><h4 id="é¼ æ ‡ç‚¹å‡»å¯¹è±¡å±æ€§"><a href="#é¼ æ ‡ç‚¹å‡»å¯¹è±¡å±æ€§" class="headerlink" title="é¼ æ ‡ç‚¹å‡»å¯¹è±¡å±æ€§"></a>é¼ æ ‡ç‚¹å‡»å¯¹è±¡å±æ€§</h4><p>ç‰¹åˆ«æ¨è Mozilla å¼€å‘è€…å¹³å°ï¼Œç°åœ¨åŸºæœ¬ä¸Šjs htmlç­‰ä¸œè¥¿æƒ³äº†è§£å…·ä½“æˆ–è¯¦ç»†çš„å±æ€§éƒ½ä¼šä¸Šè¿™ä¸ªç½‘ç«™æŸ¥è¯¢<a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/</a>å¤§éƒ¨åˆ†æœ‰å¤šè¯­è¨€æ ‡ç­¾ã€‚</p>
<p>å¯ä»¥å…ˆåˆ°è¿™é‡ŒæŸ¥çœ‹é¼ æ ‡çš„å…·ä½“å±æ€§è§£æ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent" target="_blank" rel="noopener">developer.mozilla</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">ä»¥ä¸‹ä¸¤ä¸ªæŒ‡çš„éƒ½æ˜¯å·²å¯è§†åŒºåŸŸå·¦ä¸Šè§’ä¸ºåŸç‚¹(<span class="number">0</span>, <span class="number">0</span>) å‘å³ å‘ä¸‹æ­£åæ ‡</span><br><span class="line">MouseEvent.clientX   clientXå±æ€§ä»£è¡¨ç‚¹å‡»åœ¨å…ƒç´ ä¸Šçš„é¼ æ ‡æŒ‡é’ˆçš„Xåæ ‡ï¼›</span><br><span class="line">MouseEvent.clientY   clientYå±æ€§ä»£è¡¨ç‚¹å‡»åœ¨å…ƒç´ ä¸Šçš„é¼ æ ‡æŒ‡é’ˆçš„Yåæ ‡ï¼›</span><br><span class="line"></span><br><span class="line">ä»¥ä¸‹ä¸¤ä¸ªæŒ‡çš„éƒ½æ˜¯ç‰©ç†å±å¹•ä»¥å·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼ˆ<span class="number">0</span>ï¼Œ <span class="number">0</span>ï¼‰ å‘å³ å‘ä¸‹æ­£åæ ‡</span><br><span class="line">MouseEvent.screenX</span><br><span class="line">MouseEvent.screenY</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¼ é€’ç»™åå°çš„ <code>x</code> é‡‡ç”¨çš„æ˜¯ <code>MouseEvent.clientX</code>; <code>y</code> å–çš„æ˜¯ <code>MouseEvent.clientY</code>; <code>pageX</code> å–çš„æ˜¯ <code>é¡µé¢æ»šåŠ¨å®½åº¦ + x</code>; <code>PageY</code> å–çš„æ˜¯ <code>é¡µé¢æ»šåŠ¨é«˜åº¦ + y</code> </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">é¡µé¢æ»šåŠ¨é«˜åº¦: <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span></span><br><span class="line">é¡µé¢æ»šåŠ¨å®½åº¦: <span class="built_in">document</span>.documentElement.scrollLeft || <span class="built_in">window</span>.pageXOffset || <span class="built_in">document</span>.body.scrollLeft || <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>å…·ä½“é¡µé¢æ»šåŠ¨é«˜åº¦ä¸å®½åº¦çš„å…¼å®¹é—®é¢˜å¯ä»¥æŸ¥çœ‹ <a href="http://www.cnblogs.com/xwgli/p/3490466.html" target="_blank" rel="noopener">http://www.cnblogs.com/xwgli/p/3490466.html</a></p>
<h4 id="å±å¹•é«˜åº¦å®½åº¦"><a href="#å±å¹•é«˜åº¦å®½åº¦" class="headerlink" title="å±å¹•é«˜åº¦å®½åº¦"></a>å±å¹•é«˜åº¦å®½åº¦</h4><p><a href="http://www.jb51.net/article/36840.htm" target="_blank" rel="noopener">å±å¹•é«˜åº¦å®½åº¦</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.screen.height, å±å¹•é«˜åº¦</span><br><span class="line"><span class="built_in">window</span>.screen.width, å±å¹•å®½åº¦</span><br><span class="line"><span class="built_in">window</span>.screen.availHeight, å±å¹•å¯ç”¨å·¥ä½œåŒºé«˜åº¦ï¼Œå¦‚macçš„é™¤å»é¡¶éƒ¨å·¥å…·æ¡å¤–çš„é«˜åº¦</span><br><span class="line"><span class="built_in">window</span>.screen.availWidth  åŒä¸Š</span><br></pre></td></tr></table></figure>
<h4 id="ç›‘å¬urlå˜åŒ–"><a href="#ç›‘å¬urlå˜åŒ–" class="headerlink" title="ç›‘å¬urlå˜åŒ–"></a>ç›‘å¬urlå˜åŒ–</h4><p>åæœŸä¼˜åŒ–éœ€æ±‚ï¼Œå› ä¸ºè¿˜ä¸ç¡®å®šæ˜¯è¦æ¯æ¡åŸºæœ¬<code>location.namepath</code>å½“æˆä¸€ä¸ªé¡µé¢è¿˜æ˜¯è¦æŠŠæ¯ä¸ªä¸åŒçš„ <code>searchã€hash</code>éƒ½å½“æˆä¸€ä¸ªç‹¬ç«‹çš„é¡µé¢ã€‚</p>
<h4 id="ç»˜åˆ¶çƒ­åŠ›å›¾"><a href="#ç»˜åˆ¶çƒ­åŠ›å›¾" class="headerlink" title="ç»˜åˆ¶çƒ­åŠ›å›¾"></a>ç»˜åˆ¶çƒ­åŠ›å›¾</h4><p>ç»˜åˆ¶çƒ­åŠ›å›¾æš‚æ—¶çš„å±•ç¤ºæ•ˆæœåœ¨åŸé¡µé¢æ·»åŠ ä¸€ä¸ªæ–‡æ¡£å¤§å°çš„<code>canvas</code>ï¼Œç„¶åé‡‡ç”¨ä¸€ä¸ªjs çƒ­åŠ›å›¾æ’ä»¶<a href="https://github.com/pa7/heatmap.js" target="_blank" rel="noopener">https://github.com/pa7/heatmap.js</a>ä¼ é€’åæ ‡æ¥ç”Ÿæˆçƒ­åŠ›å›¾ã€‚</p>
<h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p>å› ä¸ºåªæ˜¯æ™šä¸Šå›å®¶ä¸´æ—¶å†™äº†ä¸€ä¸ªå¯ä»¥çœ‹æ•ˆæœçš„ï¼Œæ‰€ä»¥æ²¡æœ‰ä»£ç åˆ†ç¦» è„æ•°æ®æ£€æŸ¥ ç­‰åŠŸèƒ½<br><figure class="highlight javascript"><figcaption><span>app.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// style Util Fn</span></span><br><span class="line"><span class="keyword">const</span> styleFn = <span class="function">(<span class="params">el, styleObj = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!el) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(el);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(styleObj)) &#123;</span><br><span class="line">    el.style[key] = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> el;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éœ€è¦å‘é€åˆ°åå°çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeatCollect</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(opts = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">this</span>.initProps(opts); <span class="comment">// åˆå§‹åŒ–å±æ€§</span></span><br><span class="line">    <span class="keyword">this</span>.setDataForServer(); <span class="comment">// å¯åŠ¨å®šæ—¶å™¨ å®šæ—¶å‘é€æ•°æ®ç»™æœåŠ¡å™¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  initProps(opts) &#123;</span><br><span class="line">    <span class="keyword">this</span>.list = [];</span><br><span class="line">    <span class="keyword">this</span>.url = location.href;</span><br><span class="line">    <span class="keyword">this</span>.screenHeight = <span class="built_in">window</span>.screen.height;</span><br><span class="line">    <span class="keyword">this</span>.screenWidth = <span class="built_in">window</span>.screen.width;</span><br><span class="line">    <span class="keyword">this</span>.serverCode = <span class="string">'1001'</span>;</span><br><span class="line">    <span class="keyword">this</span>.index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.time = opts.time || <span class="number">10</span>; <span class="comment">// é»˜è®¤10ç§’</span></span><br><span class="line">    <span class="keyword">this</span>.maxLength = opts.maxLength || <span class="number">100</span>; <span class="comment">// é»˜è®¤æœ€å¤šå¯ä»¥å­˜100ä¸ªåæ ‡</span></span><br><span class="line">    <span class="keyword">this</span>.Time = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.queue = []; <span class="comment">// é˜Ÿåˆ— æš‚å­˜è¯·æ±‚çš„åæ ‡</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘å½“å‰ç±»æ·»åŠ åæ ‡</span></span><br><span class="line">  push(obj) &#123;</span><br><span class="line">    obj.index = ++<span class="keyword">this</span>.index;</span><br><span class="line">    <span class="keyword">this</span>.list.push(obj);</span><br><span class="line">    <span class="keyword">this</span>.list = <span class="keyword">this</span>.list.splice(<span class="number">0</span>, <span class="number">100</span>); <span class="comment">// é˜²æ­¢æ¶æ„è¿‡é•¿</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.list;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–å‘æœåŠ¡å™¨ä¼ é€’çš„æ•°æ®æ ¼å¼</span></span><br><span class="line">  getServerData() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: <span class="keyword">this</span>.queue,</span><br><span class="line">      url: <span class="keyword">this</span>.url,</span><br><span class="line">      screenHeight: <span class="keyword">this</span>.screenHeight,</span><br><span class="line">      screenWidth: <span class="keyword">this</span>.screenWidth,</span><br><span class="line">      serverCode: <span class="keyword">this</span>.serverCode,</span><br><span class="line">      timestamp: <span class="built_in">Date</span>.now(),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘é€æ•°æ®åˆ°æœåŠ¡å™¨</span></span><br><span class="line">  setDataForServer() &#123;</span><br><span class="line">    clearTimeout(<span class="keyword">this</span>.timer);</span><br><span class="line">    <span class="keyword">this</span>.timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.queue = <span class="keyword">this</span>.list.splice(<span class="number">0</span>, <span class="built_in">Math</span>.min(<span class="keyword">this</span>.list.length, <span class="number">100</span>));</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.queue.length) <span class="keyword">return</span> <span class="keyword">this</span>.setDataForServer();</span><br><span class="line"></span><br><span class="line">      Server.setData(<span class="keyword">this</span>.getServerData()).then((&#123;</span><br><span class="line">        code</span><br><span class="line">      &#125;) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (code === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.queue = [];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.list = <span class="keyword">this</span>.queue.concat(<span class="keyword">this</span>.list);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">this</span>.list = <span class="keyword">this</span>.queue.concat(<span class="keyword">this</span>.list);</span><br><span class="line">      &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setDataForServer();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;, <span class="keyword">this</span>.time * <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»˜åˆ¶å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Draw</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.initCanvas();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–å±•ç¤ºçš„dom</span></span><br><span class="line">  initDom() &#123;</span><br><span class="line">    <span class="keyword">let</span> dom = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>),</span><br><span class="line">      domParent = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    dom.id = <span class="string">'heatmapContainer'</span>;</span><br><span class="line">    domParent.id = <span class="string">'heatmapContainerWrapper'</span>;</span><br><span class="line">    domParent.appendChild(dom);</span><br><span class="line">    domParent.style.height = <span class="built_in">document</span>.documentElement.offsetHeight + <span class="string">'px'</span>;</span><br><span class="line">    domParent.style.width = <span class="built_in">document</span>.documentElement.offsetWidth + <span class="string">'px'</span> ;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(domParent);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–å±•ç¤ºçš„canvas</span></span><br><span class="line">  initCanvas() &#123;</span><br><span class="line">    <span class="keyword">this</span>.initDom();</span><br><span class="line">    <span class="keyword">this</span>.heatmap = h337.create(&#123;</span><br><span class="line">      container: <span class="built_in">document</span>.getElementById(<span class="string">'heatmapContainer'</span>),</span><br><span class="line">      maxOpacity: <span class="number">.6</span>,</span><br><span class="line">      radius: <span class="number">50</span>,</span><br><span class="line">      blur: <span class="number">.90</span>,</span><br><span class="line">      backgroundColor: <span class="string">'rgba(0, 0, 0, 0)'</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éå†ç»˜åˆ¶canvasä¸Šçš„çƒ­ç‚¹</span></span><br><span class="line">  draw(list) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.heatmap.addData(<span class="keyword">this</span>.getDrawData(list[i]));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–è¦ç»˜åˆ¶çš„æ•°æ®æ ¼å¼</span></span><br><span class="line">  getDrawData(data) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      x: data.pageX,</span><br><span class="line">      y: data.pageY,</span><br><span class="line">      value: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†å…¼å®¹ç­‰å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> Util = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–é¼ æ ‡åæ ‡</span></span><br><span class="line">  getMouseInfo(e) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;</span><br><span class="line">      officeX,</span><br><span class="line">      officeY</span><br><span class="line">    &#125; = <span class="keyword">this</span>.getPageOffice(), &#123;</span><br><span class="line">      clientX: x,</span><br><span class="line">      clientY: y</span><br><span class="line">    &#125; = e;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pageX: officeX + x,</span><br><span class="line">      pageY: officeY + y,</span><br><span class="line">      x,</span><br><span class="line">      y,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–é¡µé¢é«˜å®½</span></span><br><span class="line">  getPageOffice() &#123;</span><br><span class="line">    <span class="keyword">let</span> officeY = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span>,</span><br><span class="line">      officeX = <span class="built_in">document</span>.documentElement.scrollLeft || <span class="built_in">window</span>.pageXOffset || <span class="built_in">document</span>.body.scrollLeft || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      officeX,</span><br><span class="line">      officeY</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¥å£å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> Main = &#123;</span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">this</span>.infoData = <span class="keyword">new</span> HeatCollect();</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="keyword">new</span> Draw();</span><br><span class="line">    <span class="built_in">document</span>.documentElement.addEventListener(<span class="string">'click'</span>, (e) =&gt; <span class="keyword">this</span>.mouseEvent(e));</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mouseEvent(e) &#123;</span><br><span class="line">    <span class="keyword">let</span> _mouseData = Util.getMouseInfo(e);</span><br><span class="line">    <span class="keyword">this</span>.infoData.push(_mouseData);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  drawFn() &#123;</span><br><span class="line">    <span class="keyword">let</span> list = <span class="built_in">JSON</span>.parse(sessionStorage.getItem(<span class="string">'test'</span>) || <span class="string">'&#123;&#125;'</span>).list || [];</span><br><span class="line">    <span class="keyword">this</span>.draw.draw(list);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Main.init();</span><br><span class="line">Main.drawFn();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿå‘é€è¯·æ±‚</span></span><br><span class="line"><span class="keyword">const</span> Server = &#123;</span><br><span class="line">  setData(data) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> isSuccess = <span class="built_in">Math</span>.random() &lt; <span class="number">.95</span>;</span><br><span class="line">        <span class="keyword">if</span> (isSuccess) &#123;</span><br><span class="line">          <span class="keyword">let</span> oldData = sessionStorage.getItem(<span class="string">'test'</span>);</span><br><span class="line">          <span class="keyword">if</span> (oldData) &#123;</span><br><span class="line">            oldData = <span class="built_in">JSON</span>.parse(oldData);</span><br><span class="line">            oldData.list = oldData.list.concat(data.list);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            oldData = data;</span><br><span class="line">          &#125;</span><br><span class="line">          sessionStorage.setItem(<span class="string">'test'</span>, <span class="built_in">JSON</span>.stringify(oldData));</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'success'</span>, oldData.list);</span><br><span class="line">          res(&#123;</span><br><span class="line">            code: <span class="number">0</span>,</span><br><span class="line">            data</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          rej(&#123;</span><br><span class="line">            code: <span class="number">5000</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    body, html &#123;</span><br><span class="line">        height: 3000px;</span><br><span class="line">        width: 2000px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-id">#heatMap</span> &#123;</span></span><br><span class="line">        height: 100%;</span><br><span class="line">        width: 100%;</span><br><span class="line">        position: relative;</span><br><span class="line"><span class="css">        <span class="selector-tag">border</span><span class="selector-pseudo">:1px</span> <span class="selector-tag">solid</span> <span class="selector-tag">red</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-id">#heatmapContainer</span> &#123; <span class="attribute">width</span>:<span class="number">100%</span>; <span class="attribute">height</span>:<span class="number">100%</span>; &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#heatmapContainerWrapper</span> &#123; <span class="attribute">position</span>:absolute; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"heatmap.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"app.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/pa7/heatmap.js/blob/master/build/heatmap.js" target="_blank" rel="noopener">htmlä¸­å¼•å…¥çš„çƒ­åŠ›å›¾</a></p>
<h3 id="åè¯"><a href="#åè¯" class="headerlink" title="åè¯"></a>åè¯</h3><p><img src="./heatMap.png" alt="æ•ˆæœå›¾">æ•ˆæœå›¾<br>è‡³æ­¤ ç®€å•çš„çƒ­åŠ›å›¾å®ç°å®Œæˆï¼Œ éš”å¤©å›åˆ°å…¬å¸ï¼Œè€å¤§è¯´ å…¬å¸å·²ç»å’Œç¬¬ä¸‰æ–¹æœåŠ¡å¹³å°è´­ä¹°äº†ç»Ÿè®¡ä¹‹ç±»çš„æœåŠ¡ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚äºæ˜¯ä¹å½“åšæ˜¯è‡ªå·±é¥­åæ— èŠå†™ç‚¹ä»£ç æ¶ˆé£æ¶ˆé£ã€‚ä¸è¿‡çƒ­åŠ›å›¾å¾ˆå¤šä¸œè¥¿éœ€è¦å¤„ç†ï¼Œä¸æ˜¯ä¸€ä¸¤ä¸ªäººçŸ­æ—¶é—´å¯ä»¥å®Œæˆçš„ã€‚æœ€åé™„ä¸Šæ•ˆæœä¸<br><a href="https://github.com/jsonz1993/wheel/tree/master/heatmap" target="_blank" rel="noopener">é¡¹ç›®ç›®å½•</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
        <tag>work</tag>
      </tags>
  </entry>
  <entry>
    <title>imooc-react-nativeå®æˆ˜ é¡¹ç›®å…¥é—¨çŸ¥è¯†å­¦ä¹ </title>
    <url>/2017/05/imooc-react-native%E5%AE%9E%E6%88%98-%E9%A1%B9%E7%9B%AE%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p>é€‰ç”¨çš„ç‰ˆæœ¬çš„ <code>v0.22.2</code></p>
<p>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ<br><code>åˆå§‹åŒ–å¼€å§‹</code> =&gt; <code>getDefaultProps</code> =&gt; <code>getInitialState</code> =&gt; <code>componentWillMount</code> =&gt; <code>render</code> =&gt; <code>componentDidMount</code> =&gt; <code>ç»„ä»¶è¿è¡Œä¸­ï¼Œ stateçŠ¶æ€æ”¹å˜</code> =&gt; <code>shouldComponentUpdate åˆ¤æ–­æ˜¯å¦è¦æ›´æ–° return true</code> =&gt; <code>componentWillUpdate</code> =&gt; <code>render</code> ç»§ç»­å¾ªç¯ =&gt; <code>å¤–éƒ¨propsæ”¹å˜</code> =&gt; <code>componentWillReceiveProps</code> =&gt; <code>unmount å¸è½½ç»„ä»¶</code> =&gt; <code>componentWillUnmount</code> ç­‰ç­‰</p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>imooc</tag>
        <tag>React-Native</tag>
      </tags>
  </entry>
  <entry>
    <title>iosç½‘ç»œæ“ä½œåŸºç¡€æ•™ç¨‹</title>
    <url>/2017/05/ios%E7%BD%91%E7%BB%9C%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<p><a href="https://github.com/jsonz1993/learn/tree/master/Objective-c/net-learn" target="_blank" rel="noopener">demoæºç </a></p>
<h2 id="ç½‘ç»œè§£æ"><a href="#ç½‘ç»œè§£æ" class="headerlink" title="ç½‘ç»œè§£æ"></a>ç½‘ç»œè§£æ</h2><h3 id="ä¸ç½‘ç»œè¯·æ±‚æœ‰å…³çš„ç±»"><a href="#ä¸ç½‘ç»œè¯·æ±‚æœ‰å…³çš„ç±»" class="headerlink" title="ä¸ç½‘ç»œè¯·æ±‚æœ‰å…³çš„ç±»"></a>ä¸ç½‘ç»œè¯·æ±‚æœ‰å…³çš„ç±»</h3><ul>
<li><code>NSURL</code>: å®¢æˆ·ç«¯è®¿é—®å“ªå°æœåŠ¡å™¨çš„åˆ¶å®šèµ„æº</li>
<li><code>NSURLRequest</code>: å®¢æˆ·ç«¯å‘èµ·çš„ç½‘ç»œè¯·æ±‚å†…å®¹</li>
<li><code></code>: å®¢æˆ·ç«¯æœåŠ¡å™¨å»ºç«‹çš„ç½‘ç»œè¿æ¥</li>
<li><code>NSURLResponse</code>: æœåŠ¡ç«¯ç»™äºˆå®¢æˆ·ç«¯çš„å“åº”ç»“æœ</li>
</ul>
<h3 id="å‘èµ·ç¬¬ä¸€ä¸ªç½‘ç»œè¯·æ±‚"><a href="#å‘èµ·ç¬¬ä¸€ä¸ªç½‘ç»œè¯·æ±‚" class="headerlink" title="å‘èµ·ç¬¬ä¸€ä¸ªç½‘ç»œè¯·æ±‚"></a>å‘èµ·ç¬¬ä¸€ä¸ªç½‘ç»œè¯·æ±‚</h3><figure class="highlight objectivec"><figcaption><span>AppDelegate.m</span></figcaption><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªurlå¯¹è±¡ ç”¨æ¥è¡¨ç¤ºè®¿é—®çš„æœåŠ¡å™¨</span></span><br><span class="line">    <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://www.imooc.com"</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®¢æˆ·ç«¯å‘èµ·çš„ç½‘ç»œè¯·æ±‚çš„è¯·æ±‚å†…å®¹</span></span><br><span class="line">    <span class="built_in">NSURLRequest</span> *request = [<span class="built_in">NSURLRequest</span> requestWithURL: url];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSURLConnection</span> *connection = [[<span class="built_in">NSURLConnection</span> alloc] initWithRequest:request delegate:<span class="keyword">self</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯åŠ¨ç½‘ç»œè¯·æ±‚</span></span><br><span class="line">    [connection start];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) connection: (<span class="built_in">NSURLConnection</span> *) connection didReceiveResponse: (<span class="built_in">NSURLResponse</span> * )response &#123;</span><br><span class="line">    <span class="comment">// æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯çš„å“åº”ç»“æœ</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"response: %@"</span>, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é”®å…¥ä»¥ä¸Šä»£ç åæŒ‰<code>cmd+r</code>è¿è¡Œä¸€ä¸‹ï¼Œæ­¤æ—¶æ§åˆ¶å°å¹¶æ²¡æœ‰è¾“å‡ºæˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œè€Œæ˜¯è¾“å‡ºäº†<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app&apos;s Info.plist file.</span><br></pre></td></tr></table></figure></p>
<p>æç¤ºæˆ‘ä»¬å·²ç»é˜»æ­¢äº†æ˜æ–‡httpè¯·æ±‚ï¼Œå› ä¸ºä»–æ˜¯ä¸å®‰å…¨çš„ï¼Œå¯ä»¥é€šè¿‡<code>Info.plist</code>é…ç½®è§£é™¤è¯·æ±‚ã€‚<br>åœ¨é¡¹ç›®æ ¹ç›®å½•é‡Œæ‰“å¼€<code>Info.plist</code>ï¼Œ æ·»åŠ  <code>App Transport Security Settings</code> å¹¶åœ¨<code>App Transport Security Settings</code>ä¸‹æ·»åŠ <code>Allow Arbitrary Loads</code>å€¼ä¸º<code>YES</code>ã€‚<br><img src="./info-plist.png" alt="info-plist.png"> ç„¶åé‡æ–°è¿è¡Œå°±å¥½äº†</p>
<h2 id="ä½¿ç”¨Getæ–¹å¼å‘é€è¯·æ±‚"><a href="#ä½¿ç”¨Getæ–¹å¼å‘é€è¯·æ±‚" class="headerlink" title="ä½¿ç”¨Getæ–¹å¼å‘é€è¯·æ±‚"></a>ä½¿ç”¨Getæ–¹å¼å‘é€è¯·æ±‚</h2><h3 id="æ­å»ºç”¨æˆ·ä¿¡æ¯ç•Œé¢"><a href="#æ­å»ºç”¨æˆ·ä¿¡æ¯ç•Œé¢" class="headerlink" title="æ­å»ºç”¨æˆ·ä¿¡æ¯ç•Œé¢"></a>æ­å»ºç”¨æˆ·ä¿¡æ¯ç•Œé¢</h3><p>apiæ¥å£å·²ç»è¿”å›çš„å‚æ•°æ ¼å¼ç»“æ„<br><img src="./get-api.png" alt="get-api"></p>
<p>æ–°å»ºé¡¹ç›®<br>æ–°å»º<code>cocoa Class</code>=&gt;<code>UserInfoViewController</code>ç»§æ‰¿<code>UIViewController</code><br>æ–°å»º<code>cocoa Class</code>=&gt;<code>KeyValueView</code>ç»§æ‰¿<code>UIView</code><br>å¦‚å›¾<br><img src="./project-folder.png" alt="project-folder"></p>
<p>å…ˆåœ¨<code>KeyValueView.h</code> å£°æ˜æ‰€éœ€çš„å˜é‡å·²ç»æ–¹æ³•<br><figure class="highlight objectivec"><figcaption><span>KeyValueView.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">KeyValueView</span> : <span class="title">UIView</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UILabel</span> *keyLabel;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UILabel</span> *valueLabel;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) setupKey: (<span class="built_in">NSString</span> *)key value:(<span class="built_in">NSString</span> *)value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></p>
<p>å¹¶åœ¨<code>KeyValueView.m</code>å®ç°<br><figure class="highlight objectivec"><figcaption><span>KeyValueView.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"KeyValueView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">KeyValueView</span></span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">id</span>) initWithFrame:(<span class="built_in">CGRect</span>)frame</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:frame];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ·»åŠ keyLabel</span></span><br><span class="line">        <span class="comment">// å¦‚æœå­˜åœ¨çˆ¶çº§ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª UILabel x:0, y:0, å®½ï¼šçˆ¶çº§å®½åº¦1/3, é«˜: çˆ¶çº§é«˜åº¦</span></span><br><span class="line">        _keyLabel = [[<span class="built_in">UILabel</span> alloc] initWithFrame: <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span>.frame) /<span class="number">3</span>, <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span>.frame))];</span><br><span class="line">        <span class="comment">// è®¾ç½®èƒŒæ™¯è‰²ä¸ºé€æ˜</span></span><br><span class="line">        _keyLabel.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        <span class="comment">// æ–‡å­—å±…å·¦å¯¹é½</span></span><br><span class="line">        _keyLabel.textAlignment = <span class="built_in">NSTextAlignmentLeft</span>;</span><br><span class="line">        <span class="comment">// è®¾ç½®å­—ä½“å¤§å°</span></span><br><span class="line">        _keyLabel.font = [<span class="built_in">UIFont</span> systemFontOfSize: <span class="number">16</span>];</span><br><span class="line">        <span class="comment">// è®¾ç½®å­—ä½“é¢œè‰²</span></span><br><span class="line">        _keyLabel.textColor = [<span class="built_in">UIColor</span> blackColor];</span><br><span class="line">        <span class="comment">// æ·»åŠ åˆ°çˆ¶çº§</span></span><br><span class="line">        [<span class="keyword">self</span> addSubview: _keyLabel];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ·»åŠ valueLabel</span></span><br><span class="line">        <span class="comment">// å¦‚æœå­˜åœ¨çˆ¶çº§ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª UILabel x:0, y:0, å®½ï¼šçˆ¶çº§å®½åº¦1/3, é«˜: çˆ¶çº§é«˜åº¦</span></span><br><span class="line">        _valueLabel = [[<span class="built_in">UILabel</span> alloc] initWithFrame: <span class="built_in">CGRectMake</span>(<span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span>.frame) /<span class="number">3</span>, <span class="number">0</span>, <span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span>.frame) * <span class="number">2</span> /<span class="number">3</span>, <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span>.frame))];</span><br><span class="line">        <span class="comment">// è®¾ç½®èƒŒæ™¯è‰²ä¸ºé€æ˜</span></span><br><span class="line">        _valueLabel.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        <span class="comment">// æ–‡å­—å±…å·¦å¯¹é½</span></span><br><span class="line">        _valueLabel.textAlignment = <span class="built_in">NSTextAlignmentLeft</span>;</span><br><span class="line">        <span class="comment">// è®¾ç½®å­—ä½“å¤§å°</span></span><br><span class="line">        _valueLabel.font = [<span class="built_in">UIFont</span> systemFontOfSize: <span class="number">16</span>];</span><br><span class="line">        <span class="comment">// è®¾ç½®å­—ä½“é¢œè‰²</span></span><br><span class="line">        _valueLabel.textColor = [<span class="built_in">UIColor</span> blackColor];</span><br><span class="line">        <span class="comment">// æ·»åŠ åˆ°çˆ¶çº§</span></span><br><span class="line">        [<span class="keyword">self</span> addSubview: _valueLabel];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)setupKey:(<span class="built_in">NSString</span> *)key value:(<span class="built_in">NSString</span> *)value</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç»™keyLabel &amp;&amp; valueLabel èµ‹å€¼çš„æ–¹æ³•</span></span><br><span class="line">    [_keyLabel setText:key];</span><br><span class="line">    [_valueLabel setText:value];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ¥ç€æˆ‘ä»¬è¦åœ¨<code>UserInfoViewController</code>å»è°ƒç”¨<code>keyValueView</code>çš„UIViewç±»<br><figure class="highlight objectivec"><figcaption><span>UserInfoViewController.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="comment">// å¼•å…¥keyvalue</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"KeyValueView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UserInfoViewController</span> : <span class="title">UIViewController</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠæ‰€æœ‰ä¸ªäººä¿¡æ¯å½•åˆ°è¿™é‡Œ ( å£°æ˜ )</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) KeyValueView *userNameView; <span class="comment">// ç”¨æˆ·åä¿¡æ¯</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) KeyValueView *userSexView; <span class="comment">// ç”¨æˆ·æ€§åˆ«</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) KeyValueView *birthdayView; <span class="comment">// ç”Ÿæ—¥</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) KeyValueView *emailView; <span class="comment">// email</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) KeyValueView *phoneView; <span class="comment">// æ‰‹æœºå·</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><figcaption><span>UserInfoViewController.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"UserInfoViewController.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸¤ä¸ªå® å±å¹•å®½åº¦ä¸é«˜åº¦ï¼Œä¸€èˆ¬é¡¹ç›®éƒ½ä¼šå®šä¹‰æ–¹ä¾¿ä½¿ç”¨</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KScreenWidth [[UIScreen mainScreen] bounds].size.width</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KScreenHeight [[UIScreen mainScreen] bounds].size.height</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UserInfoViewController</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UserInfoViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">    <span class="comment">// ç»™çˆ¶çº§åŠ èƒŒæ™¯è‰²</span></span><br><span class="line">    [<span class="keyword">self</span>.view setBackgroundColor: [<span class="built_in">UIColor</span> whiteColor]];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªæ ‡é¢˜</span></span><br><span class="line">    <span class="built_in">UILabel</span> *titleLable = [[<span class="built_in">UILabel</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">40</span>, KScreenWidth, <span class="number">20</span>)];</span><br><span class="line">    <span class="comment">// è®¾ç½®æ ‡é¢˜ä¿¡æ¯</span></span><br><span class="line">    [titleLable setText:<span class="string">@"ä¸ªäººç”¨æˆ·ä¿¡æ¯"</span>];</span><br><span class="line">    titleLable.textAlignment = <span class="built_in">NSTextAlignmentCenter</span>;</span><br><span class="line">    titleLable.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">18</span>];</span><br><span class="line">    titleLable.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview: titleLable];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªç”¨æˆ·åæ§ä»¶</span></span><br><span class="line">    _userNameView = [[KeyValueView alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">100</span>, <span class="number">70</span>, KScreenWidth - <span class="number">100</span> * <span class="number">2</span>, <span class="number">30</span>)];</span><br><span class="line">    _userNameView.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:_userNameView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ€§åˆ«æ§ä»¶</span></span><br><span class="line">    _userSexView = [[KeyValueView alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">100</span>, <span class="number">70</span> + <span class="number">30</span>, KScreenWidth - <span class="number">100</span> * <span class="number">2</span>, <span class="number">30</span>)];</span><br><span class="line">    _userSexView.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:_userSexView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç”Ÿæ—¥æ§ä»¶</span></span><br><span class="line">    _birthdayView = [[KeyValueView alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">100</span>, <span class="number">70</span>+<span class="number">30</span>*<span class="number">2</span>, KScreenWidth - <span class="number">100</span> * <span class="number">2</span>, <span class="number">30</span>)];</span><br><span class="line">    _birthdayView.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:_birthdayView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªç”¨æˆ·é‚®ç®±æ§ä»¶</span></span><br><span class="line">    _emailView = [[KeyValueView alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">100</span>, <span class="number">70</span> + <span class="number">30</span>*<span class="number">3</span>, KScreenWidth - <span class="number">100</span> * <span class="number">2</span>, <span class="number">30</span>)];</span><br><span class="line">    _emailView.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:_emailView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ‰‹æœºå·æ§ä»¶</span></span><br><span class="line">    _phoneView = [[KeyValueView alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">100</span>, <span class="number">70</span> + <span class="number">30</span>*<span class="number">4</span>, KScreenWidth - <span class="number">100</span> * <span class="number">2</span>, <span class="number">30</span>)];</span><br><span class="line">    _phoneView.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:_phoneView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    [<span class="keyword">super</span> didReceiveMemoryWarning];</span><br><span class="line">    <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#pragma mark - Navigation</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// In a storyboard-based application, you will often want to do a little preparation before navigation</span></span><br><span class="line"><span class="comment">- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender &#123;</span></span><br><span class="line"><span class="comment">    // Get the new view controller using [segue destinationViewController].</span></span><br><span class="line"><span class="comment">    // Pass the selected object to the new view controller.</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p><code>view</code> &amp;&amp; <code>controller</code>éƒ½å†™å¥½ä¹‹åï¼Œæˆ‘ä»¬å»ä¿®æ”¹ä¸€ä¸‹<code>AppDelegate</code>ï¼Œå› ä¸ºé»˜è®¤ä¸»viewä¸ºé¡¹ç›®æ ¹ç›®å½•çš„<code>ViewControll</code>ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æ²¡æœ‰æŠŠviewè®¾ç½®ä¸ºæˆ‘ä»¬çš„<code>UserInfoViewController</code> è¿è¡Œæ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæœçš„ã€‚</p>
<figure class="highlight objectivec"><figcaption><span>AppDelegate.m</span></figcaption><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">// ç¬¬äºŒèŠ‚ getè¯·æ±‚</span></span><br><span class="line">    UserInfoViewController *userInfoVC = [[UserInfoViewController alloc] init];</span><br><span class="line">    <span class="keyword">self</span>.window.rootViewController = userInfoVC;</span><br><span class="line">    [<span class="keyword">self</span>.window makeKeyAndVisible];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹å®Œæˆåå†æ¬¡è¿è¡Œçœ‹æ•ˆæœã€‚æ­¤æ—¶åªå‡ºç°äº†æ ‡é¢˜ã€‚<br><img src="./first-run.png" alt="first-run"></p>
<p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æ‰“å¼€è°ƒè¯•çœ‹ä¸€ä¸‹ä¸ºä»€ä¹ˆæˆ‘ä»¬åªå‡ºç°æ ‡é¢˜ï¼Œæ²¡æœ‰å‡ºç°<code>KeyValueView</code>å‘¢<br>ä¾æ¬¡æ‰“å¼€xCodeèœå•<code>Debug</code>=&gt;<code>View Debugging</code>=&gt;<code>Show View Frames</code>è¿™æ—¶å€™å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„<code>labelView</code>å…¶å®æ˜¯æœ‰è¢«åŠ åˆ°<code>view</code>ä¸­ï¼Œåªæ˜¯æ²¡æœ‰æ•°æ®å±•ç¤º æ‰€ä»¥çœ‹ä¸å‡ºæ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ­£å¼å¼€å§‹å‘èµ·ç½‘ç»œè¯·æ±‚æ•°æ®å¡«å……view<br><img src="./view-debugging.png" alt="view-debugging"></p>
<h3 id="å‘èµ·ç½‘ç»œè¯·æ±‚æ•°æ®"><a href="#å‘èµ·ç½‘ç»œè¯·æ±‚æ•°æ®" class="headerlink" title="å‘èµ·ç½‘ç»œè¯·æ±‚æ•°æ®"></a>å‘èµ·ç½‘ç»œè¯·æ±‚æ•°æ®</h3><p><a href="http://www.imooc.com/video/11982" target="_blank" rel="noopener">http://www.imooc.com/video/11982</a></p>
<p><a href="http://www.imooc.com/video/11978" target="_blank" rel="noopener">imooc iosç½‘ç»œæ“ä½œå­¦ä¹ æŒ‡å—</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>Objective-C</tag>
        <tag>ios</tag>
        <tag>imooc</tag>
      </tags>
  </entry>
  <entry>
    <title>iOSåŸºç¡€æ•™ç¨‹ä¹‹ç•Œé¢åˆä½“éªŒ</title>
    <url>/2017/04/iOS%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E7%95%8C%E9%9D%A2%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
    <content><![CDATA[<p><a href="https://github.com/jsonz1993/learn/tree/master/Objective-c" target="_blank" rel="noopener">demoæºç </a> å¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™åˆ°<a href="https://github.com/jsonz1993/learn/tree/master/finish" target="_blank" rel="noopener">finish</a>æ–‡ä»¶ä¸‹æ‰¾</p>
<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>å› ä¸ºè¦å­¦çš„æ˜¯ <code>UIwindow</code>ï¼Œ æ‰€ä»¥åˆ›å»ºçš„ä¸å†æ˜¯ä¹‹å‰çš„<code>Command Line Tool</code>ã€‚ é€‰æ‹©<code>iOS=&gt;Single View Application</code>.<br>è¯­è¨€é€‰æ‹©<code>ObjectiveC</code>, é¡¹ç›®åæ ¹æ®è‡ªå·±å–œæ¬¢çš„å–ã€‚</p>
<h3 id="Hello-UIwindow"><a href="#Hello-UIwindow" class="headerlink" title="Hello UIwindow"></a>Hello UIwindow</h3><p><code>main.m</code> å…¥é—¨æ–‡ä»¶ä¸å†å‡ºç°åœ¨æ ¹ç›®å½•ä¸Šï¼Œè€Œæ˜¯åœ¨<code>Supporting Files</code>ä¸‹ã€‚<br>é»˜è®¤å¼•ç”¨äº† <code>&lt;UIKit/UIKit.h&gt;</code> å’Œ <code>&quot;AppDelegate.h&quot;</code> </p>
<p>ç‚¹å‡»é¡¹ç›®æ–‡ä»¶<br><img src="ç‚¹å‡»é¡¹ç›®æ–‡ä»¶.png" alt="ç‚¹å‡»é¡¹ç›®æ–‡ä»¶"></p>
<p>åˆ é™¤ Main Interfaceçš„é»˜è®¤å€¼<code>Main</code><br><img src="main-interface.png" alt="main-interface"></p>
<p>ç„¶åæ‰“å¼€<code>AppDelegate.m</code> å¼€å§‹æ¥æ‰‹åŠ¨æ¥è®¾ç½®ä¸€ä¸‹mainInterfacez</p>
<figure class="highlight objectivec"><figcaption><span>AppDelegate.m</span></figcaption><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    <span class="comment">// è®¾ç½®å¤§å°å’Œä½ç½® `UIScreen mainScreen` å¯ä»¥å¾—åˆ°æ‰‹æœºä¸»å±å¹• `bounds`æ˜¯è·å¾—å¤§å°</span></span><br><span class="line">    _window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[[<span class="built_in">UIScreen</span> mainScreen] bounds]];</span><br><span class="line">    <span class="comment">// è®¾ç½®é¢œè‰²ä¸ºçº¢è‰²</span></span><br><span class="line">    _window.backgroundColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">    <span class="comment">// è®¾ç½®æ ¹è§†é¢‘æ§åˆ¶å™¨</span></span><br><span class="line">    _window.rootViewController = [[<span class="built_in">UIViewController</span> alloc] init];</span><br><span class="line">    <span class="comment">// å°†windowè®¾ç½®ä¸ºæˆ‘ä»¬çš„ä¸»window</span></span><br><span class="line">    [_window makeKeyAndVisible];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹åæŒ‰ <code>cmd(âŒ˜)+R</code>æˆ–æŒ‰å·¦ä¸Šè§’çš„ä¸‰è§’å½¢æŒ‰é’®æ¥ <code>run app</code>ã€‚éªšç­‰ç‰‡åˆ»å°±å¯ä»¥çœ‹åˆ° ä¸€ä¸ªå…¨å±çº¢è‰²çš„æ¨¡æ‹Ÿå™¨.<br><img src="run-app.png" alt="run-app">;</p>
<h2 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h2><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ã€‚</p>
<ul>
<li>UIçš„åŸºç±»ï¼Œ åŸºç¡€</li>
<li>UIViewçš„å±æ€§</li>
<li>UIViewçš„æ–¹æ³•</li>
<li>UIViewçš„è‡ªé€‚åº”  </li>
</ul>
<figure class="highlight objectivec"><figcaption><span>ViewController.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ViewController.m</span></span><br><span class="line"><span class="comment">//  UIwindow</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/27.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"bilibili"</span>);</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è§†å›¾</span></span><br><span class="line">    <span class="built_in">UIView</span> *view1 = [[<span class="built_in">UIView</span> alloc] init]; <span class="comment">// å®ä¾‹åŒ–view</span></span><br><span class="line">    <span class="comment">// çŠ¶æ€æ é«˜åº¦ä¸º20px æ‰€ä»¥å†™viewçš„æ—¶å€™ä¸€èˆ¬ä¼šè®©å‡º20px</span></span><br><span class="line">    view1.frame = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">30</span>, <span class="number">375</span><span class="number">-20</span>, <span class="number">667</span><span class="number">-20</span>);</span><br><span class="line">    <span class="comment">// èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    view1.backgroundColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">    <span class="comment">// å°†è§†å›¾åŠ å…¥åˆ°çˆ¶è§†å›¾ä¸­</span></span><br><span class="line">    [<span class="keyword">self</span>.view addSubview: view1]; <span class="comment">// self.view æ˜¯view1çš„çˆ¶è§†å›¾</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"frame = x:%f y:%f w:%f h:%f"</span>, view1.frame.origin.x, view1.frame.origin.y, view1.frame.size.width, view1.frame.size.height);</span><br><span class="line">    <span class="comment">// ä¸€èˆ¬å«è¾¹æ¡†å¤§å°ï¼Œ x &amp;&amp; y æ°¸è¿œä¸º0 w&amp;&amp;h ä¸€è‡´</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"bounds = x:%f y:%f w:%f h:%f"</span>, view1.bounds.origin.x, view1.bounds.origin.y, view1.bounds.size.width, view1.bounds.size.height);</span><br><span class="line">    <span class="comment">// center - ä¸­å¿ƒç‚¹</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"center - x:%f y:%f"</span>, view1.center.x, view1.center.y);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å›¾ç‰‡ 1.png</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯äºŒå€è§†ç½‘è†œå±å¹• å‡†å¤‡ 1@2x.png</span></span><br><span class="line">    <span class="comment">// åŒç†è¿˜æœ‰ 1@3x.png</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"w:%f h:%f"</span>,[[<span class="built_in">UIScreen</span> mainScreen] bounds].size.width, [[<span class="built_in">UIScreen</span> mainScreen] bounds].size.height);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çˆ¶è§†å›¾ åªä¼šæœ‰ä¸€ä¸ª</span></span><br><span class="line">    <span class="built_in">UIView</span> *superView = view1.superview;</span><br><span class="line">    superView.backgroundColor = [<span class="built_in">UIColor</span> greenColor];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIView</span> *view2 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">    view2.frame = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">300</span>); <span class="comment">// åæ ‡å…¨æ˜¯æ ¹æ®è‡ªèº«çˆ¶è§†å›¾æ¥è®¾ç½®çš„ï¼Œä¸ä¼šè·¨å±‚</span></span><br><span class="line">    <span class="comment">// ç»™viewè®¾ç½®å”¯ä¸€æ ‡è¯†ï¼Œæ–¹ä¾¿çˆ¶çº§è§†å›¾è·å–è¾¨è®¤</span></span><br><span class="line">    view2.tag = <span class="number">2</span>;</span><br><span class="line">    view2.backgroundColor = [<span class="built_in">UIColor</span> blackColor];</span><br><span class="line">    [view1 addSubview:view2];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIView</span> *view3 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">    view3.frame = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    view3.tag = <span class="number">3</span>;</span><br><span class="line">    view3.backgroundColor = [<span class="built_in">UIColor</span> purpleColor];</span><br><span class="line">    [view1 addSubview:view3];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å­è§†å›¾ ä¼šæœ‰å¤šä¸ª</span></span><br><span class="line">    <span class="built_in">NSArray</span> *subViewsArray = view1.subviews;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">UIView</span> *view <span class="keyword">in</span> subViewsArray)</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (view.tag == <span class="number">2</span>)</span><br><span class="line">            view.backgroundColor = [<span class="built_in">UIColor</span> whiteColor]; <span class="comment">// view2å˜ç™½è‰²</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœçŸ¥é“å­è§†å›¾çš„tag å¯ä»¥é€šè¿‡tagå¾—åˆ°å¯¹åº”çš„å­è§†å›¾</span></span><br><span class="line">    <span class="built_in">UIView</span> *subView = [view1 viewWithTag:<span class="number">3</span>];</span><br><span class="line">    subView.backgroundColor = [<span class="built_in">UIColor</span> greenColor];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¿®æ”¹å±‚çº§ ç±»ä¼¼css çš„ zIndex</span></span><br><span class="line">    <span class="comment">// å½“å±‚äº¤æ¢ä¹‹åï¼Œ å¯¹åº”çš„å­è§†å›¾çš„æ•°ç»„ä¸‹æ ‡ä¹Ÿä¼šè¿›è¡Œæ”¹å˜</span></span><br><span class="line">    <span class="comment">// åŒä¸€ä¸ªçˆ¶è§†å›¾ä¸­ï¼Œå…ˆåŠ å…¥çš„viewå±‚çº§ä¼šæ¯”è¾ƒä½</span></span><br><span class="line">    <span class="built_in">UIView</span> *view4 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">    view4.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">300</span>);</span><br><span class="line">    view4.backgroundColor = [<span class="built_in">UIColor</span> yellowColor];</span><br><span class="line">    [<span class="keyword">self</span>.view insertSubview:view4 atIndex:<span class="number">0</span>]; <span class="comment">// è¿™æ—¶å€™ view4ä¼šç›–ä½view1çš„æ‰€æœ‰ç•Œé¢</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// äº¤æ¢ä¸¤ä¸ªå±‚çš„è§†å›¾</span></span><br><span class="line">    [superView exchangeSubviewAtIndex:<span class="number">0</span> withSubviewAtIndex:<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ’å…¥ä¸€ä¸ªè§†å›¾åˆ°æŒ‡å®šå±‚</span></span><br><span class="line">    <span class="built_in">UIView</span> *view5 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">    view5.frame = <span class="built_in">CGRectMake</span>(<span class="number">7</span>, <span class="number">80</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">    view5.backgroundColor = [<span class="built_in">UIColor</span> blackColor];</span><br><span class="line">    [view1 insertSubview:view5 atIndex:<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å°†ä¸€ä¸ªview æ”¾æœ€é¡¶å±‚æˆ–æœ€åº•å±‚</span></span><br><span class="line">    [view1 bringSubviewToFront:view2]; <span class="comment">// é¡¶å±‚</span></span><br><span class="line">    [view1 sendSubviewToBack: view2]; <span class="comment">// åº•å±‚</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è‡ªé€‚åº”</span></span><br><span class="line">    <span class="built_in">UIView</span> *backView = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">    backView.frame = <span class="built_in">CGRectMake</span>([<span class="built_in">UIScreen</span> mainScreen].bounds.size.width / <span class="number">2</span> - <span class="number">25</span>, [<span class="built_in">UIScreen</span> mainScreen].bounds.size.height /<span class="number">2</span> - <span class="number">25</span>, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// è‡ªé€‚åº”åˆ°å±å¹•ä¸­éƒ¨</span></span><br><span class="line">    backView.backgroundColor = [<span class="built_in">UIColor</span> orangeColor];</span><br><span class="line">    backView.tag = <span class="number">1001</span>;</span><br><span class="line">    <span class="comment">// å‡†è®¸å­è§†å›¾è‡ªé€‚åº”</span></span><br><span class="line">    backView.autoresizesSubviews = <span class="literal">YES</span>;</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview: backView];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIView</span> *topView = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">    topView.frame = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">    topView.backgroundColor = [<span class="built_in">UIColor</span> greenColor];</span><br><span class="line">    <span class="comment">// å†è®¾ç½®å­è§†å›¾çš„é€‚åº”æ–¹å¼ å·¦ä¾§é€‚åº”</span></span><br><span class="line">    topView.autoresizingMask = <span class="built_in">UIViewAutoresizingFlexibleRightMargin</span> | <span class="built_in">UIViewAutoresizingFlexibleLeftMargin</span> | <span class="built_in">UIViewAutoresizingFlexibleTopMargin</span> | <span class="built_in">UIViewAutoresizingFlexibleBottomMargin</span> | <span class="built_in">UIViewAutoresizingFlexibleWidth</span> | <span class="built_in">UIViewAutoresizingFlexibleHeight</span>; <span class="comment">// å³ï¼Œ å·¦ï¼Œ ä¸Šï¼Œ ä¸‹ï¼Œ å®½ï¼Œ é«˜ è·Ÿéšçˆ¶çº§è‡ªé€‚åº”</span></span><br><span class="line">    [backView addSubview: topView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æŒ‰é’® ä¸‹èŠ‚è¯¾ä¼šè®²åˆ°</span></span><br><span class="line">    <span class="built_in">UIButton</span> *btn = [<span class="built_in">UIButton</span> buttonWithType: <span class="built_in">UIButtonTypeSystem</span>];</span><br><span class="line">    btn.frame = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">550</span>, <span class="number">355</span>, <span class="number">30</span>);</span><br><span class="line">    btn.backgroundColor = [<span class="built_in">UIColor</span> brownColor];</span><br><span class="line">    [btn addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(btnClick) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview: btn];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)btnClick</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIView</span> *view = [<span class="keyword">self</span>.view viewWithTag:<span class="number">1001</span>];</span><br><span class="line">    view.frame = <span class="built_in">CGRectMake</span>(view.frame.origin.x - <span class="number">5</span>, view.frame.origin.y <span class="number">-5</span>, view.frame.size.width + <span class="number">10</span>, view.frame.size.height + <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    [<span class="keyword">super</span> didReceiveMemoryWarning];</span><br><span class="line">    <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="UILabel"><a href="#UILabel" class="headerlink" title="UILabel"></a>UILabel</h2><ul>
<li>æ–‡æœ¬æ ‡ç­¾</li>
<li>UIColor é¢œè‰²ç±»</li>
</ul>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®</p>
<figure class="highlight objectivec"><figcaption><span>ViewController</span></figcaption><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ–‡æœ¬æ ‡ç­¾</span></span><br><span class="line">    <span class="built_in">UILabel</span> *label = [[<span class="built_in">UILabel</span> alloc] init];</span><br><span class="line">    label.frame = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">30</span>);</span><br><span class="line">    label.backgroundColor = [<span class="built_in">UIColor</span> yellowColor];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ–‡æœ¬</span></span><br><span class="line">    label.text = <span class="string">@"æˆ‘æ˜¯ä¸€ä¸ªIOS FONT"</span>;</span><br><span class="line">    <span class="comment">// æ–‡å­—å¸ƒå±€ NSTextAlignmentCenter NSTextAlignmentLeft NSTextAlignmentRight ç­‰ç­‰</span></span><br><span class="line">    label.textAlignment = <span class="built_in">NSTextAlignmentCenter</span>;</span><br><span class="line">    <span class="comment">// æ–‡å­—é¢œè‰²</span></span><br><span class="line">    <span class="comment">// clearColoré€æ˜è‰²</span></span><br><span class="line">    <span class="comment">// colorWithRed green blue alpha ç±»ä¼¼cssçš„rgba</span></span><br><span class="line">    label.textColor = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">.1</span> green:<span class="number">.8</span> blue:<span class="number">.2</span> alpha:<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// labelçš„é€æ˜åº¦</span></span><br><span class="line">    label.alpha = <span class="number">.9</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å­—ä½“è®¾ç½® label.fonté‡Œé¢</span></span><br><span class="line">    label.font = [<span class="built_in">UIFont</span> systemFontOfSize: <span class="number">25</span>]; <span class="comment">// å­—å·</span></span><br><span class="line">    <span class="comment">// åŠ ç²—æˆ–å€¾æ–œ</span></span><br><span class="line">    label.font = [<span class="built_in">UIFont</span> boldSystemFontOfSize:<span class="number">25</span>];<span class="comment">// åŠ ç²—å’Œ25å·å­—ï¼Œä¼šè¦†ç›–å‰é¢è®¾ç½®</span></span><br><span class="line">    label.font = [<span class="built_in">UIFont</span> italicSystemFontOfSize:<span class="number">25</span>]; <span class="comment">// å€¾æ–œ</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çœ‹ç³»ç»Ÿæœ‰å“ªäº›å­—ä½“</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *name <span class="keyword">in</span> [<span class="built_in">UIFont</span> familyNames])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"font = %@"</span>, name);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¾ç½®å­—ä½“</span></span><br><span class="line">    label.font = [<span class="built_in">UIFont</span> fontWithName:<span class="string">@"Bodoni 72 Smallcaps"</span> size:<span class="number">25</span>];</span><br><span class="line">    <span class="comment">// æ–‡å­—é˜´å½±</span></span><br><span class="line"><span class="comment">//    label.shadowColor = [UIColor redColor];</span></span><br><span class="line"><span class="comment">//    label.shadowOffset = CGSizeMake(1, 1);</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤šæ–‡å­—å¤„ç† ä¼šè‡ªåŠ¨å‡ºç°...</span></span><br><span class="line">    label.text = <span class="string">@"topView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; // å³ï¼Œ å·¦ï¼Œ ä¸Šï¼Œ ä¸‹ï¼Œ å®½ï¼Œ é«˜ è·Ÿéšçˆ¶çº§è‡ªé€‚åº”[backView addSubview: topView]"</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœè¦æ¢è¡Œ</span></span><br><span class="line">    <span class="comment">// 1. é¦–å…ˆlabelè¦è¶³å¤Ÿå¤§</span></span><br><span class="line">    <span class="comment">// 2. è®¾ç½®æ¢è¡Œæ¨¡å¼</span></span><br><span class="line">    <span class="comment">// 3. è®¾ç½®æ˜¾ç¤ºè¡Œæ•°</span></span><br><span class="line">    label.frame = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">20</span>, [<span class="built_in">UIScreen</span> mainScreen].bounds.size.width - <span class="number">40</span>, [<span class="built_in">UIScreen</span> mainScreen].bounds.size.height - <span class="number">40</span>);</span><br><span class="line">    label.lineBreakMode = <span class="built_in">NSLineBreakByCharWrapping</span>;</span><br><span class="line">    label.numberOfLines = <span class="number">2</span>; <span class="comment">// å¦‚æœè®¾ç½®åˆ°-1æˆ–0 å°±ä¸ä¼šé™åˆ¶è¡Œæ•°ï¼Œèƒ½æ˜¾ç¤ºå¤šå°‘è¡Œå°±æ˜¾ç¤ºå¤šå°‘è¡Œ</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:label];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    [<span class="keyword">super</span> didReceiveMemoryWarning];</span><br><span class="line">    <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="UIImageView-å›¾ç‰‡view"><a href="#UIImageView-å›¾ç‰‡view" class="headerlink" title="UIImageView å›¾ç‰‡view"></a>UIImageView å›¾ç‰‡view</h2><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®,æ·»åŠ è‡ªå·±å–œæ¬¢çš„ç…§ç‰‡åˆ°é¡¹ç›®é‡Œã€‚ æ¯”å¦‚æˆ‘ è‚¯å®šæ˜¯æ·»åŠ <a href="http://baike.baidu.com/link?url=5a-QxerL5Nm6COTiB0ehVsx9e7aJ_i1nUVrlmYKx9xNLxD7UJtX6A284F0VbLfq3J46gw9ZcxdFN_-MTcH7aGwxafMh3mZ8SzWIhAg_fpzR97b4bUd5CnoC4XFmZa5Fo" target="_blank" rel="noopener">GAKKI</a>çš„</p>
<p><img src="add-files.png" alt="add-files"></p>
<figure class="highlight objectivec"><figcaption><span>ViewController.m</span></figcaption><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é¦–å…ˆ éšä¾¿åŠ è½½å‡ å¼ å›¾ç‰‡åˆ°é¡¹ç›®ä¸­</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">    <span class="built_in">NSString</span> *path = [[<span class="built_in">NSBundle</span> mainBundle] resourcePath]; <span class="comment">// å·¥ç¨‹ç›®å½•</span></span><br><span class="line">    <span class="built_in">NSString</span> *imgPath = [<span class="built_in">NSString</span> stringWithFormat: <span class="string">@"%@/2.jpg"</span>, path]; <span class="comment">// æ‹¼æ¥å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">    <span class="comment">// åé¢å‚æ•°ä¸ºå›¾ç‰‡è·¯å¾„</span></span><br><span class="line">    <span class="built_in">UIImage</span> *image = [[<span class="built_in">UIImage</span> alloc] initWithContentsOfFile: imgPath]; <span class="comment">// åŠ è½½å®Œä¼šé‡Šæ”¾ï¼Œä¸ä¼šå­˜åœ¨å†…å­˜ä¸­ï¼Œä¸è¿‡æ¯æ¬¡éƒ½ä¼šå»åŠ è½½</span></span><br><span class="line"><span class="comment">//    image = [UIImage alloc] initWithData:&lt;#(nonnull NSData *)#&gt; 2è¿›åˆ¶æ ¼å¼å›¾ç‰‡åŠ è½½</span></span><br><span class="line"><span class="comment">//    UIImage *image1 = [UIImage imageNamed:@"2"]; // è¿™ç§ç›´æ¥å†™æ–‡ä»¶åï¼Œå¦‚æœæ˜¯pngæ ¼å¼çš„ï¼Œå¯ä»¥çœç•¥åç¼€å è¿™ç§æ–¹å¼ç›´æ¥æŠŠå›¾ç‰‡æ”¾åˆ°å†…å­˜ä¸­ï¼Œå ç”¨å†…å­˜ä½†æ˜¯ä¸‹æ¬¡è°ƒç”¨ä¼šå¾ˆå¿«ã€‚ æ¯”å¦‚qqè¡¨æƒ…ï¼Œå¯ä»¥æ”¾åˆ°ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å›¾ç‰‡æ˜¾ç¤ºå¿…é¡»è¦æœ‰è½½ä½“</span></span><br><span class="line">    <span class="built_in">UIImageView</span> *imageView = [[<span class="built_in">UIImageView</span> alloc] initWithImage: image];</span><br><span class="line">    <span class="comment">// image.size.width image.size.height</span></span><br><span class="line">    imageView.frame = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">100</span>, <span class="number">400</span>,  <span class="number">400</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å†…å®¹æ¨¡å¼ å±…ä¸­ï¼š UIViewContentModeCenter</span></span><br><span class="line">    <span class="comment">// é»˜è®¤ä¸ºUIViewContentModeScaleToFill æ‹‰ä¼¸å……æ»¡æ•´ä¸ªè½½ä½“</span></span><br><span class="line">    <span class="comment">// UIViewContentModeScaleAspectFit æ‹‰ä¼¸ä½†ä¸æ”¹å˜æ¯”ä¾‹ï¼Œå……æ»¡å°çš„è¾¹æ¡†</span></span><br><span class="line">    <span class="comment">// UIViewContentModeScaleAspectFill æ‹‰ä¼¸ä½†ä¸æ”¹å˜æ¯”ä¾‹ï¼Œå……æ»¡å¤§çš„è¾¹æ¡†</span></span><br><span class="line">    <span class="comment">// å­¦è¿‡cssçš„ åº”è¯¥éƒ½å¾ˆå®¹æ˜“ç†è§£ background-sizeæ¨¡å¼</span></span><br><span class="line">    imageView.contentMode = <span class="built_in">UIViewContentModeScaleAspectFit</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// UIImageView åŠ¨ç”» - æ’­æ”¾åºåˆ—å›¾ ç•¥!</span></span><br><span class="line">    </span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å›¾ç‰‡æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å¤§å°æ˜¯è½½ä½“æ¥æ§åˆ¶çš„</span></span><br><span class="line">    [<span class="keyword">self</span>.view addSubview: imageView];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    [<span class="keyword">super</span> didReceiveMemoryWarning];</span><br><span class="line">    <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>Objective-C</tag>
        <tag>ios</tag>
        <tag>imooc</tag>
      </tags>
  </entry>
  <entry>
    <title>Foundation å…¥é—¨</title>
    <url>/2017/04/Foundation-%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<p>Foundation(åŸºç¡€æ¡†æ¶) è¯¾ç¨‹çŸ¥è¯†æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åé¢ä¼šæ¯ä¸ªå­¦ä¹ å†…å®¹æ–°å»ºä¸€ä¸ªç±»å»å†™ã€‚<br><img src="./foundation.png" alt="foundation"></p>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œ <a href="https://github.com/jsonz1993/learn/tree/master/Objective-c/foundation" target="_blank" rel="noopener">æ–‡ç« æºç ,æ‰¾ä¸åˆ°åˆ™åˆ°finishé‡Œé¢æ‰¾</a></p>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>æ–°å»ºä¸€ä¸ª<code>String</code>ç±»<br><figure class="highlight objectivec"><figcaption><span>String.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">String</span> : <span class="title">NSObject</span></span></span><br><span class="line">-(<span class="keyword">void</span>) stringBaseFn; <span class="comment">// å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œåé¢æœ‰å…³çš„å­—ç¬¦ä¸²å‡½æ•°çŸ¥è¯†éƒ½å†™åœ¨è¯¥æ–¹æ³•å†…</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å¹¶è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¸»è¦æ˜¯ä¸€äº›å­—ç¬¦ä¸²çš„æ–¹æ³• ä»¥åŠè¾“å‡º</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"String.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        String *str = [[String alloc] init];</span><br><span class="line">        [str stringBaseFn];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>String.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  String.m</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/23.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"String.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">String</span></span></span><br><span class="line">-(<span class="keyword">void</span>) stringBaseFn</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">char</span> *s = <span class="string">"Hello C"</span>; <span class="comment">// cè¯­è¨€å­—ç¬¦ä¸² char ç±»å‹ *å·ä»£è¡¨å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// OC ä¸­@ä»£è¡¨å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">NSString</span> *str = <span class="string">@"Hello ObjectiveC"</span>; <span class="comment">// OC å­—ç¬¦ä¸² NSString ç±»å‹ *å·ä»£è¡¨å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// OC ä¸ Cå­—ç¬¦ä¸²çš„ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="comment">// C -&gt; OC</span></span><br><span class="line">    <span class="built_in">NSString</span> *str1 = [<span class="built_in">NSString</span> stringWithUTF8String:s];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str1 = %@"</span>, str1);</span><br><span class="line">    <span class="comment">// OC -&gt; C</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str2 = %s"</span>, [str UTF8String]);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿™æ ·åˆ›å»ºå­—ç¬¦ä¸²ï¼Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨å»é‡Šæ”¾å†…å­˜ç­‰</span></span><br><span class="line">    <span class="built_in">NSString</span> *str3 = <span class="string">@"IOS"</span>;</span><br><span class="line">    <span class="comment">// è¿™ç§éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜</span></span><br><span class="line">    <span class="built_in">NSString</span> *str4 = [[<span class="built_in">NSString</span> alloc] init];</span><br><span class="line">    str4 = <span class="string">@"ios"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// **æ ¼å¼åŒ–å­—ç¬¦ä¸²** é‡è¦</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *str5 = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"a = %d str3 = %@"</span>, a, str3];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str5 ä¸º %@"</span>, str5);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‹¼æ¥å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">NSString</span> *str6 = [str5 stringByAppendingString: [<span class="built_in">NSString</span> stringWithUTF8String: s]];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str6 = %@"</span>, str6);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤§å°å†™çš„è½¬æ¢é—®é¢˜</span></span><br><span class="line">    <span class="built_in">NSString</span> *str7 = <span class="string">@"HELLO JSONZ"</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *str8 = [str7 lowercaseString];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str8 = %@"</span>, str8);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è½¬æ¢å¤§å†™</span></span><br><span class="line">    <span class="built_in">NSString</span> *str9 = [str8 uppercaseString];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str9 = %@"</span>, str9);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å‰ç¼€å’Œåç¼€çš„åˆ¤æ–­</span></span><br><span class="line">    <span class="built_in">NSString</span> *str10 = <span class="string">@"www.imooc.com"</span>;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å‰ç¼€</span></span><br><span class="line">    <span class="built_in">BOOL</span> hasPreFix = [str10 hasPrefix:<span class="string">@"www."</span>];</span><br><span class="line">    <span class="keyword">if</span> (hasPreFix)</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"æœ‰å¯¹åº”å‰ç¼€"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"æ²¡æœ‰å¯¹åº”å‰ç¼€"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åç¼€</span></span><br><span class="line">    <span class="built_in">BOOL</span> hasSuffix = [str10 hasSuffix:<span class="string">@".com"</span>];</span><br><span class="line">    <span class="keyword">if</span> (hasSuffix)</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"æœ‰å¯¹åº”åç¼€"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"æ²¡æœ‰å¯¹åº”åç¼€"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">    <span class="built_in">NSString</span> *str11 = <span class="string">@"Hello"</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *str12 = <span class="string">@"Hello"</span>;</span><br><span class="line">    <span class="keyword">if</span> ([str11 isEqualToString:str12])</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"str11 ä¸ str12 ä¸€è‡´"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"ä¸ä¸€è‡´"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†å‰²å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="comment">// 1. æŒ‰ç…§æŒ‡å®šå­—ç¬¦åˆ†å‰²å­—ç¬¦ä¸² è¿”å›æ•°ç»„</span></span><br><span class="line">    <span class="built_in">NSString</span> *str13 = <span class="string">@"a,b,c,d,e,f,g"</span>;</span><br><span class="line">    <span class="built_in">NSArray</span> *strArray = [str13 componentsSeparatedByString:<span class="string">@","</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *str <span class="keyword">in</span> strArray)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"str = %@"</span>, str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. æŒ‰ç…§èŒƒå›´æˆªå–å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">NSRange</span> range = <span class="built_in">NSMakeRange</span>(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">NSString</span> *str14 = [str13 substringWithRange:range];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str14 = %@"</span>, str14);</span><br><span class="line">    <span class="comment">// 3. ä»æŸä¸€ä½å¼€å§‹æˆªå–åˆ°ç»“æŸ</span></span><br><span class="line">    <span class="built_in">NSString</span> *str15 = [str13 substringFromIndex:<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str15 = %@"</span>, str15);</span><br><span class="line">    <span class="comment">// 4.ä»å¼€å¤´åˆ°æŸä¸€ä½</span></span><br><span class="line">    <span class="built_in">NSString</span> *str16 = [str13 substringToIndex:<span class="number">7</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str16 = %@"</span>, str16);</span><br><span class="line">    <span class="comment">// 5.å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºæ¯ä¸€ä¸ªå­—ç¬¦, ä»å­—ç¬¦ä¸²å–å‡ºæŸä¸€ä½</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; [str13 length]; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%c"</span>, [str13 characterAtIndex:i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾</span></span><br><span class="line">    <span class="built_in">NSString</span> *str17 = <span class="string">@"ab cd ef gh ij ab"</span>;</span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ä¸²çš„ä½ç½® æ­£å‘æŸ¥æ‰¾</span></span><br><span class="line">    <span class="built_in">NSRange</span> range1 = [str17 rangeOfString:<span class="string">@"ab"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"range1.location: %ld range1.length: %ld"</span>, range1.location, range1.length);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ›¿æ¢</span></span><br><span class="line">    <span class="built_in">NSString</span> *str18 = <span class="string">@"Hello ios, Hello imooc"</span>;</span><br><span class="line">    <span class="comment">// æ›¿æ¢æŸä¸€ä¸ªèŒƒå›´çš„å†…å®¹</span></span><br><span class="line">    <span class="built_in">NSString</span> *str19 = [str18 stringByReplacingCharactersInRange:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, <span class="number">5</span>)  withString:<span class="string">@"ä½ å¥½"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str19 = %@"</span>, str19);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç”¨æŒ‡å®šå­—ç¬¦ä¸²æ›¿æ¢åŸå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">NSString</span> *str20 = [str18 stringByReplacingOccurrencesOfString:<span class="string">@"Hello ios"</span> withString: <span class="string">@"ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæºå­—ç¬¦ä¸²ä¸­è¦è¢«æ›¿æ¢çš„å†…å®¹ï¼Œ ç¬¬äºŒä¸ªä¸ºæ›¿æ¢æˆçš„å­—ç¬¦ä¸²"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str20 = %@"</span>, str20);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¯»å–æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">// 1. æœ¬åœ°æ–‡ä»¶ï¼› 2.ç½‘ç»œæ–‡ä»¶</span></span><br><span class="line">    <span class="comment">// è·¯å¾„ç±»</span></span><br><span class="line">    <span class="built_in">NSString</span> *str21 = <span class="string">@"www.baidu.com"</span>;</span><br><span class="line">    <span class="comment">// ç½‘ç»œè·¯å¾„</span></span><br><span class="line">    <span class="built_in">NSURL</span> *httpURL = [<span class="built_in">NSURL</span> URLWithString:str21];</span><br><span class="line">    <span class="comment">//æœ¬åœ°è·¯å¾„</span></span><br><span class="line"><span class="comment">//    NSString *fileURL = [NSURL fileURLWithPath:str21];</span></span><br><span class="line">    <span class="comment">// è¯»å–ç½‘ç»œæ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">NSString</span> *httpStr = [<span class="built_in">NSString</span> stringWithContentsOfURL:httpURL encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"httpStr = %@"</span>, httpStr);</span><br><span class="line">    <span class="comment">// è¯»å–æœ¬åœ°æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">NSString</span> *fileStr = [<span class="built_in">NSString</span> stringWithContentsOfFile: <span class="string">@"/Users/jsonz/Documents/learn/Objective-c/foundation/foundation/app.txt"</span> encoding:<span class="built_in">NSUTF8StringEncoding</span> error: <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"fileStr = %@"</span>, fileStr);</span><br><span class="line">    <span class="comment">// å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">NSString</span> *str22 = <span class="string">@"Hello JSer"</span>;</span><br><span class="line">    <span class="built_in">BOOL</span> isOk = [str22 writeToFile:<span class="string">@"/Users/jsonz/Documents/learn/Objective-c/foundation/foundation/app.js"</span> atomically:<span class="literal">YES</span> encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</span><br><span class="line">    <span class="keyword">if</span> (isOk) <span class="built_in">NSLog</span>(<span class="string">@"æ–‡ä»¶å†™å…¥æˆåŠŸ"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">NSLog</span>(<span class="string">@"æ–‡ä»¶å†™å…¥å¤±è´¥"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="NSMutableString-å¯å˜å­—ç¬¦ä¸²"><a href="#NSMutableString-å¯å˜å­—ç¬¦ä¸²" class="headerlink" title="NSMutableString å¯å˜å­—ç¬¦ä¸²"></a>NSMutableString å¯å˜å­—ç¬¦ä¸²</h2><p>æ–°å»ºä¸€ä¸ª <code>NSMutableStringClass</code> ç±»ã€‚ NSMutableStringæ˜¯å­—ç¬¦ä¸²çš„å­ç±»</p>
<figure class="highlight objectivec"><figcaption><span>NSMutableString.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSStringClass.h</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/25.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSMutableStringClass</span> : <span class="title">NSObject</span></span></span><br><span class="line">-(<span class="keyword">void</span>) ShowNSMutableString;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>NSMutableString.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSStringClass.m</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/25.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"NSMutableStringClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSMutableStringClass</span></span></span><br><span class="line">-(<span class="keyword">void</span>) ShowNSMutableString</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¯å˜å­—ç¬¦ä¸²çš„ç®€å•æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// å¯å˜å­—ç¬¦ä¸²æ˜¯å­—ç¬¦ä¸²çš„å­ç±»</span></span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–</span></span><br><span class="line">    <span class="built_in">NSMutableString</span> *str = [[<span class="built_in">NSMutableString</span> alloc] initWithCapacity:<span class="number">10</span>]; <span class="comment">// åˆ†ç±»é•¿åº¦ä¸å¯ä»¥è¶…è¿‡10ï¼Œ æ€§èƒ½ä¼˜åŒ–ã€‚ä¸è¿‡è¶…è¿‡10 ä¹Ÿä¸ä¼šæŠ¥é”™</span></span><br><span class="line">    [str setString:<span class="string">@"hello "</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.è¿½åŠ å­—ç¬¦ä¸²</span></span><br><span class="line">    [str appendString:<span class="string">@"ObjectiveC"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str = %@"</span>, str);</span><br><span class="line">    <span class="comment">// è¿½åŠ æ ¼å¼åŒ–å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    [str appendFormat:<span class="string">@" - %d"</span>, a];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str = %@"</span>, str);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.æ›¿æ¢å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">NSRange</span> range = [str rangeOfString:<span class="string">@"ObjectiveC"</span>];</span><br><span class="line">    [str replaceCharactersInRange:range withString:<span class="string">@"IOS"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str = %@"</span>, str);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. æ’å…¥å­—ç¬¦ä¸²</span></span><br><span class="line">    [str insertString:<span class="string">@"A"</span> atIndex: <span class="number">4</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str = %@"</span>, str);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4. åˆ é™¤å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">NSRange</span> range1 = [str rangeOfString:<span class="string">@"IOS"</span>];</span><br><span class="line">    [str deleteCharactersInRange:range1];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"str = %@"</span>, str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>main.m è°ƒç”¨å‰è®°å¾—å¼•å…¥ç±»</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSMutableStringClass</span> *_NSMutableString = [[<span class="built_in">NSMutableStringClass</span> alloc] init];</span><br><span class="line">[_NSMutableString ShowNSMutableString];</span><br></pre></td></tr></table></figure>
<h2 id="NSArray-ä¸å¯å˜æ•°ç»„"><a href="#NSArray-ä¸å¯å˜æ•°ç»„" class="headerlink" title="NSArray ä¸å¯å˜æ•°ç»„"></a>NSArray ä¸å¯å˜æ•°ç»„</h2><p>æ–°å»ºä¸€ä¸ª<code>arr</code>ç±»</p>
<figure class="highlight objectivec"><figcaption><span>Arr.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Arr.m</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/26.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"Arr.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Arr</span></span></span><br><span class="line">-(<span class="keyword">void</span>) showArrFn</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ä¸å¯å˜æ•°ç»„"</span>);</span><br><span class="line">    <span class="comment">// OCæ•°ç»„ã€‚ å¯ä»¥å­˜å‚¨ä¸åŒç±»å‹å¯¹è±¡,åªèƒ½å­˜å‚¨å¯¹è±¡.(int, char)ä¸å¯ä»¥</span></span><br><span class="line">    <span class="comment">// åªå­˜å¯¹è±¡æŒ‡é’ˆï¼ˆjsä¸€æ ·)</span></span><br><span class="line">    <span class="built_in">NSArray</span> *arr1 = [[<span class="built_in">NSArray</span> alloc] initWithObjects:<span class="string">@"1"</span>, <span class="string">@"2"</span>, <span class="string">@"3"</span>, <span class="string">@"4"</span>, <span class="string">@"5"</span>, <span class="literal">nil</span>];</span><br><span class="line">    <span class="comment">// æ•°ç»„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">int</span> count = (<span class="keyword">int</span>)arr1.count;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"count = %d"</span>, count);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰è¯¥å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">BOOL</span> isHave = [arr1 containsObject: <span class="string">@"2"</span>];</span><br><span class="line">    <span class="keyword">if</span> (isHave)</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"å­˜åœ¨"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"ä¸å­˜åœ¨"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å–å¾—æ•°ç»„ä¸­æ‰€éœ€å…ƒç´ </span></span><br><span class="line">    <span class="built_in">NSString</span> *str = [arr1 lastObject];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"æœ€åä¸€ä¸ªå¯¹è±¡ä¸º %@"</span>, str);</span><br><span class="line">    str = [arr1 firstObject];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸º %@"</span>, str);</span><br><span class="line">    str = [arr1 objectAtIndex: <span class="number">3</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸º %@"</span>, str);</span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾æŸä¸ªå¯¹è±¡ä¸ºç¬¬å‡ ä¸ªä¸‹æ ‡, ä¸å­˜åœ¨åˆ™ -1</span></span><br><span class="line">    <span class="keyword">int</span> index = (<span class="keyword">int</span>)[arr1 indexOfObject:<span class="string">@"3"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"æŸ¥æ‰¾æŸä¸ªå¯¹è±¡ä¸ºç¬¬å‡ ä¸ªä¸‹æ ‡ %d"</span>, index);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ•°ç»„çš„éå† 1.for; 2. for in; 3.æšä¸¾è¿­ä»£</span></span><br><span class="line">    <span class="comment">// for å¾ªç¯ æ³¨æ„ç±»å‹é—®é¢˜</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr1.count; i++) &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *str1 = [arr1 objectAtIndex:i];</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"for str1 = %@"</span>, str1);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¿«é€Ÿæšä¸¾ æ•°ç»„çš„å…ƒç´ ç±»å‹è¦ä¿æŒä¸€è‡´</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *str2 <span class="keyword">in</span> arr1) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"for in str2 = %@"</span>, str2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿­ä»£æšä¸¾(æ…•è¯¾æ²¡æœ‰è¯¥ç‚¹è§†é¢‘)</span></span><br><span class="line">    [arr1 enumerateObjectsUsingBlock:^(<span class="keyword">id</span> obj, <span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"id= %@"</span>, obj);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="NSMutableArr-å¯å˜æ•°ç»„"><a href="#NSMutableArr-å¯å˜æ•°ç»„" class="headerlink" title="NSMutableArr å¯å˜æ•°ç»„"></a>NSMutableArr å¯å˜æ•°ç»„</h2><p>ä¸å¯å˜å­—ç¬¦ä¸²ä¸€æ ·ï¼Œæ•°ç»„ä¹Ÿæœ‰å¯å˜çš„ã€‚ä¸€èˆ¬é¡¹ç›®ä¸­å¦‚æœæœ‰ä¿®æ”¹æ•°ç»„çš„å°±ç”¨è¿™ä¸ªï¼Œå¦‚æœä¸å¸Œæœ›æ•°ç»„è¢«ä¿®æ”¹åˆ™ç”¨ä¸å¯å˜æ•°ç»„</p>
<figure class="highlight objectivec"><figcaption><span>NSMutableArrClass.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSMutableArrClass.m</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/26.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"NSMutableArrClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSMutableArrClass</span></span></span><br><span class="line">-(<span class="keyword">void</span>)showArrFn</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *array = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">    <span class="built_in">NSString</span> *str1 = <span class="string">@"bili"</span>;</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    [array addObject: str1];</span><br><span class="line">    <span class="built_in">NSArray</span> *arr1 = [[<span class="built_in">NSArray</span> alloc] initWithObjects:<span class="string">@"1"</span>, <span class="string">@"2"</span>, <span class="string">@"3"</span>, <span class="string">@"4"</span>, <span class="string">@"5"</span>, <span class="literal">nil</span>];</span><br><span class="line">    [array addObject:arr1];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"array = %@"</span>, array);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ é™¤æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">    [array removeAllObjects];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"åˆ é™¤åçš„ array = %@"</span>, array);</span><br><span class="line">    [array addObject:arr1];</span><br><span class="line">    [array addObject: str1];</span><br><span class="line">    <span class="comment">// åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    [array removeLastObject];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"åˆ é™¤åçš„ array = %@"</span>, array);</span><br><span class="line">    [array addObject: str1];</span><br><span class="line">    <span class="comment">// åˆ é™¤æŒ‡å®šå…ƒç´ </span></span><br><span class="line">    [array removeObject:<span class="string">@"bili"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"åˆ é™¤åçš„ array = %@"</span>, array);</span><br><span class="line">    <span class="comment">// åˆ é™¤æŒ‡å®šindexçš„å…ƒç´ </span></span><br><span class="line">    [array removeObjectAtIndex:<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"åˆ é™¤åçš„ array = %@"</span>, array);</span><br><span class="line">    </span><br><span class="line">    [array addObject:arr1];</span><br><span class="line">    [array addObject: str1];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// äº¤æ¢å…ƒç´ ä½ç½®</span></span><br><span class="line">    [array exchangeObjectAtIndex:<span class="number">1</span> withObjectAtIndex:<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"äº¤æ¢å %@"</span>, array);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="å­—å…¸-NSDictionary"><a href="#å­—å…¸-NSDictionary" class="headerlink" title="å­—å…¸ NSDictionary"></a>å­—å…¸ NSDictionary</h2><p>ç›¸å½“äºjs é‡Œçš„å¯¹è±¡<code>{}</code>. æ–°å»ºä¸€ä¸ªç±»<code>NSDic</code></p>
<figure class="highlight objectivec"><figcaption><span>NSDictionary.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSDictionary.h</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/26.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSDic</span> : <span class="title">NSObject</span></span></span><br><span class="line">-(<span class="keyword">void</span>) showNSDictionaryFn;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>NSDictionary.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSDictionary.m</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/26.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"NSDic.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSDic</span></span></span><br><span class="line">-(<span class="keyword">void</span>) showNSDictionaryFn</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"test"</span>);</span><br><span class="line"><span class="comment">//   å­—å…¸ï¼š ç›¸å½“äºjsçš„å¯¹è±¡~ pyçš„å­—å…¸ã€‚</span></span><br><span class="line">    <span class="comment">// å£°æ˜åä¸å¯ä»¥æ”¹</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dict1 = [<span class="built_in">NSDictionary</span> dictionaryWithObject:<span class="string">@"1"</span> forKey:<span class="string">@"a"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"dict1 = %@"</span>, dict1);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤šä¸ªé”®å€¼å¯¹</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dict2 = [<span class="built_in">NSDictionary</span> dictionaryWithObjects:[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"1"</span>, <span class="string">@"2"</span>, <span class="string">@"3"</span>, <span class="literal">nil</span>] forKeys:[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"a"</span>, <span class="string">@"b"</span>, <span class="string">@"c"</span>, <span class="literal">nil</span>]];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"dict2 %@"</span>, dict2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç®€ä¾¿å†™æ³•</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dict3 = @&#123;</span><br><span class="line">                            <span class="string">@"1"</span>: <span class="string">@"a"</span>,</span><br><span class="line">                            <span class="string">@"2"</span>: <span class="string">@"b"</span></span><br><span class="line">                            &#125;;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"dict3 %@"</span>, dict3);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é•¿åº¦</span></span><br><span class="line">    <span class="keyword">int</span> count = (<span class="keyword">int</span>)[dict2 count];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"count %d"</span>, count);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–å¯¹åº”keyçš„ value</span></span><br><span class="line">    <span class="built_in">NSString</span> *value = [dict2 valueForKey: <span class="string">@"b"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"value = %@"</span>, value);</span><br><span class="line">    <span class="built_in">NSString</span> *value2 = [dict2 objectForKey: <span class="string">@"b"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"value2 = %@"</span>, value2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ•°ç»„ å­—å…¸æ‰€æœ‰çš„å€¼</span></span><br><span class="line">    <span class="built_in">NSArray</span> *allValues = [dict2 allValues];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"allValues = %@"</span>, allValues);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ•°ç»„ æ‰€æœ‰çš„key</span></span><br><span class="line">    <span class="built_in">NSArray</span> *allKeys = [dict2 allKeys];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"allKeys = %@"</span>, allKeys);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// éå†</span></span><br><span class="line">    <span class="built_in">NSArray</span> *array = [dict2 objectsForKeys:[<span class="built_in">NSArray</span> arrayWithObjects: <span class="string">@"a"</span>, <span class="string">@"b"</span>, <span class="string">@"d"</span>, <span class="literal">nil</span>] notFoundMarker:<span class="string">@"Not Fount"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"array = %@"</span>, array);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// éå†å­—å…¸</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *key <span class="keyword">in</span> dict2) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@ = %@"</span>, key, [dict2 objectForKey:key]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æšä¸¾å™¨</span></span><br><span class="line">    <span class="built_in">NSEnumerator</span> *en = [dict2 keyEnumerator];</span><br><span class="line">    <span class="keyword">id</span> key = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">while</span> (key = [en nextObject]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"key = %@"</span>, key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [dict2 enumerateKeysAndObjectsUsingBlock:^(<span class="keyword">id</span> key, <span class="keyword">id</span> obj, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"id = %@, obj = %@"</span>, key, obj);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="å¯å˜å­—æ®µ-NSMutableDictionary"><a href="#å¯å˜å­—æ®µ-NSMutableDictionary" class="headerlink" title="å¯å˜å­—æ®µ NSMutableDictionary"></a>å¯å˜å­—æ®µ NSMutableDictionary</h2><figure class="highlight objectivec"><figcaption><span>NSDic2.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSDic2.h</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/26.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSDic2</span> : <span class="title">NSObject</span></span></span><br><span class="line">-(<span class="keyword">void</span>) showFn;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>NSDic2.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSDic2.m</span></span><br><span class="line"><span class="comment">//  foundation</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Jsonz on 2017/4/26.</span></span><br><span class="line"><span class="comment">//  Copyright Â© 2017å¹´ Jsonz. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"NSDic2.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSDic2</span></span></span><br><span class="line"><span class="comment">// å¯å˜å­—å…¸</span></span><br><span class="line">-(<span class="keyword">void</span>) showFn</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableDictionary</span> *dict = [[<span class="built_in">NSMutableDictionary</span> alloc] init];</span><br><span class="line">    <span class="comment">// æ·»åŠ é”®å€¼å¯¹</span></span><br><span class="line">    [dict setObject:<span class="string">@"1"</span> forKey: <span class="string">@"a"</span>];</span><br><span class="line">    [dict setObject: <span class="string">@"2"</span> forKey: <span class="string">@"b"</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ é™¤é”®å€¼å¯¹</span></span><br><span class="line">    [dict removeObjectForKey:<span class="string">@"a"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"dict åˆ é™¤forKey %@"</span>, dict);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ é™¤æ‰€æœ‰</span></span><br><span class="line">    [dict removeAllObjects];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"dict åˆ é™¤æ‰€æœ‰ %@"</span>, dict);</span><br><span class="line"></span><br><span class="line">    [dict setObject:<span class="string">@"1"</span> forKey: <span class="string">@"a"</span>];</span><br><span class="line">    [dict setObject: <span class="string">@"2"</span> forKey: <span class="string">@"b"</span>];</span><br><span class="line">    [dict setObject: <span class="string">@"3"</span> forKey: <span class="string">@"c"</span>];</span><br><span class="line">    [dict removeObjectsForKeys: [<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"a"</span>, <span class="string">@"b"</span>, <span class="literal">nil</span>]];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"dict æ‰¹é‡åˆ é™¤  %@"</span>, dict);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>Objective-C</tag>
        <tag>ios</tag>
        <tag>imooc</tag>
      </tags>
  </entry>
  <entry>
    <title>Objective-C é¢å‘å¯¹è±¡åˆä½“éªŒ</title>
    <url>/2017/04/Objective-C-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
    <content><![CDATA[<h2 id="é¢å‘å¯¹è±¡ç®€ä»‹"><a href="#é¢å‘å¯¹è±¡ç®€ä»‹" class="headerlink" title="é¢å‘å¯¹è±¡ç®€ä»‹"></a>é¢å‘å¯¹è±¡ç®€ä»‹</h2><p>è¯­è¨€çš„é¢å‘å¯¹è±¡éƒ½æ˜¯æ¢æ±¤ä¸æ¢è¯ æ¥æ¥å»å»é‚£å‡ ä¸ªæ¦‚å¿µ</p>
<ul>
<li>OOPï¼ˆObject Oriented Programming) åŸºæœ¬æ¦‚å¿µ</li>
<li>å¯¹è±¡ ï¼ˆç”·äººï¼Œå¥³äººï¼Œç¨‹åºå‘˜ï¼‰</li>
<li>æŠ½è±¡ - ç±»ï¼ˆäººï¼‰</li>
</ul>
<h3 id="ç±»å’Œå¯¹è±¡çš„å…³ç³»"><a href="#ç±»å’Œå¯¹è±¡çš„å…³ç³»" class="headerlink" title="ç±»å’Œå¯¹è±¡çš„å…³ç³»"></a>ç±»å’Œå¯¹è±¡çš„å…³ç³»</h3><ul>
<li>åˆ›å»ºç±»(äºº)ã€å¾—åˆ°å¯¹è±¡ï¼ˆç¨‹åºå‘˜ï¼‰</li>
<li>æˆå‘˜å˜é‡ï¼š å†…éƒ¨ä½¿ç”¨ï¼Œæ¯”å¦‚ å¤§è„‘ çœ¼ç› å˜´</li>
<li>å±æ€§ï¼š ç»™å¤–éƒ¨ä½¿ç”¨ æ¯”å¦‚ èŒä¸š</li>
<li>ç±»çš„å®ä¾‹ä¸ºå¯¹è±¡</li>
</ul>
<h4 id="åˆ›å»ºdemo"><a href="#åˆ›å»ºdemo" class="headerlink" title="åˆ›å»ºdemo"></a>åˆ›å»ºdemo</h4><ol>
<li>åŒ<a href="https://jsonz1993.github.io/2017/04/%E5%BE%81%E6%88%98Objective-C/">å¾æˆ˜Objective-C</a>ä¸€æ · åˆ›å»ºä¸€ä¸ª<code>Command Line Tool</code> å†™ç¤ºä¾‹ä»£ç </li>
<li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç±»å‹ä¸º<code>Cocoa Class</code>,<code>name: People</code>, <code>Subclass of: NSObject</code>, <code>language: Objective-C</code> ã€‚ç‚¹å‡»Nextä¹‹åä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ <code>People.h</code>,<code>People.m</code>ã€‚</li>
</ol>
<h4 id="å¼•å…¥ä¸å®ä¾‹åŒ–"><a href="#å¼•å…¥ä¸å®ä¾‹åŒ–" class="headerlink" title="å¼•å…¥ä¸å®ä¾‹åŒ–"></a>å¼•å…¥ä¸å®ä¾‹åŒ–</h4><p>åœ¨ <code>main.m</code> é‡Œé¢å¼•å…¥æ–‡ä»¶å¹¶å®ä¾‹åŒ–å¯¹è±¡, åé¢å¦‚æœæ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œ éƒ½æ˜¯åœ¨ <code>main @autoreleasepool</code> é‡Œé¢å†™ä»£ç <br><figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"People.h"</span> <span class="comment">// å¼•å…¥ç±»</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="comment">// å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// ç±»å    å¯¹è±¡å(æ˜Ÿå·ä»£è¡¨æ˜¯æŒ‡é’ˆç±»å‹) = [[ç±»å/å¯¹è±¡å] æ–¹æ³•å]</span></span><br><span class="line">        <span class="comment">// People p1/p2                  = [[People alloc] init]</span></span><br><span class="line">        <span class="comment">// alloc - ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´</span></span><br><span class="line">        <span class="comment">// init - è¿›è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">        People *p1 = [[People alloc] init];</span><br><span class="line">        People *p2 = [[People alloc] init];</span><br><span class="line">        People *p3 = [People new]; <span class="comment">// new åœ¨Objective-C ç”¨å¾—å°‘</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"p1 - %p"</span>, p1);</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"p2 - %p"</span>, p2);</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"p3 - %p"</span>, p3);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="åˆ›å»ºæˆå‘˜å˜é‡ä¸å±æ€§"><a href="#åˆ›å»ºæˆå‘˜å˜é‡ä¸å±æ€§" class="headerlink" title="åˆ›å»ºæˆå‘˜å˜é‡ä¸å±æ€§"></a>åˆ›å»ºæˆå‘˜å˜é‡ä¸å±æ€§</h4><figure class="highlight objectivec"><figcaption><span>People.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å§“åï¼Œå¹´é¾„ï¼Œæ€§åˆ«</span></span><br><span class="line"><span class="comment">// ç±»å†…ä½¿ç”¨æˆå‘˜å˜é‡(m)ï¼Œ ç±»å¤–ä½¿ç”¨å±æ€§(h)</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">People</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å£°æ˜ç±»çš„å±æ€§ å£°æ˜å main.m å°±å¯ä»¥é€šè¿‡ p1.peopleName = @"Jsonz"; è®¿é—®ä¿®æ”¹å±æ€§</span></span><br><span class="line"><span class="comment">// å±æ€§å°±æ˜¯æˆå‘˜å˜é‡çš„å¤–éƒ¨æ¥å£ h æ–‡ä»¶å†™ã€‚å¤–éƒ¨ä½¿ç”¨</span></span><br><span class="line"><span class="comment">//è®¾ç½®ä¸è·å–Name</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSString</span> *peopleName;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>People.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"People.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆå‘˜å˜é‡ m æ–‡ä»¶å®šä¹‰ å†…éƒ¨ä½¿ç”¨</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">People</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> _peopleAge;</span><br><span class="line">    <span class="keyword">int</span> _peopleSex;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">instancetype</span>) init</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        _peopleName = <span class="string">@"å¼ ä¸‰"</span>; <span class="comment">// æˆå‘˜å˜é‡ ç±»å†…ä½¿ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶<code>main.m</code> å¯ä»¥ä½¿ç”¨<code>peopleName</code>å±æ€§</p>
<figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å±æ€§çš„ä½¿ç”¨</span></span><br><span class="line">p1.peopleName = <span class="string">@"jsonz"</span>;</span><br><span class="line">p2.peopleName = <span class="string">@"æå››"</span>;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"p1.peopleName - %@"</span>, p1.peopleName);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"p2.peopleName - %@"</span>, p2.peopleName);</span><br></pre></td></tr></table></figure>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="åŠ å·æ–¹æ³•-å‡å·æ–¹æ³•-çš„å£°æ˜ä¸è°ƒç”¨"><a href="#åŠ å·æ–¹æ³•-å‡å·æ–¹æ³•-çš„å£°æ˜ä¸è°ƒç”¨" class="headerlink" title="åŠ å·æ–¹æ³• å‡å·æ–¹æ³• çš„å£°æ˜ä¸è°ƒç”¨"></a>åŠ å·æ–¹æ³• å‡å·æ–¹æ³• çš„å£°æ˜ä¸è°ƒç”¨</h3><p>åœ¨<code>People.h</code> å£°æ˜æ–¹æ³•<br><figure class="highlight plain"><figcaption><span>People.h</span></figcaption><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * - ã€+ (å‡å·ä»£è¡¨å¯¹è±¡æ–¹æ³•ï¼ŒåŠ å·ä»£è¡¨ç±»æ–¹æ³•)</span><br><span class="line"> * å¯¹è±¡æ–¹æ³•æ—¢æ˜¯åœ¨å®ä¾‹ä¸Šè°ƒç”¨ï¼Œè€Œç±»æ–¹æ³•åˆ™æ˜¯åœ¨ç±»ä¸Šé¢è°ƒç”¨ï¼Œå¦‚: People *p1 = [[People alloc] init]</span><br><span class="line"> * æ­¤æ—¶ Peopleæ˜¯ç±»ï¼Œ p1æ˜¯å¯¹è±¡</span><br><span class="line"> * h æ–‡ä»¶è¿›è¡Œå£°æ˜ï¼Œ m è¿›è¡Œå®ç°</span><br><span class="line"> */</span><br><span class="line">-(void) report; // å‡å·æ–¹æ³•</span><br><span class="line">+(void) report1; // void ä»£è¡¨ä¸ç”¨è¿”å›ï¼Œ +å·æ–¹æ³•</span><br><span class="line">-(int) returnInt; // æ”¹å˜è¿”å›å€¼çš„å‡½æ•°</span><br></pre></td></tr></table></figure></p>
<p>åœ¨<code>People.m</code>å®ç°è¯¥æ–¹æ³•<br><figure class="highlight objectivec"><figcaption><span>People.m</span></figcaption><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>) report</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"å‡å· Report"</span>);</span><br><span class="line">    <span class="comment">// å¦‚ä½•åœ¨å‡å·æ–¹æ³•è°ƒåŠ å·æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// [People report1]; </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *_peopleName1; <span class="comment">// é™æ€å˜é‡ï¼Œä¾›åŠ å·æ–¹æ³•å†…è°ƒç”¨</span></span><br><span class="line">+(<span class="keyword">void</span>) report1</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"åŠ å· Report"</span>);</span><br><span class="line">    _peopleName1 = <span class="string">@"å¼ ä¸‰"</span>; <span class="comment">// è°ƒç”¨é™æ€å˜é‡ ä¸èƒ½è°ƒç”¨æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="comment">// å¦‚ä½•åœ¨åŠ å·æ–¹æ³•è°ƒå‡å·æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// [[People alloc] report]</span></span><br><span class="line">&#125;</span><br><span class="line">-(<span class="keyword">int</span>) returnInt</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å‰é¢æ˜¯intï¼Œæ‰€ä»¥è¯¥å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªintç±»å‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è°ƒç”¨<br><figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line">People *p1 = [[People alloc] init]</span><br><span class="line">[p1 report]; <span class="comment">// å‡å·æ–¹æ³•</span></span><br><span class="line">[People report1]; <span class="comment">// åŠ å·æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [[People alloc] init]</span></span><br><span class="line"><span class="comment">// [People alloc]ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ—¶å€™æ‰èƒ½è°ƒç”¨ init æ‰€ä»¥ allocæ˜¯åŠ å·æ–¹æ³•ï¼Œ initæ˜¯å‡å·æ–¹æ³•</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å‡½æ•°å‚æ•°ç±»å‹"><a href="#å‡½æ•°å‚æ•°ç±»å‹" class="headerlink" title="å‡½æ•°å‚æ•°ç±»å‹"></a>å‡½æ•°å‚æ•°ç±»å‹</h3><figure class="highlight objectivec"><figcaption><span>People.h å£°æ˜</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å‚æ•°é—®é¢˜</span></span><br><span class="line">-(<span class="keyword">int</span>)showWithA: (<span class="keyword">int</span>) a; <span class="comment">// æœ‰ä¸€ä¸ªintç±»å‹å‚æ•° å‡½æ•°åä¸º `showWithA:`</span></span><br><span class="line">-(<span class="keyword">int</span>)showWithA: (<span class="keyword">int</span>)a andB:(<span class="keyword">int</span>)b; <span class="comment">// æœ‰ä¸¤ä¸ªintç±»å‹å‚æ•°  å‡½æ•°åä¸º `showWithA: andB:`</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>People.m å®ç°</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‚æ•°é—®é¢˜</span></span><br><span class="line">-(<span class="keyword">int</span>)showWithA:(<span class="keyword">int</span>)a</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="keyword">int</span>)showWithA:(<span class="keyword">int</span>)a andB:(<span class="keyword">int</span>)b</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>main.m è°ƒç”¨</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°çš„å‚æ•°ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">int</span> a1 = [p1 showWithA:<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> a2 = [p1 showWithA:<span class="number">20</span> andB:<span class="number">30</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"a1 = %d"</span>, a1);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"a2 = %d"</span>, a2);</span><br></pre></td></tr></table></figure>
<h3 id="åˆå§‹åŒ–æ–¹æ³•"><a href="#åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="åˆå§‹åŒ–æ–¹æ³•"></a>åˆå§‹åŒ–æ–¹æ³•</h3><p>å¹³æ—¶è°ƒç”¨ä¸€ä¸ªç±»çš„å¯¹è±¡æ–¹æ³•éƒ½æ˜¯è¿™ä¹ˆè°ƒç”¨çš„ <code>People *p1 = [[People alloc] init]</code>ï¼Œ ä½†æ­¤æ—¶è¿™ä¸ªinitå…·ä½“åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨ç±»é‡Œé¢é‡å†™æ‰è¿™ä¸ª<code>init</code> æ–¹æ³•;</p>
<figure class="highlight objectivec"><figcaption><span>People.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºåˆå§‹åŒ–æ–¹æ³•æ¥è¯´ id || instancetype æ²¡æœ‰åŒºåˆ«ï¼Œå¯¹äºå…¶ä»–æ–¹æ³•ï¼Œä¸€èˆ¬ instancetype æ¯” idç”¨çš„å¤š</span></span><br><span class="line"><span class="comment">// -(id)init; // ä¸‡èƒ½ç±»å‹ï¼Œå¯ä»¥è¿”å›å„ç§ç±»å‹å¯¹è±¡</span></span><br><span class="line">-(<span class="keyword">instancetype</span>)init; <span class="comment">// å½“å‰ç±»çš„ç±»å‹ï¼Œæ¯”å¦‚å½“å‰ç±»æ˜¯Peopleç±»å‹ï¼Œé‚£ä¹ˆinstancetypeå°±æ˜¯Peopleç±»å‹</span></span><br><span class="line">-(<span class="keyword">void</span>) showPeopleProperty; <span class="comment">// å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥è¾“å‡ºç±»çš„å±æ€§</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>People.m é‡å†™init</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœæ­¤æ—¶æç¤º Duplicate declaration of method â€˜init' åˆ™ä»£è¡¨ä½ ä¸Šé¢æœ¬æ¥å°±å£°æ˜äº†ä¸€ä¸ªinit æ­¤æ—¶åˆ é™¤è¯¥init æˆ–è€…æŠŠé€»è¾‘ç§»åˆ°é‚£ä¸ªå‡½æ•°å†…å³å¯</span></span><br><span class="line"><span class="comment">// init å›ºæœ‰çš„æ¨¡å¼</span></span><br><span class="line">- (<span class="keyword">instancetype</span>) init</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init]; <span class="comment">// è‡ªå·±ç»§æ‰¿çˆ¶çº§çš„ init æ­¤å¤„æ˜¯ NSObject</span></span><br><span class="line">    <span class="comment">// å†…éƒ¨è¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„è®¾å®š</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        _peopleName = <span class="string">@"Jsonz"</span>; <span class="comment">// æˆå‘˜å˜é‡ ç±»å†…ä½¿ç”¨</span></span><br><span class="line">        _peopleAge = <span class="number">30</span>;</span><br><span class="line">        _peopleSex = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>; <span class="comment">// è¿”å›è‡ªèº«</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºPeopleçš„å¯¹è±¡åˆå§‹åŒ–å€¼</span></span><br><span class="line">-(<span class="keyword">void</span>) showPeopleProperty</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"peopleName = %@"</span>, _peopleName);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"peopleAge = %d"</span>, _peopleAge);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"peopleAge = %d"</span>, _peopleSex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–çš„æ–¹æ³•<br><figure class="highlight objectivec"><figcaption><span>People.h</span></figcaption><table><tr><td class="code"><pre><span class="line">-(<span class="keyword">instancetype</span>)initWithPeopleName:(<span class="built_in">NSString</span> *) peopleName andPeopleAge:(<span class="keyword">int</span>)peopleAge</span><br></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><figcaption><span>People.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ—¢ç„¶æˆ‘ä»¬æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹Ÿè¦æŒ‰ç…§åˆå§‹åŒ–æ–¹æ³•çš„å†™æ³•ï¼ŒæŠŠä¸€äº›ç»“æ„ç»™åŠ ä¸Š</span></span><br><span class="line">-(instancetupe)initWithPeopleName:(<span class="built_in">NSString</span> *)peopleName andPeopleAge:(<span class="keyword">int</span>)peopleAge</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// åˆå§‹åŒ–æ–¹æ³•çš„ç»“æ„</span></span><br><span class="line">	<span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">		_peopleName = peopleName;</span><br><span class="line">        _peopleAge = peopleAge;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// è‡ªå·±å®ç°çš„åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">People *pSelf = [[People alloc] initWithPeopleName:<span class="string">@"Jsonz"</span> andPeopleAge: <span class="number">23</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"è‡ªå·±å®ç°çš„init çš„å±æ€§æœ‰å“ªäº›: ---- "</span>);</span><br><span class="line">[pSelf showPeopleProperty];</span><br></pre></td></tr></table></figure>
<h2 id="é¢å‘å¯¹è±¡ä¸‰éƒ¨æ›²"><a href="#é¢å‘å¯¹è±¡ä¸‰éƒ¨æ›²" class="headerlink" title="é¢å‘å¯¹è±¡ä¸‰éƒ¨æ›²"></a>é¢å‘å¯¹è±¡ä¸‰éƒ¨æ›²</h2><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé¿å…å­¦ä¹ å¤ªæ··ä¹±</p>
<h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p>æ–°å»ºä¸€ä¸ªç±»ï¼Œå«MyClass<br><figure class="highlight objectivec"><figcaption><span>MyClass.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyClass</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æˆå‘˜å˜é‡è®¿é—®ä¿®é¥°ç¬¦çš„é—®é¢˜</span></span><br><span class="line">    <span class="comment">// é»˜è®¤ä¸º protected å—ä¿æŠ¤çš„</span></span><br><span class="line">    <span class="keyword">@public</span> <span class="comment">// å…¬æœ‰ - åœ¨ç±»å†… ç±»å¤–éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«ç»§æ‰¿</span></span><br><span class="line">    <span class="keyword">int</span> _classInt;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">@private</span> <span class="comment">// ç§æœ‰ - åœ¨ç±»å†…å¯ä»¥ä½¿ç”¨ï¼Œ ç±»å¤–æ— æ³•è°ƒç”¨ å¹¶ä¸”æ— æ³•è¢«ç»§æ‰¿</span></span><br><span class="line">    <span class="keyword">@protected</span> <span class="comment">// å—ä¿æŠ¤ - é»˜è®¤çš„ åœ¨ç±»å†…å¯ä»¥ä½¿ç”¨ï¼Œç±»å¤–æ— æ³•è°ƒç”¨ å¹¶ä¸”å¯ä»¥è¢«ç»§æ‰¿</span></span><br><span class="line">    <span class="built_in">NSString</span> *_classStr;</span><br><span class="line">    <span class="keyword">@package</span> <span class="comment">// æ¡†æ¶æƒé™ - åœ¨æ¡†æ¶å†…ç›¸å½“äºå—ä¿æŠ¤(å¯è¢«è°ƒç”¨ä¸ç»§æ‰¿)ï¼Œ åœ¨æ¡†æ¶å¤–ç›¸å½“äºç§æœ‰(ç±»å¤–æ— æ³•ä½¿ç”¨ä¸ç»§æ‰¿)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSString</span> *className;</span><br><span class="line"><span class="comment">// æ–¹æ³•æ˜¯æ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦çš„ï¼Œ åŒCè¯­è¨€ä¸€æ ·ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœæƒ³è¦ä¸€ä¸ªæ–¹æ³•å¯ä»¥åœ¨ç±»å¤–å¯ä»¥ä½¿ç”¨ï¼Œåˆ™è¦åœ¨hå£°æ˜ï¼Œmå®ç°ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸æƒ³åœ¨ç±»å¤–ä½¿ç”¨ï¼Œ ç›´æ¥åœ¨må†™å®ç°ï¼Œ h ä¸å†™å£°æ˜ã€‚</span></span><br><span class="line">-(<span class="keyword">void</span>) report;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><figcaption><span>MyClass.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MyClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyClass</span></span></span><br><span class="line">-(<span class="keyword">void</span>)report</span><br><span class="line">&#123;</span><br><span class="line">    _classStr = <span class="string">@"ClassStr bilibilii"</span>;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ClassName - %@"</span>, _className);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"classInt - %d"</span>, _classInt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MyClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        MyClass *mc = [[MyClass alloc] init];</span><br><span class="line">        mc.className = <span class="string">@"æˆ‘çš„ç±»"</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç±»å¤–ä½¿ç”¨ public æˆå‘˜å˜é‡</span></span><br><span class="line">        mc-&gt;_classInt = <span class="number">1001</span>; <span class="comment">// ä½¿ç”¨æŒ‡å‘æ¥è°ƒç”¨ç±»ä¸­çš„å…¬æœ‰æˆå‘˜å˜é‡</span></span><br><span class="line">        </span><br><span class="line">        [mc report];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>åˆ›å»ºä¸¤ä¸ªç±»</p>
<ul>
<li>çˆ¶ç±» ParentClass</li>
<li>å­ç±» ChildClass, åˆ›å»ºçš„æ—¶å€™è®°å¾—é€‰ä¸Šç»§æ‰¿ ParentClassï¼Œ å¦‚æœå¿˜äº†é€‰ä¹Ÿæ²¡å…³ç³» åé¢æ‰‹åŠ¨ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥</li>
</ul>
<figure class="highlight objectivec"><figcaption><span>ParentClass.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NSObject - åŸºç±» æ­¤å¤„çš„:(å†’å·)æ˜¯ä»£è¡¨ç»§æ‰¿å…³ç³»</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ParentClass</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å—ä¿æŠ¤å˜é‡ å¯ç»§æ‰¿ ä¸å¯å¤–éƒ¨è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">int</span> _classInt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç§æœ‰å˜é‡</span></span><br><span class="line">    <span class="keyword">@private</span></span><br><span class="line">    <span class="built_in">NSString</span> *_classStr;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSString</span> *className;</span><br><span class="line">-(<span class="keyword">void</span>)report; <span class="comment">// å¦‚æœæ­¤å¤„ä¸å£°æ˜ï¼Œåˆ™ç±»å¤–ä¸èƒ½è°ƒã€‚ å­ç±»ä¹Ÿä¸ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>ParentClass.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"ParentClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ParentClass</span></span></span><br><span class="line">-(<span class="keyword">void</span>)report</span><br><span class="line">&#123;</span><br><span class="line">    _classInt = <span class="number">1002</span>;</span><br><span class="line">    _classStr = <span class="string">@"Jsonz's ç§æœ‰å˜é‡"</span>;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ClassName - %@"</span>, _className);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"classInt - %d"</span>, _classInt);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"classStr - %@"</span>, _classStr); <span class="comment">// æ­¤å¤„åœ¨ ChildClass ä¸­ä¹Ÿä¼šè¢«æ‰“å°å‡ºæ¥ï¼Œå› ä¸ºç»§æ‰¿äº†è¯¥æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šè¢«æ‰“å°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>ChildClass.h</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"ParentClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ChildClass</span> : <span class="title">ParentClass</span></span></span><br><span class="line">-(<span class="keyword">void</span>)show;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>ChildClass.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"ChildClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ChildClass</span></span></span><br><span class="line">-(<span class="keyword">void</span>)show</span><br><span class="line">&#123;</span><br><span class="line">    _classInt = <span class="number">1003</span>;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"show æ­¤å¤„_classInt å˜åŒ–äº† - %d"</span>, _classInt);</span><br><span class="line"><span class="comment">//    NSLog(@"show æ‰“å°çˆ¶ç±»çš„ç§æœ‰æ–¹æ³•NSString %@", _classStr);  æ­¤å¤„å› ä¸ºæ˜¯çˆ¶çº§çš„ç§æœ‰å˜é‡ï¼Œæ‰€ä»¥å¤–éƒ¨æ— æ³•è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="comment">// çˆ¶ç±»</span></span><br><span class="line">ParentClass *pc = [[ParentClass alloc] init];</span><br><span class="line">pc.className = <span class="string">@"parentClass ClassName"</span>;</span><br><span class="line">[pc report];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»</span></span><br><span class="line">ChildClass *cc = [[ChildClass alloc] init];</span><br><span class="line">cc.className = <span class="string">@"ChildClass ClassName"</span>; <span class="comment">// æ­¤å¤„ä¸ºçˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„å±æ€§</span></span><br><span class="line">[cc show];</span><br><span class="line">[cc report]; <span class="comment">// æ­¤å¤„è¿˜æ˜¯1002 å› ä¸º ccä¸­çš„ report ç»§æ‰¿ pc çš„reportï¼Œæ­¤å¤„é‡æ–°å¤åˆ¶äº†å¹¶æ‰“å°ã€‚æ‰€ä»¥æ˜¯1002</span></span><br></pre></td></tr></table></figure>
<h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><ul>
<li>æ–¹æ³•é‡å†™ åŸºäºçˆ¶ç±»æ–¹æ³•ç»§æ‰¿é‡å†™ï¼Œè¿”å›å€¼ï¼Œå‡½æ•°åï¼Œå‚æ•°ç­‰éƒ½ä¸€è‡´</li>
<li>æ–¹æ³•é‡è½½ (OC ä¸æ”¯æŒ) å‡½æ•°åä¸€è‡´ï¼Œè¿”å›å€¼ å‚æ•° å‚æ•°ç±»å‹ç­‰éƒ½ä¸ä¸€è‡´</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªç±»<code>ColorPrint</code> ç”¨äºæ¼”ç¤ºå¤šæ€ï¼Œåé¢ä¼šåŸºäº <code>ParentClass</code>, <code>ChildClass</code> ä¸<code>ColorPrint</code> æ¥è¯´æ˜å¤šæ€ã€‚</p>
<p>çˆ¶ç±»å®ç°ä¸€ä¸ªæ‰“å°æœºæ–¹æ³•<br><figure class="highlight objectivec"><figcaption><span>ParentClass.h</span></figcaption><table><tr><td class="code"><pre><span class="line">-(<span class="keyword">void</span>) print;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><figcaption><span>ParentClass.m</span></figcaption><table><tr><td class="code"><pre><span class="line">-(<span class="keyword">void</span>) print</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"æ™®é€šæ‰“å°æœº"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å­ç±»é‡å†™ä¸éœ€è¦å£°æ˜ï¼Œç›´æ¥åœ¨<code>m</code>æ–‡ä»¶å»é‡å†™å®ç°å³å¯<br><figure class="highlight objectivec"><figcaption><span>ChildClass.m</span></figcaption><table><tr><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)print</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"æˆ‘æ˜¯é»‘ç™½æ‰“å°æœº"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight objectivec"><figcaption><span>ColorPrinter.m</span></figcaption><table><tr><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)print</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// å¦‚æœæ­¤å¤„è¦è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•å¯ä»¥è¿™ä¹ˆå†™ï¼š</span></span><br><span class="line">	[<span class="keyword">super</span> print];</span><br><span class="line">	<span class="comment">// è°ƒç”¨å½“å‰ç±»çš„æ–¹æ³•å¯ä»¥ç”¨ self çˆ¶ç±»å¯ä»¥ç”¨ super</span></span><br><span class="line">    <span class="comment">// [self print];</span></span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"æˆ‘æ˜¯å½©è‰²æ‰“å°æœº"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>main.m</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line">ChildClass *cc = [[ChilClass alloc] init];</span><br><span class="line">[cc print]; <span class="comment">// é»‘ç™½</span></span><br><span class="line">ColorPrinter *cc2 = [[ColorPrinter alloc] init];</span><br><span class="line">[cc2 print]; <span class="comment">// å½©è‰²æ‰“å°æœº</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœå·²ç»å¼•å…¥äº†å­ç±»çš„å¤´æ–‡ä»¶ï¼Œé»˜è®¤çˆ¶ç±»hæ–‡ä»¶ï¼ˆå­ç±»å¤´æ–‡ä»¶æ‰€å¼•å…¥çš„å¤´æ–‡ä»¶ï¼‰ä¹Ÿä¼šè¢«å¼•å…¥äº†ã€‚</span></span><br><span class="line"><span class="comment">// å¯ä»¥è¿™ä¹ˆå†™</span></span><br><span class="line">ParentClass *color = [[ColorPrinter alloc] init];</span><br><span class="line">[color print]; <span class="comment">// æ­¤å¤„ä¹Ÿæ˜¯æ‰æ˜¯æ‰“å°æœº</span></span><br></pre></td></tr></table></figure>
<p><a href>demo</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>imooc</tag>
        <tag>learn - ios</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾æˆ˜Objective-C</title>
    <url>/2017/04/%E5%BE%81%E6%88%98Objective-C/</url>
    <content><![CDATA[<p><code>Objective-C</code> ä¸‹é¢ç®€ç§°<code>OC</code></p>
<h3 id="æºä»£ç æ–‡ä»¶æ‰©å±•åå¯¹æ¯”"><a href="#æºä»£ç æ–‡ä»¶æ‰©å±•åå¯¹æ¯”" class="headerlink" title="æºä»£ç æ–‡ä»¶æ‰©å±•åå¯¹æ¯”"></a>æºä»£ç æ–‡ä»¶æ‰©å±•åå¯¹æ¯”</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¤´æ–‡ä»¶æ˜¯æ”¾å£°æ˜ï¼Œ å®ç°æ–‡ä»¶æ”¾å®ç°çš„ä»£ç </p>
<table>
<thead>
<tr>
<th></th>
<th>å¤´æ–‡ä»¶</th>
<th>å®ç°æ–‡ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>cè¯­è¨€</td>
<td>.h</td>
<td>.c</td>
</tr>
<tr>
<td>c++è¯­è¨€</td>
<td>.h</td>
<td>.cpp</td>
</tr>
<tr>
<td>ocè¯­è¨€</td>
<td>.h</td>
<td>.m</td>
</tr>
<tr>
<td>oc&amp;c++</td>
<td>.h</td>
<td>.mm</td>
</tr>
</tbody>
</table>
<h3 id="é¢å‘å¯¹è±¡æ¦‚è§ˆ"><a href="#é¢å‘å¯¹è±¡æ¦‚è§ˆ" class="headerlink" title="é¢å‘å¯¹è±¡æ¦‚è§ˆ"></a>é¢å‘å¯¹è±¡æ¦‚è§ˆ</h3><h4 id="ç±»çš„å®šä¹‰"><a href="#ç±»çš„å®šä¹‰" class="headerlink" title="ç±»çš„å®šä¹‰"></a>ç±»çš„å®šä¹‰</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å½“å‰çš„SimpleClass ç»§æ‰¿ NSObject ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">SimpleClass</span>: <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h4 id="ç±»çš„å±æ€§ç”³æ˜"><a href="#ç±»çš„å±æ€§ç”³æ˜" class="headerlink" title="ç±»çš„å±æ€§ç”³æ˜"></a>ç±»çš„å±æ€§ç”³æ˜</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span>:</span></span><br><span class="line"><span class="built_in">NSObject</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span></span><br><span class="line">*firstName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span></span><br><span class="line">*lastName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSNumber</span> *yearOfBirth;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> <span class="keyword">int</span> yearOfBirth;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSString</span> *firstName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h4 id="å‡å·æ–¹æ³•ï¼ˆæ™®é€šæ–¹æ³•åˆç§°å¯¹è±¡æ–¹æ³•ï¼‰å£°æ˜"><a href="#å‡å·æ–¹æ³•ï¼ˆæ™®é€šæ–¹æ³•åˆç§°å¯¹è±¡æ–¹æ³•ï¼‰å£°æ˜" class="headerlink" title="å‡å·æ–¹æ³•ï¼ˆæ™®é€šæ–¹æ³•åˆç§°å¯¹è±¡æ–¹æ³•ï¼‰å£°æ˜"></a>å‡å·æ–¹æ³•ï¼ˆæ™®é€šæ–¹æ³•åˆç§°å¯¹è±¡æ–¹æ³•ï¼‰å£°æ˜</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span>: <span class="title">NSObject</span></span></span><br><span class="line">- (<span class="keyword">void</span>) someMethod;</span><br><span class="line">- (<span class="keyword">void</span>) someMethodWithValue: (SomeType)value;</span><br><span class="line">- (<span class="keyword">void</span>) someMethodWithFirstValue: (SomeType)info1 secondValue: (AnotherType)info2;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h4 id="åŠ å·æ–¹æ³•-ç±»æ–¹æ³•ï¼Œ-åˆç§°é™æ€æ–¹æ³•-å£°æ˜"><a href="#åŠ å·æ–¹æ³•-ç±»æ–¹æ³•ï¼Œ-åˆç§°é™æ€æ–¹æ³•-å£°æ˜" class="headerlink" title="åŠ å·æ–¹æ³• (ç±»æ–¹æ³•ï¼Œ åˆç§°é™æ€æ–¹æ³•) å£°æ˜"></a>åŠ å·æ–¹æ³• (ç±»æ–¹æ³•ï¼Œ åˆç§°é™æ€æ–¹æ³•) å£°æ˜</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSString</span>: <span class="title">NSObject</span></span></span><br><span class="line">+(<span class="keyword">id</span>)string;</span><br><span class="line">+(<span class="keyword">id</span>)stringWithString:(<span class="built_in">NSString</span> *)aString;</span><br><span class="line">+(<span class="keyword">id</span>)stringWithFormat:(<span class="built_in">NSString</span> *)format, ..;</span><br><span class="line">+(<span class="keyword">id</span>)stringWithContentsOfFile: (<span class="built_in">NSString</span> *)path</span><br><span class="line">encoding: (<span class="built_in">NSStringEncoding</span>)enc error:(<span class="built_in">NSError</span> **)error;</span><br><span class="line">+(<span class="keyword">id</span>)stringWithCString: (<span class="keyword">const</span> <span class="keyword">char</span> *)cString</span><br><span class="line">encoding: (<span class="built_in">NSStringEncoding</span>)enc;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h4 id="ç±»çš„å®ç°"><a href="#ç±»çš„å®ç°" class="headerlink" title="ç±»çš„å®ç°"></a>ç±»çš„å®ç°</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="meta">#import 'XYZPerson.h'</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">XYZPerson</span></span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h4 id="å®Œæˆçš„ä¾‹å­"><a href="#å®Œæˆçš„ä¾‹å­" class="headerlink" title="å®Œæˆçš„ä¾‹å­"></a>å®Œæˆçš„ä¾‹å­</h4><figure class="highlight objectivec"><figcaption><span>XYZPerson.h æ–‡ä»¶</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">XYZPerson</span>: <span class="title">NSObject</span></span></span><br><span class="line">-(<span class="keyword">void</span>)sayHello;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><figcaption><span>XYZPerson.m æ–‡ä»¶</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"XYZPerson.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">XYZPerson</span></span></span><br><span class="line">-(<span class="keyword">void</span>)sayHello &#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"Hello, World!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h3><p>é¦–å…ˆå»app store ä¸‹è½½xCode. æ‰“å¼€xCode</p>
<p>é€‰æ‹©å·¦ä¾§ <code>Create a new Xcode project</code>=&gt;<code>macOS</code>=&gt; <code>Command Line Tool</code> ï¼Œ<code>é€‰æ‹©ä¿å­˜é¡¹ç›®çš„ä½ç½®</code>ã€‚<br><img src="./create.png" alt="create"></p>
<p>è¿›å…¥é¡¹ç›®åç‚¹å‡»å·¦ä¸Šè§’ç®­å¤´è¿è¡Œï¼Œå¦‚æœä¸‹é¢æ§åˆ¶å°æœ‰è¾“å‡º <code>hello world</code> åˆ™ä»£è¡¨è¿è¡ŒæˆåŠŸäº†ã€‚<br><img src="./run.png" alt="run"></p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">    	<span class="comment">// çœŸæ­£å¼€å§‹å†™ä»£ç çš„åœ°æ–¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ObjectiveC-å˜é‡ä¸è¡¨è¾¾å¼"><a href="#ObjectiveC-å˜é‡ä¸è¡¨è¾¾å¼" class="headerlink" title="ObjectiveC å˜é‡ä¸è¡¨è¾¾å¼"></a>ObjectiveC å˜é‡ä¸è¡¨è¾¾å¼</h3><h4 id="å£°æ˜å˜é‡ä¸ç®€å•è¿ç®—"><a href="#å£°æ˜å˜é‡ä¸ç®€å•è¿ç®—" class="headerlink" title="å£°æ˜å˜é‡ä¸ç®€å•è¿ç®—"></a>å£°æ˜å˜é‡ä¸ç®€å•è¿ç®—</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">1</span>;</span><br><span class="line">b = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">int</span> c = a + b;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"å˜é‡a+ bçš„å€¼ç­‰äº: %d"</span>, c); <span class="comment">// %d æ ¼å¼åŒ–è¾“å‡ºï¼Œåé¢åŠ ä¸ªé€—å·å†åŠ å˜é‡</span></span><br></pre></td></tr></table></figure>
<h4 id="åŸºç¡€ç±»å‹"><a href="#åŸºç¡€ç±»å‹" class="headerlink" title="åŸºç¡€ç±»å‹"></a>åŸºç¡€ç±»å‹</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">int</span> a = <span class="number">0</span>; æ•´æ•° å <span class="number">32</span>ä½<span class="number">2</span>è¿›åˆ¶</span><br><span class="line"><span class="keyword">float</span> <span class="keyword">float</span> a = <span class="number">1.0</span>; æµ®ç‚¹æ•° å <span class="number">32</span>ä½<span class="number">2</span>è¿›åˆ¶</span><br><span class="line"><span class="keyword">double</span> <span class="keyword">double</span> num; åŒç²¾åº¦ å <span class="number">64</span>ä½ å¯ä»¥ä¿å­˜æ›´å¤§çš„æ•°</span><br><span class="line"><span class="keyword">char</span> <span class="keyword">char</span> c = <span class="string">'A'</span>; å•å­—ç¬¦ä¸² å•å¼•å·</span><br><span class="line"><span class="built_in">NSString</span>: <span class="string">@"Hello world"</span> ä½¿ç”¨æ¯”è¾ƒå¤š åŒå¼•å· (é«˜çº§ç±»å‹)</span><br><span class="line">Cè¯­è¨€å­—ç¬¦ä¸²ç±»å‹ <span class="string">"hello world"</span> ä½¿ç”¨æ¯”è¾ƒå°‘</span><br></pre></td></tr></table></figure>
<h4 id="é™å®šè¯"><a href="#é™å®šè¯" class="headerlink" title="é™å®šè¯"></a>é™å®šè¯</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">long</span>: <span class="keyword">long</span> <span class="keyword">int</span> a; æ¯”<span class="keyword">int</span> æ›´å¤§çš„æ•´å½¢</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span>: <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> a; æ¯” <span class="keyword">long</span> <span class="keyword">int</span> æ›´å¤§ å…·ä½“åº”ç”¨æ‰ä¼šæ¶‰åŠ æ¯”å¦‚å¤§æ•°æ®ç­‰</span><br><span class="line"><span class="keyword">short</span>: <span class="keyword">short</span> <span class="keyword">int</span> a; <span class="keyword">short</span> a; å°äºæˆ–ç­‰äºæ•´å½¢ï¼Œ <span class="number">16</span>ä½ æ¯”è¾ƒçœç±»å‹ï¼Œä½†æ˜¯æ¯”è¾ƒå°‘ç”¨è¿™äº›ï¼Œä¸€èˆ¬ç›´æ¥ç”¨ <span class="keyword">int</span></span><br><span class="line"><span class="keyword">unsigned</span>: <span class="keyword">unsigned</span> <span class="keyword">int</span> a; æ— ç¬¦å·</span><br><span class="line"><span class="keyword">signed</span>: <span class="keyword">signed</span> <span class="keyword">int</span> a; æœ‰ç¬¦å·(æ­£è´Ÿç±»å‹)</span><br></pre></td></tr></table></figure>
<h4 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">a++;</span><br><span class="line">++a;</span><br><span class="line">a--;</span><br><span class="line">--a;</span><br><span class="line"></span><br><span class="line">ä¸€å…ƒ ++, --,</span><br><span class="line">äºŒå…ƒ +, -, *, /, %</span><br><span class="line">ä¸‰å…ƒ <span class="number">2</span>&gt;<span class="number">3</span>?Yes:Not</span><br><span class="line">é€»è¾‘ç¬¦å· &lt;, &gt;, &gt;=, &lt;=, ==, !=</span><br></pre></td></tr></table></figure>
<h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœæ˜¯çœŸçš„ä¼šè¿”å› 1ï¼Œå¦‚æœæœªå‡è¿”å› 0;</span></span><br><span class="line"><span class="keyword">if</span> (True) &#123;</span><br><span class="line">  <span class="comment">// is True</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åªè¦é0å°±æ˜¯çœŸçš„ã€‚</span></span><br><span class="line"><span class="keyword">if</span> (<span class="number">1</span>) <span class="built_in">NSLog</span>(<span class="string">@"å¯¹"</span>); <span class="keyword">else</span> <span class="built_in">NSLog</span>(<span class="string">@"é”™"</span>); <span class="comment">// å•è¡Œå¯ä»¥ä¸å†™æ‹¬å·</span></span><br></pre></td></tr></table></figure>
<h4 id="gotoè¯­æ³•"><a href="#gotoè¯­æ³•" class="headerlink" title="gotoè¯­æ³•"></a>gotoè¯­æ³•</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">a: &#123;</span><br><span class="line">	i++;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"içš„å€¼ä¸º %d"</span>, i); <span class="comment">// å…ˆè¾“å‡ºä¸€ä¸ª i = 0;</span></span><br><span class="line">&#125;</span><br><span class="line">	<span class="keyword">if</span> (i &lt; <span class="number">5</span>) <span class="keyword">goto</span> a; <span class="comment">// æ‰§è¡Œåˆ°è¿™é‡Œi &lt; 5 è·³è½¬åˆ°a å»æ‰§è¡Œã€‚ ç›´åˆ° i == 5</span></span><br><span class="line">	<span class="comment">// æœ€åè¾“å‡º 0, 1, 2, 3, 4</span></span><br></pre></td></tr></table></figure>
<h4 id="while-å¾ªç¯-æ¯”è¾ƒå¸¸ç”¨"><a href="#while-å¾ªç¯-æ¯”è¾ƒå¸¸ç”¨" class="headerlink" title="while å¾ªç¯ æ¯”è¾ƒå¸¸ç”¨"></a>while å¾ªç¯ æ¯”è¾ƒå¸¸ç”¨</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> ( a &lt; <span class="number">5</span>) &#123;</span><br><span class="line">	a++;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"açš„å˜é‡æ˜¯ %d"</span>, a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="forå¾ªç¯-æ¯”è¾ƒå¸¸ç”¨"><a href="#forå¾ªç¯-æ¯”è¾ƒå¸¸ç”¨" class="headerlink" title="forå¾ªç¯ æ¯”è¾ƒå¸¸ç”¨"></a>forå¾ªç¯ æ¯”è¾ƒå¸¸ç”¨</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i= <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"i=%d"</span>, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="do-while-è‚¯å®šä¼šæ‰§è¡Œä¸€æ¬¡å†åˆ¤æ–­æ˜¯å¦å¾ªç¯"><a href="#do-while-è‚¯å®šä¼šæ‰§è¡Œä¸€æ¬¡å†åˆ¤æ–­æ˜¯å¦å¾ªç¯" class="headerlink" title="do while è‚¯å®šä¼šæ‰§è¡Œä¸€æ¬¡å†åˆ¤æ–­æ˜¯å¦å¾ªç¯"></a>do while è‚¯å®šä¼šæ‰§è¡Œä¸€æ¬¡å†åˆ¤æ–­æ˜¯å¦å¾ªç¯</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"hehe"</span>);</span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h4 id="break-continue"><a href="#break-continue" class="headerlink" title="break continue"></a>break continue</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">break</span> å¯ä»¥åœ¨ å¾ªç¯ä¸­ é€€å‡ºå¾ªç¯</span><br><span class="line"><span class="keyword">continue</span> å¯ä»¥åœ¨ å¾ªç¯ä¸­ è·³å‡ºå½“å‰å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€é¡¹å¾ªç¯</span><br></pre></td></tr></table></figure>
<h4 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">10.0</span>;</span><br><span class="line">      <span class="comment">// char int float</span></span><br><span class="line">      <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">              <span class="built_in">NSLog</span>(<span class="string">@"i = 1"</span>);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">              <span class="built_in">NSLog</span>(<span class="string">@"i = 2"</span>);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">              <span class="built_in">NSLog</span>(<span class="string">@"i = 10"</span>);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">default</span>:</span><br><span class="line">              <span class="built_in">NSLog</span>(<span class="string">@"i = 10.0"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// æœ€åä¼šè¾“å‡ºä¸€ä¸ª 10ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ±‚çŸ©å½¢é¢ç§¯çš„å‡½æ•° s = a * b;</span></span><br><span class="line"><span class="comment">// è¿”å›çš„ç±»å‹ å‡½æ•°å ([(å‚æ•°ç±»å‹ï¼Œ å‚æ•°å)ï¼Œ (å‚æ•°ç±»å‹ï¼Œ å‚æ•°å)])</span></span><br><span class="line"><span class="keyword">double</span> qiumianji(<span class="keyword">double</span> a, <span class="keyword">double</span> b) &#123;</span><br><span class="line">    <span class="keyword">double</span> s = a * b;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨ main å‡½æ•°å†…ã€‚</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªç›¸åŒç±»å‹çš„å˜é‡æ¥æ¥æ”¶è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">double</span> s = qiumianji(<span class="number">10.0</span>, <span class="number">5.0</span>);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"s çš„å€¼ä¸º %f"</span>, s); <span class="comment">// %d è¾“å‡ºæ•´æ•°ï¼Œ %f è¾“å‡ºæµ®ç‚¹æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¸ç”¨ä¸€ä¸ªå˜é‡å»æ¥æ”¶</span></span><br><span class="line"><span class="keyword">void</span> show() &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"this is a test !"</span>);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"this is a test2 !"</span>);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"this is a test3 !"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main å‡½æ•°å†…è°ƒç”¨</span></span><br><span class="line">show();</span><br></pre></td></tr></table></figure>
<h3 id="mainå‡½æ•°ä¸­çš„é»˜è®¤å‚æ•°"><a href="#mainå‡½æ•°ä¸­çš„é»˜è®¤å‚æ•°" class="headerlink" title="mainå‡½æ•°ä¸­çš„é»˜è®¤å‚æ•°"></a>mainå‡½æ•°ä¸­çš„é»˜è®¤å‚æ•°</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"argc=%d"</span>, argc);</span><br><span class="line"><span class="comment">// argv å‚æ•°ä¸º å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤è¿è¡Œçš„å‚æ•°å¦‚ï¼š les1 -h -c -a -l åˆ™æœ‰5ä¸ªå‚æ•°[les1, -h, -c, -a, -l]</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>; i &lt; argc; i++) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%s"</span>, argv[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¾“å‡ºç›®å‰é‡åˆ°çš„æ€»ç»“"><a href="#è¾“å‡ºç›®å‰é‡åˆ°çš„æ€»ç»“" class="headerlink" title="è¾“å‡ºç›®å‰é‡åˆ°çš„æ€»ç»“"></a>è¾“å‡ºç›®å‰é‡åˆ°çš„æ€»ç»“</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"type %d"</span>, a); </span><br><span class="line">- %d <span class="keyword">int</span>; </span><br><span class="line">- %s <span class="keyword">char</span> *; </span><br><span class="line">- %f <span class="keyword">float</span>;</span><br><span class="line">- %p æŒ‡é’ˆç±»å‹</span><br><span class="line">- %@ <span class="built_in">NSString</span></span><br><span class="line">- %ld  ç›®å‰é‡åˆ°è¿‡çš„æœ‰ <span class="built_in">NSRange</span>.length || <span class="built_in">NSRange</span>.location</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>learn</tag>
        <tag>Objective-C</tag>
        <tag>ios</tag>
        <tag>imooc</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€å•äº‹ä»¶ç³»ç»Ÿ</title>
    <url>/2017/04/%E7%AE%80%E5%8D%95%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<p>æœ€ç®€å•çš„äº‹ä»¶ç³»ç»Ÿ åº”è¯¥åŒ…å«å››ä¸ªæ¥å£ <code>on</code>, <code>off</code>, <code>once</code>, <code>trigger</code>ã€‚</p>
<h3 id="åˆå§‹åŒ–æ–¹æ³•"><a href="#åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="åˆå§‹åŒ–æ–¹æ³•"></a>åˆå§‹åŒ–æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">E</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">E.prototype = &#123;</span><br><span class="line">	on: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">	off: ...,</span><br><span class="line">	trigger: ...,</span><br><span class="line">	once: ...,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="on-äº‹ä»¶ç»‘å®š"><a href="#on-äº‹ä»¶ç»‘å®š" class="headerlink" title="on äº‹ä»¶ç»‘å®š"></a>on äº‹ä»¶ç»‘å®š</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">on: <span class="function"><span class="keyword">function</span>(<span class="params">name, cb, ctx</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> e = <span class="keyword">this</span>.e || (<span class="keyword">this</span>.e = &#123;&#125;);</span><br><span class="line">	(e[name] || (e[name] = [])).push(&#123;</span><br><span class="line">		fn: cb,</span><br><span class="line">		ctx: ctx</span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="off-äº‹ä»¶è§£ç»‘"><a href="#off-äº‹ä»¶è§£ç»‘" class="headerlink" title="off äº‹ä»¶è§£ç»‘"></a>off äº‹ä»¶è§£ç»‘</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">off: <span class="function"><span class="keyword">function</span>(<span class="params">name, cb, ctx</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> e = <span class="keyword">this</span>.e || (<span class="keyword">this</span>.e = &#123;&#125;);</span><br><span class="line">	<span class="keyword">var</span> evts = e[name];</span><br><span class="line">	<span class="keyword">var</span> liveEvents = [];</span><br><span class="line">	<span class="keyword">if</span> (evts &amp;&amp; cb) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i= <span class="number">0</span>, len= evts.length; i&lt; len; i++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (evts[i].fn !== cb &amp;&amp; evts[i].fn._ !== cb) liveEvents.push(evts[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	(liveEvents.length)</span><br><span class="line">		? e[name] = liveEvents</span><br><span class="line">		: <span class="keyword">delete</span> e[name];</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="once-ç»‘å®šå•æ¬¡"><a href="#once-ç»‘å®šå•æ¬¡" class="headerlink" title="once ç»‘å®šå•æ¬¡"></a>once ç»‘å®šå•æ¬¡</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">once: <span class="function"><span class="keyword">function</span>(<span class="params">name, cb, ctx</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">listener</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		self.off(name, listener);</span><br><span class="line">		cb.apply(ctx, <span class="built_in">arguments</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	listener._ = cb;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.on(name, listener, ctx);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="trigger-äº‹ä»¶è§¦å‘"><a href="#trigger-äº‹ä»¶è§¦å‘" class="headerlink" title="trigger äº‹ä»¶è§¦å‘"></a>trigger äº‹ä»¶è§¦å‘</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">trigger: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> data = [].slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">var</span> evtArr = ((<span class="keyword">this</span>.e || (<span class="keyword">this</span>.e = &#123;&#125;))[name] || []).slice();</span><br><span class="line">	<span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">var</span> len = evtArr.length;</span><br><span class="line">	<span class="keyword">for</span> (i; i&lt; len; i++) &#123;</span><br><span class="line">		evtArr[i].fn.apply(evtArr[i].ctx, data);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€å•çš„è°ƒç”¨"><a href="#ç®€å•çš„è°ƒç”¨" class="headerlink" title="ç®€å•çš„è°ƒç”¨"></a>ç®€å•çš„è°ƒç”¨</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">"./e.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> e = <span class="keyword">new</span> E();</span><br><span class="line">e.on(<span class="string">'bilibili'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'on'</span>);</span><br><span class="line">&#125;).once(<span class="string">'once'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'once'</span>)</span><br><span class="line">&#125;).on(<span class="string">'off'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'off'</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		e.trigger(<span class="string">'off'</span>)</span><br><span class="line">			.off(<span class="string">'off'</span>)</span><br><span class="line">			.trigger(<span class="string">'bilibili'</span>)</span><br><span class="line">			.trigger(<span class="string">'once'</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>æœ€åé™„ä¸Š<a href="https://github.com/jsonz1993/learn/tree/master/finish/Event" target="_blank" rel="noopener">æºç </a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤åˆ¶é»è´´æ¿æ’ä»¶-CopyText</title>
    <url>/2017/04/%E5%A4%8D%E5%88%B6%E9%BB%8F%E8%B4%B4%E6%9D%BF%E6%8F%92%E4%BB%B6-CopyText/</url>
    <content><![CDATA[<p>æœ€è¿‘å…¬å¸æœ‰ä¸ªéœ€æ±‚æ˜¯è¦åœ¨ç§»åŠ¨ç«¯å®ç°æ“ä½œé»è´´æ¿åŠŸèƒ½ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç‚¹å‡»ä¸€ä¸ªä¸€ä¸ªè¯„è®ºå¼¹å‡ºèœå•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå°±æ˜¯å¤åˆ¶çš„é€‰é¡¹ã€‚å…¶ä¸­<code>å®‰å“</code>å’Œ<code>ios</code>ä¸­çš„appè¿˜å¥½ï¼Œæœ‰åŸç”Ÿæä¾›æ¥å£ï¼Œwebç«¯å°±è¦è‡ªå·±å»å®ç°äº†ã€‚</p>
<p>å…¬å¸åŸæœ¬æœ‰ä¸€ä¸ªcopyçš„æ’ä»¶ï¼Œä½†æ˜¯äº²æµ‹æ²¡æ•ˆï¼Œæ‰¾åˆ°githubä¸Šé¢ä¸€äº›copyçš„æ’ä»¶ç”¨çš„startæœ€é«˜çš„æ˜¯<a href="https://github.com/zenorocha/clipboard.js" target="_blank" rel="noopener">clipboard</a> æˆªæ­¢æ­¤æ–‡æœ‰16kä¸ªstartã€‚</p>
<p>å®˜æ–¹è¯´æ˜æ˜¯ </p>
<blockquote>
<p>Modern copy to clipboard. No Flash. Just 3kb gzipped.</p>
</blockquote>
<p>åªæœ‰3k!è€Œä¸”å®˜æ–¹æ’ä»¶æä¾›çš„æ¥å£ä¸æ˜¯æˆ‘æƒ³è¦çš„é‚£ç§ï¼Œé‚æœ‰äº†é€ ä¸ªè‡ªå·±ç”¨çš„å°è½®å­å¿µå¤´ã€‚</p>
<h2 id="ç®€å•æ€è·¯"><a href="#ç®€å•æ€è·¯" class="headerlink" title="ç®€å•æ€è·¯"></a>ç®€å•æ€è·¯</h2><h3 id="åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„textarea-è®¾ç½®å¥½æ ·å¼è®©å…¶æ˜¾ç¤ºåœ¨ç”¨æˆ·çœ‹ä¸åˆ°çš„ç•Œé¢"><a href="#åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„textarea-è®¾ç½®å¥½æ ·å¼è®©å…¶æ˜¾ç¤ºåœ¨ç”¨æˆ·çœ‹ä¸åˆ°çš„ç•Œé¢" class="headerlink" title="åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„textarea è®¾ç½®å¥½æ ·å¼è®©å…¶æ˜¾ç¤ºåœ¨ç”¨æˆ·çœ‹ä¸åˆ°çš„ç•Œé¢"></a>åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„textarea è®¾ç½®å¥½æ ·å¼è®©å…¶æ˜¾ç¤ºåœ¨ç”¨æˆ·çœ‹ä¸åˆ°çš„ç•Œé¢</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">selectFake() &#123;</span><br><span class="line">        <span class="keyword">const</span> isRTL = <span class="built_in">document</span>.documentElement.getAttribute(<span class="string">'dir'</span>);</span><br><span class="line">        <span class="keyword">this</span>.removeFake();</span><br><span class="line">        <span class="keyword">this</span>.fakeHandlerCallback = <span class="function"><span class="params">()</span>=&gt;</span> <span class="keyword">this</span>.removeFake();</span><br><span class="line">        <span class="keyword">this</span>.fakeHandler = <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="keyword">this</span>.fakeHandlerCallback) || <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.fakeEl = <span class="built_in">document</span>.createElement(<span class="string">'textarea'</span>);</span><br><span class="line">        <span class="keyword">let</span> yPosition = <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.documentElement.scrollTo;</span><br><span class="line">        styleFn(<span class="keyword">this</span>.fakeEl, &#123;</span><br><span class="line">            fontSize: <span class="string">'12pt'</span>,</span><br><span class="line">            border: <span class="string">'0'</span>,</span><br><span class="line">            margin: <span class="string">'0'</span>,</span><br><span class="line">            padding: <span class="string">'0'</span>,</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            [isRTL? <span class="string">'right'</span>: <span class="string">'left'</span>]: <span class="string">'-9999px'</span>,</span><br><span class="line">            top: <span class="string">`<span class="subst">$&#123;yPosition&#125;</span>px`</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.fakeEl.setAttribute(<span class="string">'readonly'</span>, <span class="string">''</span>);</span><br><span class="line">        <span class="keyword">this</span>.fakeEl.value = <span class="keyword">this</span>.text;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(<span class="keyword">this</span>.fakeEl);</span><br><span class="line">        <span class="keyword">this</span>.selectedText = <span class="keyword">this</span>.selectDom(<span class="keyword">this</span>.fakeEl);</span><br><span class="line">        <span class="keyword">this</span>.copyText();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="é€‰æ‹©è¯¥domï¼Œæ—¢é€‰ä¸­textareaçš„æ–‡å­—åŒºåŸŸ"><a href="#é€‰æ‹©è¯¥domï¼Œæ—¢é€‰ä¸­textareaçš„æ–‡å­—åŒºåŸŸ" class="headerlink" title="é€‰æ‹©è¯¥domï¼Œæ—¢é€‰ä¸­textareaçš„æ–‡å­—åŒºåŸŸ"></a>é€‰æ‹©è¯¥domï¼Œæ—¢é€‰ä¸­textareaçš„æ–‡å­—åŒºåŸŸ</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">selectDom(el) &#123;</span><br><span class="line">  <span class="keyword">let</span> selectedText;</span><br><span class="line">  el.select();</span><br><span class="line">  el.setSelectionRange(<span class="number">0</span>, el.value.length);</span><br><span class="line">  el.removeAttribute(<span class="string">'readonly'</span>);</span><br><span class="line">  <span class="keyword">return</span> el.value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰§è¡Œcopyäº‹ä»¶"><a href="#æ‰§è¡Œcopyäº‹ä»¶" class="headerlink" title="æ‰§è¡Œcopyäº‹ä»¶"></a>æ‰§è¡Œcopyäº‹ä»¶</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">copyText() &#123;</span><br><span class="line">  <span class="keyword">let</span> succeeded;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    succeeded = <span class="built_in">document</span>.execCommand(<span class="string">'copy'</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    succeeded = fale;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.handleResult(succeeded); <span class="comment">// äº‹ä»¶å›è°ƒå¤„ç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æºç åŠ æ³¨é‡Š"><a href="#æºç åŠ æ³¨é‡Š" class="headerlink" title="æºç åŠ æ³¨é‡Š"></a>æºç åŠ æ³¨é‡Š</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Jsonz<span class="doctag">@github</span>.com/jsonz1993 on 17/04/16</span></span><br><span class="line"><span class="comment"> * CopyText å°†æ–‡æœ¬copyåˆ°å‰ªåˆ‡æ¿ æ”¯æŒpc &amp;&amp; webã€‚ æœ‰å…¼å®¹é—®é¢˜ H5 å»ºè®®ç”¨åŸç”Ÿcopyæ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>options é…ç½®å‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property <span class="type">&#123;String&#125;</span> </span>text è¦å¤åˆ¶çš„æ–‡æœ¬</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property <span class="type">&#123;Function&#125;</span> </span>success æˆåŠŸå›è°ƒ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property <span class="type">&#123;Function&#125;</span> </span>error å¤±è´¥å›è°ƒ</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * CopyText.isSupported åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒcopyäº‹ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyText</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">        <span class="keyword">this</span>.resolveOptions(options);</span><br><span class="line">        <span class="keyword">this</span>.init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®å‚æ•°</span></span><br><span class="line">    resolveOptions(options= &#123;&#125;) &#123;</span><br><span class="line">        <span class="keyword">this</span>.text = options.text;</span><br><span class="line">        <span class="keyword">this</span>.successCb = <span class="keyword">typeof</span> options.success === <span class="string">'function'</span>? options.success: <span class="function"><span class="params">()</span>=&gt;</span> &#123;&#125;;</span><br><span class="line">        <span class="keyword">this</span>.errorCb = <span class="keyword">typeof</span> options.error === <span class="string">'function'</span>? options.error: <span class="function"><span class="params">()</span>=&gt;</span> &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å‡½æ•°</span></span><br><span class="line">    init() &#123;</span><br><span class="line">        <span class="keyword">if</span> (CopyText.isSupported()) <span class="keyword">this</span>.selectFake();</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">this</span>.handleResult(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºè™šæ‹Ÿdom &amp;&amp; copy</span></span><br><span class="line">    selectFake() &#123;</span><br><span class="line">        <span class="keyword">const</span> isRTL = <span class="built_in">document</span>.documentElement.getAttribute(<span class="string">'dir'</span>);</span><br><span class="line">        <span class="keyword">this</span>.removeFake();</span><br><span class="line">        <span class="keyword">this</span>.fakeHandlerCallback = <span class="function"><span class="params">()</span>=&gt;</span> <span class="keyword">this</span>.removeFake();</span><br><span class="line">        <span class="keyword">this</span>.fakeHandler = <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="keyword">this</span>.fakeHandlerCallback) || <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.fakeEl = <span class="built_in">document</span>.createElement(<span class="string">'textarea'</span>);</span><br><span class="line">        <span class="keyword">let</span> yPosition = <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.documentElement.scrollTo;</span><br><span class="line">        styleFn(<span class="keyword">this</span>.fakeEl, &#123;</span><br><span class="line">            fontSize: <span class="string">'12pt'</span>,</span><br><span class="line">            border: <span class="string">'0'</span>,</span><br><span class="line">            margin: <span class="string">'0'</span>,</span><br><span class="line">            padding: <span class="string">'0'</span>,</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            [isRTL? <span class="string">'right'</span>: <span class="string">'left'</span>]: <span class="string">'-9999px'</span>,</span><br><span class="line">            top: <span class="string">`<span class="subst">$&#123;yPosition&#125;</span>px`</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.fakeEl.setAttribute(<span class="string">'readonly'</span>, <span class="string">''</span>);</span><br><span class="line">        <span class="keyword">this</span>.fakeEl.value = <span class="keyword">this</span>.text;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(<span class="keyword">this</span>.fakeEl);</span><br><span class="line">        <span class="keyword">this</span>.selectedText = <span class="keyword">this</span>.selectDom(<span class="keyword">this</span>.fakeEl);</span><br><span class="line">        <span class="keyword">this</span>.copyText();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤è™šæ‹Ÿdom</span></span><br><span class="line">    removeFake() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.fakeHandler) &#123;</span><br><span class="line">            <span class="built_in">document</span>.body.removeEventListener(<span class="string">'click'</span>, <span class="keyword">this</span>.fakeHandlerCallback);</span><br><span class="line">            <span class="keyword">this</span>.fakeHandler = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">this</span>.fakeHandlerCallback = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.fakeEl) &#123;</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(<span class="keyword">this</span>.fakeEl);</span><br><span class="line">            <span class="keyword">this</span>.fakeEl = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰æ‹©dom</span></span><br><span class="line">    selectDom(el) &#123;</span><br><span class="line">        <span class="keyword">let</span> selectedText;</span><br><span class="line">        el.select();</span><br><span class="line">        el.setSelectionRange(<span class="number">0</span>, el.value.length);</span><br><span class="line">        el.removeAttribute(<span class="string">'readonly'</span>);</span><br><span class="line">        <span class="keyword">return</span> el.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// copy</span></span><br><span class="line">    copyText() &#123;</span><br><span class="line">        <span class="keyword">let</span> succeeded;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            succeeded = <span class="built_in">document</span>.execCommand(<span class="string">'copy'</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">            succeeded = fale;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.handleResult(succeeded); <span class="comment">// äº‹ä»¶å›è°ƒå¤„ç†</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å›è°ƒ</span></span><br><span class="line">    handleResult(succeeded) &#123;</span><br><span class="line">        succeeded? <span class="keyword">this</span>.successCb(): <span class="keyword">this</span>.errorCb();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒè¯¥äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">static</span> isSupported(action= <span class="string">'copy'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> !!<span class="built_in">document</span>.queryCommandSupported &amp;&amp; !!<span class="built_in">document</span>.queryCommandSupported(action);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styleFn = <span class="function">(<span class="params">el, opts</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> opts !== <span class="string">'object'</span> || !el.nodeType) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> opts) &#123;</span><br><span class="line">        el.style[key] = opts[key];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> el;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> CopyText <span class="keyword">from</span> <span class="string">'./CopyText'</span>;</span><br><span class="line"><span class="keyword">new</span> CopyText(&#123;</span><br><span class="line">  text: <span class="string">'æ–‡æœ¬å¤åˆ¶'</span>,</span><br><span class="line">  success() &#123;&#125;,</span><br><span class="line">  error() &#123;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å¯ä»¥è‡ªè¡Œåˆ¤æ–­ç¯å¢ƒæ˜¯å¦æ”¯æŒcopyäº‹ä»¶</span></span><br><span class="line">CopyText.isSupported() <span class="comment">// Boolean</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>sublime text 3 é…ç½®</title>
    <url>/2017/04/sublime-text-3-%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>è¿™ç¯‡åšå®¢ä¸»è¦è®²æ€ä¹ˆé…ç½®è‡ªå·±çš„<code>sublime text</code>ï¼Œ å®‰è£…å¯ä»¥å»<a href="http://www.sublimetext.com/" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½è‡ªè¡Œå®‰è£…ã€‚</p>
<h2 id="Package-Control"><a href="#Package-Control" class="headerlink" title="Package Control"></a>Package Control</h2><p>ä¹‹åæˆ‘ä»¬è¦å®‰è£…<code>Package Control</code>, æ—¢sublimeçš„åŒ…ç®¡ç†å·¥å…· åé¢æˆ‘ä»¬çš„åŒ…ä¸‹è½½å®‰è£…éƒ½ç”¨ä»–ã€‚</p>
<p>æŒ‰å¿«æ·é”®<code>ctrl + `</code> è°ƒå‡ºæˆ–è€…èœå•<code>view&gt; show Control</code> è°ƒå‡ºcontrol</p>
<p>å¤åˆ¶ä¸‹é¢ä»£ç åˆ°control</p>
<p>sublime Text 3<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import urllib.request,os,hashlib; h = &apos;2915d1851351e5ee549c20394736b442&apos; + &apos;8bc59f460fa1548d1514676163dafc88&apos;; pf = &apos;Package Control.sublime-package&apos;; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( &apos;http://packagecontrol.io/&apos; + pf.replace(&apos; &apos;, &apos;%20&apos;)).read(); dh = hashlib.sha256(by).hexdigest(); print(&apos;Error validating download (got %s instead of %s), please try manual install&apos; % (dh, h)) if dh != h else open(os.path.join( ipp, pf), &apos;wb&apos; ).write(by)</span><br></pre></td></tr></table></figure></p>
<p>sublime Text 2<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import urllib2,os,hashlib; h = &apos;df21e130d211cfc94d9b0905775a7c0f&apos; + &apos;1e3d39e33b79698005270310898eea76&apos;; pf = &apos;Package Control.sublime-package&apos;; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( &apos;http://packagecontrol.io/&apos; + pf.replace(&apos; &apos;, &apos;%20&apos;)).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), &apos;wb&apos; ).write(by) if dh == h else None; print(&apos;Error validating download (got %s instead of %s), please try manual install&apos; % (dh, h) if dh != h else &apos;Please restart Sublime Text to finish installation&apos;)</span><br></pre></td></tr></table></figure></p>
<p>å¤åˆ¶å®Œæ•²å›è½¦å°±å¯ä»¥å®‰è£…ï¼Œç¨ç­‰ç‰‡åˆ»å‡ºç°å³å¯ï¼Œå®‰è£…å®Œæˆååœ¨ <code>Preferences</code>èœå•ä¸‹ä¼šå‡ºç° <code>Package Control</code> é€‰é¡¹</p>
<p>è¯¦ç»†å®‰è£…å¯çœ‹<a href="https://packagecontrol.io/installation" target="_blank" rel="noopener">Package Control</a></p>
<h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p>æ‰“å¼€ <code>Package Control</code>æˆ–æŒ‰å¿«æ·é”®<code>cmd/ctrl + shift + p</code>ï¼Œ è¾“å…¥ <code>install package</code> é€‰ä¸­ç¬¬ä¸€ä¸ªé€‰é¡¹æ—¢è¿›å…¥å®‰è£…æ’ä»¶çš„åˆ—è¡¨ã€‚</p>
<p>è¿™æ—¶å€™å¯èƒ½éœ€è¦ç­‰ä¸€ä¼šåŠ è½½è¿œç¨‹ä»“åº“ï¼Œå…·ä½“åœ¨å·¦ä¸‹è§’ä¼šæœ‰ä¸€ä¸ªloadingæ ‡è¯†ï¼Œ åŠ è½½å®Œåœ¨å¼¹çª—è¾“å…¥è¦å®‰è£…çš„æ’ä»¶å³å¯ã€‚</p>
<p><img src="./package.png" alt="package list"></p>
<p>æ‰€æœ‰çš„æ’ä»¶éƒ½å¯ä»¥åœ¨<a href="https://packagecontrol.io/" target="_blank" rel="noopener">https://packagecontrol.io/</a> æ‰¾åˆ°ï¼Œä¸‹é¢åˆ—å‡ºæ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ªæ’ä»¶</p>
<h3 id="Theme"><a href="#Theme" class="headerlink" title="Theme"></a>Theme</h3><p>sublime ç¼–è¾‘å™¨è™½ç„¶è½»å·§å¼ºå¤§ï¼Œä½†æ˜¯é»˜è®¤çš„ä¸»é¢˜å®åœ¨æœ‰ç‚¹çœ‹ä¸ä¸‹å»ã€‚<br>ä¸»é¢˜å¯ä»¥åœ¨<a href="https://packagecontrol.io/browse/labels/theme" target="_blank" rel="noopener">https://packagecontrol.io/browse/labels/theme</a> æ‰¾è‡ªå·±å–œæ¬¢çš„ã€‚<br>ç›®å‰ä¸ªäººä½¿ç”¨çš„æ˜¯ <code>Material Theme</code> ã€‚</p>
<p>ç›´æ¥åœ¨<code>install package</code> å¼¹çª—è¾“å…¥ <code>Material Theme</code> é€‰ç¬¬ä¸€ä¸ªå³å¯ï¼ˆåé¢å®‰è£…æ–¹æ³•ç±»ä¼¼ï¼‰ã€‚</p>
<p>å®‰è£…å®Œæˆåä¼šå¼¹å‡ºä¸€ä¸ªREADMEï¼Œæ ¹æ®æç¤ºä¿®æ”¹ä¸€ä¸‹é…ç½®ã€‚<br>æ‰“å¼€<code>Preferences &gt; settings &gt; User</code><br>æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œä¿å­˜å³å¯ç”Ÿæ•ˆ<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;color_scheme&quot;: &quot;Packages/Material Theme/schemes/Material-Theme.tmTheme&quot;,</span><br><span class="line">&quot;theme&quot;: &quot;Material-Theme.sublime-theme&quot;,</span><br></pre></td></tr></table></figure></p>
<h4 id="Material-Theme"><a href="#Material-Theme" class="headerlink" title="Material Theme"></a>Material Theme</h4><p><img src="./material.gif" alt="material"></p>
<p>ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„ä¸»é¢˜è¿˜æœ‰</p>
<h4 id="ayu"><a href="#ayu" class="headerlink" title="ayu"></a>ayu</h4><p><img src="./ayu.png" alt="ayu"></p>
<h4 id="Agila-Theme"><a href="#Agila-Theme" class="headerlink" title="Agila Theme"></a>Agila Theme</h4><p><img src="./agila.png" alt="Agila"></p>
<h3 id="Emmet"><a href="#Emmet" class="headerlink" title="Emmet"></a>Emmet</h3><p>å‰ç«¯å·¥ç¨‹å¸ˆä½¿ç”¨sublimeç¼–è¾‘çš„å¿…å¤‡æ’ä»¶ï¼Œå¯ä»¥æå¤§æé«˜å¼€å‘æ•ˆç‡ã€‚<br>æœ€ç®€å•çš„åº”ç”¨å°±æ˜¯åœ¨ç©ºç™½çš„<code>.html</code>é¡µé¢è¾“å…¥<code>!</code>å†æŒ‰ <code>tab</code>é”®ä¼šè‡ªåŠ¨ç”Ÿæˆhtml5åŸºæœ¬é¡µé¢è§£æ„ã€‚<br>è¿˜æœ‰åŸºæœ¬å¦‚ <code>#div1&gt;span.child{è¿™æ˜¯å­çº§}*2+button.name[disabled]{æŒ‰é’®}</code>å¿«æ·è¯­æ³•ç­‰<br>å…·ä½“çœ‹<a href="https://www.emmet.io/" target="_blank" rel="noopener">emmet</a>, <a href="https://packagecontrol.io/packages/Emmet" target="_blank" rel="noopener">Emmet-package</a></p>
<h3 id="SideBarEnhancements"><a href="#SideBarEnhancements" class="headerlink" title="SideBarEnhancements"></a>SideBarEnhancements</h3><p>sublime è‡ªå¸¦çš„ä¾§è¾¹æ æ–‡ä»¶ï¼ˆå¤¹ï¼‰åŠŸèƒ½ç‰¹åˆ«å°‘ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥ä¸ºå…¶æ·»åŠ å¾ˆå¤šå…¶ä»–åŠŸèƒ½ã€‚<a href="https://packagecontrol.io/packages/SideBarEnhancements" target="_blank" rel="noopener">docs</a></p>
<h3 id="BracketHighlighter"><a href="#BracketHighlighter" class="headerlink" title="BracketHighlighter"></a>BracketHighlighter</h3><p>å‰åæ ‡ç­¾é«˜äº®çš„æ’ä»¶ï¼Œå¦‚<code>[], (), {}, &quot;&quot;, &#39;&#39;, &lt;tag&gt;&lt;/tag&gt;</code>ç­‰ï¼Œå¯ä»¥æ¯”è¾ƒæ–¹ä¾¿çœ‹æ¸…ä»£ç å—çš„èµ·å§‹ç‚¹ã€‚<a href="https://packagecontrol.io/packages/BracketHighlighter" target="_blank" rel="noopener">docs</a></p>
<h3 id="AutoFileName"><a href="#AutoFileName" class="headerlink" title="AutoFileName"></a>AutoFileName</h3><p>æŒ‰ç…§è·¯å¾„æç¤ºè¯¥è·¯å¾„ç›®å½•ä¸‹çš„æ–‡ä»¶åï¼Œå¯¹äºå¼•å…¥æ–‡ä»¶èµ„æºç­‰å¾ˆæœ‰å¸®åŠ©</p>
<h3 id="All-AutoComplete"><a href="#All-AutoComplete" class="headerlink" title="All AutoComplete"></a>All AutoComplete</h3><p>è®©ä»£ç è‡ªåŠ¨å®Œæˆçš„åŒ¹é…ä»æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶é‡Œå»åŒ¹é…ï¼Œè€Œä¸æ˜¯åªåœ¨å½“å‰æ–‡ä»¶é‡ŒåŒ¹é…ã€‚</p>
<h3 id="HTML-CSS-JS-Prettify"><a href="#HTML-CSS-JS-Prettify" class="headerlink" title="HTML-CSS-JS Prettify"></a>HTML-CSS-JS Prettify</h3><p>html, css, js &amp;&amp; Json çš„æ ¼å¼åŒ–æ’ä»¶ã€‚éœ€è¦æœ¬åœ°å®‰è£…äº†nodeã€‚<br>é»˜è®¤æ ¼å¼åŒ–å¿«æ·é”®ä¸º<code>ctrl+shift+h</code></p>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><p>åŸºæœ¬ä¸Šæ¯”è¾ƒé€šç”¨çš„æ’ä»¶å°±è¿™äº›ï¼Œå¯ä»¥å‘ç°è¿™äº›æ’ä»¶åŸºæœ¬ä¸Šéƒ½åœ¨<code>package Control</code>å‰åä½ã€‚<br>å­¦ä¼šä¸¾ä¸€åä¸‰ï¼Œå·¥ä½œä¸­ç”¨åˆ°çš„å¦ä¸€äº›æ’ä»¶å†ä¸Š<a href="https://packagecontrol.io/" target="_blank" rel="noopener">https://packagecontrol.io/</a> æœç´¢å…³é”®å­—å®‰è£…<br>å¦‚ <code>git</code>, <code>less</code>, <code>vuejs</code>ç­‰ç­‰ã€‚</p>
<p>æœ€åé™„ä¸Šè‡ªå·±çš„é…ç½®<br><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"color_scheme"</span>: <span class="string">"Packages/Material Theme/schemes/Material-Theme-Lighter.tmTheme"</span>,</span><br><span class="line">	<span class="attr">"ignored_packages"</span>:</span><br><span class="line">	[</span><br><span class="line">		<span class="string">"Vintage"</span></span><br><span class="line">	],</span><br><span class="line">	<span class="attr">"always_show_minimap_viewport"</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">"theme"</span>: <span class="string">"Material-Theme-Lighter.sublime-theme"</span>,</span><br><span class="line">	<span class="attr">"word_wrap"</span>:<span class="literal">true</span>,</span><br><span class="line">	<span class="attr">"wrap_width"</span>: <span class="number">120</span>,</span><br><span class="line">	<span class="attr">"font_size"</span>: <span class="number">10</span>,</span><br><span class="line">	<span class="attr">"line_padding_bottom"</span>: <span class="number">2</span>,</span><br><span class="line">	<span class="attr">"line_padding_top"</span>: <span class="number">2</span>,</span><br><span class="line">	<span class="attr">"highlight_line"</span>:<span class="literal">true</span>,</span><br><span class="line">	<span class="attr">"font_face"</span>: <span class="string">"Monaco"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>editor</tag>
      </tags>
  </entry>
  <entry>
    <title>chromeæ’ä»¶å¼€å‘</title>
    <url>/2017/04/chrome%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[<p>å…ˆæ”¾ä¸Šå…¥é—¨çš„è‹±è¯­æ–‡æ¡£<a href="https://developer.chrome.com/extensions/getstarted" target="_blank" rel="noopener">https://developer.chrome.com/extensions/getstarted</a></p>
<p>åé¢çš„æ•™ç¨‹æ˜¯å‚ç…§æ–‡æ¡£å­¦ä¹ çš„ã€‚</p>
<h2 id="æ–°å»ºé…ç½®æ–‡ä»¶"><a href="#æ–°å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="æ–°å»ºé…ç½®æ–‡ä»¶"></a>æ–°å»ºé…ç½®æ–‡ä»¶</h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>manifest.json</code> ç”¨äºæ•´ä¸ªé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œ ç±»ä¼¼å¹³æ—¶ <code>js</code> çš„ <code>package.json</code>ã€‚ åŒ…å«äº†é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œ é¡¹ç›®åï¼ˆæ‰©å±•æ’ä»¶åï¼‰ï¼Œ æè¿°ç­‰ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"manifest_version"</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"Getting started example"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"This extension shows a Google Image search result for the current page"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0"</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">"browser_action"</span>: &#123;</span><br><span class="line">    <span class="attr">"default_icon"</span>: <span class="string">"icon.png"</span>,</span><br><span class="line">    <span class="attr">"default_popup"</span>: <span class="string">"popup.html"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"permissions"</span>: [</span><br><span class="line">    <span class="string">"activeTab"</span>,</span><br><span class="line">    <span class="string">"https://ajax.googleapis.com/"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"manifest_version"</span>: <span class="number">2</span>, <span class="comment">// ç‰ˆæœ¬å·</span></span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"Getting started example"</span>, <span class="comment">// é¡¹ç›®å</span></span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"This extension shows a Google Image search result for the current page"</span>, <span class="comment">// æè¿°</span></span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0"</span>, <span class="comment">// é¡¹ç›®ç‰ˆæœ¬å·</span></span><br><span class="line">  <span class="attr">"browser_action"</span>: &#123;</span><br><span class="line">    <span class="attr">"default_icon"</span>: <span class="string">"icon.png"</span>, <span class="comment">// é»˜è®¤icon</span></span><br><span class="line">    <span class="attr">"default_popup"</span>: <span class="string">"popup.html"</span> <span class="comment">// é»˜è®¤å¼¹çª—</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"permissions"</span>: [</span><br><span class="line">    <span class="string">"activeTab"</span>, <span class="comment">// </span></span><br><span class="line">    <span class="string">"https://ajax.googleapis.com/"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="èµ„æºæ–‡ä»¶"><a href="#èµ„æºæ–‡ä»¶" class="headerlink" title="èµ„æºæ–‡ä»¶"></a>èµ„æºæ–‡ä»¶</h2><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>default_icon</code> å’Œ <code>default_popup</code>ï¼Œ ç°åœ¨è®©æˆ‘ä»¬æ¥åˆ›å»ºä»–ä»¬ã€‚</p>
<h3 id="default-icon"><a href="#default-icon" class="headerlink" title="default_icon"></a>default_icon</h3><p><code>default_icon</code> æŒ‡å‘çš„æ˜¯ç”¨äºæ˜¾ç¤ºåœ¨å·¥å…·æ çš„å›¾æ ‡ å¯ä»¥é€‰è‡ªå·±å–œæ¬¢çš„å›¾ç‰‡ï¼Œä¸è¿‡è¦é€‰å– <code>19px</code> çš„ <code>.png</code>æ–‡ä»¶ã€‚</p>
<p>å¯ä»¥ç”¨googleæä¾›çš„ä¾‹å­ <a href="https://developer.chrome.com/extensions/examples/tutorials/getstarted/icon.png" target="_blank" rel="noopener">icon.png</a></p>
<h3 id="popup-html"><a href="#popup-html" class="headerlink" title="popup.html"></a>popup.html</h3><p><code>popup.html</code>ç”¨äºç”¨æˆ·ç‚¹å‡»æ—¶å¼¹å‡ºçš„ä¸€ä¸ªæ“ä½œæ¡†ã€‚ä¸º<code>html</code> æ–‡ä»¶ æ‰€ä»¥ä½ å¯ä»¥è‡ªå·±æ£é¼“è‡ªå·±æƒ³æ˜¾ç¤ºçš„ä¸œè¥¿ã€‚</p>
<p>å¯ä»¥ç”¨googleæä¾›çš„ä¾‹å­ <a href="https://developer.chrome.com/extensions/examples/tutorials/getstarted/popup.html" target="_blank" rel="noopener">popup.html</a></p>
<p>ä¸»è¦çš„é€»è¾‘ä»¥å¤–éƒ¨jsçš„æ ¼å¼ç‹¬ç«‹å†™åœ¨ä¸€ä¸ªjsæ–‡ä»¶é‡Œã€‚ <a href="https://developer.chrome.com/extensions/examples/tutorials/getstarted/popup.js" target="_blank" rel="noopener">popup.js</a></p>
<p>ç°åœ¨ä½ çš„æ–‡ä»¶å¤¹é‡Œåº”è¯¥æœ‰å››ä¸ªæ–‡ä»¶:</p>
<ul>
<li>icon.png</li>
<li>popup.html</li>
<li>popup.js</li>
<li>manifest.json</li>
</ul>
<p>è¿™äº›å®Œæˆä¹‹åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±åœ¨<code>chrome</code>åŠ è½½æˆ‘ä»¬çš„æ’ä»¶</p>
<h3 id="åŠ è½½æ’ä»¶è°ƒè¯•"><a href="#åŠ è½½æ’ä»¶è°ƒè¯•" class="headerlink" title="åŠ è½½æ’ä»¶è°ƒè¯•"></a>åŠ è½½æ’ä»¶è°ƒè¯•</h3><p>chrome è®¿é—® <strong>chrome://extensions</strong> æˆ–æ‰‹åŠ¨ä»èœå•è¿›å…¥ <code>æ‰©å±•ç¨‹åº</code></p>
<p>æ‰“å¼€å³ä¸Šè§’çš„å¼€å‘è€…æ¨¡å¼</p>
<p><img src="./dev-checkbox.jpeg" alt="æ‰“å¼€å¼€å‘è€…æ¨¡å¼"></p>
<p>å¦‚æœç”µè„‘æ²¡æœ‰è£…chromeâ€¦.è¶æ—©è£…ä¸€ä¸ª</p>
<h3 id="ç‚¹å‡»åŠ è½½å·²å‹ç¼©çš„æ‰©å±•ç¨‹åºï¼Œå³å¯çœ‹åˆ°è‡ªå·±ç¼–å†™çš„ç¬¬ä¸€ä¸ªHello-Chrome-æ‰©å±•æ’ä»¶"><a href="#ç‚¹å‡»åŠ è½½å·²å‹ç¼©çš„æ‰©å±•ç¨‹åºï¼Œå³å¯çœ‹åˆ°è‡ªå·±ç¼–å†™çš„ç¬¬ä¸€ä¸ªHello-Chrome-æ‰©å±•æ’ä»¶" class="headerlink" title="ç‚¹å‡»åŠ è½½å·²å‹ç¼©çš„æ‰©å±•ç¨‹åºï¼Œå³å¯çœ‹åˆ°è‡ªå·±ç¼–å†™çš„ç¬¬ä¸€ä¸ªHello Chrome æ‰©å±•æ’ä»¶"></a>ç‚¹å‡»åŠ è½½å·²å‹ç¼©çš„æ‰©å±•ç¨‹åºï¼Œå³å¯çœ‹åˆ°è‡ªå·±ç¼–å†™çš„ç¬¬ä¸€ä¸ªHello Chrome æ‰©å±•æ’ä»¶</h3><p>æ­¤æ—¶åŒå‡»å®¡æŸ¥ä»£ç å¯ä»¥è°ƒè¯•å†™çš„æ’ä»¶ã€‚</p>
<p>é™„ä¸Šåç»­å­¦ä¹ é“¾æ¥<a href="https://developer.chrome.com/extensions" target="_blank" rel="noopener">https://developer.chrome.com/extensions</a></p>
]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>animate-text</title>
    <url>/2017/04/animate-text/</url>
    <content><![CDATA[<h2 id="animate-text"><a href="#animate-text" class="headerlink" title="animate-text"></a>animate-text</h2><h3 id="æ–‡å­—åŠ¨ç”»å’Œæ•°å­—åŠ¨ç”»-animate-text"><a href="#æ–‡å­—åŠ¨ç”»å’Œæ•°å­—åŠ¨ç”»-animate-text" class="headerlink" title="æ–‡å­—åŠ¨ç”»å’Œæ•°å­—åŠ¨ç”» animate text"></a>æ–‡å­—åŠ¨ç”»å’Œæ•°å­—åŠ¨ç”» animate text</h3><p><a href="https://jsonz1993.github.io/demo/animate-text/index.html">æŸ¥çœ‹DEMO</a> <a href="https://github.com/jsonz1993/learn/tree/master/finish/animate-text" target="_blank" rel="noopener">gitä»“åº“</a></p>
<p>è½»å·§çš„æ–‡å­—åŠ¨ç”»åº“, ä½¿ç”¨ç®€å•, æ–‡ä»¶å¤§å°4k<br>å¯ä»¥ç»™æ–‡å­—æ·»åŠ å‡ºç°åŠ¨ç”», æ”¯æŒå­—ç¬¦ä¸²æ‰“å­—æ•ˆæœå’Œæ•°å­—å˜åŒ–æ•ˆæœ, æ”¯æŒç›‘å¬åŠ¨ç”»ç»“æŸäº‹ä»¶</p>
<p><strong><a href="https://github.com/qgh810/animate-text" target="_blank" rel="noopener">é¡¹åŸé¡¹ç›®åœ°å€</a>, è¿™é‡Œå¯¹å…¶ä»£ç æ”¹é€ ä¼˜åŒ–ã€‚</strong></p>
<p><img src="./demo.gif"></p>
<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> AnimateText <span class="keyword">from</span> <span class="string">'./animate-text'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ç®€å•çš„ä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="keyword">new</span> AnimateText(<span class="string">'.text'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœéœ€è¦å®šä¹‰åŠ¨ç”»æ—¶é—´å¯ä»¥è¿™æ ·åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">new</span> AnimateText(<span class="string">'.text'</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¿˜æœ‰å…¶å®ƒè®¾ç½® è¯·è¿™æ ·å†™</span></span><br><span class="line"><span class="keyword">new</span> AnimateText(<span class="string">'.text'</span>, &#123;</span><br><span class="line">  time: <span class="number">1000</span>, <span class="comment">// åŠ¨ç”»æ—¶é•¿</span></span><br><span class="line">  isNumber: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦æ¸²æŸ“ä¸ºæ•°å­—åŠ¨ç”»</span></span><br><span class="line">  startNumber: <span class="number">0</span>, <span class="comment">// æ¸²æŸ“ä¸ºæ•°å­—åŠ¨ç”»æ—¶ åŠ¨ç”»çš„å¼€å§‹æ•°å­—</span></span><br><span class="line">  changeCount: <span class="number">32</span>, <span class="comment">// æ•°å­—åŠ¨ç”»æ•°å­—å˜åŒ–æ¬¡æ•°</span></span><br><span class="line">  onAnimated: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="string">'åŠ¨ç”»ç»“æŸ'</span>)&#125; <span class="comment">// åŠ¨ç”»ç»“æŸäº‹ä»¶å›è°ƒ</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><p>AnimateTextæ¥æ”¶ä¸¤ä¸ªå‚æ•°, ä¾‹å¦‚: new AnimateText(element, options)</p>
<table>
<thead>
<tr>
<th style="text-align:center">å‚æ•°</th>
<th style="text-align:left">ç±»å‹</th>
<th style="text-align:center">æ˜¯å¦å¿…å¡«</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">element</td>
<td style="text-align:left">String or Object</td>
<td style="text-align:center">æ˜¯</td>
<td style="text-align:left">å¯ä»¥æ˜¯é€‰æ‹©å™¨æˆ–è€…domèŠ‚ç‚¹å¯¹è±¡(è¯·ä¿è¯è¿™ä¸ªèŠ‚ç‚¹å†…åªæœ‰æ–‡æœ¬è€Œæ²¡æœ‰å…¶å®ƒèŠ‚ç‚¹)</td>
</tr>
<tr>
<td style="text-align:center">options</td>
<td style="text-align:left">Number or Object</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°å­—, åˆ™å½“ä½œåŠ¨ç”»æ—¶é—´å¤„ç†, å¦‚æœæœ‰å…¶ä»–å‚æ•°, ä»¥å¯¹è±¡æ ¼å¼ä¼ é€’, å…·ä½“æ¯ä¸ªå±æ€§çš„æè¿°è¯·çœ‹ä¸‹æ–¹çš„ optionsè¯´æ˜</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="optionsè¯´æ˜"><a href="#optionsè¯´æ˜" class="headerlink" title="optionsè¯´æ˜"></a>optionsè¯´æ˜</h3><p>ç¬¬äºŒä¸ªå‚æ•°optionsè¯¦ç»†è¯´æ˜</p>
<table>
<thead>
<tr>
<th style="text-align:center">å‚æ•°</th>
<th style="text-align:left">ç±»å‹</th>
<th style="text-align:center">é»˜è®¤å€¼</th>
<th style="text-align:center">æ˜¯å¦å¿…å¡«</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">time</td>
<td style="text-align:left">Number</td>
<td style="text-align:center">500</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">åŠ¨ç”»æŒç»­çš„æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">isNumber</td>
<td style="text-align:left">Boolean</td>
<td style="text-align:center">false</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">æ˜¯å¦æ¸²æŸ“ä¸ºæ•°å­—åŠ¨ç”»</td>
</tr>
<tr>
<td style="text-align:center">startNumber</td>
<td style="text-align:left">Number</td>
<td style="text-align:center">0</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">æ•°å­—åŠ¨ç”»çš„å¼€å§‹æ•°å­—</td>
</tr>
<tr>
<td style="text-align:center">changeCount</td>
<td style="text-align:left">Number</td>
<td style="text-align:center">32</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">æ•°å­—åŠ¨ç”»å˜åŒ–æ¬¡æ•° ä¹Ÿå°±æ˜¯æ•°å­—ç»è¿‡å¤šå°‘æ¬¡è·³åŠ¨æ‰å˜ä¸ºæœ€ç»ˆæ•°å­—</td>
</tr>
<tr>
<td style="text-align:center">onAnimated</td>
<td style="text-align:left">Function</td>
<td style="text-align:center">null</td>
<td style="text-align:center">å¦</td>
<td style="text-align:left">åŠ¨ç”»ç»“æŸç›‘å¬å‡½æ•°</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="å®ä¾‹å¯¹è±¡æ–¹æ³•è¯´æ˜"><a href="#å®ä¾‹å¯¹è±¡æ–¹æ³•è¯´æ˜" class="headerlink" title="å®ä¾‹å¯¹è±¡æ–¹æ³•è¯´æ˜"></a>å®ä¾‹å¯¹è±¡æ–¹æ³•è¯´æ˜</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">var</span> animateText = <span class="keyword">new</span> AnimateText(<span class="string">'.text'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–å¯¹è±¡å å¯¹è±¡æä¾›playæ–¹æ³•é‡æ–°æ’­æ”¾åŠ¨ç”»</span></span><br><span class="line"><span class="comment">// æ¥å—å‚æ•°ä½œä¸ºåŠ¨ç”»æ—¶é—´</span></span><br><span class="line"><span class="comment">// ä¸ä¼ é€’å‚æ•°åˆ™ä½¿ç”¨å®ä¾‹åŒ–çš„æ—¶é—´</span></span><br><span class="line">animateText.play(<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>technology</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>JavaScript</tag>
        <tag>learn</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ</title>
    <url>/2017/04/%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E9%9B%86%E6%88%90/</url>
    <content><![CDATA[<p>é™æ€ç«™ç‚¹æ‹¥æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å€ŸåŠ©äºç¬¬ä¸‰æ–¹æœåŠ¡æ¥æ‰©å±•ç«™ç‚¹çš„åŠŸèƒ½ã€‚ ä»¥ä¸‹æ˜¯ NexT ç›®å‰æ”¯æŒçš„ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚é›†æˆä¸€äº›åŠŸèƒ½è¿›æ¥ã€‚</p>
<h3 id="è¯„è®ºç³»ç»Ÿ"><a href="#è¯„è®ºç³»ç»Ÿ" class="headerlink" title="è¯„è®ºç³»ç»Ÿ"></a>è¯„è®ºç³»ç»Ÿ</h3><p>NexT æ”¯æŒå¤šæ¬¾è¯„è®ºç³»ç»Ÿã€‚<br>å¦‚éœ€å–æ¶ˆæŸä¸ª é¡µé¢/æ–‡ç«  çš„è¯„è®ºï¼Œåœ¨ <code>md</code> æ–‡ä»¶çš„ <code>front-matter</code> ä¸­å¢åŠ  <code>comments: false</code></p>
<p>æš‚æ²¡å¼€è¯„è®ºï¼Œå¤šè¯´å‡†å¤‡ä¸‹æ¶ã€‚</p>
<h3 id="ç«™å†…æœç´¢"><a href="#ç«™å†…æœç´¢" class="headerlink" title="ç«™å†…æœç´¢"></a>ç«™å†…æœç´¢</h3><p>æœ¬ç«™ç”¨ Hexo æä¾›çš„ Local Searchï¼Œ åŸç†æ˜¯é€šè¿‡hexo-generator-searchæ’ä»¶åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªsearch.xmlæ–‡ä»¶ï¼Œæœç´¢çš„æ—¶å€™ä»è¿™ä¸ªæ–‡ä»¶ä¸­æ ¹æ®å…³é”®å­—æ£€ç´¢å‡ºç›¸åº”çš„é“¾æ¥ã€‚</p>
<h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><h5 id="å®‰è£…-hexo-generator-search"><a href="#å®‰è£…-hexo-generator-search" class="headerlink" title="å®‰è£… hexo-generator-search"></a>å®‰è£… hexo-generator-search</h5><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-<span class="built_in">search</span></span><br></pre></td></tr></table></figure>
<h5 id="å®‰è£…-hexo-generator-searchdb"><a href="#å®‰è£…-hexo-generator-searchdb" class="headerlink" title="å®‰è£… hexo-generator-searchdb"></a>å®‰è£… hexo-generator-searchdb</h5><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹ç«™ç‚¹é…ç½®"><a href="#ä¿®æ”¹ç«™ç‚¹é…ç½®" class="headerlink" title="ä¿®æ”¹ç«™ç‚¹é…ç½®"></a>ä¿®æ”¹ç«™ç‚¹é…ç½®</h4><p>ç¼–è¾‘ <code>ç«™ç‚¹é…ç½®</code>  æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>.<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure></p>
<p><a href="http://www.ezlippi.com/blog/2017/02/hexo-search.html" target="_blank" rel="noopener">ç«™å†…æœç´¢åŸæ–‡æ•™ç¨‹-EZLippi-æµ®ç”Ÿå¿—</a></p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>next-ä¸»é¢˜è®¾ç½®</title>
    <url>/2017/04/next-%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<p>ä¸‹é¢çš„<code>ä¸»é¢˜é…ç½®</code>æŒ‡çš„æ˜¯ <code>themes&gt;Next&gt;_config.yml</code>, <code>ç«™ç‚¹é…ç½®</code>æŒ‡çš„æ˜¯æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>;</p>
<h3 id="æ·»åŠ -æ ‡ç­¾-é¡µé¢"><a href="#æ·»åŠ -æ ‡ç­¾-é¡µé¢" class="headerlink" title="æ·»åŠ [æ ‡ç­¾]é¡µé¢"></a>æ·»åŠ [æ ‡ç­¾]é¡µé¢</h3><p>æ–°å»ºã€Œæ ‡ç­¾ã€é¡µé¢ï¼Œå¹¶åœ¨èœå•ä¸­æ˜¾ç¤ºã€Œæ ‡ç­¾ã€é“¾æ¥ã€‚ã€Œæ ‡ç­¾ã€é¡µé¢å°†å±•ç¤ºç«™ç‚¹çš„æ‰€æœ‰æ ‡ç­¾ï¼Œè‹¥ä½ çš„æ‰€æœ‰æ–‡ç« éƒ½æœªåŒ…å«æ ‡ç­¾ï¼Œæ­¤é¡µé¢å°†æ˜¯ç©ºçš„ã€‚ åº•ä¸‹ä»£ç æ˜¯ä¸€ç¯‡åŒ…å«æ ‡ç­¾çš„æ–‡ç« çš„ä¾‹å­ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">æ ‡ç­¾æµ‹è¯•æ–‡ç« </span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Testing</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Another</span> <span class="string">Tag</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<h4 id="æ–°å»ºtagsé¡µé¢"><a href="#æ–°å»ºtagsé¡µé¢" class="headerlink" title="æ–°å»ºtagsé¡µé¢"></a>æ–°å»º<code>tags</code>é¡µé¢</h4><p>ä½¿ç”¨<code>hexo new page tags</code> æ–°å»ºä¸€ä¸ªé¡µé¢ï¼Œå‘½åä¸º<code>tags</code>:<br><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">cd</span> you-hexo-site</span><br><span class="line">$ hexo <span class="keyword">new</span> page <span class="keyword">tags</span></span><br></pre></td></tr></table></figure></p>
<h4 id="è®¾ç½®æ–°å»ºçš„tagsé¡µé¢ç±»å‹ï¼Œæ”¹ä¸ºtags"><a href="#è®¾ç½®æ–°å»ºçš„tagsé¡µé¢ç±»å‹ï¼Œæ”¹ä¸ºtags" class="headerlink" title="è®¾ç½®æ–°å»ºçš„tagsé¡µé¢ç±»å‹ï¼Œæ”¹ä¸ºtags"></a>è®¾ç½®æ–°å»ºçš„<code>tags</code>é¡µé¢ç±»å‹ï¼Œæ”¹ä¸º<code>tags</code></h4><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">11</span><span class="string">:35:36</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"tags"</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span> <span class="comment"># tagsé¡µé¢è‡ªå®šä¹‰æ˜¯å¦è¦å¼€å¯è¯„è®ºï¼ˆå‰æä½ å·²ç»é›†æˆäº†è¯„è®ºï¼‰</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ŒæŠŠtagæ·»åŠ åˆ°menuä¸­"><a href="#ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ŒæŠŠtagæ·»åŠ åˆ°menuä¸­" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ŒæŠŠtagæ·»åŠ åˆ°menuä¸­"></a>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ŒæŠŠtagæ·»åŠ åˆ°menuä¸­</h4><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags</span></span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ -åˆ†ç±»-é¡µé¢"><a href="#æ·»åŠ -åˆ†ç±»-é¡µé¢" class="headerlink" title="æ·»åŠ [åˆ†ç±»]é¡µé¢"></a>æ·»åŠ [åˆ†ç±»]é¡µé¢</h3><p>æ–°å»ºã€Œåˆ†ç±»ã€é¡µé¢ï¼Œå¹¶åœ¨èœå•ä¸­æ˜¾ç¤ºã€Œåˆ†ç±»ã€é“¾æ¥ã€‚ã€Œåˆ†ç±»ã€é¡µé¢å°†å±•ç¤ºç«™ç‚¹çš„æ‰€æœ‰åˆ†ç±»ï¼Œè‹¥ä½ çš„æ‰€æœ‰æ–‡ç« éƒ½æœªåŒ…å«åˆ†ç±»ï¼Œæ­¤é¡µé¢å°†æ˜¯ç©ºçš„ã€‚ åº•ä¸‹ä»£ç æ˜¯ä¸€ç¯‡åŒ…å«åˆ†ç±»çš„æ–‡ç« çš„ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">title: åˆ†ç±»æµ‹è¯•æ–‡ç« </span><br><span class="line">categories: Testing</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>åˆ†ç±»å’Œæ ‡ç­¾çš„åŒºåˆ«è¯¦è§<a href="https://hexo.io/zh-cn/docs/front-matter.html#åˆ†ç±»å’Œæ ‡ç­¾" target="_blank" rel="noopener">Hexoçš„åˆ†ç±»ä¸æ ‡ç­¾æ–‡æ¡£</a></p>
<h4 id="æ–°å»ºé¡µé¢"><a href="#æ–°å»ºé¡µé¢" class="headerlink" title="æ–°å»ºé¡µé¢"></a>æ–°å»ºé¡µé¢</h4><p>åœ¨ç»ˆç«¯çª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹ç›®å½•ä¸‹ã€‚ä½¿ç”¨ hexo new page æ–°å»ºä¸€ä¸ªé¡µé¢ï¼Œå‘½åä¸º categories ï¼š<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">$</span> <span class="string">cd</span> <span class="string">your-hexo-site</span></span><br><span class="line"><span class="string">$</span> <span class="string">hexo</span> <span class="string">new</span> <span class="string">page</span> <span class="string">categories</span></span><br><span class="line"><span class="string">```</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">#### è®¾ç½®é¡µé¢ç±»å‹</span></span><br><span class="line"><span class="string">ç¼–è¾‘åˆšæ–°å»ºçš„é¡µé¢ï¼Œå°†é¡µé¢çš„</span> <span class="string">`type`</span> <span class="string">è®¾ç½®ä¸º</span> <span class="string">`categories`</span> <span class="string">ï¼Œä¸»é¢˜å°†è‡ªåŠ¨ä¸ºè¿™ä¸ªé¡µé¢æ˜¾ç¤ºåˆ†ç±»ã€‚é¡µé¢å†…å®¹å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="string">```yml</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">åˆ†ç±»</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2014</span><span class="number">-12</span><span class="number">-22</span> <span class="number">12</span><span class="string">:39:04</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"categories"</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></p>
<h4 id="ä¿®æ”¹èœå•"><a href="#ä¿®æ”¹èœå•" class="headerlink" title="ä¿®æ”¹èœå•"></a>ä¿®æ”¹èœå•</h4><p>åœ¨èœå•ä¸­æ·»åŠ é“¾æ¥ã€‚ç¼–è¾‘ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ï¼Œ æ·»åŠ  <code>categories</code> åˆ° <code>menu</code> ä¸­ï¼Œå¦‚ä¸‹:<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories</span></span><br></pre></td></tr></table></figure></p>
<h3 id="è®¾ç½®å­—ä½“"><a href="#è®¾ç½®å­—ä½“" class="headerlink" title="è®¾ç½®å­—ä½“"></a>è®¾ç½®å­—ä½“</h3><p>Nextæä¾›äº†5ä¸ªç‰¹å®šèŒƒå›´çš„å­—ä½“è®¾å®š</p>
<ul>
<li>å…¨å±€å­—ä½“ï¼šå®šä¹‰çš„å­—ä½“å°†åœ¨å…¨ç«™èŒƒå›´ä½¿ç”¨</li>
<li>æ ‡é¢˜å­—ä½“ï¼šæ–‡ç« å†…æ ‡é¢˜çš„å­—ä½“ï¼ˆh1, h2, h3, h4, h5, h6ï¼‰</li>
<li>æ–‡ç« å­—ä½“ï¼šæ–‡ç« æ‰€ä½¿ç”¨çš„å­—ä½“</li>
<li>Logoå­—ä½“ï¼šLogo æ‰€ä½¿ç”¨çš„å­—ä½“</li>
<li>ä»£ç å­—ä½“ï¼š ä»£ç å—æ‰€ä½¿ç”¨çš„å­—ä½“</li>
</ul>
<p>è¯¥é…ç½®ä¸­çš„ <code>external</code> å¯ä»¥ç”¨æ¥æ§åˆ¶æ˜¯å¦ä½¿ç”¨å¤–é“¾å­—ä½“åº“ã€‚ å¼€æ”¾æ­¤å±æ€§æ–¹ä¾¿ä½ è®¾å®šé‚£äº›å·²ç»å®‰è£…åœ¨ç³»ç»Ÿä¸­çš„å­—ä½“ï¼Œå‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ï¼ˆè¯·æ±‚å¤§å°ï¼‰ã€‚</p>
<h3 id="è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜"><a href="#è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜" class="headerlink" title="è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜"></a>è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜</h3><p>NexT ä½¿ç”¨ <a href="https://github.com/chriskempson/tomorrow-theme" target="_blank" rel="noopener">Tomorrow Theme</a> ä½œä¸ºä»£ç é«˜äº®ï¼Œå…±æœ‰5æ¬¾ä¸»é¢˜ä¾›ä½ é€‰æ‹©ã€‚ NexT é»˜è®¤ä½¿ç”¨çš„æ˜¯ ç™½è‰²çš„ <code>normal</code> ä¸»é¢˜ï¼Œå¯é€‰çš„å€¼æœ‰ <code>normal</code>ï¼Œ<code>night</code>ï¼Œ <code>night blue</code>ï¼Œ <code>night bright</code>ï¼Œ <code>night eighties</code>ï¼š<br>å¯ä»¥è‡ªè¡Œæ›´æ”¹ <code>highlight_theme</code> å­—æ®µï¼Œ è®¾ç½®æˆä½ è‡ªå·±å–œæ¬¢çš„é«˜äº®ä¸»é¢˜ã€‚</p>
<h3 id="ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"><a href="#ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥" class="headerlink" title="ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"></a>ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥</h3><p>ä¾§æ ç¤¾äº¤é“¾æ¥çš„ä¿®æ”¹åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€æ˜¯é“¾æ¥ï¼Œç¬¬äºŒæ˜¯é“¾æ¥å›¾æ ‡ã€‚ ä¸¤è€…é…ç½®å‡åœ¨ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ä¸­ã€‚</p>
<h4 id="è®¾ç½®é“¾æ¥"><a href="#è®¾ç½®é“¾æ¥" class="headerlink" title="è®¾ç½®é“¾æ¥"></a>è®¾ç½®é“¾æ¥</h4><p>åœ¨ <code>ä¸»é¢˜é…ç½®</code> ä¸­æ‰¾åˆ° <code>social</code>å­—æ®µï¼Œ å…¶æ ¼å¼ä¸º <code>æ˜¾ç¤ºæ–‡æœ¬: é“¾æ¥åœ°å€</code>ã€‚</p>
<figure class="highlight yml"><figcaption><span>scoial</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">Github:</span> <span class="string">https://github.com/jsonz1993</span></span><br><span class="line">  <span class="string">å¾®åš:</span> <span class="string">http://weibo.com/u/1638841204</span></span><br></pre></td></tr></table></figure>
<h4 id="è®¾ç½®å›¾æ ‡"><a href="#è®¾ç½®å›¾æ ‡" class="headerlink" title="è®¾ç½®å›¾æ ‡"></a>è®¾ç½®å›¾æ ‡</h4><p>åœ¨ <code>ä¸»é¢˜é…ç½®</code> ä¸­æ‰¾åˆ° <code>social_icons</code>å­—æ®µï¼Œ å…¶æ ¼å¼ä¸º <code>åŒ¹é…é”®: Font Awesome å›¾æ ‡åç§°</code>ã€‚<br><code>enable</code> ä¸ºæ˜¯å¦æ˜¾ç¤ºå›¾æ ‡æ§åˆ¶ã€‚ æ³¨æ„æ­¤æ—¶çš„åŒ¹é…å»ºè¦ä¸ <code>social</code>çš„é”®ä¸€è‡´,å›¾æ ‡ä¾æ—§æ˜¯<code>Font Awesome</code>å›¾æ ‡</p>
<h3 id="ç«™ç‚¹å»ºç«‹æ—¶é—´"><a href="#ç«™ç‚¹å»ºç«‹æ—¶é—´" class="headerlink" title="ç«™ç‚¹å»ºç«‹æ—¶é—´"></a>ç«™ç‚¹å»ºç«‹æ—¶é—´</h3><p>è¿™ä¸ªæ—¶é—´å°†åœ¨ç«™ç‚¹çš„åº•éƒ¨æ˜¾ç¤ºï¼Œä¾‹å¦‚ <code>Â© 2013 - 2015</code>ã€‚ ç¼–è¾‘ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ï¼Œæ–°å¢å­—æ®µ <code>since</code>ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">since:</span> <span class="number">2013</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®ã€ŒåŠ¨ç”»æ•ˆæœã€"><a href="#è®¾ç½®ã€ŒåŠ¨ç”»æ•ˆæœã€" class="headerlink" title="è®¾ç½®ã€ŒåŠ¨ç”»æ•ˆæœã€"></a>è®¾ç½®ã€ŒåŠ¨ç”»æ•ˆæœã€</h3><p>NexT é»˜è®¤å¼€å¯åŠ¨ç”»æ•ˆæœï¼Œæ•ˆæœä½¿ç”¨ JavaScript ç¼–å†™ï¼Œå› æ­¤éœ€è¦ç­‰å¾… JavaScript è„šæœ¬å®Œå…¨åŠ è½½å®Œæ¯•åæ‰ä¼šæ˜¾ç¤ºå†…å®¹ã€‚ å¦‚æœæ‚¨æ¯”è¾ƒåœ¨ä¹é€Ÿåº¦ï¼Œå¯ä»¥å°†è®¾ç½®æ­¤å­—æ®µçš„å€¼ä¸º <code>false</code> æ¥å…³é—­åŠ¨ç”»ã€‚<br>ç¼–è¾‘ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ï¼Œ æœç´¢ <code>use_motion</code>ï¼Œæ ¹æ®æ‚¨çš„éœ€æ±‚è®¾ç½®å€¼ä¸º <code>true</code> æˆ–è€… <code>false</code> å³å¯ï¼š<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">use_motion:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯åŠ¨ç”»</span></span><br></pre></td></tr></table></figure></p>
<h3 id="è®¾ç½®ã€ŒèƒŒæ™¯åŠ¨ç”»ã€"><a href="#è®¾ç½®ã€ŒèƒŒæ™¯åŠ¨ç”»ã€" class="headerlink" title="è®¾ç½®ã€ŒèƒŒæ™¯åŠ¨ç”»ã€"></a>è®¾ç½®ã€ŒèƒŒæ™¯åŠ¨ç”»ã€</h3><p>NexT è‡ªå¸¦ä¸¤ç§èƒŒæ™¯åŠ¨ç”»æ•ˆæœ</p>
<p>ç¼–è¾‘ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ï¼Œ æœç´¢ <code>canvas_nest</code> æˆ– <code>three_waves</code>ï¼Œæ ¹æ®æ‚¨çš„éœ€æ±‚è®¾ç½®å€¼ä¸º <code>true</code> æˆ–è€… <code>false</code> å³å¯ï¼š<br>åªèƒ½åŒæ—¶å¼€å¯ä¸€ç§èƒŒæ™¯æ•ˆæœï¼Œ å»ºè®®é…Œæƒ…å¼€å¯ï¼Œä¼šå½±å“ç”µè„‘ç½‘é¡µæ€§èƒ½(macbook proæˆ–ç¬”è®°æœ¬å®¹æ˜“å‡ºç°è¿‡çƒ­ç°è±¡).<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">canvas_nest:</span> <span class="literal">false</span> <span class="string">//å…³é—­åŠ¨ç”»</span></span><br><span class="line"><span class="attr">three_waves:</span> <span class="literal">true</span> <span class="string">//å¼€å¯åŠ¨ç”»</span></span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hello next</title>
    <url>/2017/04/hellp-next/</url>
    <content><![CDATA[<p>next å…¥é—¨é…ç½®</p>
<h3 id="ä¸»é¢˜å®‰è£…"><a href="#ä¸»é¢˜å®‰è£…" class="headerlink" title="ä¸»é¢˜å®‰è£…"></a>ä¸»é¢˜å®‰è£…</h3><p><strong>ä¸‹é¢Nextä¸‹çš„<code>_config</code>ç§°<code>ä¸»é¢˜é…ç½®</code>ï¼Œ æ ¹ç›®å½•Hexoçš„<code>_config</code>ç§°<code>ç«™ç‚¹é…ç½®</code></strong></p>
<h4 id="å®‰è£…next-åˆ°ç›®å½•-themes-next"><a href="#å®‰è£…next-åˆ°ç›®å½•-themes-next" class="headerlink" title="å®‰è£…next åˆ°ç›®å½• themes/next:"></a>å®‰è£…next åˆ°ç›®å½• <code>themes/next</code>:</h4><p>æ³¨æ„å®‰è£…å®Œthemesä¸‹åº”è¯¥æœ‰ä¸€ä¸ª <code>next</code> æ–‡ä»¶å¤¹<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p>
<h4 id="å¯åŠ¨ä¸»é¢˜"><a href="#å¯åŠ¨ä¸»é¢˜" class="headerlink" title="å¯åŠ¨ä¸»é¢˜"></a>å¯åŠ¨ä¸»é¢˜</h4><p>ä¿®æ”¹ <code>ç«™ç‚¹é…ç½®</code>:<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure></p>
<h4 id="éªŒè¯ä¸»é¢˜"><a href="#éªŒè¯ä¸»é¢˜" class="headerlink" title="éªŒè¯ä¸»é¢˜"></a>éªŒè¯ä¸»é¢˜</h4><p>å…ˆæ¸…é™¤ç¼“å­˜å†å¯åŠ¨æœåŠ¡ï¼Œå¯åŠ¨å®Œæˆåæ‰“å¼€ <code>http://localhost:4000/</code><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo s</span><br></pre></td></tr></table></figure></p>
<h3 id="ä¸»é¢˜è®¾å®š"><a href="#ä¸»é¢˜è®¾å®š" class="headerlink" title="ä¸»é¢˜è®¾å®š"></a>ä¸»é¢˜è®¾å®š</h3><h4 id="é€‰æ‹©Scheme"><a href="#é€‰æ‹©Scheme" class="headerlink" title="é€‰æ‹©Scheme"></a>é€‰æ‹©Scheme</h4><p>Scheme æ˜¯ NexT æä¾›çš„ä¸€ç§ç‰¹æ€§ï¼Œå€ŸåŠ©äº Schemeï¼ŒNexT ä¸ºä½ æä¾›å¤šç§ä¸åŒçš„å¤–è§‚ã€‚åŒæ—¶ï¼Œå‡ ä¹æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥ åœ¨ Scheme ä¹‹é—´å…±ç”¨ã€‚åœ¨<code>ä¸»é¢˜é…ç½®</code>é…ç½®ä¸­çš„<code>Scheme</code>é€‰é¡¹ã€‚ç›®å‰æä¾›ä¸‰ç§æ–¹æ¡ˆï¼š</p>
<ul>
<li>Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½</li>
<li>Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚</li>
<li>Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–°</li>
</ul>
<p>ç›®å‰ä½¿ç”¨çš„æ˜¯ <code>scheme: Mist</code>æ–¹æ¡ˆ</p>
<h4 id="è®¾ç½®è¯­è¨€"><a href="#è®¾ç½®è¯­è¨€" class="headerlink" title="è®¾ç½®è¯­è¨€"></a>è®¾ç½®è¯­è¨€</h4><p>åœ¨<code>ç«™ç‚¹é…ç½®</code> <code>language</code> ä¸­è®¾ç½® <code>zh-Hans</code> (ç®€ä½“ä¸­æ–‡)ã€‚<br>æ”¯æŒçš„è¯­è¨€å¯åœ¨ <code>themes/next/languages</code> ä¸­æŸ¥çœ‹</p>
<h4 id="è®¾ç½®èœå•"><a href="#è®¾ç½®èœå•" class="headerlink" title="è®¾ç½®èœå•"></a>è®¾ç½®èœå•</h4><p>èœå•æ ¼å¼ä¸º <code>item name: link</code><br>æ­¤å¤„åªæ˜¯å°† urlæ˜ å°„åˆ°å¯¹åº” èœå•ä¸Šï¼Œè‹¥è¦å…·ä½“æ˜¾ç¤ºæ–‡æ¡ˆéœ€è¦åˆ°è¯­è¨€é…ç½®æ–‡ä»¶ä¿®æ”¹<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="comment"># ä¸»é¡µ</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories</span> <span class="comment"># åˆ†ç±»</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives</span> <span class="comment"># å½’æ¡£</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags</span> <span class="comment"># æ ‡ç­¾</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about</span> <span class="comment"># å…³äºæˆ‘</span></span><br></pre></td></tr></table></figure></p>
<p>è®¾ç½®èœå•å›¾æ ‡<br>å›¾æ ‡å¯ä»<a href="http://fontawesome.io/" target="_blank" rel="noopener">http://fontawesome.io/</a>é€‰æ‹©<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡</span></span><br><span class="line">  <span class="comment"># Icon Mapping.</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">archive</span></span><br><span class="line">  <span class="attr">commonweal:</span> <span class="string">heartbeat</span></span><br></pre></td></tr></table></figure></p>
<h4 id="è®¾ç½®ä¾§æ "><a href="#è®¾ç½®ä¾§æ " class="headerlink" title="è®¾ç½®ä¾§æ "></a>è®¾ç½®ä¾§æ </h4><ol>
<li><p>è®¾ç½®ä¾§æ ä½ç½®ï¼š<br><code>ä¸»é¢˜é…ç½®</code> ä¿®æ”¹ <code>sidebar.position</code> çš„å€¼ï¼Œæ”¯æŒ <code>left</code> &amp; <code>right</code><br>ä½†ç›®å‰åªæœ‰<code>Pisces Scheme</code>æ”¯æŒè¯¥è®¾ç½®</p>
</li>
<li><p>è®¾ç½®ä¾§æ æ˜¾ç¤ºçš„æ—¶æœº<br><code>ä¸»é¢˜é…ç½®</code> ä¿®æ”¹ <code>sidebar.display</code>ï¼Œç›®å‰æ”¯æŒçš„æœ‰ï¼š</p>
<ul>
<li><code>post</code> é»˜è®¤è¡Œæ–‡ï¼Œæ–‡å±•é¡µé¢è‡ªåŠ¨å±•å¼€ <code>é¦–é¡µ</code>ç­‰ä¸è‡ªåŠ¨å±•å¼€</li>
<li><code>always</code> æ‰€æœ‰é¡µé¢éƒ½è‡ªåŠ¨å±•å¼€</li>
<li><code>hide</code> æ‰€æœ‰é¡µé¢éƒ½éšè—ï¼Œå¯ä»¥æ‰‹åŠ¨å±•å¼€</li>
<li><code>remove</code> å®Œå…¨ç§»é™¤</li>
</ul>
</li>
<li><p>è®¾ç½®å¤´åƒ<br><code>ä¸»é¢˜é…ç½®</code> ä¿®æ”¹ <code>avatar</code>å­—æ®µã€‚<br>æ”¯æŒäº’è”ç½‘URI å¦‚ <code>https://www.img.com/img.jpg</code><br>æˆ–ç«™å†…åœ°å€ <code>/images/avatar.jpg</code></p>
</li>
</ol>
<h3 id="é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡"><a href="#é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡" class="headerlink" title="é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡"></a>é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡</h3><h4 id="ç™¾åº¦ç»Ÿè®¡"><a href="#ç™¾åº¦ç»Ÿè®¡" class="headerlink" title="ç™¾åº¦ç»Ÿè®¡"></a>ç™¾åº¦ç»Ÿè®¡</h4><ol>
<li>ç™»å½•<a href="http://tongji.baidu.com/" target="_blank" rel="noopener">ç™¾åº¦ç»Ÿè®¡</a>ï¼Œ å®šä½åˆ°ç«™ç‚¹çš„ä»£ç è·å–é¡µé¢</li>
<li>å¤åˆ¶ hm.js? åé¢é‚£ä¸²ç»Ÿè®¡è„šæœ¬ idï¼Œå¦‚:<br><code>hm.src = &quot;https://hm.baidu.com/hm.js?dksjklsajdlkasjkl&quot;;</code><br>åˆ™id = <code>dksjklsajdlkasjkl</code></li>
<li>ä¿®æ”¹<code>ä¸»é¢˜é…ç½®</code> <code>baidu_analytics</code> å­—æ®µï¼Œæ”¹ä¸ºä¸Šè¿°id</li>
<li>éªšç­‰ä¸€æ®µæ—¶é—´åå¯ä»¥è‡ªè¡Œç™»å½•<a href="http://tongji.baidu.com/" target="_blank" rel="noopener">ç™¾åº¦ç»Ÿè®¡</a>æŸ¥çœ‹<code>PV</code>,<code>UV</code>ç­‰æ•°æ®ã€‚</li>
</ol>
<h4 id="æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡"><a href="#æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡" class="headerlink" title="æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡"></a>æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡</h4><p><a href="https://notes.wanghao.work/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html#%E9%85%8D%E7%BD%AELeanCloud" target="_blank" rel="noopener">ä¸ºNextä¸»é¢˜æ·»åŠ æ–‡ç« é˜…è¯»é‡</a></p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-è¾…åŠ©å‡½æ•°</title>
    <url>/2017/04/hexo-%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>ä¸»è¦ç”¨äºæ¨¡æ¿ä¸­è¾…åŠ©çš„å‡½æ•°ï¼Œå¦‚ <code>date(Date, &#39;YYYY-DD-MM&#39;)</code></p>
<p>è¯¦è§<a href="https://hexo.io/zh-cn/docs/helpers.html" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/helpers.html</a></p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-å˜é‡</title>
    <url>/2017/04/hexo-%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<p>å˜é‡ä¸»è¦ç”¨äº <code>layout</code> ç­‰çš„åº”ç”¨</p>
<h4 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h4><table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">site</td>
<td style="text-align:left">ç½‘ç«™å˜é‡</td>
</tr>
<tr>
<td style="text-align:left">page</td>
<td style="text-align:left">é’ˆå¯¹è¯¥é¡µé¢çš„å†…å®¹ä»¥åŠ front-matter æ‰€è®¾å®šçš„å˜é‡ã€‚</td>
</tr>
<tr>
<td style="text-align:left">config</td>
<td style="text-align:left">ç½‘ç«™é…ç½®</td>
</tr>
<tr>
<td style="text-align:left">theme</td>
<td style="text-align:left">ä¸»é¢˜é…ç½®ã€‚ç»§æ‰¿è‡ªç½‘ç«™é…ç½®ã€‚</td>
</tr>
<tr>
<td style="text-align:left">_ (å•ä¸‹åˆ’çº¿)</td>
<td style="text-align:left">Lodash å‡½æ•°åº“</td>
</tr>
<tr>
<td style="text-align:left">path</td>
<td style="text-align:left">å½“å‰é¡µé¢çš„è·¯å¾„ï¼ˆä¸å«æ ¹è·¯å¾„ï¼‰</td>
</tr>
<tr>
<td style="text-align:left">url</td>
<td style="text-align:left">å½“å‰é¡µé¢çš„å®Œæ•´ç½‘å€</td>
</tr>
<tr>
<td style="text-align:left">env</td>
<td style="text-align:left">ç¯å¢ƒå˜é‡</td>
</tr>
</tbody>
</table>
<h4 id="ç½‘ç«™å˜é‡"><a href="#ç½‘ç«™å˜é‡" class="headerlink" title="ç½‘ç«™å˜é‡"></a>ç½‘ç«™å˜é‡</h4><table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">site.posts</td>
<td style="text-align:left">æ‰€æœ‰æ–‡ç« </td>
</tr>
<tr>
<td style="text-align:left">site.pages</td>
<td style="text-align:left">æ‰€æœ‰åˆ†é¡µ</td>
</tr>
<tr>
<td style="text-align:left">site.categories</td>
<td style="text-align:left">æ‰€æœ‰åˆ†ç±»</td>
</tr>
<tr>
<td style="text-align:left">site.tags</td>
<td style="text-align:left">æ‰€æœ‰æ ‡ç­¾</td>
</tr>
</tbody>
</table>
<h4 id="é¡µé¢å˜é‡"><a href="#é¡µé¢å˜é‡" class="headerlink" title="é¡µé¢å˜é‡"></a>é¡µé¢å˜é‡</h4><h6 id="é¡µé¢page"><a href="#é¡µé¢page" class="headerlink" title="é¡µé¢page"></a>é¡µé¢page</h6><table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">page.title</td>
<td style="text-align:left">é¡µé¢æ ‡é¢˜</td>
</tr>
<tr>
<td style="text-align:left">page.date</td>
<td style="text-align:left">é¡µé¢å»ºç«‹æ—¥æœŸï¼ˆMoment.js å¯¹è±¡ï¼‰</td>
</tr>
<tr>
<td style="text-align:left">page.updated</td>
<td style="text-align:left">é¡µé¢æ›´æ–°æ—¥æœŸï¼ˆMoment.js å¯¹è±¡ï¼‰</td>
</tr>
<tr>
<td style="text-align:left">page.comments</td>
<td style="text-align:left">ç•™è¨€æ˜¯å¦å¼€å¯</td>
</tr>
<tr>
<td style="text-align:left">page.layout</td>
<td style="text-align:left">å¸ƒå±€åç§°</td>
</tr>
<tr>
<td style="text-align:left">page.content</td>
<td style="text-align:left">é¡µé¢çš„å®Œæ•´å†…å®¹</td>
</tr>
<tr>
<td style="text-align:left">page.excerpt</td>
<td style="text-align:left">é¡µé¢æ‘˜è¦</td>
</tr>
<tr>
<td style="text-align:left">page.more</td>
<td style="text-align:left">é™¤äº†é¡µé¢æ‘˜è¦çš„å…¶ä½™å†…å®¹</td>
</tr>
<tr>
<td style="text-align:left">page.source</td>
<td style="text-align:left">é¡µé¢åŸå§‹è·¯å¾„</td>
</tr>
<tr>
<td style="text-align:left">page.full_source</td>
<td style="text-align:left">é¡µé¢çš„å®Œæ•´åŸå§‹è·¯å¾„</td>
</tr>
<tr>
<td style="text-align:left">page.path</td>
<td style="text-align:left">é¡µé¢ç½‘å€ï¼ˆä¸å«æ ¹è·¯å¾„ï¼‰ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ä¸»é¢˜ ä¸­ä½¿ç”¨ url_for(page.path)ã€‚</td>
</tr>
<tr>
<td style="text-align:left">page.permalink</td>
<td style="text-align:left">é¡µé¢çš„å®Œæ•´ç½‘å€</td>
</tr>
<tr>
<td style="text-align:left">page.prev</td>
<td style="text-align:left">ä¸Šä¸€ä¸ªé¡µé¢ã€‚å¦‚æœæ­¤ä¸ºç¬¬ä¸€ä¸ªé¡µé¢åˆ™ä¸º nullã€‚</td>
</tr>
<tr>
<td style="text-align:left">page.next</td>
<td style="text-align:left">ä¸‹ä¸€ä¸ªé¡µé¢ã€‚å¦‚æœæ­¤ä¸ºæœ€åä¸€ä¸ªé¡µé¢åˆ™ä¸º  nullã€‚</td>
</tr>
<tr>
<td style="text-align:left">page.raw</td>
<td style="text-align:left">æ–‡ç« çš„åŸå§‹å†…å®¹</td>
</tr>
<tr>
<td style="text-align:left">page.photos</td>
<td style="text-align:left">æ–‡ç« çš„ç…§ç‰‡ï¼ˆç”¨äºç›¸ç°¿ï¼‰</td>
</tr>
<tr>
<td style="text-align:left">page.link</td>
<td style="text-align:left">æ–‡ç« çš„å¤–éƒ¨é“¾æ¥ï¼ˆç”¨äºé“¾æ¥æ–‡ç« ï¼‰</td>
</tr>
</tbody>
</table>
<h6 id="æ–‡ç« post"><a href="#æ–‡ç« post" class="headerlink" title="æ–‡ç« post"></a>æ–‡ç« post</h6><p>ä¸<code>page</code>ç±»ä¼¼ ä½†æ˜¯æ·»åŠ äº†ä¸‹åˆ—å˜é‡</p>
<table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">page.published</td>
<td style="text-align:left">å¦‚æœè¯¥æ–‡ç« å·²å‘å¸ƒåˆ™ä¸ºTrue</td>
</tr>
<tr>
<td style="text-align:left">page.categories</td>
<td style="text-align:left">è¯¥æ–‡ç« çš„æ‰€æœ‰åˆ†ç±»</td>
</tr>
<tr>
<td style="text-align:left">page.tags</td>
<td style="text-align:left">è¯¥æ–‡ç« çš„æ‰€æœ‰æ ‡ç­¾</td>
</tr>
</tbody>
</table>
<h6 id="é¦–é¡µ-index"><a href="#é¦–é¡µ-index" class="headerlink" title="é¦–é¡µ index"></a>é¦–é¡µ index</h6><table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">page.per_page</td>
<td style="text-align:left">æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•°é‡</td>
</tr>
<tr>
<td style="text-align:left">page.total</td>
<td style="text-align:left">æ€»æ–‡ç« æ•°</td>
</tr>
<tr>
<td style="text-align:left">page.current</td>
<td style="text-align:left">ç›®å‰é¡µæ•°</td>
</tr>
<tr>
<td style="text-align:left">page.current_url</td>
<td style="text-align:left">ç›®å‰åˆ†é¡µçš„ç½‘å€</td>
</tr>
<tr>
<td style="text-align:left">page.posts</td>
<td style="text-align:left">æœ¬é¡µæ–‡ç« </td>
</tr>
<tr>
<td style="text-align:left">page.prev</td>
<td style="text-align:left">ä¸Šä¸€é¡µçš„é¡µæ•°ã€‚å¦‚æœæ­¤é¡µæ˜¯ç¬¬ä¸€é¡µçš„è¯åˆ™ä¸º 0ã€‚</td>
</tr>
<tr>
<td style="text-align:left">page.prev_link</td>
<td style="text-align:left">ä¸Šä¸€é¡µçš„ç½‘å€ã€‚å¦‚æœæ­¤é¡µæ˜¯ç¬¬ä¸€é¡µçš„è¯åˆ™ä¸º â€˜â€™ã€‚</td>
</tr>
<tr>
<td style="text-align:left">page.next</td>
<td style="text-align:left">ä¸‹ä¸€é¡µçš„é¡µæ•°ã€‚å¦‚æœæ­¤é¡µæ˜¯æœ€åä¸€é¡µçš„è¯åˆ™ä¸º 0ã€‚</td>
</tr>
<tr>
<td style="text-align:left">page.next_link</td>
<td style="text-align:left">ä¸‹ä¸€é¡µçš„ç½‘å€ã€‚å¦‚æœæ­¤é¡µæ˜¯æœ€åä¸€é¡µçš„è¯åˆ™ä¸º â€˜â€™ã€‚</td>
</tr>
<tr>
<td style="text-align:left">page.path</td>
<td style="text-align:left">å½“å‰é¡µé¢çš„è·¯å¾„ï¼ˆä¸å«æ ¹ç›®å½•ï¼‰ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨ url_for(page.path)ã€‚</td>
</tr>
</tbody>
</table>
<h6 id="å½’æ¡£-archive"><a href="#å½’æ¡£-archive" class="headerlink" title="å½’æ¡£ (archive)"></a>å½’æ¡£ (archive)</h6><p>ä¸ <code>index</code> å¸ƒå±€ç›¸åŒï¼Œ ä½†æ–°å¢äº†ä»¥ä¸‹å˜é‡</p>
<table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">page.archive</td>
<td style="text-align:left">ç­‰äº true</td>
</tr>
<tr>
<td style="text-align:left">page.year</td>
<td style="text-align:left">å¹´ä»½å½’æ¡£ (4ä½)</td>
</tr>
<tr>
<td style="text-align:left">page.month</td>
<td style="text-align:left">æœˆä»½å½’æ¡£ (æ²¡æœ‰å‰å¯¼é›¶çš„2ä½æ•°)</td>
</tr>
</tbody>
</table>
<h6 id="åˆ†ç±»-category"><a href="#åˆ†ç±»-category" class="headerlink" title="åˆ†ç±» (category)"></a>åˆ†ç±» (category)</h6><p>ä¸ <code>index</code> å¸ƒå±€ç›¸åŒï¼Œ ä½†æ–°å¢äº†ä»¥ä¸‹å˜é‡</p>
<table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">page.category</td>
<td style="text-align:left">åˆ†ç±»åç§°</td>
</tr>
</tbody>
</table>
<h6 id="æ ‡ç­¾-tag"><a href="#æ ‡ç­¾-tag" class="headerlink" title="æ ‡ç­¾(tag)"></a>æ ‡ç­¾(tag)</h6><p>ä¸ <code>index</code> å¸ƒå±€ç›¸åŒï¼Œ ä½†æ–°å¢äº†ä»¥ä¸‹å˜é‡</p>
<table>
<thead>
<tr>
<th style="text-align:left">å˜é‡</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">page.tag</td>
<td style="text-align:left">æ ‡ç­¾åç§°</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-æ¨¡æ¿</title>
    <url>/2017/04/hexo-%E6%A8%A1%E6%9D%BF/</url>
    <content><![CDATA[<p>æ¨¡æ¿å†³å®šäº†ç½‘ç«™å†…å®¹çš„å‘ˆç°æ–¹å¼ï¼Œæ¯ä¸ªä¸»é¢˜è‡³å°‘éƒ½åº”åŒ…å«ä¸€ä¸ª index æ¨¡æ¿ï¼Œä»¥ä¸‹æ˜¯å„é¡µé¢ç›¸å¯¹åº”çš„æ¨¡æ¿åç§°ï¼š</p>
<table>
<thead>
<tr>
<th>æ¨¡æ¿</th>
<th style="text-align:center">ç”¨é€”</th>
<th>å›è°ƒ</th>
</tr>
</thead>
<tbody>
<tr>
<td>index</td>
<td style="text-align:center">é¦–é¡µ</td>
<td></td>
</tr>
<tr>
<td>post</td>
<td style="text-align:center">æ–‡ç« </td>
<td>index</td>
</tr>
<tr>
<td>page</td>
<td style="text-align:center">åˆ†é¡µ</td>
<td>index</td>
</tr>
<tr>
<td>archive</td>
<td style="text-align:center">å½’æ¡£</td>
<td>index</td>
</tr>
<tr>
<td>category</td>
<td style="text-align:center">åˆ†ç±»å½’æ¡£</td>
<td>archive</td>
</tr>
<tr>
<td>tag</td>
<td style="text-align:center">æ ‡ç­¾å½’æ¡£</td>
<td>archive</td>
</tr>
</tbody>
</table>
<h4 id="å¸ƒå±€-Layout"><a href="#å¸ƒå±€-Layout" class="headerlink" title="å¸ƒå±€ Layout"></a>å¸ƒå±€ Layout</h4><p>å¸ƒå±€è¿™å—å¯å‚è€ƒ <code>next</code> ä¸»é¢˜çœ‹, Hexo é»˜è®¤çš„å¼•æ“æ¨¡æ¿ä¸º<a href="http://www.iqianduan.net/blog/how_to_use_swig" target="_blank" rel="noopener">swig</a></p>
<p>å¦‚æœé¡µé¢ç»“æ„ç±»ä¼¼ï¼Œä¾‹å¦‚ä¸¤ä¸ªæ¨¡æ¿éƒ½æœ‰é¡µé¦–ï¼ˆHeaderï¼‰å’Œé¡µè„šï¼ˆFooterï¼‰ï¼Œæ‚¨å¯è€ƒè™‘é€šè¿‡ã€Œå¸ƒå±€ã€è®©ä¸¤ä¸ªæ¨¡æ¿å…±äº«ç›¸åŒçš„ç»“æ„ã€‚ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶å¿…é¡»è¦èƒ½æ˜¾ç¤º <code>body</code> å˜é‡çš„å†…å®¹ï¼Œå¦‚æ­¤ä¸€æ¥æ¨¡æ¿çš„å†…å®¹æ‰ä¼šè¢«æ˜¾ç¤ºï¼Œä¸¾ä¾‹æ¥è¯´ï¼š</p>
<figure class="highlight plain"><figcaption><span>index.ejs</span></figcaption><table><tr><td class="code"><pre><span class="line">index</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>layout.ejs</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span> <span class="attr">body</span> %&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆ<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span>index<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ¯ä¸ªæ¨¡æ¿éƒ½é»˜è®¤ä½¿ç”¨ <code>layout</code> å¸ƒå±€ï¼Œæ‚¨å¯åœ¨ front-matter æŒ‡å®šå…¶ä»–å¸ƒå±€ï¼Œæˆ–æ˜¯è®¾ä¸º <code>false</code> æ¥å…³é—­å¸ƒå±€åŠŸèƒ½ï¼Œæ‚¨ç”šè‡³å¯åœ¨å¸ƒå±€ä¸­å†ä½¿ç”¨å…¶ä»–å¸ƒå±€æ¥å»ºç«‹åµŒå¥—å¸ƒå±€ã€‚</p>
<h4 id="å±€éƒ¨æ¨¡æ¿-Partial"><a href="#å±€éƒ¨æ¨¡æ¿-Partial" class="headerlink" title="å±€éƒ¨æ¨¡æ¿ Partial"></a>å±€éƒ¨æ¨¡æ¿ Partial</h4><p>å±€éƒ¨æ¨¡æ¿è®©æ‚¨åœ¨ä¸åŒæ¨¡æ¿ä¹‹é—´å…±äº«ç›¸åŒçš„ç»„ä»¶ï¼Œä¾‹å¦‚é¡µé¦–ï¼ˆHeaderï¼‰ã€é¡µè„šï¼ˆFooterï¼‰æˆ–ä¾§è¾¹æ ï¼ˆSidebarï¼‰ç­‰ï¼Œå¯åˆ©ç”¨å±€éƒ¨æ¨¡æ¿åŠŸèƒ½åˆ†å‰²ä¸ºä¸ªåˆ«æ–‡ä»¶ï¼Œè®©ç»´æŠ¤æ›´åŠ ä¾¿åˆ©ã€‚</p>
<p>å®˜ç½‘è¯´çš„éƒ½æ˜¯<code>ejs</code>è¯­æ³•ï¼Œ ç›®å‰nexté‡‡ç”¨çš„æ˜¯<code>swig</code> è¯­æ³•ã€‚</p>
<p>TODO åé¢å†è¡¥ä¸Š <code>Next</code>ä¸»é¢˜å­¦ä¹  &amp;&amp; <code>swig</code> </p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-ä¸»é¢˜æ¦‚è¿°</title>
    <url>/2017/04/hexo-%E4%B8%BB%E9%A2%98%E6%A6%82%E8%BF%B0/</url>
    <content><![CDATA[<p>äº†è§£ä¸€æ¬¾ä¸»é¢˜çš„æ–‡ä»¶ç»“æ„å¯ä»¥è®©ä½ åœ¨æœ‰è‡ªå®šä¹‰éœ€æ±‚çš„æ—¶å€™ï¼Œå¿«é€Ÿå®šä½åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œä¹Ÿä¸ºåé¢çš„å®šåˆ¶åŒ–ä¸»é¢˜åšé“ºå«ã€‚</p>
<p>åˆ›å»º Hexo ä¸»é¢˜éå¸¸å®¹æ˜“ï¼Œæ‚¨åªè¦åœ¨ themes æ–‡ä»¶å¤¹å†…ï¼Œæ–°å¢ä¸€ä¸ªä»»æ„åç§°çš„æ–‡ä»¶å¤¹ï¼Œå¹¶ä¿®æ”¹ _config.yml å†…çš„ theme è®¾å®šï¼Œå³å¯åˆ‡æ¢ä¸»é¢˜ã€‚ä¸€ä¸ªä¸»é¢˜å¯èƒ½ä¼šæœ‰ä»¥ä¸‹çš„ç»“æ„ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">.</span></span><br><span class="line"><span class="string">â”œâ”€â”€</span> <span class="string">_config.yml</span></span><br><span class="line"><span class="string">â”œâ”€â”€</span> <span class="string">languages</span></span><br><span class="line"><span class="string">â”œâ”€â”€</span> <span class="string">layout</span></span><br><span class="line"><span class="string">â”œâ”€â”€</span> <span class="string">scripts</span></span><br><span class="line"><span class="string">â””â”€â”€</span> <span class="string">source</span></span><br></pre></td></tr></table></figure>
<h4 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h4><p>ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ã€‚ä¿®æ”¹æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€é‡å¯æœåŠ¡å™¨ã€‚</p>
<h4 id="languages"><a href="#languages" class="headerlink" title="languages"></a>languages</h4><p>è¯­è¨€æ–‡ä»¶å¤¹ã€‚è¯·å‚è§ <a href="https://hexo.io/zh-cn/docs/internationalization.html" target="_blank" rel="noopener">å›½é™…åŒ– (i18n)</a>ã€‚</p>
<h4 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h4><p>å¸ƒå±€æ–‡ä»¶å¤¹ã€‚ç”¨äºå­˜æ”¾ä¸»é¢˜çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå†³å®šäº†ç½‘ç«™å†…å®¹çš„å‘ˆç°æ–¹å¼ï¼ŒHexo å†…å»º <code>Swig</code> æ¨¡æ¿å¼•æ“ï¼Œæ‚¨å¯ä»¥å¦å¤–å®‰è£…æ’ä»¶æ¥è·å¾— <code>EJS</code>ã€<code>Haml</code> æˆ– <code>Jade</code> æ”¯æŒï¼ŒHexo æ ¹æ®æ¨¡æ¿æ–‡ä»¶çš„æ‰©å±•åæ¥å†³å®šæ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">layout.ejs   - ä½¿ç”¨ EJS</span><br><span class="line">layout.swig  - ä½¿ç”¨ Swig</span><br></pre></td></tr></table></figure></p>
<p>è¯¦ç»†è§ <a href="https://hexo.io/zh-cn/docs/templates.html" target="_blank" rel="noopener">æ¨¡æ¿</a></p>
<h4 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h4><p>è„šæœ¬æ–‡ä»¶å¤¹ã€‚åœ¨å¯åŠ¨æ—¶ï¼ŒHexo ä¼šè½½å…¥æ­¤æ–‡ä»¶å¤¹å†…çš„ JavaScript æ–‡ä»¶ï¼Œè¯¦ç»†è§ <a href="https://hexo.io/zh-cn/docs/plugins.html" target="_blank" rel="noopener">æ’ä»¶</a> ã€‚</p>
<h4 id="source"><a href="#source" class="headerlink" title="source"></a>source</h4><p>èµ„æºæ–‡ä»¶å¤¹ï¼Œé™¤äº†æ¨¡æ¿ä»¥å¤–çš„ Assetï¼Œä¾‹å¦‚ CSSã€JavaScript æ–‡ä»¶ç­‰ï¼Œéƒ½åº”è¯¥æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å¼€å¤´åç§°ä¸º <code>_</code>ï¼ˆä¸‹åˆ’çº¿çº¿ï¼‰æˆ–éšè—çš„æ–‡ä»¶ä¼šè¢«å¿½ç•¥ã€‚</p>
<p>å¦‚æœæ–‡ä»¶å¯ä»¥è¢«æ¸²æŸ“çš„è¯ï¼Œä¼šç»è¿‡è§£æç„¶åå‚¨å­˜åˆ° <code>public</code> æ–‡ä»¶å¤¹ï¼Œå¦åˆ™ä¼šç›´æ¥æ‹·è´åˆ° <code>public</code> æ–‡ä»¶å¤¹</p>
<h4 id="å‘å¸ƒï¼ˆç•¥ï¼‰"><a href="#å‘å¸ƒï¼ˆç•¥ï¼‰" class="headerlink" title="å‘å¸ƒï¼ˆç•¥ï¼‰"></a>å‘å¸ƒï¼ˆç•¥ï¼‰</h4>]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-æ°¸ä¹…é“¾æ¥</title>
    <url>/2017/04/hexo-%E6%B0%B8%E4%B9%85%E9%93%BE%E6%8E%A5/</url>
    <content><![CDATA[<p>ä½ å¯ä»¥åœ¨<code>_config.yml &gt; permalink</code>é…ç½®ç½‘ç«™çš„æ°¸ä¹…é“¾æ¥æˆ–è€…æ¯ç¯‡æ–‡ç« çš„Front-matterè‡ªå®šä¹‰è¯¥æ–‡ç« çš„æ°¸ä¹…é“¾æ¥, å¦‚: <code>:year/:month/:title/</code> å¯¹åº” <code>2017/04/hexo-æ°¸ä¹…é“¾æ¥/</code></p>
<h6 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h6><p>é™¤äº†ä¸‹åˆ—å˜é‡å¤–ï¼Œæ‚¨è¿˜å¯ä½¿ç”¨ Front-matter ä¸­çš„æ‰€æœ‰å±æ€§ã€‚</p>
<table>
<thead>
<tr>
<th>å˜é‡</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>:year</td>
<td style="text-align:center">æ–‡ç« çš„å‘è¡¨å¹´ä»½ï¼ˆ4 ä½æ•°ï¼‰</td>
</tr>
<tr>
<td>:month</td>
<td style="text-align:center">æ–‡ç« çš„å‘è¡¨æœˆä»½ï¼ˆ2 ä½æ•°ï¼‰</td>
</tr>
<tr>
<td>:i_month</td>
<td style="text-align:center">æ–‡ç« çš„å‘è¡¨æœˆä»½ï¼ˆå»æ‰å¼€å¤´çš„é›¶ï¼‰</td>
</tr>
<tr>
<td>:day</td>
<td style="text-align:center">æ–‡ç« çš„å‘è¡¨æ—¥æœŸ (2 ä½æ•°)</td>
</tr>
<tr>
<td>:i_day</td>
<td style="text-align:center">æ–‡ç« çš„å‘è¡¨æ—¥æœŸï¼ˆå»æ‰å¼€å¤´çš„é›¶ï¼‰</td>
</tr>
<tr>
<td>:title</td>
<td style="text-align:center">æ–‡ä»¶åç§°</td>
</tr>
<tr>
<td>:id</td>
<td style="text-align:center">æ–‡ç«  ID</td>
</tr>
<tr>
<td>:category</td>
<td style="text-align:center">åˆ†ç±»ã€‚å¦‚æœæ–‡ç« æ²¡æœ‰åˆ†ç±»ï¼Œåˆ™æ˜¯ default_category é…ç½®ä¿¡æ¯ã€‚</td>
</tr>
</tbody>
</table>
<p>ä¹Ÿå¯ä»¥åœ¨ <code>permalink_defaults</code> å‚æ•°ä¸‹è°ƒæ•´æ°¸ä¹…é“¾æ¥ä¸­å„å˜é‡çš„é»˜è®¤å€¼ï¼š<br><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">en</span></span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-ç”Ÿæˆæ–‡ä»¶ä¸éƒ¨ç½²</title>
    <url>/2017/04/%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6%E4%B8%8E%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<h2 id="ç”Ÿæˆæ–‡ä»¶"><a href="#ç”Ÿæˆæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆæ–‡ä»¶"></a>ç”Ÿæˆæ–‡ä»¶</h2><p>ç”Ÿæˆæ–‡ä»¶ä¸€èˆ¬æ˜¯ç”¨äºç”Ÿæˆé™æ€èµ„æºæ–‡ä»¶éƒ¨ç½²æœåŠ¡å™¨ç”¨çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line"></span><br><span class="line">å¿«æ·æ–¹å¼ä¸º:</span><br><span class="line"></span><br><span class="line">$hexo g</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥è®©Hexoåœ¨ç›‘è§†åˆ°æ–‡ä»¶å˜åŠ¨åç«‹å³é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œ<br>åœ¨ç”Ÿæˆæ—¶ä¼šæ¯”å¯¹æ–‡ä»¶çš„ SHA1 checksumï¼Œåªæœ‰å˜åŠ¨çš„æ–‡ä»¶æ‰ä¼šå†™å…¥ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo generate --watch</span><br></pre></td></tr></table></figure></p>
<p>ä¸€èˆ¬ä¼šè·‘ä»¥ä¸‹å‘½ä»¤ï¼Œæ–¹ä¾¿åœ¨Hexoç”Ÿæˆæ–‡ä»¶åç›´æ¥éƒ¨ç½²åˆ°Githubä¸Š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo generate --deploy</span><br><span class="line">$ hexo deploy --generate</span><br><span class="line">(ä¸Šé¢ä¸¤æ¡å‘½ä»¤æ•ˆæœä¸€æ ·)</span><br><span class="line"></span><br><span class="line">æˆ–è€…ç®€å†™</span><br><span class="line"></span><br><span class="line">$ hexo g -d</span><br><span class="line">$ hexo d -g</span><br><span class="line">(ä¸Šé¢ä¸¤æ¡å‘½ä»¤æ•ˆæœä¸€æ ·)</span><br></pre></td></tr></table></figure></p>
<h2 id="éƒ¨ç½²æœåŠ¡å™¨"><a href="#éƒ¨ç½²æœåŠ¡å™¨" class="headerlink" title="éƒ¨ç½²æœåŠ¡å™¨"></a>éƒ¨ç½²æœåŠ¡å™¨</h2><p>åœ¨éƒ¨ç½²ä¹‹å‰å…ˆè¦åœ¨ <code>_config.yml</code> å°†éƒ¨ç½²ä¿¡æ¯è¡¥å……å®Œæ•´ï¼Œæ­¤å¤„ä»¥ Github ä¸ºä¾‹:</p>
<figure class="highlight yml"><figcaption><span>_config.ymlé…ç½®</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span> <span class="comment"># type</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/jsonz1993/jsonz1993.github.io.git</span> <span class="comment"># ä»“åº“åœ°å€</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span> <span class="comment"># åˆ†æ”¯ å¯ä¸å¡«è‡ªåŠ¨è¯†åˆ«</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">"feat(hexo)-ç”Ÿæˆæ–‡ä»¶ä¸éƒ¨ç½²"</span> <span class="comment"># æäº¤çš„ä¿¡æ¯</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>å‚æ•°è¯´æ˜</span></figcaption><table><tr><td class="code"><pre><span class="line">repo	åº“ï¼ˆRepositoryï¼‰åœ°å€</span><br><span class="line">branch	åˆ†æ”¯åç§°ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ GitHub æˆ– GitCafe çš„è¯ï¼Œç¨‹åºä¼šå°è¯•è‡ªåŠ¨æ£€æµ‹ã€‚</span><br><span class="line">message	è‡ªå®šä¹‰æäº¤ä¿¡æ¯ (é»˜è®¤ä¸º Site updated: &#123;&#123; now(&apos;YYYY-MM-DD HH:mm:ss&apos;) &#125;&#125;)</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿æœ¬åœ°å®‰è£…äº† <code>hexo-deployer-git</code>ï¼Œ å¯é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®‰è£…<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></p>
<p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>generate</code> ç”Ÿæˆé™æ€èµ„æºï¼Œå†æ‰‹åŠ¨copyæˆ–ä¸Šä¼ åˆ°æœåŠ¡å™¨.</p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-æœ¬åœ°æœåŠ¡å™¨</title>
    <url>/2017/04/%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<p>ä¸€èˆ¬å®‰è£…hexoæ—¶ä¼šè‡ªåŠ¨å®‰è£…æœåŠ¡å™¨ï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰å®‰è£…hexoæœåŠ¡å™¨å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-server --save</span><br></pre></td></tr></table></figure></p>
<p>å®‰è£…å®Œæˆåï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªï¼ˆé»˜è®¤4000ç«¯å£ï¼‰æœ¬åœ°æœåŠ¡å™¨ï¼Œå¯é€šè¿‡ <code>http://localhost:4000</code> è®¿é—®ï¼ŒHexoä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨è‡ªåŠ¨æ›´æ–°ï¼Œå¦‚æœæ˜¯æ”¹åŠ¨é…ç½®ï¼Œéœ€è¦æ‰‹åŠ¨é‡å¯æœåŠ¡ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><figcaption><span>ç¼©å†™</span></figcaption><table><tr><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‚¨æƒ³è¦æ›´æ”¹ç«¯å£ï¼Œæˆ–æ˜¯åœ¨æ‰§è¡Œæ—¶é‡åˆ°äº† EADDRINUSE é”™è¯¯ï¼Œå¯ä»¥åœ¨æ‰§è¡Œæ—¶ä½¿ç”¨ -p é€‰é¡¹æŒ‡å®šå…¶ä»–ç«¯å£ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo server -p 5000</span><br></pre></td></tr></table></figure></p>
<h4 id="è‡ªå®šä¹‰IP"><a href="#è‡ªå®šä¹‰IP" class="headerlink" title="è‡ªå®šä¹‰IP"></a>è‡ªå®šä¹‰IP</h4><p>æœåŠ¡å™¨é»˜è®¤è¿è¡Œåœ¨ <code>0.0.0.0</code>ï¼Œæ‚¨å¯ä»¥è¦†ç›–é»˜è®¤çš„ IP è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo server -i 192.168.1.1</span><br></pre></td></tr></table></figure></p>
<p>æŒ‡å®šè¿™ä¸ªå‚æ•°åï¼Œæ‚¨å°±åªèƒ½é€šè¿‡è¯¥IPæ‰èƒ½è®¿é—®ç«™ç‚¹ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€å°ä½¿ç”¨æ— çº¿ç½‘ç»œçš„ç¬”è®°æœ¬ç”µè„‘ï¼Œé™¤äº†æŒ‡å‘æœ¬æœºçš„<code>127.0.0.1</code>å¤–ï¼Œé€šå¸¸è¿˜æœ‰ä¸€ä¸ª<code>192.168.*.*</code>çš„å±€åŸŸç½‘IPï¼Œå¦‚æœåƒä¸Šé¢é‚£æ ·ä½¿ç”¨<code>-i</code>å‚æ•°ï¼Œå°±ä¸èƒ½ç”¨<code>127.0.0.1</code>æ¥è®¿é—®ç«™ç‚¹äº†ã€‚å¯¹äºæœ‰å…¬ç½‘IPçš„ä¸»æœºï¼Œå¦‚æœæ‚¨æŒ‡å®šä¸€ä¸ªå±€åŸŸç½‘IPä½œä¸º<code>-i</code>å‚æ•°çš„å€¼ï¼Œé‚£ä¹ˆå°±æ— æ³•é€šè¿‡å…¬ç½‘æ¥è®¿é—®ç«™ç‚¹ã€‚</p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-èµ„æºæ–‡ä»¶å¤¹ä¸æ•°æ®æ–‡ä»¶å¤¹</title>
    <url>/2017/04/%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
    <content><![CDATA[<h2 id="èµ„æºæ–‡ä»¶"><a href="#èµ„æºæ–‡ä»¶" class="headerlink" title="èµ„æºæ–‡ä»¶"></a>èµ„æºæ–‡ä»¶</h2><p>èµ„æºï¼ˆAssetï¼‰ä»£è¡¨ <code>source</code> æ–‡ä»¶å¤¹ä¸­é™¤äº†æ–‡ç« ä»¥å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¾‹å¦‚å›¾ç‰‡ã€CSSã€JS æ–‡ä»¶ç­‰ã€‚æ¯”æ–¹è¯´ï¼Œå¦‚æœä½ çš„Hexoé¡¹ç›®ä¸­åªæœ‰å°‘é‡å›¾ç‰‡ï¼Œé‚£æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å°†å®ƒä»¬æ”¾åœ¨ <code>source/images</code> æ–‡ä»¶å¤¹ä¸­ã€‚ç„¶åé€šè¿‡ç±»ä¼¼äº <code>![](/images/image.jpg)</code> çš„æ–¹æ³•è®¿é—®å®ƒä»¬ã€‚</p>
<h6 id="æ–‡ç« èµ„æºæ–‡ä»¶å¤¹"><a href="#æ–‡ç« èµ„æºæ–‡ä»¶å¤¹" class="headerlink" title="æ–‡ç« èµ„æºæ–‡ä»¶å¤¹"></a>æ–‡ç« èµ„æºæ–‡ä»¶å¤¹</h6><p>å¯ä»¥é€šè¿‡è®¾ç½® <code>_config.yml</code> æ¥ä½¿ç”Ÿæˆçš„æ¯ä¸ªæ–‡ç« éƒ½æœ‰å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶å¤¹ã€‚</p>
<figure class="highlight yml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="æ•°æ®æ–‡ä»¶"><a href="#æ•°æ®æ–‡ä»¶" class="headerlink" title="æ•°æ®æ–‡ä»¶"></a>æ•°æ®æ–‡ä»¶</h2><p>æœ‰æ—¶æ‚¨å¯èƒ½éœ€è¦åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨æŸäº›èµ„æ–™ï¼Œè€Œè¿™äº›èµ„æ–™å¹¶ä¸åœ¨æ–‡ç« å†…ï¼Œå¹¶ä¸”æ˜¯éœ€è¦é‡å¤ä½¿ç”¨çš„ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è€ƒè™‘ä½¿ç”¨ Hexo 3.0 æ–°å¢çš„ã€Œæ•°æ®æ–‡ä»¶ã€åŠŸèƒ½ã€‚æ­¤åŠŸèƒ½ä¼šè½½å…¥ <code>source/_data</code> å†…çš„ <code>YAML</code> æˆ– <code>JSON</code> æ–‡ä»¶ï¼Œå¦‚æ­¤ä¸€æ¥æ‚¨ä¾¿èƒ½åœ¨ç½‘ç«™ä¸­å¤ç”¨è¿™äº›æ–‡ä»¶äº†ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ <code>source/_data</code> æ–‡ä»¶å¤¹ä¸­æ–°å»º <code>menu.yml</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Home: /</span><br><span class="line">Gallery: /gallery/</span><br><span class="line">Archives: /archives/</span><br></pre></td></tr></table></figure>
<p>æ‚¨å°±èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™äº›èµ„æ–™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% for link in site.data.menu %&#125;</span><br><span class="line">  &lt;a href=&quot;&#123;&#123; link &#125;&#125;&quot;&gt;&#123;&#123; loop.key &#125;&#125;&lt;/a&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>tag plugins</title>
    <url>/2017/04/tag-plugins/</url>
    <content><![CDATA[<p>tag plugins ç”¨äºåœ¨æ–‡ç« ä¸­å¿«é€Ÿæ’å…¥ç‰¹å®šå†…å®¹çš„æ’ä»¶,ä¸‹é¢åˆ—å‡ºå¸¸ç”¨å‡ ç§ å…·ä½“å‚è§<a href="https://hexo.io/zh-cn/docs/tag-plugins.html" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/tag-plugins.html</a></p>
<h4 id="å¼•ç”¨å¿«"><a href="#å¼•ç”¨å¿«" class="headerlink" title="å¼•ç”¨å¿«"></a>å¼•ç”¨å¿«</h4><p>åœ¨æ–‡ç« ä¸­æ’å…¥å¼•è¨€ï¼Œå¯åŒ…å«ä½œè€…ã€æ¥æºå’Œæ ‡é¢˜ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote @Jsonz http://weibo.com/u/1638841204 %&#125;</span><br><span class="line">å¼•ç”¨å†…å®¹</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote><p>å¼•ç”¨å†…å®¹</p>
<footer><strong>@Jsonz</strong><cite><a href="http://weibo.com/u/1638841204" target="_blank" rel="noopener">weibo.com/u/1638841204</a></cite></footer></blockquote>
<h4 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h4><p>æ ·å¼å¯ä»¥åœ¨ <code>themes&gt;next&gt;source&gt;css</code>ä¿®æ”¹<br>[language] [title] [url] [link text] code snippet</p>
<figure class="highlight javascript"><figcaption><span>è¿™æ˜¯æ ‡é¢˜</span><a href="https://github.com/jsonz1993" target="_blank" rel="noopener">,Jsonz's Github</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">  [...<span class="string">"123"</span>].forEach(<span class="function"><span class="params">item</span>=&gt;</span> ++item);</span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% iframe url [width] [height] %&#125;</span><br></pre></td></tr></table></figure>
<iframe src="https://hexo.io/zh-cn/docs/tag-plugins.html" width="100%" height="200px" frameborder="0" allowfullscreen></iframe>
<h4 id="image"><a href="#image" class="headerlink" title="image"></a>image</h4><p>æ’å…¥æŒ‡å®šå¤§å°å›¾ç‰‡<br><img src="https://imgsa.baidu.com/baike/c0%3Dbaike60%2C5%2C5%2C60%2C20/sign=e1f5e7b9dcc451dae2fb04b9d7943903/7acb0a46f21fbe099143bcf36a600c338744ad3c.jpg" class="img-class" width="200" title="æ–°å£ç»“è¡£"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] [title text [alt text]] %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hello Hexo</title>
    <url>/2017/04/hello-hexo/</url>
    <content><![CDATA[<p>æŠ˜è…¾äº†ä¸€æ™šä¸Šç»ˆäºæŠŠæ­å¥½è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜çš„Hexoåšå®¢ã€‚<br>æ¥ä¸‹æ¥ä¸€æ­¥ä¸€æ­¥é…ç½® Hexo <code>__config.yml</code> æ–‡ä»¶<br><a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">Hexo å®˜ç½‘é…ç½®é¡¹ </a></p>
<p>ä¸€æ­¥ä¸€æ­¥è·Ÿç€æ”¹é…ç½®ï¼Œæ¯”è¾ƒéº»çƒ¦çš„æ˜¯æ¯æ¬¡ä¿®æ”¹é…ç½®éƒ½è¦<code>hexo s</code> é‡å¯ä¸€ä¸‹æœåŠ¡å™¨çœ‹æ•ˆæœ<br>å¦‚æœä¿®æ”¹é…ç½®åé‡å¯æœåŠ¡çœ‹ä¸åˆ°æ•ˆæœï¼Œå¯ä»¥å…ˆè¿è¡Œ<code>hexo clean</code>æ¸…é™¤ç¼“å­˜å†é‡å¯æœåŠ¡</p>
<h6 id="Site-ç½‘ç«™"><a href="#Site-ç½‘ç«™" class="headerlink" title="Site ç½‘ç«™"></a>Site ç½‘ç«™</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">jsonz1993</span> <span class="comment"># ç½‘ç«™æ ‡é¢˜ï¼Œä¹Ÿä¼šæ˜¾ç¤ºåœ¨è¯¥ä¸»é¢˜å¯¼èˆªå·¦ä¸Šè§’</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="comment"># ç½‘ç«™å‰¯æ ‡é¢˜ ä¼šç”Ÿæˆåœ¨å¯¼èˆªæ ä¸»æ ‡é¢˜æ—è¾¹ï¼ˆè¿™é‡Œéšè—äº†ï¼‰</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">å‰ç«¯å¼€å‘</span> <span class="string">Jsonz</span> <span class="string">å¼ æ¬£æ¬£</span> <span class="comment"># ç½‘ç«™æè¿°ï¼Œä¼šå‡ºç°åœ¨headï¼Œä¾§è¾¹èœå•ä¸Š ä¸»è¦ç”¨åšSEO</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Jsonz</span> <span class="comment"># åšå®¢ä½œè€… Your Name</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-Hans</span> <span class="comment"># è¯­è¨€ï¼Œæ”¯æŒçš„è¯­è¨€å¯ä»¥åœ¨themes&gt;your-thems&gt;languages æ‰¾åˆ°</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="comment"># é»˜è®¤ä½¿ç”¨ç”µè„‘çš„æ—¶åŒºï¼Œä¸€èˆ¬ä¸å¡«</span></span><br></pre></td></tr></table></figure>
<h6 id="URL-ç½‘å€"><a href="#URL-ç½‘å€" class="headerlink" title="URL ç½‘å€"></a>URL ç½‘å€</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://jsonz1993.github.io/</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="comment"># æ–‡ç« æ°¸ä¹…é“¾æ¥çš„æ ¼å¼ [https://hexo.io/zh-cn/docs/permalinks.html]</span></span><br><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨çš„å˜é‡æœ‰[:year, :month, :day, :title, :id, :category, Front-matteræ‰€æœ‰å±æ€§]</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span> </span><br><span class="line"><span class="attr">permalink_defaults:</span> <span class="comment"># å¯ä»¥ç»™å˜é‡æŒ‡å®šé»˜è®¤å€¼</span></span><br></pre></td></tr></table></figure>
<h6 id="Directory-ç›®å½•"><a href="#Directory-ç›®å½•" class="headerlink" title="Directory ç›®å½•"></a>Directory ç›®å½•</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æ–‡ä»¶ç›®å½•, è¿™éƒ¨åˆ†ä¸€èˆ¬ç”¨é»˜è®¤çš„å°±å¯ä»¥</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br></pre></td></tr></table></figure>
<h6 id="Writing-æ–‡ç« ç›¸å…³é…ç½®"><a href="#Writing-æ–‡ç« ç›¸å…³é…ç½®" class="headerlink" title="Writing æ–‡ç« ç›¸å…³é…ç½®"></a>Writing æ–‡ç« ç›¸å…³é…ç½®</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–°æ–‡ç« çš„åç§° æˆ‘å–œæ¬¢é…åˆå¹´æœˆæŒ‰æ–‡ä»¶å¤¹åˆ†ç±»ï¼Œè¿™æ ·åé¢æ–¹ä¾¿ç®¡ç†</span></span><br><span class="line"><span class="comment"># æ­¤æ—¶ç”Ÿæˆçš„æ–‡ä»¶ä½äº: source/_posts/:year/:month/:title.md</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:year/:month/:title.md</span> </span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span> <span class="comment">#å‘½ä»¤è¡Œ hexo new &lt;layout&gt; name ä¸­ layouté»˜è®¤å€¼</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># æ ‡é¢˜è½¬æ¢ä¸ºé¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦åœ¨æ–°æ ‡ç­¾æ‰“å¼€è¿æ¥</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span> <span class="comment"># æ–‡ä»¶åå¤§å°å†™è½¬æ¢ (0)ä¸è½¬æ¢ï¼ˆ1)å°å†™ (2)å¤§å†™</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span> <span class="comment"># æ˜¾ç¤ºè‰ç¨¿</span></span><br><span class="line"><span class="comment"># å¯åŠ¨èµ„æºæ–‡ä»¶å¤¹ çœ‹ä¸ªäººå¯ç”¨å¯ä¸ç”¨</span></span><br><span class="line"><span class="comment"># ä¸»è¦æ¯æ¬¡åˆ›å»ºæ–‡ä»¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾å›¾ç‰‡ç­‰èµ„æº</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span> <span class="comment"># æŠŠé“¾æ¥æ”¹ä¸ºä¸æ ¹ç›®å½•çš„ç›¸å¯¹ä½å€</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span> <span class="comment"># æ˜¾ç¤ºä¸‹ä¸€æ¡æ–‡ç« </span></span><br><span class="line"><span class="attr">highlight:</span> <span class="comment"># ä»£ç å—è®¾ç½® æ—¢ç°åœ¨çœ‹åˆ°çš„è¿™å—</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br></pre></td></tr></table></figure>
<h6 id="Category-amp-Tag-åˆ†ç±»-amp-æ ‡ç­¾"><a href="#Category-amp-Tag-åˆ†ç±»-amp-æ ‡ç­¾" class="headerlink" title="Category &amp; Tag åˆ†ç±»&amp;æ ‡ç­¾"></a>Category &amp; Tag åˆ†ç±»&amp;æ ‡ç­¾</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span> <span class="comment"># é»˜è®¤çš„åˆ†ç±»</span></span><br><span class="line"><span class="attr">category_map:</span> <span class="comment"># åˆ†ç±»æ˜ å°„ï¼ˆåˆ«åï¼‰</span></span><br><span class="line"><span class="attr">tag_map:</span> <span class="comment"># æ ‡ç­¾æ˜ å°„ï¼ˆåˆ«åï¼‰</span></span><br></pre></td></tr></table></figure>
<h6 id="Date-Time-format-æ—¥æœŸ-amp-æ—¶é—´æ ¼å¼"><a href="#Date-Time-format-æ—¥æœŸ-amp-æ—¶é—´æ ¼å¼" class="headerlink" title="Date / Time format æ—¥æœŸ&amp;æ—¶é—´æ ¼å¼"></a>Date / Time format æ—¥æœŸ&amp;æ—¶é—´æ ¼å¼</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span></span><br></pre></td></tr></table></figure>
<h6 id="Pagination-åˆ†é¡µè®¾ç½®"><a href="#Pagination-åˆ†é¡µè®¾ç½®" class="headerlink" title="Pagination åˆ†é¡µè®¾ç½®"></a>Pagination åˆ†é¡µè®¾ç½®</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–‡ç« æ•°é‡æœ‰é™ï¼Œæœªå®è·µè¿‡è¯¥åŠŸèƒ½</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span> <span class="comment"># æ¯é¡µæ–‡ç« æ•°é‡ 0 ä¸ºå…³é—­åˆ†é¡µ</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span> <span class="comment"># åˆ†é¡µçš„ç›®å½•</span></span><br></pre></td></tr></table></figure>
<h6 id="Extensions-å…¶ä»–æ‹“å±•è®¾ç½®"><a href="#Extensions-å…¶ä»–æ‹“å±•è®¾ç½®" class="headerlink" title="Extensions å…¶ä»–æ‹“å±•è®¾ç½®"></a>Extensions å…¶ä»–æ‹“å±•è®¾ç½®</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ­¤å¤„æœ‰æ’ä»¶ä¸ä¸»é¢˜è®¾ç½®</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span> <span class="comment">#è®¾ç½®çš„ä¸»é¢˜åº”å­˜æ”¾åœ¨ æ ¹ç›®å½•/themesä¸‹</span></span><br></pre></td></tr></table></figure>
<h6 id="å°†è‰ç¨¿è½¬ä¸ºæ–‡ç« "><a href="#å°†è‰ç¨¿è½¬ä¸ºæ–‡ç« " class="headerlink" title="å°†è‰ç¨¿è½¬ä¸ºæ–‡ç« "></a>å°†è‰ç¨¿è½¬ä¸ºæ–‡ç« </h6><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">hexo publish [layout] <span class="symbol">&lt;filename&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
